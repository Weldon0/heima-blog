import{_ as n}from"./plugin-vue_export-helper.21dcd24c.js";import{e as s}from"./app.9e07841f.js";const a={},t=s(`<h2 id="\u672C\u5730\u8D2D\u7269\u8F66" tabindex="-1"><a class="header-anchor" href="#\u672C\u5730\u8D2D\u7269\u8F66" aria-hidden="true">#</a> \u672C\u5730\u8D2D\u7269\u8F66</h2><h3 id="_01-\u8D2D\u7269\u8F66\u5206\u6790" tabindex="-1"><a class="header-anchor" href="#_01-\u8D2D\u7269\u8F66\u5206\u6790" aria-hidden="true">#</a> 01-\u8D2D\u7269\u8F66\u5206\u6790</h3><p><img src="https://wuxiaohui-1254415986.cos.ap-nanjing.myqcloud.com/uPic/image-20220324183534428.png" alt="image-20220324183534428" loading="lazy"></p><p>\u603B\u7ED3\uFF1A</p><ul><li>\u8D2D\u7269\u8F66\u7684\u5404\u79CD\u64CD\u4F5C\u90FD\u4F1A\u6709\u4E24\u79CD\u72B6\u6001\u7684\u533A\u5206\uFF0C\u4F46\u662F\u4E0D\u4F1A\u5728\u7EC4\u4EF6\u4E2D\u53BB\u533A\u5206\u3002</li><li>\u800C\u662F\u5728\u5C01\u88C5\u5728vuex\u4E2D\u7684actions\u4E2D\u53BB\u533A\u5206\uFF0C\u5728\u7EC4\u4EF6\u4E0A\u53EA\u9700\u8C03\u7528actions\u5373\u53EF\u3002</li><li>\u5728actions\u4E2D\u901A\u8FC7user\u4FE1\u606F\u53BB\u533A\u5206\u767B\u5F55\u72B6\u6001 <ul><li>\u672A\u767B\u5F55\uFF0C\u901A\u8FC7mutations\u4FEE\u6539vuex\u4E2D\u7684\u6570\u636E\u5373\u53EF\uFF0Cvuex\u5DF2\u7ECF\u5B9E\u73B0\u6301\u4E45\u5316\uFF0C\u4F1A\u540C\u6B65\u4FDD\u6301\u5728\u672C\u5730\u3002</li><li>\u5DF2\u767B\u5F55\uFF0C\u901A\u8FC7api\u63A5\u53E3\u53BB\u670D\u52A1\u7AEF\u64CD\u4F5C\uFF0C\u54CD\u5E94\u6210\u529F\u540E\u901A\u8FC7mutations\u4FEE\u6539vuex\u4E2D\u7684\u6570\u636E\u5373\u53EF\uFF0C\u5B83\u4E5F\u4F1A\u540C\u6B65\u5728\u672C\u5730\u3002</li></ul></li><li>actions\u51FD\u6570\u9700\u8981\u6539\u6210 async \u51FD\u6570\uFF0C\u8FD4\u56DE\u7684\u662Fpromise\u5BF9\u8C61\uFF0C\u624D\u53EF\u4EE5\u5728\u7EC4\u4EF6\u5224\u65AD\u662F\u5426\u64CD\u4F5C\u6210\u529F</li></ul><p><strong>\u6CE8\u610F\uFF1A</strong></p><ul><li>\u767B\u5F55\u540E\uFF0C\u9700\u8981\u5408\u5E76\u672C\u5730\u8D2D\u7269\u8F66\u5230\u670D\u52A1\u7AEF\u3002</li><li>\u9000\u51FA\u540E\uFF0C\u6E05\u7A7Avuex\u6570\u636E\u4E5F\u4F1A\u540C\u6B65\u6E05\u7A7A\u672C\u5730\u6570\u636E\u3002</li></ul><h3 id="_02-\u52A0\u5165\u8D2D\u7269\u8F66" tabindex="-1"><a class="header-anchor" href="#_02-\u52A0\u5165\u8D2D\u7269\u8F66" aria-hidden="true">#</a> 02-\u52A0\u5165\u8D2D\u7269\u8F66</h3><blockquote><p>\u76EE\u7684\uFF1A\u5B8C\u6210\u5546\u54C1\u8BE6\u60C5\u7684\u6DFB\u52A0\u8D2D\u7269\u8F66\u64CD\u4F5C\uFF0C\u652F\u6301\u672A\u767B\u5F55\u72B6\u6001\u3002</p></blockquote><p>\u5927\u81F4\u6B65\u9AA4\uFF1A</p><ul><li>\u7EA6\u5B9A\u672C\u5730\u5B58\u50A8\u7684\u4FE1\u606F\u5185\u5BB9</li><li>\u7F16\u5199mutaions\u6DFB\u52A0\u8D2D\u7269\u8F66\u903B\u8F91</li><li>\u7F16\u5199actions\u8FDB\u884C\u6DFB\u52A0\u64CD\u4F5C</li><li>\u5728\u5546\u54C1\u8BE6\u60C5\u9875\u5B9E\u73B0\u6DFB\u52A0\u903B\u8F91</li></ul><p>\u843D\u5730\u4EE3\u7801\uFF1A</p><ul><li>vuex\u4E2D\u7684\u4FEE\u6539\u6570\u636E\uFF0C\u83B7\u53D6\u6570\u636E <code>src/store/modules/cart.js</code></li></ul><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>  <span class="token comment">// \u672C\u5730\uFF1Aid skuId name picture price nowPrice count attrsText selected stock isEffective</span>
  <span class="token comment">// \u7EBF\u4E0A\uFF1A\u6BD4\u4E0A\u9762\u591A isCollect \u6709\u7528 discount \u65E0\u7528 \u4E24\u9879\u9879\u4FE1\u606F</span>
  <span class="token literal-property property">mutations</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token function">insertCart</span> <span class="token punctuation">(</span><span class="token parameter">state<span class="token punctuation">,</span> goods</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">const</span> sameIndex <span class="token operator">=</span> state<span class="token punctuation">.</span>list<span class="token punctuation">.</span><span class="token function">findIndex</span><span class="token punctuation">(</span><span class="token parameter">item</span> <span class="token operator">=&gt;</span> item<span class="token punctuation">.</span>skuId <span class="token operator">===</span> goods<span class="token punctuation">.</span>skuId<span class="token punctuation">)</span>
      <span class="token comment">// \u903B\u8F91\uFF1A\u6709\u76F8\u540C\u7684\u7ED9goods\u7D2F\u52A0\u6570\u91CF\uFF0C\u5220\u9664\u76F8\u540CskuId\u7684\u5546\u54C1</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>sameIndex <span class="token operator">&gt;=</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        goods<span class="token punctuation">.</span>count <span class="token operator">=</span> state<span class="token punctuation">.</span>list<span class="token punctuation">[</span>sameIndex<span class="token punctuation">]</span><span class="token punctuation">.</span>count <span class="token operator">+</span> goods<span class="token punctuation">.</span>count
        state<span class="token punctuation">.</span>list<span class="token punctuation">.</span><span class="token function">splice</span><span class="token punctuation">(</span>sameIndex<span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span>
      <span class="token punctuation">}</span>
      state<span class="token punctuation">.</span>list<span class="token punctuation">.</span><span class="token function">unshift</span><span class="token punctuation">(</span>goods<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token literal-property property">actions</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token keyword">async</span> <span class="token function">insertCart</span> <span class="token punctuation">(</span><span class="token parameter">ctx<span class="token punctuation">,</span> goods</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>ctx<span class="token punctuation">.</span>rootState<span class="token punctuation">.</span>user<span class="token punctuation">.</span>profile<span class="token punctuation">.</span>token<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// \u5DF2\u767B\u5F55 TODO</span>

      <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
        <span class="token comment">// \u672A\u767B\u5F55</span>
        ctx<span class="token punctuation">.</span><span class="token function">commit</span><span class="token punctuation">(</span><span class="token string">&#39;insertCart&#39;</span><span class="token punctuation">,</span> goods<span class="token punctuation">)</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>\u5546\u54C1\u8BE6\u60C5\u70B9\u51FB\u52A0\u5165\u8D2D\u7269\u8F66 <code>src/views/goods/index.vue</code></li></ul><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>    <span class="token comment">// sku\u6539\u53D8\u65F6\u5019\u89E6\u53D1</span>
    <span class="token keyword">const</span> <span class="token function-variable function">changeSku</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">sku</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>sku<span class="token punctuation">.</span>skuId<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        goods<span class="token punctuation">.</span>value<span class="token punctuation">.</span>price <span class="token operator">=</span> sku<span class="token punctuation">.</span>price
        goods<span class="token punctuation">.</span>value<span class="token punctuation">.</span>oldPrice <span class="token operator">=</span> sku<span class="token punctuation">.</span>oldPrice
        goods<span class="token punctuation">.</span>value<span class="token punctuation">.</span>inventory <span class="token operator">=</span> sku<span class="token punctuation">.</span>inventory
        count<span class="token punctuation">.</span>value <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
        currSku<span class="token punctuation">.</span>value <span class="token operator">=</span> sku
      <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
        currSku<span class="token punctuation">.</span>value <span class="token operator">=</span> <span class="token keyword">null</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
    <span class="token comment">// \u9009\u62E9\u7684\u6570\u91CF</span>
    <span class="token keyword">const</span> count <span class="token operator">=</span> <span class="token function">ref</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span>
    <span class="token comment">// \u52A0\u5165\u8D2D\u7269\u8F66\u903B\u8F91</span>
   <span class="token keyword">const</span> currSku <span class="token operator">=</span> <span class="token function">ref</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">)</span>
   <span class="token keyword">const</span> store <span class="token operator">=</span> <span class="token function">useStore</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
   <span class="token keyword">const</span> <span class="token function-variable function">insertCart</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
     <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>currSku<span class="token punctuation">.</span>value<span class="token punctuation">)</span> <span class="token punctuation">{</span>
       <span class="token keyword">return</span> <span class="token function">Message</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token literal-property property">text</span><span class="token operator">:</span><span class="token string">&#39;\u8BF7\u9009\u62E9\u5546\u54C1\u89C4\u683C&#39;</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
     <span class="token punctuation">}</span>
     <span class="token keyword">if</span> <span class="token punctuation">(</span>count<span class="token punctuation">.</span>value <span class="token operator">&gt;</span> goods<span class="token punctuation">.</span>inventory<span class="token punctuation">)</span> <span class="token punctuation">{</span>
       <span class="token keyword">return</span> <span class="token function">Message</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token literal-property property">text</span><span class="token operator">:</span><span class="token string">&#39;\u5E93\u5B58\u4E0D\u8DB3&#39;</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
     <span class="token punctuation">}</span>
     store<span class="token punctuation">.</span><span class="token function">dispatch</span><span class="token punctuation">(</span><span class="token string">&#39;cart/insertCart&#39;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
       <span class="token literal-property property">id</span><span class="token operator">:</span> goods<span class="token punctuation">.</span>value<span class="token punctuation">.</span>id<span class="token punctuation">,</span>
       <span class="token literal-property property">skuId</span><span class="token operator">:</span> currSku<span class="token punctuation">.</span>value<span class="token punctuation">.</span>skuId<span class="token punctuation">,</span>
       <span class="token literal-property property">name</span><span class="token operator">:</span> goods<span class="token punctuation">.</span>value<span class="token punctuation">.</span>name<span class="token punctuation">,</span>
       <span class="token literal-property property">picture</span><span class="token operator">:</span> goods<span class="token punctuation">.</span>value<span class="token punctuation">.</span>mainPictures<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
       <span class="token literal-property property">price</span><span class="token operator">:</span> currSku<span class="token punctuation">.</span>value<span class="token punctuation">.</span>price<span class="token punctuation">,</span>
       <span class="token literal-property property">nowPrice</span><span class="token operator">:</span> currSku<span class="token punctuation">.</span>value<span class="token punctuation">.</span>price<span class="token punctuation">,</span>
       <span class="token literal-property property">count</span><span class="token operator">:</span> count<span class="token punctuation">.</span>value<span class="token punctuation">,</span>
       <span class="token literal-property property">attrsText</span><span class="token operator">:</span> currSku<span class="token punctuation">.</span>value<span class="token punctuation">.</span>specsText<span class="token punctuation">,</span>
       <span class="token literal-property property">selected</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
       <span class="token literal-property property">isEffective</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
       <span class="token literal-property property">stock</span><span class="token operator">:</span> currSku<span class="token punctuation">.</span>value<span class="token punctuation">.</span>inventory
     <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
       <span class="token function">Message</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token literal-property property">text</span><span class="token operator">:</span><span class="token string">&#39;\u52A0\u5165\u8D2D\u7269\u8F66\u6210\u529F&#39;</span><span class="token punctuation">,</span> <span class="token literal-property property">type</span><span class="token operator">:</span><span class="token string">&#39;success&#39;</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
     <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">catch</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        <span class="token function">Message</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token literal-property property">type</span><span class="token operator">:</span> <span class="token string">&quot;error&quot;</span><span class="token punctuation">,</span> <span class="token literal-property property">text</span><span class="token operator">:</span> <span class="token string">&quot;\u52A0\u5165\u8D2D\u7269\u8F66\u5931\u8D25&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
     <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
   <span class="token punctuation">}</span>
   <span class="token keyword">return</span> <span class="token punctuation">{</span> goods<span class="token punctuation">,</span> changeSku<span class="token punctuation">,</span> count<span class="token punctuation">,</span> insertCart <span class="token punctuation">}</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_03-\u5934\u90E8\u8D2D\u7269\u8F66-\u57FA\u7840\u5E03\u5C40" tabindex="-1"><a class="header-anchor" href="#_03-\u5934\u90E8\u8D2D\u7269\u8F66-\u57FA\u7840\u5E03\u5C40" aria-hidden="true">#</a> 03-\u5934\u90E8\u8D2D\u7269\u8F66-\u57FA\u7840\u5E03\u5C40</h3><blockquote><p>\u76EE\u7684\uFF1A\u5728\u7F51\u7AD9\u5934\u90E8\u8D2D\u7269\u8F66\u56FE\u7247\u5904\uFF0C\u9F20\u6807\u7ECF\u8FC7\u5C55\u793A\u8D2D\u7269\u8F66\u5217\u8868\u3002</p></blockquote><p><img src="https://wuxiaohui-1254415986.cos.ap-nanjing.myqcloud.com/uPic/image-20220324190837632.png" alt="image-20220324190837632" loading="lazy"></p><p>\u5927\u81F4\u6B65\u9AA4\uFF1A</p><ul><li>\u63D0\u53D6\u5934\u90E8\u8D2D\u7269\u8F66\u7EC4\u4EF6\uFF0C\u5B8C\u6210\u57FA\u7840\u5E03\u5C40\u3002</li><li>\u901A\u8FC7getters\u8FD4\u56DE\uFF0C\u6709\u6548\u5546\u54C1\u603B\u6570\uFF0C\u548C\u6709\u6548\u5546\u54C1\u5217\u8868\uFF0C\u6709\u6548\u5546\u54C1\u603B\u91D1\u989D\u3002</li><li>\u6E32\u67D3\u7EC4\u4EF6\u3002</li></ul><p>\u843D\u7684\u4EE3\u7801\uFF1A</p><ul><li>\u65B0\u5EFA\u7EC4\u4EF6 <code>src/components/app-header-cart.vue</code></li></ul><div class="language-vue ext-vue line-numbers-mode"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>cart<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>curr<span class="token punctuation">&quot;</span></span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>#<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>i</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>iconfont icon-cart<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>i</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>em</span><span class="token punctuation">&gt;</span></span>2<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>em</span><span class="token punctuation">&gt;</span></span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">&#39;AppHeaderCart&#39;</span>
<span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>style</span> <span class="token attr-name">scoped</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>less<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token style"><span class="token language-css">
<span class="token selector">.cart</span> <span class="token punctuation">{</span>
  <span class="token property">width</span><span class="token punctuation">:</span> 50px<span class="token punctuation">;</span>
  <span class="token selector">.curr</span> <span class="token punctuation">{</span>
    <span class="token property">height</span><span class="token punctuation">:</span> 32px<span class="token punctuation">;</span>
    <span class="token property">line-height</span><span class="token punctuation">:</span> 32px<span class="token punctuation">;</span>
    <span class="token property">text-align</span><span class="token punctuation">:</span> center<span class="token punctuation">;</span>
    <span class="token property">position</span><span class="token punctuation">:</span> relative<span class="token punctuation">;</span>
    <span class="token property">display</span><span class="token punctuation">:</span> block<span class="token punctuation">;</span>
    <span class="token selector">.icon-cart</span> <span class="token punctuation">{</span>
      <span class="token property">font-size</span><span class="token punctuation">:</span> 22px<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token selector">em</span> <span class="token punctuation">{</span>
      <span class="token property">font-style</span><span class="token punctuation">:</span> normal<span class="token punctuation">;</span>
      <span class="token property">position</span><span class="token punctuation">:</span> absolute<span class="token punctuation">;</span>
      <span class="token property">right</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>
      <span class="token property">top</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>
      <span class="token property">padding</span><span class="token punctuation">:</span> 1px 6px<span class="token punctuation">;</span>
      <span class="token property">line-height</span><span class="token punctuation">:</span> 1<span class="token punctuation">;</span>
      <span class="token property">background</span><span class="token punctuation">:</span> <span class="token function">var</span><span class="token punctuation">(</span>--help-color<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token property">color</span><span class="token punctuation">:</span> #fff<span class="token punctuation">;</span>
      <span class="token property">font-size</span><span class="token punctuation">:</span> 12px<span class="token punctuation">;</span>
      <span class="token property">border-radius</span><span class="token punctuation">:</span> 10px<span class="token punctuation">;</span>
      <span class="token property">font-family</span><span class="token punctuation">:</span> Arial<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>style</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>\u4F7F\u7528\u7EC4\u4EF6\uFF0C\u548C<strong>\u5220\u9664\u8FC1\u79FB\u8FC7\u7684\u4EE3\u7801</strong> <code>src/components/app-header.vue</code></li></ul><div class="language-diff ext-diff line-numbers-mode"><pre class="language-diff"><code><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line">     &lt;div class=&quot;search&quot;&gt;
</span><span class="token prefix unchanged"> </span><span class="token line">       &lt;i class=&quot;iconfont icon-search&quot;&gt;&lt;/i&gt;
</span><span class="token prefix unchanged"> </span><span class="token line">       &lt;input type=&quot;text&quot; placeholder=&quot;\u641C\u4E00\u641C&quot;&gt;
</span><span class="token prefix unchanged"> </span><span class="token line">     &lt;/div&gt;
</span></span><span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line">      &lt;AppHeaderCart /&gt;
</span></span><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line">   &lt;/div&gt;
</span><span class="token prefix unchanged"> </span><span class="token line"> &lt;/header&gt;
</span></span><span class="token deleted-arrow deleted"><span class="token prefix deleted">&lt;</span><span class="token line">/template&gt;
</span></span>
<span class="token deleted-arrow deleted"><span class="token prefix deleted">&lt;</span><span class="token line">script&gt;
</span></span>import AppHeaderNav from &#39;./app-header-nav&#39;
<span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line">import AppHeaderCart from &#39;./app-header-cart&#39;
</span></span>export default {
<span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line"> name: &#39;AppHeader&#39;,
</span></span><span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line">  components: { AppHeaderNav, AppHeaderCart }
</span></span>}
<span class="token deleted-arrow deleted"><span class="token prefix deleted">&lt;</span><span class="token line">/script&gt;
</span></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>\u57FA\u7840\u5E03\u5C40\u548C\u5F39\u51FA\u6548\u679C <code>src/components/app-header-cart.vue</code></li></ul><div class="language-vue ext-vue line-numbers-mode"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>cart<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>curr<span class="token punctuation">&quot;</span></span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>javascript:;<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>i</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>iconfont icon-cart<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>i</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>em</span><span class="token punctuation">&gt;</span></span>2<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>em</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>layer<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>list<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>item<span class="token punctuation">&quot;</span></span> <span class="token attr-name">v-for</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>i in 4<span class="token punctuation">&quot;</span></span> <span class="token attr-name">:key</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>i<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>RouterLink</span> <span class="token attr-name">to</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span><span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>img</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>https://yanxuan-item.nosdn.127.net/ead73130f3dbdb3cabe1c7b0f4fd3d28.png<span class="token punctuation">&quot;</span></span> <span class="token attr-name">alt</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span><span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>center<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
              <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>name ellipsis-2<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>\u548C\u624B\u8DB3\u5E72\u88C2\u8BF4\u62DC\u62DC ingrams\u624B\u8DB3\u76B2\u88C2\u4FEE\u590D\u971C<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span>
              <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>attr ellipsis<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>\u989C\u8272\uFF1A\u4FEE\u590D\u7EFF\u74F6 \u5BB9\u91CF\uFF1A150ml<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>right<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
              <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>price<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token entity named-entity" title="\xA5">&amp;yen;</span>45.00<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span>
              <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>count<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>x2<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>RouterLink</span><span class="token punctuation">&gt;</span></span>
          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>i</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>iconfont icon-close-new<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>i</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>foot<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>total<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">&gt;</span></span>\u5171 3 \u4EF6\u5546\u54C1<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span>
          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">&gt;</span></span><span class="token entity named-entity" title="\xA5">&amp;yen;</span>135.00<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>XtxButton</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>plain<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>\u53BB\u8D2D\u7269\u8F66\u7ED3\u7B97<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>XtxButton</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">&#39;AppHeaderCart&#39;</span>
<span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>style</span> <span class="token attr-name">scoped</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>less<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token style"><span class="token language-css">
<span class="token selector">.cart</span> <span class="token punctuation">{</span>
  <span class="token property">width</span><span class="token punctuation">:</span> 50px<span class="token punctuation">;</span>
  <span class="token property">position</span><span class="token punctuation">:</span> relative<span class="token punctuation">;</span>
  <span class="token property">z-index</span><span class="token punctuation">:</span> 600<span class="token punctuation">;</span>
  <span class="token selector">.curr</span> <span class="token punctuation">{</span>
    <span class="token property">height</span><span class="token punctuation">:</span> 32px<span class="token punctuation">;</span>
    <span class="token property">line-height</span><span class="token punctuation">:</span> 32px<span class="token punctuation">;</span>
    <span class="token property">text-align</span><span class="token punctuation">:</span> center<span class="token punctuation">;</span>
    <span class="token property">position</span><span class="token punctuation">:</span> relative<span class="token punctuation">;</span>
    <span class="token property">display</span><span class="token punctuation">:</span> block<span class="token punctuation">;</span>
    <span class="token selector">.icon-cart</span> <span class="token punctuation">{</span>
      <span class="token property">font-size</span><span class="token punctuation">:</span> 22px<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token selector">em</span> <span class="token punctuation">{</span>
      <span class="token property">font-style</span><span class="token punctuation">:</span> normal<span class="token punctuation">;</span>
      <span class="token property">position</span><span class="token punctuation">:</span> absolute<span class="token punctuation">;</span>
      <span class="token property">right</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>
      <span class="token property">top</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>
      <span class="token property">padding</span><span class="token punctuation">:</span> 1px 6px<span class="token punctuation">;</span>
      <span class="token property">line-height</span><span class="token punctuation">:</span> 1<span class="token punctuation">;</span>
      <span class="token property">background</span><span class="token punctuation">:</span> <span class="token function">var</span><span class="token punctuation">(</span>--help-color<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token property">color</span><span class="token punctuation">:</span> #fff<span class="token punctuation">;</span>
      <span class="token property">font-size</span><span class="token punctuation">:</span> 12px<span class="token punctuation">;</span>
      <span class="token property">border-radius</span><span class="token punctuation">:</span> 10px<span class="token punctuation">;</span>
      <span class="token property">font-family</span><span class="token punctuation">:</span> Arial<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
  <span class="token selector">&amp;:hover</span> <span class="token punctuation">{</span>
    <span class="token selector">.layer</span> <span class="token punctuation">{</span>
      <span class="token property">opacity</span><span class="token punctuation">:</span> 1<span class="token punctuation">;</span>
      <span class="token property">transform</span><span class="token punctuation">:</span> none
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
  <span class="token selector">.layer</span> <span class="token punctuation">{</span>
    <span class="token property">opacity</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>
    <span class="token property">transition</span><span class="token punctuation">:</span> all .4s .2s<span class="token punctuation">;</span>
    <span class="token property">transform</span><span class="token punctuation">:</span> <span class="token function">translateY</span><span class="token punctuation">(</span>-200px<span class="token punctuation">)</span> <span class="token function">scale</span><span class="token punctuation">(</span>1<span class="token punctuation">,</span> 0<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token property">width</span><span class="token punctuation">:</span> 400px<span class="token punctuation">;</span>
    <span class="token property">height</span><span class="token punctuation">:</span> 400px<span class="token punctuation">;</span>
    <span class="token property">position</span><span class="token punctuation">:</span> absolute<span class="token punctuation">;</span>
    <span class="token property">top</span><span class="token punctuation">:</span> 50px<span class="token punctuation">;</span>
    <span class="token property">right</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>
    <span class="token property">box-shadow</span><span class="token punctuation">:</span> 0 0 10px <span class="token function">rgba</span><span class="token punctuation">(</span>0<span class="token punctuation">,</span>0<span class="token punctuation">,</span>0<span class="token punctuation">,</span>0.2<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token property">background</span><span class="token punctuation">:</span> #fff<span class="token punctuation">;</span>
    <span class="token property">border-radius</span><span class="token punctuation">:</span> 4px<span class="token punctuation">;</span>
    <span class="token property">padding-top</span><span class="token punctuation">:</span> 10px<span class="token punctuation">;</span>
    <span class="token selector">&amp;::before</span> <span class="token punctuation">{</span>
      <span class="token property">content</span><span class="token punctuation">:</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">;</span>
      <span class="token property">position</span><span class="token punctuation">:</span> absolute<span class="token punctuation">;</span>
      <span class="token property">right</span><span class="token punctuation">:</span> 14px<span class="token punctuation">;</span>
      <span class="token property">top</span><span class="token punctuation">:</span> -10px<span class="token punctuation">;</span>
      <span class="token property">width</span><span class="token punctuation">:</span> 20px<span class="token punctuation">;</span>
      <span class="token property">height</span><span class="token punctuation">:</span> 20px<span class="token punctuation">;</span>
      <span class="token property">background</span><span class="token punctuation">:</span> #fff<span class="token punctuation">;</span>
      <span class="token property">transform</span><span class="token punctuation">:</span> <span class="token function">scale</span><span class="token punctuation">(</span>0.6<span class="token punctuation">,</span>1<span class="token punctuation">)</span> <span class="token function">rotate</span><span class="token punctuation">(</span>45deg<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token property">box-shadow</span><span class="token punctuation">:</span> -3px -3px 5px <span class="token function">rgba</span><span class="token punctuation">(</span>0<span class="token punctuation">,</span>0<span class="token punctuation">,</span>0<span class="token punctuation">,</span>0.1<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token selector">.foot</span> <span class="token punctuation">{</span>
      <span class="token property">position</span><span class="token punctuation">:</span> absolute<span class="token punctuation">;</span>
      <span class="token property">left</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>
      <span class="token property">bottom</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>
      <span class="token property">height</span><span class="token punctuation">:</span> 70px<span class="token punctuation">;</span>
      <span class="token property">width</span><span class="token punctuation">:</span> 100%<span class="token punctuation">;</span>
      <span class="token property">padding</span><span class="token punctuation">:</span> 10px<span class="token punctuation">;</span>
      <span class="token property">display</span><span class="token punctuation">:</span> flex<span class="token punctuation">;</span>
      <span class="token property">justify-content</span><span class="token punctuation">:</span> space-between<span class="token punctuation">;</span>
      <span class="token property">background</span><span class="token punctuation">:</span> #f8f8f8<span class="token punctuation">;</span>
      <span class="token property">align-items</span><span class="token punctuation">:</span> center<span class="token punctuation">;</span>
      <span class="token selector">.total</span> <span class="token punctuation">{</span>
        <span class="token property">padding-left</span><span class="token punctuation">:</span> 10px<span class="token punctuation">;</span>
        <span class="token property">color</span><span class="token punctuation">:</span> #999<span class="token punctuation">;</span>
        <span class="token selector">p</span> <span class="token punctuation">{</span>
          <span class="token selector">&amp;:last-child</span> <span class="token punctuation">{</span>
            <span class="token property">font-size</span><span class="token punctuation">:</span> 18px<span class="token punctuation">;</span>
            <span class="token property">color</span><span class="token punctuation">:</span> <span class="token function">var</span><span class="token punctuation">(</span>--price-color<span class="token punctuation">)</span><span class="token punctuation">;</span>
          <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
  <span class="token selector">.list</span> <span class="token punctuation">{</span>
    <span class="token property">height</span><span class="token punctuation">:</span> 310px<span class="token punctuation">;</span>
    <span class="token property">overflow</span><span class="token punctuation">:</span> auto<span class="token punctuation">;</span>
    <span class="token property">padding</span><span class="token punctuation">:</span> 0 10px<span class="token punctuation">;</span>
    <span class="token selector">&amp;::-webkit-scrollbar</span><span class="token punctuation">{</span>
      <span class="token property">width</span><span class="token punctuation">:</span>10px<span class="token punctuation">;</span>
      <span class="token property">height</span><span class="token punctuation">:</span>10px<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token selector">&amp;::-webkit-scrollbar-track</span><span class="token punctuation">{</span>
      <span class="token property">background</span><span class="token punctuation">:</span> #f8f8f8<span class="token punctuation">;</span>
      <span class="token property">border-radius</span><span class="token punctuation">:</span> 2px<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token selector">&amp;::-webkit-scrollbar-thumb</span><span class="token punctuation">{</span>
      <span class="token property">background</span><span class="token punctuation">:</span> #eee<span class="token punctuation">;</span>
      <span class="token property">border-radius</span><span class="token punctuation">:</span>10px<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token selector">&amp;::-webkit-scrollbar-thumb:hover</span><span class="token punctuation">{</span>
      <span class="token property">background</span><span class="token punctuation">:</span> #ccc<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token selector">.item</span> <span class="token punctuation">{</span>
      <span class="token property">border-bottom</span><span class="token punctuation">:</span> 1px solid #f5f5f5<span class="token punctuation">;</span>
      <span class="token property">padding</span><span class="token punctuation">:</span> 10px 0<span class="token punctuation">;</span>
      <span class="token property">position</span><span class="token punctuation">:</span> relative<span class="token punctuation">;</span>
      <span class="token selector">i</span> <span class="token punctuation">{</span>
          <span class="token property">position</span><span class="token punctuation">:</span> absolute<span class="token punctuation">;</span>
          <span class="token property">bottom</span><span class="token punctuation">:</span> 38px<span class="token punctuation">;</span>
          <span class="token property">right</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>
          <span class="token property">opacity</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>
          <span class="token property">color</span><span class="token punctuation">:</span> #666<span class="token punctuation">;</span>
          <span class="token property">transition</span><span class="token punctuation">:</span> all .5s<span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
      <span class="token selector">&amp;:hover</span> <span class="token punctuation">{</span>
        <span class="token selector">i</span> <span class="token punctuation">{</span>
          <span class="token property">opacity</span><span class="token punctuation">:</span> 1<span class="token punctuation">;</span>
          <span class="token property">cursor</span><span class="token punctuation">:</span> pointer<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span>
      <span class="token selector">a</span> <span class="token punctuation">{</span>
        <span class="token property">display</span><span class="token punctuation">:</span> flex<span class="token punctuation">;</span>
        <span class="token property">align-items</span><span class="token punctuation">:</span> center<span class="token punctuation">;</span>
        <span class="token selector">img</span> <span class="token punctuation">{</span>
          <span class="token property">height</span><span class="token punctuation">:</span> 80px<span class="token punctuation">;</span>
          <span class="token property">width</span><span class="token punctuation">:</span> 80px<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token selector">.center</span> <span class="token punctuation">{</span>
          <span class="token property">padding</span><span class="token punctuation">:</span> 0 10px<span class="token punctuation">;</span>
          <span class="token property">width</span><span class="token punctuation">:</span> 200px<span class="token punctuation">;</span>
          <span class="token selector">.name</span> <span class="token punctuation">{</span>
            <span class="token property">font-size</span><span class="token punctuation">:</span> 16px<span class="token punctuation">;</span>
          <span class="token punctuation">}</span>
          <span class="token selector">.attr</span> <span class="token punctuation">{</span>
            <span class="token property">color</span><span class="token punctuation">:</span> #999<span class="token punctuation">;</span>
            <span class="token property">padding-top</span><span class="token punctuation">:</span> 5px<span class="token punctuation">;</span>
          <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
        <span class="token selector">.right</span> <span class="token punctuation">{</span>
          <span class="token property">width</span><span class="token punctuation">:</span> 100px<span class="token punctuation">;</span>
          <span class="token property">padding-right</span><span class="token punctuation">:</span> 20px<span class="token punctuation">;</span>
          <span class="token property">text-align</span><span class="token punctuation">:</span> center<span class="token punctuation">;</span>
          <span class="token selector">.price</span> <span class="token punctuation">{</span>
            <span class="token property">font-size</span><span class="token punctuation">:</span> 16px<span class="token punctuation">;</span>
            <span class="token property">color</span><span class="token punctuation">:</span> <span class="token function">var</span><span class="token punctuation">(</span>--price-color<span class="token punctuation">)</span><span class="token punctuation">;</span>
          <span class="token punctuation">}</span>
          <span class="token selector">.count</span> <span class="token punctuation">{</span>
            <span class="token property">color</span><span class="token punctuation">:</span> #999<span class="token punctuation">;</span>
            <span class="token property">margin-top</span><span class="token punctuation">:</span> 5px<span class="token punctuation">;</span>
            <span class="token property">font-size</span><span class="token punctuation">:</span> 16px<span class="token punctuation">;</span>
          <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>style</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>\u4F7F\u7528getters\u5F97\u5230\u6709\u6548\u5546\u54C1\u5217\u8868\u548C\u671F\u79CD\u4EF6\u6570</li></ul><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>  <span class="token literal-property property">getters</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token comment">// \u6709\u6548\u5546\u54C1\u5217\u8868</span>
    <span class="token function">validList</span> <span class="token punctuation">(</span><span class="token parameter">state</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span> state<span class="token punctuation">.</span>list<span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span><span class="token parameter">item</span> <span class="token operator">=&gt;</span> item<span class="token punctuation">.</span>stock <span class="token operator">&gt;</span> <span class="token number">0</span> <span class="token operator">&amp;&amp;</span> item<span class="token punctuation">.</span>isEffective<span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token comment">// \u6709\u6548\u5546\u54C1\u4EF6\u6570</span>
    <span class="token function">validTotal</span> <span class="token punctuation">(</span><span class="token parameter">state<span class="token punctuation">,</span> getters</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span> getters<span class="token punctuation">.</span>validList<span class="token punctuation">.</span><span class="token function">reduce</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">p<span class="token punctuation">,</span> c</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> p <span class="token operator">+</span> c<span class="token punctuation">.</span>count<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token comment">// \u6709\u6548\u5546\u54C1\u603B\u91D1\u989D</span>
    <span class="token function">validAmount</span> <span class="token punctuation">(</span><span class="token parameter">state<span class="token punctuation">,</span> getters</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span> getters<span class="token punctuation">.</span>validList<span class="token punctuation">.</span><span class="token function">reduce</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">p<span class="token punctuation">,</span> c</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> p <span class="token operator">+</span> c<span class="token punctuation">.</span>nowPrice <span class="token operator">*</span> <span class="token number">100</span> <span class="token operator">*</span> c<span class="token punctuation">.</span>count<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token operator">/</span> <span class="token number">100</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>\u6E32\u67D3\u5934\u90E8\u8D2D\u7269\u8F66\u4FE1\u606F</li></ul><div class="language-vue ext-vue line-numbers-mode"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>cart<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>curr<span class="token punctuation">&quot;</span></span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>javascript:;<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>i</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>iconfont icon-cart<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>i</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>em</span><span class="token punctuation">&gt;</span></span>{{$store.getters[&#39;cart/validTotal&#39;]}}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>em</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>layer<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>list<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>item<span class="token punctuation">&quot;</span></span> <span class="token attr-name">v-for</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>item in $store.getters[<span class="token punctuation">&#39;</span>cart/validList<span class="token punctuation">&#39;</span>]<span class="token punctuation">&quot;</span></span> <span class="token attr-name">:key</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>item.skuId<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>RouterLink</span> <span class="token attr-name">to</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span><span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>img</span> <span class="token attr-name">:src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>item.picture<span class="token punctuation">&quot;</span></span> <span class="token attr-name">alt</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span><span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>center<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
              <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>name ellipsis-2<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>{{item.name}}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span>
              <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>attr ellipsis<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>{{item.attrsText}}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>right<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
              <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>price<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token entity named-entity" title="\xA5">&amp;yen;</span>{{item.nowPrice}}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span>
              <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>count<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>x{{item.count}}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>RouterLink</span><span class="token punctuation">&gt;</span></span>
          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>i</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>iconfont icon-close-new<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>i</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>foot<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>total<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">&gt;</span></span>\u5171 {{$store.getters[&#39;cart/validTotal&#39;]}} \u4EF6\u5546\u54C1<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span>
          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">&gt;</span></span><span class="token entity named-entity" title="\xA5">&amp;yen;</span>{{$store.getters[&#39;cart/validAmount&#39;]}}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>XtxButton</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>plain<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>\u53BB\u8D2D\u7269\u8F66\u7ED3\u7B97<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>XtxButton</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_04-\u5934\u90E8\u8D2D\u7269\u8F66-\u5546\u54C1\u5217\u8868" tabindex="-1"><a class="header-anchor" href="#_04-\u5934\u90E8\u8D2D\u7269\u8F66-\u5546\u54C1\u5217\u8868" aria-hidden="true">#</a> 04-\u5934\u90E8\u8D2D\u7269\u8F66-\u5546\u54C1\u5217\u8868</h3><blockquote><p>\u76EE\u7684\uFF1A\u6839\u636E\u672C\u5730\u5B58\u50A8\u7684\u5546\u54C1\u83B7\u53D6\u6700\u65B0\u7684\u5E93\u5B58\u4EF7\u683C\u548C\u6709\u6548\u72B6\u6001\u3002</p></blockquote><p>\u5927\u81F4\u6B65\u9AA4\uFF1A</p><ul><li>\u5B9A\u4E49\u83B7\u53D6\u6700\u65B0\u4FE1\u606F\u7684API</li><li>\u5B9A\u4E49\u4FEE\u6539\u8D2D\u7269\u8F66\u5546\u54C1\u4FE1\u606F\u7684mutations</li><li>\u5B9A\u4E49\u83B7\u53D6\u8D2D\u7269\u8F66\u5217\u8868\u4FE1\u606F\u7684actions</li><li>\u5728\u5934\u90E8\u8D2D\u7269\u8F66\u7EC4\u4EF6\u521D\u59CB\u5316\u7684\u65F6\u5019\u66F4\u65B0\u5217\u8868\u4FE1\u606F</li></ul><p>\u843D\u7684\u4EE3\u7801\uFF1A</p><ul><li>\u5B9A\u4E49\u83B7\u53D6\u6700\u65B0\u4FE1\u606F\u7684API <code>src/api/cart.js</code></li></ul><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">import</span> request <span class="token keyword">from</span> <span class="token string">&#39;@/utils/request&#39;</span>

<span class="token doc-comment comment">/**
 * \u83B7\u53D6\u65B0\u7684\u5546\u54C1\u4FE1\u606F
 * <span class="token keyword">@param</span> <span class="token class-name"><span class="token punctuation">{</span>String<span class="token punctuation">}</span></span> <span class="token parameter">skuId</span> - \u5546\u54C1SKUID
 * <span class="token keyword">@returns</span> Promise
 */</span>
<span class="token keyword">export</span> <span class="token keyword">const</span> <span class="token function-variable function">getNewCartGoods</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">skuId</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token function">request</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">\`</span><span class="token string">/goods/stock/</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">\${</span>skuId<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">\`</span></span><span class="token punctuation">,</span> <span class="token string">&#39;get&#39;</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>\u5B9A\u4E49\u4FEE\u6539\u8D2D\u7269\u8F66\u5546\u54C1\u4FE1\u606F\u7684mutations <code>src/store/module/cart.js</code></li></ul><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>     <span class="token comment">// \u4FEE\u6539\u8D2D\u7269\u8F66\u5546\u54C1</span>
    <span class="token function">updateCart</span> <span class="token punctuation">(</span><span class="token parameter">state<span class="token punctuation">,</span> goods</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token comment">// goods\u4E2D\u5B57\u6BB5\u6709\u53EF\u80FD\u4E0D\u5B8C\u6574\uFF0Cgoods\u6709\u7684\u4FE1\u606F\u624D\u53BB\u4FEE\u6539\u3002</span>
      <span class="token comment">// 1. goods\u4E2D\u5FC5\u9700\u53C8skuId\uFF0C\u624D\u80FD\u627E\u5230\u5BF9\u5E94\u7684\u5546\u54C1\u4FE1\u606F</span>
      <span class="token keyword">const</span> updateGoods <span class="token operator">=</span> state<span class="token punctuation">.</span>list<span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span><span class="token parameter">item</span> <span class="token operator">=&gt;</span> item<span class="token punctuation">.</span>skuId <span class="token operator">===</span> goods<span class="token punctuation">.</span>skuId<span class="token punctuation">)</span>
      <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">const</span> key <span class="token keyword">in</span> goods<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>goods<span class="token punctuation">[</span>key<span class="token punctuation">]</span> <span class="token operator">!==</span> <span class="token keyword">null</span> <span class="token operator">&amp;&amp;</span> goods<span class="token punctuation">[</span>key<span class="token punctuation">]</span> <span class="token operator">!==</span> <span class="token keyword">undefined</span> <span class="token operator">&amp;&amp;</span> goods<span class="token punctuation">[</span>key<span class="token punctuation">]</span> <span class="token operator">!==</span> <span class="token string">&#39;&#39;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
          updateGoods<span class="token punctuation">[</span>key<span class="token punctuation">]</span> <span class="token operator">=</span> goods<span class="token punctuation">[</span>key<span class="token punctuation">]</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>\u5B9A\u4E49\u83B7\u53D6\u8D2D\u7269\u8F66\u5217\u8868\u4FE1\u606F\u7684actions <code>src/store/module/cart.js</code></li></ul><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>    <span class="token comment">// \u83B7\u53D6\u8D2D\u7269\u8F66\u5217\u8868</span>
    <span class="token keyword">async</span> <span class="token function">findCartList</span> <span class="token punctuation">(</span><span class="token parameter">ctx</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>ctx<span class="token punctuation">.</span>rootState<span class="token punctuation">.</span>user<span class="token punctuation">.</span>profile<span class="token punctuation">.</span>token<span class="token punctuation">)</span> <span class="token punctuation">{</span>
          <span class="token comment">// \u767B\u5F55 TODO</span>
        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
          <span class="token comment">// \u672C\u5730</span>
          <span class="token comment">// Promise.all() \u53EF\u4EE5\u5E76\u5217\u53D1\u9001\u591A\u4E2A\u8BF7\u6C42\uFF0C\u7B49\u6240\u6709\u8BF7\u6C42\u6210\u529F</span>
          <span class="token keyword">const</span> promiseArr <span class="token operator">=</span> ctx<span class="token punctuation">.</span>state<span class="token punctuation">.</span>list<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token parameter">item</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
            <span class="token comment">// \u8FD4\u56DE\u63A5\u53E3\u51FD\u6570\u7684\u8C03\u7528</span>
            <span class="token keyword">return</span> <span class="token function">getNewCartGoods</span><span class="token punctuation">(</span>item<span class="token punctuation">.</span>skuId<span class="token punctuation">)</span>
          <span class="token punctuation">}</span><span class="token punctuation">)</span>
          <span class="token keyword">const</span> results <span class="token operator">=</span> <span class="token keyword">await</span> Promise<span class="token punctuation">.</span><span class="token function">all</span><span class="token punctuation">(</span>promiseArr<span class="token punctuation">)</span><span class="token punctuation">;</span>
          results<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">item<span class="token punctuation">,</span> i</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
            <span class="token comment">// list promiseArr results \u4E09\u8005\u987A\u4E00\u6837</span>
            ctx<span class="token punctuation">.</span><span class="token function">commit</span><span class="token punctuation">(</span><span class="token string">&quot;updateCart&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
              <span class="token literal-property property">skuId</span><span class="token operator">:</span> ctx<span class="token punctuation">.</span>state<span class="token punctuation">.</span>list<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>skuId<span class="token punctuation">,</span>
              <span class="token operator">...</span>item<span class="token punctuation">.</span>result<span class="token punctuation">,</span>
            <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
          <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>\u518D\u5934\u90E8\u8D2D\u7269\u8F66\u7EC4\u4EF6\u521D\u59CB\u5316\u7684\u65F6\u5019\u66F4\u65B0\u5217\u8868\u4FE1\u606F <code>src/components/app-header-cart.vue</code></li></ul><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>  <span class="token function">setup</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> store <span class="token operator">=</span> <span class="token function">useStore</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    store<span class="token punctuation">.</span><span class="token function">dispatch</span><span class="token punctuation">(</span><span class="token string">&#39;cart/findCartList&#39;</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_05-\u5934\u90E8\u8D2D\u7269\u8F66-\u5220\u9664\u64CD\u4F5C" tabindex="-1"><a class="header-anchor" href="#_05-\u5934\u90E8\u8D2D\u7269\u8F66-\u5220\u9664\u64CD\u4F5C" aria-hidden="true">#</a> 05-\u5934\u90E8\u8D2D\u7269\u8F66-\u5220\u9664\u64CD\u4F5C</h3><blockquote><p>\u76EE\u7684\uFF1A\u5B8C\u6210\u5934\u90E8\u8D2D\u7269\u8F66\u5220\u9664\u64CD\u4F5C\uFF0C\u652F\u6301\u672A\u767B\u5F55\u72B6\u6001\u3002</p></blockquote><p>\u5927\u81F4\u6B65\u9AA4\uFF1A</p><ul><li>\u7F16\u5199mutaions\u5220\u9664\u8D2D\u7269\u8F66\u5546\u54C1\u903B\u8F91</li><li>\u7F16\u5199actions\u8FDB\u884C\u5220\u9664\u64CD\u4F5C</li><li>\u5728\u5934\u90E8\u8D2D\u7269\u8F66\u8FDB\u884C\u5220\u9664\u903B\u8F91</li></ul><p>\u843D\u7684\u4EE3\u7801\uFF1A</p><ul><li>vuex\u7684mutations\u548Cactions\u4EE3\u7801 <code>src/store/module/cart.js</code></li></ul><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>  <span class="token literal-property property">mutations</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token comment">// ... \u7701\u7565</span>
    <span class="token comment">// \u5220\u9664\u8D2D\u7269\u8F66\u5546\u54C1</span>
    <span class="token function">deleteCart</span> <span class="token punctuation">(</span><span class="token parameter">state<span class="token punctuation">,</span> skuId</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">const</span> index <span class="token operator">=</span> state<span class="token punctuation">.</span>list<span class="token punctuation">.</span><span class="token function">findIndex</span><span class="token punctuation">(</span><span class="token parameter">item</span> <span class="token operator">=&gt;</span> item<span class="token punctuation">.</span>skuId <span class="token operator">===</span> skuId<span class="token punctuation">)</span>
      state<span class="token punctuation">.</span>list<span class="token punctuation">.</span><span class="token function">splice</span><span class="token punctuation">(</span>index<span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>  <span class="token literal-property property">actions</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token comment">// ... \u7701\u7565</span>
    <span class="token comment">// \u5220\u9664\u8D2D\u7269\u8F66\u5546\u54C1</span>
    <span class="token keyword">async</span> <span class="token function">deleteCart</span> <span class="token punctuation">(</span><span class="token parameter">ctx<span class="token punctuation">,</span> skuId</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>ctx<span class="token punctuation">.</span>rootState<span class="token punctuation">.</span>user<span class="token punctuation">.</span>profile<span class="token punctuation">.</span>token<span class="token punctuation">)</span> <span class="token punctuation">{</span>
          <span class="token comment">// \u767B\u5F55 TODO</span>
        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
          <span class="token comment">// \u672C\u5730</span>
          ctx<span class="token punctuation">.</span><span class="token function">commit</span><span class="token punctuation">(</span><span class="token string">&#39;deleteCart&#39;</span><span class="token punctuation">,</span> skuId<span class="token punctuation">)</span>
          <span class="token function">resolve</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>\u5934\u90E8\u7EC4\u4EF6\u5B9E\u73B0\u5220\u9664\u903B\u8F91 <code>src/components/app-header-cart.vue</code></li></ul><div class="language-diff ext-diff line-numbers-mode"><pre class="language-diff"><code><span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line"> \u7ED1\u5B9A\u70B9\u51FB\u4E8B\u4EF6\u4F20\u5165skuId
</span><span class="token prefix inserted">+</span><span class="token line">&lt;i @click=&quot;deleteCart(item.skuId)&quot; class=&quot;iconfont icon-close-new&quot;&gt;&lt;/i&gt;
</span></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">import</span> Message <span class="token keyword">from</span> <span class="token string">&quot;erabbit-ui/packages/components/Message&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> useStore <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;vuex&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">&quot;AppHeaderCart&quot;</span><span class="token punctuation">,</span>
  <span class="token function">setup</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> store <span class="token operator">=</span> <span class="token function">useStore</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">const</span> <span class="token function-variable function">deleteCart</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">skuId</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      store
        <span class="token punctuation">.</span><span class="token function">dispatch</span><span class="token punctuation">(</span><span class="token string">&quot;cart/deleteCart&quot;</span><span class="token punctuation">,</span> skuId<span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
          <span class="token function">Message</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token literal-property property">type</span><span class="token operator">:</span> <span class="token string">&quot;success&quot;</span><span class="token punctuation">,</span> <span class="token literal-property property">text</span><span class="token operator">:</span> <span class="token string">&quot;\u5220\u9664\u6210\u529F&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">catch</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
          <span class="token function">Message</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token literal-property property">type</span><span class="token operator">:</span> <span class="token string">&quot;error&quot;</span><span class="token punctuation">,</span> <span class="token literal-property property">text</span><span class="token operator">:</span> <span class="token string">&quot;\u5220\u9664\u5931\u8D25&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token punctuation">{</span> deleteCart <span class="token punctuation">}</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>\u8D2D\u7269\u8F66\u4E0D\u5F39\u51FA\u7684\u6761\u4EF6</li></ul><div class="language-diff ext-diff line-numbers-mode"><pre class="language-diff"><code><span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line"> \u8D2D\u7269\u8F66\u65E0\u5546\u54C1\u4E0D\u663E\u793A\u5F39\u51FA\u5C42,\u5E76\u4E14\u4E0D\u662F\u5728\u8D2D\u7269\u8F66\u9875\u9762
</span><span class="token prefix inserted">+</span><span class="token line">&lt;div class=&quot;layer&quot; v-if=&quot;$store.getters[&#39;cart/validTotal&#39;]&amp;&amp;$route.path!==&#39;/cart&#39;&quot;&gt;
</span></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_06-\u8D2D\u7269\u8F66\u9875\u9762-\u57FA\u7840\u5E03\u5C40" tabindex="-1"><a class="header-anchor" href="#_06-\u8D2D\u7269\u8F66\u9875\u9762-\u57FA\u7840\u5E03\u5C40" aria-hidden="true">#</a> 06-\u8D2D\u7269\u8F66\u9875\u9762-\u57FA\u7840\u5E03\u5C40</h3><blockquote><p>\u76EE\u7684\uFF1A\u5B8C\u6210\u8D2D\u7269\u8F66\u7EC4\u4EF6\u57FA\u7840\u5E03\u5C40\u548C\u8DEF\u7531\u914D\u7F6E\u4E0E\u8DF3\u8F6C\u94FE\u63A5\u3002</p></blockquote><p><img src="https://wuxiaohui-1254415986.cos.ap-nanjing.myqcloud.com/uPic/image-20220324190958593.png" alt="image-20220324190958593" loading="lazy"></p><p>\u5927\u81F4\u6B65\u9AA4\uFF1A</p><ul><li>\u5B8C\u6210\u5934\u90E8\u7EC4\u4EF6\uFF0C\u8D2D\u7269\u8F66\u56FE\u6807\uFF0C\u8D2D\u7269\u8F66\u7ED3\u7B97\u6309\u94AE\uFF0C\u70B9\u51FB\u8DF3\u8F6C\u8D2D\u7269\u8F66\u8DEF\u7531\u3002\u5546\u54C1\u70B9\u51FB\u8DF3\u8F6C\u8BE6\u60C5\u7684\u64CD\u4F5C\u3002</li><li>\u914D\u7F6E\u8D2D\u7269\u8F66\u8DEF\u7531\u548C\u7EC4\u4EF6\uFF0C\u5B8C\u6210\u57FA\u7840\u5E03\u5C40\u3002</li></ul><p>\u843D\u7684\u4EE3\u7801\uFF1A</p><ul><li>\u8DF3\u8F6C\u529F\u80FD <code>src/components/app-header-cart.vue</code></li></ul><div class="language-vue ext-vue line-numbers-mode"><pre class="language-vue"><code>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>RouterLink</span> <span class="token attr-name">to</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>/cart<span class="token punctuation">&quot;</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>curr<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>i</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>iconfont icon-cart<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>i</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>em</span><span class="token punctuation">&gt;</span></span>{{$store.getters[&#39;cart/validTotal&#39;]}}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>em</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>RouterLink</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-diff ext-diff line-numbers-mode"><pre class="language-diff"><code><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line">       &lt;div class=&quot;item&quot; v-for=&quot;item in $store.getters[&#39;cart/validList&#39;]&quot; :key=&quot;item.skuId&quot;&gt;
</span></span><span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line">          &lt;RouterLink :to=&quot;\`/product/\${item.id}\`&quot;&gt;
</span></span><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line">           &lt;img :src=&quot;item.picture&quot; alt=&quot;&quot;&gt;
</span></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-vue ext-vue line-numbers-mode"><pre class="language-vue"><code>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>XtxButton</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>plain<span class="token punctuation">&quot;</span></span> <span class="token attr-name">@click</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>$router.push(<span class="token punctuation">&#39;</span>/cart<span class="token punctuation">&#39;</span>)<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>\u53BB\u8D2D\u7269\u8F66\u7ED3\u7B97<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>XtxButton</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><ul><li>\u7EC4\u4EF6\u4E0E\u8DEF\u7531 <code>src/views/cart/index.vue</code></li></ul><div class="language-vue ext-vue line-numbers-mode"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>xtx-cart-page<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>container<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>XtxBread</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>XtxBreadItem</span> <span class="token attr-name">to</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>/<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>\u9996\u9875<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>XtxBreadItem</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>XtxBreadItem</span><span class="token punctuation">&gt;</span></span>\u8D2D\u7269\u8F66<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>XtxBreadItem</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>XtxBread</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>cart<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>table</span><span class="token punctuation">&gt;</span></span>
          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>thead</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>tr</span><span class="token punctuation">&gt;</span></span>
              <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>th</span> <span class="token attr-name">width</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>120<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>XtxCheckbox</span><span class="token punctuation">&gt;</span></span>\u5168\u9009<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>XtxCheckbox</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>th</span><span class="token punctuation">&gt;</span></span>
              <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>th</span> <span class="token attr-name">width</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>400<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>\u5546\u54C1\u4FE1\u606F<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>th</span><span class="token punctuation">&gt;</span></span>
              <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>th</span> <span class="token attr-name">width</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>220<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>\u5355\u4EF7<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>th</span><span class="token punctuation">&gt;</span></span>
              <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>th</span> <span class="token attr-name">width</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>180<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>\u6570\u91CF<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>th</span><span class="token punctuation">&gt;</span></span>
              <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>th</span> <span class="token attr-name">width</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>180<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>\u5C0F\u8BA1<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>th</span><span class="token punctuation">&gt;</span></span>
              <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>th</span> <span class="token attr-name">width</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>140<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>\u64CD\u4F5C<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>th</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>tr</span><span class="token punctuation">&gt;</span></span>
          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>thead</span><span class="token punctuation">&gt;</span></span>
          <span class="token comment">&lt;!-- \u6709\u6548\u5546\u54C1 --&gt;</span>
          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>tbody</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>tr</span> <span class="token attr-name">v-for</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>i in 3<span class="token punctuation">&quot;</span></span> <span class="token attr-name">:key</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>i<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
              <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>td</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>XtxCheckbox</span> <span class="token punctuation">/&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>td</span><span class="token punctuation">&gt;</span></span>
              <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>td</span><span class="token punctuation">&gt;</span></span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>goods<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
                  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>RouterLink</span> <span class="token attr-name">to</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>/<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>img</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>https://yanxuan-item.nosdn.127.net/13ab302f8f2c954d873f03be36f8fb03.png<span class="token punctuation">&quot;</span></span> <span class="token attr-name">alt</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span><span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>RouterLink</span><span class="token punctuation">&gt;</span></span>
                  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span>
                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>name ellipsis<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>\u548C\u624B\u8DB3\u5E72\u88C2\u8BF4\u62DC\u62DC ingrams\u624B\u8DB3\u76B2\u88C2\u4FEE\u590D\u971C<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span>
                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>attr<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>\u989C\u8272\uFF1A\u9ED1\u8272<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span>
                  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
              <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>td</span><span class="token punctuation">&gt;</span></span>
              <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>td</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>tc<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">&gt;</span></span><span class="token entity named-entity" title="\xA5">&amp;yen;</span>200.00<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">&gt;</span></span>\u6BD4\u52A0\u5165\u65F6\u964D\u4EF7 <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>red<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token entity named-entity" title="\xA5">&amp;yen;</span>20.00<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span>
              <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>td</span><span class="token punctuation">&gt;</span></span>
              <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>td</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>tc<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>XtxNumbox</span> <span class="token punctuation">/&gt;</span></span>
              <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>td</span><span class="token punctuation">&gt;</span></span>
              <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>td</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>tc<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>f16 red<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token entity named-entity" title="\xA5">&amp;yen;</span>200.00<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>td</span><span class="token punctuation">&gt;</span></span>
              <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>td</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>tc<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>javascript:;<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>\u79FB\u5165\u6536\u85CF\u5939<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>green<span class="token punctuation">&quot;</span></span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>javascript:;<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>\u5220\u9664<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>javascript:;<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>\u627E\u76F8\u4F3C<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span>
              <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>td</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>tr</span><span class="token punctuation">&gt;</span></span>
          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>tbody</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>table</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
      <span class="token comment">&lt;!-- \u64CD\u4F5C\u680F --&gt;</span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>action<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>batch<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>XtxCheckbox</span><span class="token punctuation">&gt;</span></span>\u5168\u9009<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>XtxCheckbox</span><span class="token punctuation">&gt;</span></span>
          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>javascript:;<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>\u5220\u9664\u5546\u54C1<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>total<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
          \u5171 7 \u4EF6\u5546\u54C1\uFF0C\u5DF2\u9009\u62E9 2 \u4EF6\uFF0C\u5546\u54C1\u5408\u8BA1\uFF1A
          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>red<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>\xA5400<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">&gt;</span></span>
          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>XtxButton</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>primary<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>\u4E0B\u5355\u7ED3\u7B97<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>XtxButton</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">&#39;XtxCartPage&#39;</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>style</span> <span class="token attr-name">scoped</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>less<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token style"><span class="token language-css">
<span class="token selector">.tc</span> <span class="token punctuation">{</span>
  <span class="token property">text-align</span><span class="token punctuation">:</span> center<span class="token punctuation">;</span>
  <span class="token selector">.xtx-numbox</span> <span class="token punctuation">{</span>
    <span class="token property">margin</span><span class="token punctuation">:</span> 0 auto<span class="token punctuation">;</span>
    <span class="token property">width</span><span class="token punctuation">:</span> 120px<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token selector">.red</span> <span class="token punctuation">{</span>
  <span class="token property">color</span><span class="token punctuation">:</span> <span class="token function">var</span><span class="token punctuation">(</span>--price-color<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token selector">.green</span> <span class="token punctuation">{</span>
  <span class="token property">color</span><span class="token punctuation">:</span> <span class="token function">var</span><span class="token punctuation">(</span>--xtx-color<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token selector">.f16</span> <span class="token punctuation">{</span>
  <span class="token property">font-size</span><span class="token punctuation">:</span> 16px<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token selector">.goods</span> <span class="token punctuation">{</span>
  <span class="token property">display</span><span class="token punctuation">:</span> flex<span class="token punctuation">;</span>
  <span class="token property">align-items</span><span class="token punctuation">:</span> center<span class="token punctuation">;</span>
  <span class="token selector">img</span> <span class="token punctuation">{</span>
    <span class="token property">width</span><span class="token punctuation">:</span> 100px<span class="token punctuation">;</span>
    <span class="token property">height</span><span class="token punctuation">:</span> 100px<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token selector">&gt; div</span> <span class="token punctuation">{</span>
    <span class="token property">width</span><span class="token punctuation">:</span> 280px<span class="token punctuation">;</span>
    <span class="token property">font-size</span><span class="token punctuation">:</span> 16px<span class="token punctuation">;</span>
    <span class="token property">padding-left</span><span class="token punctuation">:</span> 10px<span class="token punctuation">;</span>
    <span class="token selector">.attr</span> <span class="token punctuation">{</span>
      <span class="token property">font-size</span><span class="token punctuation">:</span> 14px<span class="token punctuation">;</span>
      <span class="token property">color</span><span class="token punctuation">:</span> #999<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token selector">.action</span> <span class="token punctuation">{</span>
  <span class="token property">display</span><span class="token punctuation">:</span> flex<span class="token punctuation">;</span>
  <span class="token property">background</span><span class="token punctuation">:</span> #fff<span class="token punctuation">;</span>
  <span class="token property">margin-top</span><span class="token punctuation">:</span> 20px<span class="token punctuation">;</span>
  <span class="token property">height</span><span class="token punctuation">:</span> 80px<span class="token punctuation">;</span>
  <span class="token property">align-items</span><span class="token punctuation">:</span> center<span class="token punctuation">;</span>
  <span class="token property">font-size</span><span class="token punctuation">:</span> 16px<span class="token punctuation">;</span>
  <span class="token property">justify-content</span><span class="token punctuation">:</span> space-between<span class="token punctuation">;</span>
  <span class="token property">padding</span><span class="token punctuation">:</span> 0 30px<span class="token punctuation">;</span>
  <span class="token selector">.xtx-checkbox</span> <span class="token punctuation">{</span>
    <span class="token property">color</span><span class="token punctuation">:</span> #999<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token selector">.batch</span> <span class="token punctuation">{</span>
    <span class="token selector">a</span> <span class="token punctuation">{</span>
      <span class="token property">margin-left</span><span class="token punctuation">:</span> 20px<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
  <span class="token selector">.red</span> <span class="token punctuation">{</span>
    <span class="token property">font-size</span><span class="token punctuation">:</span> 18px<span class="token punctuation">;</span>
    <span class="token property">margin-right</span><span class="token punctuation">:</span> 20px<span class="token punctuation">;</span>
    <span class="token property">font-weight</span><span class="token punctuation">:</span> bold<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token selector">.tit</span> <span class="token punctuation">{</span>
  <span class="token property">color</span><span class="token punctuation">:</span> #666<span class="token punctuation">;</span>
  <span class="token property">font-size</span><span class="token punctuation">:</span> 16px<span class="token punctuation">;</span>
  <span class="token property">font-weight</span><span class="token punctuation">:</span> normal<span class="token punctuation">;</span>
  <span class="token property">line-height</span><span class="token punctuation">:</span> 50px<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token selector">.xtx-cart-page</span> <span class="token punctuation">{</span>
  <span class="token selector">.cart</span> <span class="token punctuation">{</span>
    <span class="token property">background</span><span class="token punctuation">:</span> #fff<span class="token punctuation">;</span>
    <span class="token property">color</span><span class="token punctuation">:</span> #666<span class="token punctuation">;</span>
    <span class="token selector">table</span> <span class="token punctuation">{</span>
      <span class="token property">border-spacing</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>
      <span class="token property">border-collapse</span><span class="token punctuation">:</span> collapse<span class="token punctuation">;</span>
      <span class="token property">line-height</span><span class="token punctuation">:</span> 24px<span class="token punctuation">;</span>
      <span class="token selector">th,td</span><span class="token punctuation">{</span>
        <span class="token property">padding</span><span class="token punctuation">:</span> 10px<span class="token punctuation">;</span>
        <span class="token property">border-bottom</span><span class="token punctuation">:</span> 1px solid #f5f5f5<span class="token punctuation">;</span>
        <span class="token selector">&amp;:first-child</span> <span class="token punctuation">{</span>
          <span class="token property">text-align</span><span class="token punctuation">:</span> left<span class="token punctuation">;</span>
          <span class="token property">padding-left</span><span class="token punctuation">:</span> 30px<span class="token punctuation">;</span>
          <span class="token property">color</span><span class="token punctuation">:</span> #999<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span>
      <span class="token selector">th</span> <span class="token punctuation">{</span>
        <span class="token property">font-size</span><span class="token punctuation">:</span> 16px<span class="token punctuation">;</span>
        <span class="token property">font-weight</span><span class="token punctuation">:</span> normal<span class="token punctuation">;</span>
        <span class="token property">line-height</span><span class="token punctuation">:</span> 50px<span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>style</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><code>router/index.js</code></p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">const</span> <span class="token function-variable function">Cart</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">import</span><span class="token punctuation">(</span><span class="token string">&quot;@/views/cart/index&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><div class="language-diff ext-diff line-numbers-mode"><pre class="language-diff"><code><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line">     { path: &quot;/search&quot;, component: Search },
</span><span class="token prefix unchanged"> </span><span class="token line">     { path: &quot;/product/:id&quot;, component: Goods },
</span></span><span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line">      { path: &quot;/cart&quot;, component: Cart },
</span></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_07-\u8D2D\u7269\u8F66\u9875\u9762-v-model\u8865\u5145" tabindex="-1"><a class="header-anchor" href="#_07-\u8D2D\u7269\u8F66\u9875\u9762-v-model\u8865\u5145" aria-hidden="true">#</a> 07-\u8D2D\u7269\u8F66\u9875\u9762-v-model\u8865\u5145</h3><blockquote><p>\u76EE\u7684\uFF1A\u77E5\u9053vue3\u4E2D\u7684v-model\u8BED\u6CD5\u7CD6\u539F\u7406</p></blockquote><p>\u5927\u81F4\u6B65\u9AA4\uFF1A</p><ul><li>\u7EC4\u4EF6\u652F\u6301v-model</li><li>\u7EC4\u4EF6\u652F\u6301\u591A\u4E2A\u6570\u636E\u53CC\u5411\u7ED1\u5B9A v-model:\u5C5E\u6027</li></ul><p>\u5177\u4F53\u4EE3\u7801\uFF1A</p><ul><li>vue3\u7EC4\u4EF6\u652F\u6301v-model <ul><li>Vue2 <code>v-model</code> \u8BED\u6CD5\u7CD6\u539F\u7406\uFF1A<code>:value=&quot;\u6570\u636E&quot;</code> <code>@input=&quot;\u6570\u636E=$event&quot;</code></li><li>Vue3 <code>v-model</code> \u8BED\u6CD5\u7CD6\u539F\u7406\uFF1A<code>:modelValue=&quot;\u6570\u636E&quot;</code> <code>@update:modelValue=&quot;\u6570\u636E=$event&quot;</code></li></ul></li></ul><p>\u7236\u7EC4\u4EF6</p><div class="language-vue ext-vue line-numbers-mode"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>CartTest</span> <span class="token attr-name">v-model</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>count<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>  <span class="token literal-property property">components</span><span class="token operator">:</span> <span class="token punctuation">{</span> CartTest <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token function">setup</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> count <span class="token operator">=</span> <span class="token function">ref</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token punctuation">{</span> count <span class="token punctuation">}</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u5B50\u7EC4\u4EF6</p><div class="language-vue ext-vue line-numbers-mode"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span>
    cart-test\u7EC4\u4EF6 \u8BA1\u6570\u5668\uFF1A{{ modelValue }}
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">@click</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>updateCount<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>+1<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">&quot;CartTest&quot;</span><span class="token punctuation">,</span>
  <span class="token literal-property property">props</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">modelValue</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token literal-property property">type</span><span class="token operator">:</span> Number<span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token literal-property property">emits</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&quot;update:modelValue&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token function">setup</span><span class="token punctuation">(</span><span class="token parameter">props<span class="token punctuation">,</span> <span class="token punctuation">{</span> emit <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>props<span class="token punctuation">.</span>modelValue<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">const</span> <span class="token function-variable function">updateCount</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      <span class="token comment">// \u901A\u77E5\u7236\u7EC4\u4EF6\uFF0C\u8BA9\u7236\u7EC4\u4EF6\u53BB\u4FEE\u6539</span>
      <span class="token function">emit</span><span class="token punctuation">(</span><span class="token string">&quot;update:modelValue&quot;</span><span class="token punctuation">,</span> props<span class="token punctuation">.</span>modelValue <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token punctuation">{</span> updateCount <span class="token punctuation">}</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>\u7EC4\u4EF6\u652F\u6301\u591A\u4E2A\u6570\u636E\u53CC\u5411\u7ED1\u5B9A v-model:\u5C5E\u6027 <ul><li>vue2\u4E2D\u652F\u6301\u591A\u4E2A\u6570\u636E\u7684\u53CC\u5411\u7ED1\u5B9A\uFF0C\u4F7F\u7528 <code>v-model</code> \u8FD8\u53EF\u4EE5\u4F7F\u7528 <code>.sync</code><ul><li><code>:abc=&quot;\u6570\u636E&quot;</code> \u7236\u5B50\u4F20\u503C <code>@update:abc=&quot;\u6570\u636E=$event&quot;</code> ===&gt; <code>:abc.sync=&quot;\u6570\u636E&quot;</code></li></ul></li><li>Vue3 \u79FB\u9664\u4E86 <code>.sync</code> \u5168\u4F7F\u7528 <code>v-model:abc=&quot;\u6570\u636E&quot;</code></li></ul></li></ul><h3 id="_08-\u8D2D\u7269\u8F66\u9875\u9762-\u5217\u8868\u5C55\u793A" tabindex="-1"><a class="header-anchor" href="#_08-\u8D2D\u7269\u8F66\u9875\u9762-\u5217\u8868\u5C55\u793A" aria-hidden="true">#</a> 08-\u8D2D\u7269\u8F66\u9875\u9762-\u5217\u8868\u5C55\u793A</h3><blockquote><p>\u76EE\u7684\uFF1A\u5B9E\u73B0\u672C\u5730\u72B6\u6001\u4E0B\u7684\uFF0C\u8D2D\u7269\u8F66\u5546\u54C1\u5217\u8868\u5C55\u793A\u529F\u80FD\u3002</p></blockquote><p>\u5927\u81F4\u6B65\u9AA4\uFF1A</p><ul><li>\u51C6\u5907\u6709\u6548\u5546\u54C1\u5217\u8868\u6570\u636E\u3002\u5DF2\u9009\u62E9\u5546\u54C1\u5217\u8868\u6570\u636E\u3002\u5DF2\u9009\u62E9\u5546\u54C1\u4EF6\u6570\u6570\u636E\u3002\u9700\u8981\u652F\u4ED8\u7684\u91D1\u989D\u6570\u636E\u3002\u5168\u9009\u6309\u94AE\u7684\u72B6\u6001\u3002</li><li>\u6E32\u67D3\u6A21\u7248</li></ul><p>\u843D\u7684\u4EE3\u7801\uFF1A</p><ul><li>\u51C6\u5907\u6570\u636E <code>src/store/module/cart.js</code></li></ul><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>    <span class="token comment">// ... getters \u4EE3\u7801</span>
    <span class="token comment">// \u9009\u4E2D\u5546\u54C1\u5217\u8868</span>
    <span class="token function">selectedList</span> <span class="token punctuation">(</span><span class="token parameter">state<span class="token punctuation">,</span> getters</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span> getters<span class="token punctuation">.</span>validList<span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span><span class="token parameter">item</span> <span class="token operator">=&gt;</span> item<span class="token punctuation">.</span>selected<span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token comment">// \u9009\u4E2D\u5546\u54C1\u4EF6\u6570</span>
    <span class="token function">selectedTotal</span> <span class="token punctuation">(</span><span class="token parameter">state<span class="token punctuation">,</span> getters</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span> getters<span class="token punctuation">.</span>selectedList<span class="token punctuation">.</span><span class="token function">reduce</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">p<span class="token punctuation">,</span> c</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> p <span class="token operator">+</span> c<span class="token punctuation">.</span>count<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token comment">// \u9009\u4E2D\u5546\u54C1\u603B\u91D1\u989D</span>
    <span class="token function">selectedAmount</span> <span class="token punctuation">(</span><span class="token parameter">state<span class="token punctuation">,</span> getters</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span> getters<span class="token punctuation">.</span>selectedList<span class="token punctuation">.</span><span class="token function">reduce</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">p<span class="token punctuation">,</span> c</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> p <span class="token operator">+</span> <span class="token punctuation">(</span>c<span class="token punctuation">.</span>nowPrice <span class="token operator">*</span> <span class="token number">100</span> <span class="token operator">*</span> c<span class="token punctuation">.</span>count<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token operator">/</span> <span class="token number">100</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token comment">// \u662F\u5426\u5168\u9009</span>
    <span class="token function">isCheckAll</span> <span class="token punctuation">(</span><span class="token parameter">state<span class="token punctuation">,</span> getters</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span> getters<span class="token punctuation">.</span>validList<span class="token punctuation">.</span>length <span class="token operator">===</span> getters<span class="token punctuation">.</span>selectedList<span class="token punctuation">.</span>length <span class="token operator">&amp;&amp;</span> getters<span class="token punctuation">.</span>selectedList<span class="token punctuation">.</span>length <span class="token operator">!==</span> <span class="token number">0</span>
    <span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>\u6E32\u67D3\u5217\u8868</li></ul><div class="language-diff ext-diff line-numbers-mode"><pre class="language-diff"><code><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line">     &lt;div class=&quot;cart&quot;&gt;
</span><span class="token prefix unchanged"> </span><span class="token line">       &lt;table&gt;
</span><span class="token prefix unchanged"> </span><span class="token line">         &lt;thead&gt;
</span><span class="token prefix unchanged"> </span><span class="token line">           &lt;tr&gt;
</span></span><span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line">              &lt;th width=&quot;120&quot;&gt;&lt;XtxCheckbox :modelValue=&quot;$store.getters[&#39;cart/isCheckAll&#39;]&quot;&gt;\u5168\u9009&lt;/XtxCheckbox&gt;&lt;/th&gt;
</span></span><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line">             &lt;th width=&quot;400&quot;&gt;\u5546\u54C1\u4FE1\u606F&lt;/th&gt;
</span><span class="token prefix unchanged"> </span><span class="token line">             &lt;th width=&quot;220&quot;&gt;\u5355\u4EF7&lt;/th&gt;
</span><span class="token prefix unchanged"> </span><span class="token line">             &lt;th width=&quot;180&quot;&gt;\u6570\u91CF&lt;/th&gt;
</span><span class="token prefix unchanged"> </span><span class="token line">             &lt;th width=&quot;180&quot;&gt;\u5C0F\u8BA1&lt;/th&gt;
</span><span class="token prefix unchanged"> </span><span class="token line">             &lt;th width=&quot;140&quot;&gt;\u64CD\u4F5C&lt;/th&gt;
</span><span class="token prefix unchanged"> </span><span class="token line">           &lt;/tr&gt;
</span><span class="token prefix unchanged"> </span><span class="token line">         &lt;/thead&gt;
</span><span class="token prefix unchanged"> </span><span class="token line">         &lt;!-- \u6709\u6548\u5546\u54C1 --&gt;
</span><span class="token prefix unchanged"> </span><span class="token line">         &lt;tbody&gt;
</span></span><span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line">            &lt;tr v-for=&quot;item in $store.getters[&#39;cart/validList&#39;]&quot; :key=&quot;item.skuId&quot;&gt;
</span><span class="token prefix inserted">+</span><span class="token line">              &lt;td&gt;&lt;XtxCheckbox :modelValue=&quot;item.selected&quot; /&gt;&lt;/td&gt;
</span></span><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line">             &lt;td&gt;
</span><span class="token prefix unchanged"> </span><span class="token line">               &lt;div class=&quot;goods&quot;&gt;
</span></span><span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line">                  &lt;RouterLink :to=&quot;\`/product/\${item.id}\`&quot;&gt;
</span><span class="token prefix inserted">+</span><span class="token line">                    &lt;img :src=&quot;item.picture&quot; alt=&quot;&quot;&gt;
</span></span><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line">                 &lt;/RouterLink&gt;
</span><span class="token prefix unchanged"> </span><span class="token line">                 &lt;div&gt;
</span></span><span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line">                    &lt;p class=&quot;name ellipsis&quot;&gt;{{item.name}}&lt;/p&gt;
</span></span><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line">                   &lt;!-- \u9009\u62E9\u89C4\u683C\u7EC4\u4EF6 --&gt;
</span></span><span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line">                    &lt;p class=&quot;attr&quot;&gt;{{item.attrsText}}&lt;/p&gt;
</span></span><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line">                 &lt;/div&gt;
</span><span class="token prefix unchanged"> </span><span class="token line">               &lt;/div&gt;
</span><span class="token prefix unchanged"> </span><span class="token line">             &lt;/td&gt;
</span><span class="token prefix unchanged"> </span><span class="token line">             &lt;td class=&quot;tc&quot;&gt;
</span></span><span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line">                &lt;p&gt;&amp;yen;{{item.nowPrice}}&lt;/p&gt;
</span><span class="token prefix inserted">+</span><span class="token line">                &lt;p v-if=&quot;item.price-item.nowPrice&gt;0&quot;&gt;
</span></span><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line">                 \u6BD4\u52A0\u5165\u65F6\u964D\u4EF7
</span></span><span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line">                  &lt;span class=&quot;red&quot;&gt;&amp;yen;{{item.price-item.nowPrice}}&lt;/span&gt;
</span></span><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line">               &lt;/p&gt;
</span><span class="token prefix unchanged"> </span><span class="token line">             &lt;/td&gt;
</span><span class="token prefix unchanged"> </span><span class="token line">             &lt;td class=&quot;tc&quot;&gt;
</span></span><span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line">                &lt;XtxNumbox :modelValue=&quot;item.count&quot; /&gt;
</span></span><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line">             &lt;/td&gt;
</span></span><span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line">              &lt;td class=&quot;tc&quot;&gt;&lt;p class=&quot;f16 red&quot;&gt;&amp;yen;{{item.nowPrice*100*item.count/100}}&lt;/p&gt;&lt;/td&gt;
</span></span><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line">             &lt;td class=&quot;tc&quot;&gt;
</span><span class="token prefix unchanged"> </span><span class="token line">               &lt;p&gt;&lt;a href=&quot;javascript:;&quot;&gt;\u79FB\u5165\u6536\u85CF\u5939&lt;/a&gt;&lt;/p&gt;
</span><span class="token prefix unchanged"> </span><span class="token line">               &lt;p&gt;&lt;a class=&quot;green&quot; href=&quot;javascript:;&quot;&gt;\u5220\u9664&lt;/a&gt;&lt;/p&gt;
</span><span class="token prefix unchanged"> </span><span class="token line">               &lt;p&gt;&lt;a href=&quot;javascript:;&quot;&gt;\u627E\u76F8\u4F3C&lt;/a&gt;&lt;/p&gt;
</span><span class="token prefix unchanged"> </span><span class="token line">             &lt;/td&gt;
</span><span class="token prefix unchanged"> </span><span class="token line">           &lt;/tr&gt;
</span><span class="token prefix unchanged"> </span><span class="token line">         &lt;/tbody&gt;
</span><span class="token prefix unchanged"> </span><span class="token line">       &lt;/table&gt;
</span><span class="token prefix unchanged"> </span><span class="token line">     &lt;/div&gt;
</span><span class="token prefix unchanged"> </span><span class="token line">     &lt;!-- \u64CD\u4F5C\u680F --&gt;
</span><span class="token prefix unchanged"> </span><span class="token line">     &lt;div class=&quot;action&quot;&gt;
</span><span class="token prefix unchanged"> </span><span class="token line">       &lt;div class=&quot;batch&quot;&gt;
</span></span><span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line">          &lt;XtxCheckbox :modelValue=&quot;$store.getters[&#39;cart/isCheckAll&#39;]&quot;&gt;\u5168\u9009&lt;/XtxCheckbox&gt;
</span></span><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line">         &lt;a href=&quot;javascript:;&quot;&gt;\u5220\u9664\u5546\u54C1&lt;/a&gt;
</span><span class="token prefix unchanged"> </span><span class="token line">       &lt;/div&gt;
</span><span class="token prefix unchanged"> </span><span class="token line">       &lt;div class=&quot;total&quot;&gt;
</span></span><span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line">          \u5171 {{$store.getters[&#39;cart/validTotal&#39;]}} \u4EF6\u5546\u54C1\uFF0C\u5DF2\u9009\u62E9 {{$store.getters[&#39;cart/selectedTotal&#39;]}} \u4EF6\uFF0C\u5546\u54C1\u5408\u8BA1\uFF1A
</span><span class="token prefix inserted">+</span><span class="token line">          &lt;span class=&quot;red&quot;&gt;\xA5{{$store.getters[&#39;cart/selectedAmount&#39;]}}&lt;/span&gt;
</span></span><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line">         &lt;XtxButton type=&quot;primary&quot;&gt;\u4E0B\u5355\u7ED3\u7B97&lt;/XtxButton&gt;
</span><span class="token prefix unchanged"> </span><span class="token line">       &lt;/div&gt;
</span><span class="token prefix unchanged"> </span><span class="token line">     &lt;/div&gt;
</span></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_09-\u8D2D\u7269\u8F66\u9875\u9762-\u5355\u9009\u64CD\u4F5C" tabindex="-1"><a class="header-anchor" href="#_09-\u8D2D\u7269\u8F66\u9875\u9762-\u5355\u9009\u64CD\u4F5C" aria-hidden="true">#</a> 09-\u8D2D\u7269\u8F66\u9875\u9762-\u5355\u9009\u64CD\u4F5C</h3><blockquote><p>\u76EE\u7684\uFF1A\u5B9E\u73B0\u672C\u5730\u72B6\u6001\u4E0B\u7684\uFF0C\u9009\u4E2D\u5546\u54C1\u64CD\u4F5C\u3002</p></blockquote><p>\u5927\u81F4\u6B65\u9AA4\uFF1A</p><ul><li>\u4F7F\u7528\u8D2D\u7269\u8F66\u5546\u54C1\u4FEE\u6539\u4FE1\u606F\u7684mutations\uFF08\u5DF2\u5B9E\u73B0\uFF09</li><li>\u5B9A\u4E49\u8D2D\u7269\u8F66\u5546\u54C1\u9009\u4E2D\u72B6\u6001\u7684actions</li><li>\u5728\u8D2D\u7269\u8F66\u9875\u9762\u7ED1\u5B9A\u5355\u9009\u7684\u590D\u9009\u6846change\u4E8B\u4EF6</li><li>\u5728\u4E8B\u4EF6\u4E2D\u8C03\u7528actions\u7684\u4FEE\u6539\u51FD\u6570</li></ul><p>\u843D\u7684\u4EE3\u7801\uFF1A</p><ul><li>\u5B9A\u4E49\u4FEE\u6539\u8D2D\u7269\u8F66\u5546\u54C1\u9009\u4E2D\u72B6\u6001\u7684mutations <code>src/store/module/cart.js</code></li></ul><div class="language-diff ext-diff line-numbers-mode"><pre class="language-diff"><code><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line">   // \u4FEE\u6539\u8D2D\u7269\u8F66\u5546\u54C1
</span><span class="token prefix unchanged"> </span><span class="token line">   updateCart (state, goods) {
</span><span class="token prefix unchanged"> </span><span class="token line">     // goods\u4E2D\u5B57\u6BB5\u6709\u53EF\u80FD\u4E0D\u5B8C\u6574\uFF0Cgoods\u6709\u7684\u4FE1\u606F\u624D\u53BB\u4FEE\u6539\u3002
</span><span class="token prefix unchanged"> </span><span class="token line">     // 1. goods\u4E2D\u5FC5\u9700\u53C8skuId\uFF0C\u624D\u80FD\u627E\u5230\u5BF9\u5E94\u7684\u5546\u54C1\u4FE1\u606F
</span><span class="token prefix unchanged"> </span><span class="token line">     const updateGoods = state.list.find(item =&gt; item.skuId === goods.skuId)
</span><span class="token prefix unchanged"> </span><span class="token line">     for (const key in goods) {
</span><span class="token prefix unchanged"> </span><span class="token line">       // \u5E03\u5C14\u7C7B\u578B false \u503C\u9700\u8981\u4F7F\u7528
</span></span><span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line">       if (goods[key] !== null &amp;&amp; goods[key] !== undefined &amp;&amp; goods[key] !== &#39;&#39;) {
</span></span><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line">         updateGoods[key] = goods[key]
</span><span class="token prefix unchanged"> </span><span class="token line">       }
</span><span class="token prefix unchanged"> </span><span class="token line">     }
</span><span class="token prefix unchanged"> </span><span class="token line">   },
</span></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>\u5B9A\u4E49\u4FEE\u6539\u8D2D\u7269\u8F66\u5546\u54C1\u7684actions <code>src/store/module/cart.js</code></li></ul><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>    <span class="token comment">// \u4FEE\u6539\u8D2D\u7269\u8F66\u5546\u54C1</span>
    <span class="token keyword">async</span> <span class="token function">updateCart</span> <span class="token punctuation">(</span><span class="token parameter">ctx<span class="token punctuation">,</span> goods</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token comment">// goods \u4E2D\uFF1A\u5FC5\u987B\u6709skuId\uFF0C\u5176\u4ED6\u60F3\u4FEE\u6539\u7684\u5C5E\u6027 selected  count</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>ctx<span class="token punctuation">.</span>rootState<span class="token punctuation">.</span>user<span class="token punctuation">.</span>profile<span class="token punctuation">.</span>token<span class="token punctuation">)</span> <span class="token punctuation">{</span>
          <span class="token comment">// \u767B\u5F55 TODO</span>
        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
          <span class="token comment">// \u672C\u5730</span>
          ctx<span class="token punctuation">.</span><span class="token function">commit</span><span class="token punctuation">(</span><span class="token string">&#39;updateCart&#39;</span><span class="token punctuation">,</span> goods<span class="token punctuation">)</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>\u5728\u8D2D\u7269\u8F66\u9875\u9762\u7ED1\u5B9A\u5355\u9009\u7684\u590D\u9009\u6846change\u4E8B\u4EF6\u5E76\u5904\u7406\u9009\u4E2D <code>src/views/cart/index.vue</code></li></ul><div class="language-vue ext-vue line-numbers-mode"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>td</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>XtxCheckbox</span> <span class="token attr-name">@change</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>$event=&gt;checkOne(item.skuId,$event)<span class="token punctuation">&quot;</span></span> <span class="token attr-name">:modelValue</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>item.selected<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>td</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">import</span> GoodRelevant <span class="token keyword">from</span> <span class="token string">&#39;@/views/goods/components/goods-relevant&#39;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> useStore <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;vuex&#39;</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">&#39;XtxCartPage&#39;</span><span class="token punctuation">,</span>
  <span class="token literal-property property">components</span><span class="token operator">:</span> <span class="token punctuation">{</span> GoodRelevant <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token function">setup</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> store <span class="token operator">=</span> <span class="token function">useStore</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token comment">// \u5355\u9009</span>
    <span class="token keyword">const</span> <span class="token function-variable function">checkOne</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">skuId<span class="token punctuation">,</span> selected</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      store<span class="token punctuation">.</span><span class="token function">dispatch</span><span class="token punctuation">(</span><span class="token string">&#39;cart/updateCart&#39;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> skuId<span class="token punctuation">,</span> selected <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> <span class="token punctuation">{</span> checkOne <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_10-\u8D2D\u7269\u8F66\u9875\u9762-\u5168\u9009\u64CD\u4F5C" tabindex="-1"><a class="header-anchor" href="#_10-\u8D2D\u7269\u8F66\u9875\u9762-\u5168\u9009\u64CD\u4F5C" aria-hidden="true">#</a> 10-\u8D2D\u7269\u8F66\u9875\u9762-\u5168\u9009\u64CD\u4F5C</h3><blockquote><p>\u76EE\u7684\uFF1A\u5B9E\u73B0\u672C\u5730\u72B6\u6001\u4E0B\u7684\uFF0C\u5168\u9009\u5546\u54C1\u64CD\u4F5C\u3002</p></blockquote><p>\u5927\u81F4\u6B65\u9AA4\uFF1A</p><ul><li>\u4FEE\u6539\u8D2D\u7269\u8F66\u6240\u6709\u6709\u6548\u5546\u54C1\u9009\u4E2D\u72B6\u6001\u7684actions</li><li>\u5728\u8D2D\u7269\u8F66\u9875\u9762\u4FEE\u6539\u8C03\u7528actions\u7684\u4EE3\u7801</li><li>\u5728\u8D2D\u7269\u8F66\u9875\u9762\u7ED1\u5B9A\u5168\u9009\u7684\u590D\u9009\u6846change\u4E8B\u4EF6</li><li>\u5728\u4E8B\u4EF6\u4E2D\u8C03\u7528actions\u7684\u4FEE\u6539\u51FD\u6570</li></ul><p>\u843D\u7684\u4EE3\u7801</p><ul><li>\u4FEE\u6539\u8D2D\u7269\u8F66\u5546\u54C1\u9009\u4E2D\u72B6\u6001\u7684actions\u8BA9\u5176\u652F\u6301\u5168\u9009 <code>src/store/module/cart.js</code></li></ul><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>    <span class="token comment">// \u505A\u6709\u6548\u5546\u54C1\u7684\u5168\u9009&amp;\u53CD\u9009</span>
    <span class="token keyword">async</span> <span class="token function">checkAllCart</span> <span class="token punctuation">(</span><span class="token parameter">ctx<span class="token punctuation">,</span> selected</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>ctx<span class="token punctuation">.</span>rootState<span class="token punctuation">.</span>user<span class="token punctuation">.</span>profile<span class="token punctuation">.</span>token<span class="token punctuation">)</span> <span class="token punctuation">{</span>
          <span class="token comment">// \u767B\u5F55 TODO</span>
        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
          <span class="token comment">// \u672C\u5730</span>
          <span class="token comment">// 1. \u83B7\u53D6\u6709\u6548\u7684\u5546\u54C1\u5217\u8868\uFF0C\u904D\u5386\u7684\u53BB\u8C03\u7528\u4FEE\u6539mutations\u5373\u53EF</span>
          ctx<span class="token punctuation">.</span>getters<span class="token punctuation">.</span>validList<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token parameter">item</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
            ctx<span class="token punctuation">.</span><span class="token function">commit</span><span class="token punctuation">(</span><span class="token string">&#39;updateCart&#39;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> <span class="token literal-property property">skuId</span><span class="token operator">:</span> item<span class="token punctuation">.</span>skuId<span class="token punctuation">,</span> selected <span class="token punctuation">}</span><span class="token punctuation">)</span>
          <span class="token punctuation">}</span><span class="token punctuation">)</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>\u5728\u8D2D\u7269\u8F66\u9875\u9762\u4FEE\u6539\u8C03\u7528actions\u7684\u4EE3\u7801 <code>src/views/cart/index.vue</code></li></ul><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>    <span class="token comment">// \u5168\u9009</span>
    <span class="token keyword">const</span> <span class="token function-variable function">checkAll</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">selected</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      store<span class="token punctuation">.</span><span class="token function">dispatch</span><span class="token punctuation">(</span><span class="token string">&#39;cart/checkAllCart&#39;</span><span class="token punctuation">,</span> selected<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> <span class="token punctuation">{</span> checkOne<span class="token punctuation">,</span> checkAll <span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>\u5728\u8D2D\u7269\u8F66\u9875\u9762\u7ED1\u5B9A\u5168\u9009\u7684\u590D\u9009\u6846change\u4E8B\u4EF6\u5E76\u5904\u7406\u9009\u4E2D <code>src/views/cart/index.vue</code></li></ul><div class="language-VUE ext-VUE line-numbers-mode"><pre class="language-VUE"><code>&lt;!-- \u4E24\u5904\u90FD\u9700\u8981\u52A0 --&gt; 
&lt;XtxCheckbox @change=&quot;checkAll&quot; :modelValue=&quot;$store.getters[&#39;cart/isCheckAll&#39;]&quot;&gt;\u5168\u9009&lt;/XtxCheckbox&gt;

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_11-\u8D2D\u7269\u8F66\u9875\u9762-\u5220\u9664\u64CD\u4F5C" tabindex="-1"><a class="header-anchor" href="#_11-\u8D2D\u7269\u8F66\u9875\u9762-\u5220\u9664\u64CD\u4F5C" aria-hidden="true">#</a> 11-\u8D2D\u7269\u8F66\u9875\u9762-\u5220\u9664\u64CD\u4F5C</h3><blockquote><p>\u76EE\u7684\uFF1A\u5B9E\u73B0\u672C\u5730\u72B6\u6001\u4E0B\uFF0C\u8D2D\u7269\u8F66\u5546\u54C1\u5220\u9664</p></blockquote><p>\u5927\u81F4\u6B65\u9AA4\uFF1A</p><ul><li>\u7ED1\u5B9A<code>\u5220\u9664</code>\u70B9\u51FB\u4E8B\u4EF6\u6307\u5B9A\u5904\u7406\u51FD\u6570\uFF0C\u8C03\u7528\u5220\u9664actions</li><li>\u5904\u7406\u65E0\u5546\u54C1\u5C55\u793A\u754C\u9762</li></ul><p>\u843D\u7684\u4EE3\u7801\uFF1A</p><ul><li>\u7ED1\u5B9A<code>\u5220\u9664</code>\u70B9\u51FB\u4E8B\u4EF6\u6307\u5B9A\u5904\u7406\u51FD\u6570\uFF0C\u8C03\u7528\u5220\u9664actions <code>src/views/cart/index.vue</code></li></ul><div class="language-vue ext-vue line-numbers-mode"><pre class="language-vue"><code><span class="token comment">&lt;!-- \u4E24\u5904\u5220\u9664\u90FD\u7ED1\u5B9A --&gt;</span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">@click</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>deleteCart(item.skuId)<span class="token punctuation">&quot;</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>green<span class="token punctuation">&quot;</span></span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>javascript:;<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>\u5220\u9664<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>    <span class="token comment">// \u5220\u9664</span>
    <span class="token keyword">const</span> <span class="token function-variable function">deleteCart</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">skuId</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      store<span class="token punctuation">.</span><span class="token function">dispatch</span><span class="token punctuation">(</span><span class="token string">&#39;cart/deleteCart&#39;</span><span class="token punctuation">,</span> skuId<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> <span class="token punctuation">{</span> checkOne<span class="token punctuation">,</span> checkAll<span class="token punctuation">,</span> deleteCart <span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>\u5904\u7406\u65E0\u5546\u54C1\u5C55\u793A\u754C\u9762</li></ul><p>\u7EC4\u4EF6 <code>src/views/cart/components/cart-none.vue</code></p><div class="language-vue ext-vue line-numbers-mode"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>cart-none<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>img</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>@/assets/none.png<span class="token punctuation">&quot;</span></span> <span class="token attr-name">alt</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span><span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">&gt;</span></span>\u8D2D\u7269\u8F66\u5185\u6682\u65F6\u6CA1\u6709\u5546\u54C1<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>btn<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>XtxButton</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>primary<span class="token punctuation">&quot;</span></span> <span class="token attr-name">@click</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>$router.push(<span class="token punctuation">&#39;</span>/<span class="token punctuation">&#39;</span>)<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>\u7EE7\u7EED\u901B\u901B<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>XtxButton</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">&#39;CartNone&#39;</span>
<span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>style</span> <span class="token attr-name">scoped</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>less<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token style"><span class="token language-css">
<span class="token selector">.cart-none</span> <span class="token punctuation">{</span>
  <span class="token property">text-align</span><span class="token punctuation">:</span> center<span class="token punctuation">;</span>
  <span class="token property">padding</span><span class="token punctuation">:</span> 150px 0<span class="token punctuation">;</span>
  <span class="token property">background</span><span class="token punctuation">:</span> #fff<span class="token punctuation">;</span>
  <span class="token selector">img</span> <span class="token punctuation">{</span>
    <span class="token property">width</span><span class="token punctuation">:</span> 180px<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token selector">p</span> <span class="token punctuation">{</span>
    <span class="token property">color</span><span class="token punctuation">:</span> #999999<span class="token punctuation">;</span>
    <span class="token property">padding</span><span class="token punctuation">:</span> 20px 0<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>style</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u4F7F\u7528 <code>src/views/cart/index.vue</code></p><div class="language-diff ext-diff line-numbers-mode"><pre class="language-diff"><code><span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line">import XtxConfirm from &#39;erabbit/packages/components/XtxConfirm&#39;
</span></span>import { useStore } from &#39;vuex&#39;
export default {
<span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line"> name: &#39;XtxCartPage&#39;,
</span></span><span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line">  components: { GoodRelevant, CartNone },
</span></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-vue ext-vue line-numbers-mode"><pre class="language-vue"><code>      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>cart<span class="token punctuation">&quot;</span></span> <span class="token attr-name">v-if</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>$store.getters[<span class="token punctuation">&#39;</span>cart/validList<span class="token punctuation">&#39;</span>].length<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
 
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
      <span class="token comment">&lt;!-- \u64CD\u4F5C\u680F --&gt;</span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>action<span class="token punctuation">&quot;</span></span> <span class="token attr-name">v-if</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>$store.getters[<span class="token punctuation">&#39;</span>cart/validList<span class="token punctuation">&#39;</span>].length<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>

      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>CartNone</span> <span class="token attr-name">v-else</span> <span class="token punctuation">/&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_12-\u8D2D\u7269\u8F66\u9875\u9762-\u6279\u91CF\u5220\u9664-\u4F5C\u4E1A" tabindex="-1"><a class="header-anchor" href="#_12-\u8D2D\u7269\u8F66\u9875\u9762-\u6279\u91CF\u5220\u9664-\u4F5C\u4E1A" aria-hidden="true">#</a> 12-\u8D2D\u7269\u8F66\u9875\u9762-\u6279\u91CF\u5220\u9664\uFF08\u4F5C\u4E1A\uFF09</h3><blockquote><p>\u76EE\u7684\uFF1A\u5B9E\u73B0\u672C\u5730\u6279\u91CF\u5220\u9664\u9009\u4E2D\u5546\u54C1\u529F\u80FD\u3002</p></blockquote><p>\u5927\u81F4\u7684\u6B65\u9AA4\uFF1A</p><ul><li>\u5B9A\u4E49\u4E00\u4E2A\u6279\u91CF\u5220\u9664\u5546\u54C1\u7684actions\u652F\u6301\u6279\u91CF\u64CD\u4F5C</li><li>\u904D\u5386\u9009\u4E2D\u5546\u54C1\uFF0C\u8C03\u7528\u5355\u4E2A\u5220\u9664\u8C03\u7528mutations\u51FD\u6570\u5373\u53EF</li><li>\u7ED1\u5B9A\u6279\u91CF\u5220\u9664\u70B9\u51FB\u4E8B\u4EF6\u6307\u5B9A\u5904\u7406\u51FD\u6570\uFF0C\u8C03\u7528actions\u8FDB\u884C\u5220\u9664\u3002</li></ul><p>\u843D\u5730\u4EE3\u7801\uFF1A</p><ul><li>\u6279\u91CF\u64CD\u4F5C\u5546\u54C1\u7684actions\u652F\u6301 <code>src/store/module/cart.js</code></li></ul><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>    <span class="token comment">// \u6279\u91CF\u5220\u9664\u9009\u4E2D\u5546\u54C1</span>
    <span class="token keyword">async</span> <span class="token function">batchDeleteCart</span> <span class="token punctuation">(</span><span class="token parameter">ctx</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>ctx<span class="token punctuation">.</span>rootState<span class="token punctuation">.</span>user<span class="token punctuation">.</span>profile<span class="token punctuation">.</span>token<span class="token punctuation">)</span> <span class="token punctuation">{</span>
          <span class="token comment">// \u767B\u5F55 TODO</span>
        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
          <span class="token comment">// \u672C\u5730</span>
          <span class="token comment">// 1. \u83B7\u53D6\u9009\u4E2D\u5546\u54C1\u5217\u8868\uFF0C\u8FDB\u884C\u904D\u5386\u8C03\u7528deleteCart mutataions\u51FD\u6570</span>
          ctx<span class="token punctuation">.</span>getters<span class="token punctuation">.</span>selectedList<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token parameter">item</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
            ctx<span class="token punctuation">.</span><span class="token function">commit</span><span class="token punctuation">(</span><span class="token string">&#39;deleteCart&#39;</span><span class="token punctuation">,</span> item<span class="token punctuation">.</span>skuId<span class="token punctuation">)</span>
          <span class="token punctuation">}</span><span class="token punctuation">)</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>\u7ED1\u5B9A\u6279\u91CF\u5220\u9664\u70B9\u51FB\u4E8B\u4EF6\u6307\u5B9A\u5904\u7406\u51FD\u6570\uFF0C\u8C03\u7528actions\u8FDB\u884C\u5220\u9664\u3002 <code>src/views/cart/index.vue</code></li></ul><div class="language-vue ext-vue line-numbers-mode"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">@click</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>batchDeleteCart()<span class="token punctuation">&quot;</span></span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>javascript:;<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>\u5220\u9664\u5546\u54C1<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>    <span class="token comment">// \u6279\u91CF\u5220\u9664</span>
    <span class="token keyword">const</span> <span class="token function-variable function">batchDeleteCart</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      <span class="token function">Confirm</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token literal-property property">text</span><span class="token operator">:</span> <span class="token string">&#39;\u60A8\u786E\u5B9A\u4ECE\u8D2D\u7269\u8F66\u5220\u9664\u9009\u4E2D\u7684\u5546\u54C1\u5417\uFF1F&#39;</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        store<span class="token punctuation">.</span><span class="token function">dispatch</span><span class="token punctuation">(</span><span class="token string">&#39;cart/batchDeleteCart&#39;</span><span class="token punctuation">)</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">catch</span><span class="token punctuation">(</span><span class="token parameter">e</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> <span class="token punctuation">{</span> checkOne<span class="token punctuation">,</span> checkAll<span class="token punctuation">,</span> deleteCart<span class="token punctuation">,</span> batchDeleteCart <span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_13-\u8D2D\u7269\u8F66\u9875\u9762-\u4FEE\u6539\u6570\u91CF-\u4F5C\u4E1A" tabindex="-1"><a class="header-anchor" href="#_13-\u8D2D\u7269\u8F66\u9875\u9762-\u4FEE\u6539\u6570\u91CF-\u4F5C\u4E1A" aria-hidden="true">#</a> 13-\u8D2D\u7269\u8F66\u9875\u9762-\u4FEE\u6539\u6570\u91CF\uFF08\u4F5C\u4E1A\uFF09</h3><blockquote><p>\u76EE\u7684\uFF1A\u5B9E\u73B0\u672C\u5730\u7248\u672C\u7684\u4FEE\u6539\u5546\u54C1\u6570\u91CF\u3002</p></blockquote><p>\u5927\u81F4\u7684\u6B65\u9AA4\uFF1A</p><ul><li>\u7ED1\u5B9Axtx-numbox\u7EC4\u4EF6\u7684change\u4E8B\u4EF6\u6307\u5B9A\u5904\u7406\u51FD\u6570</li><li>\u5728\u51FD\u6570\u79CD\u8C03\u7528vuex\u7684cart/updateCart\u51FD\u6570\u4FEE\u6539\u6570\u91CF</li></ul><p>\u843D\u7684\u4EE3\u7801\uFF1A</p><ul><li>\u7ED1\u5B9Axtx-numbox\u7EC4\u4EF6\u7684change\u4E8B\u4EF6\u6307\u5B9A\u5904\u7406\u51FD\u6570</li></ul><div class="language-vue ext-vue line-numbers-mode"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>XtxNumbox</span> <span class="token attr-name">:min</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>1<span class="token punctuation">&quot;</span></span> <span class="token attr-name">:max</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>item.stock<span class="token punctuation">&quot;</span></span> <span class="token attr-name">@change</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>$event=&gt;changeCount(item.skuId,$event)<span class="token punctuation">&quot;</span></span> <span class="token attr-name">:modelValue</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>item.count<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><ul><li>\u5728\u51FD\u6570\u79CD\u8C03\u7528vuex\u7684cart/updateCart\u51FD\u6570\u4FEE\u6539\u6570\u91CF</li></ul><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>    <span class="token comment">// \u4FEE\u6539\u6570\u91CF</span>
    <span class="token keyword">const</span> <span class="token function-variable function">changeCount</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">skuId<span class="token punctuation">,</span> count</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      store<span class="token punctuation">.</span><span class="token function">dispatch</span><span class="token punctuation">(</span><span class="token string">&#39;cart/updateCart&#39;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> skuId<span class="token punctuation">,</span> count <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> <span class="token punctuation">{</span> checkOne<span class="token punctuation">,</span> checkAll<span class="token punctuation">,</span> deleteCart<span class="token punctuation">,</span> batchDeleteCart<span class="token punctuation">,</span> changeCount <span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>`,150);function p(e,o){return t}var u=n(a,[["render",p],["__file","day06-\u5C0F\u5154\u9C9C\u513F.html.vue"]]);export{u as default};
