import{_ as e}from"./plugin-vue_export-helper.21dcd24c.js";import{r as o,o as c,c as l,a as n,b as t,e as p,d as s}from"./app.88f692a7.js";const i={},u=p(`<h1 id="\u300A\u6781\u5BA2\u56ED\u79FB\u52A8\u7AEF\u9879\u76EE1\u300B" tabindex="-1"><a class="header-anchor" href="#\u300A\u6781\u5BA2\u56ED\u79FB\u52A8\u7AEF\u9879\u76EE1\u300B" aria-hidden="true">#</a> \u300A\u6781\u5BA2\u56ED\u79FB\u52A8\u7AEF\u9879\u76EE1\u300B</h1><h1 id="\u9879\u76EE\u6982\u8FF0" tabindex="-1"><a class="header-anchor" href="#\u9879\u76EE\u6982\u8FF0" aria-hidden="true">#</a> \u9879\u76EE\u6982\u8FF0</h1><h2 id="\u9879\u76EE\u4ECB\u7ECD" tabindex="-1"><a class="header-anchor" href="#\u9879\u76EE\u4ECB\u7ECD" aria-hidden="true">#</a> \u9879\u76EE\u4ECB\u7ECD</h2><blockquote><p>\u300C\u6781\u5BA2\u56ED\u300D\u5BF9\u6807<code>CSDN</code>\u3001<code>\u535A\u5BA2\u56ED</code>\u7B49\u7ADE\u54C1\uFF0C\u81F4\u529B\u6210\u4E3A\u66F4\u52A0\u8D34\u8FD1\u5E74\u8F7B IT \u4ECE\u4E1A\u8005\uFF08\u5B66\u5458\uFF09\u7684\u79D1\u6280\u8D44\u8BAF\u7C7B\u5E94\u7528<br> \u4EA7\u54C1\u5173\u952E\u8BCD\uFF1AIT\u3001\u6781\u5BA2\u3001\u6D3B\u529B\u3001\u79D1\u6280\u3001\u6280\u672F\u5206\u4EAB\u3001\u524D\u6CBF\u52A8\u6001\u3001\u5185\u5BB9\u793E\u4EA4<br> \u7528\u6237\u7279\u70B9\uFF1A\u5E74\u8F7B\u6709\u6D3B\u529B\uFF0C\u5BF9IT\u9886\u57DF\u524D\u8A00\u79D1\u6280\u4FE1\u606F\u5145\u6EE1\u63A2\u7D22\u6B32\u548C\u5B66\u4E60\u70ED\u60C5</p></blockquote><hr><h2 id="\u529F\u80FD\u6F14\u793A" tabindex="-1"><a class="header-anchor" href="#\u529F\u80FD\u6F14\u793A" aria-hidden="true">#</a> \u529F\u80FD\u6F14\u793A</h2><blockquote><p>\u76EE\u6807\uFF1A\u4E86\u89E3\u6781\u5BA2\u56ED\u79FB\u52A8\u7AEF\u9879\u76EE\u7684\u4E3B\u8981\u754C\u9762\u5E03\u5C40\u548C\u672C\u8BFE\u7A0B\u4E2D\u9700\u8981\u5B9E\u73B0\u7684\u529F\u80FD\u70B9</p></blockquote><p>\u5B8C\u6574\u7684\u53EF\u6F14\u793A\u4EE3\u7801\uFF0C\u5728\u53D1\u653E\u8D44\u6599\u4E2D\u7684 <code>\u8D44\u6E90 &gt; ready &gt; geek-park</code> \u76EE\u5F55\u4E0B\u3002</p><p>\u4EE3\u7801\u542F\u52A8\u65B9\u5F0F\u5982\u4E0B\uFF1A</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token comment"># \u5B89\u88C5\u4F9D\u8D56\u5305</span>
<span class="token function">npm</span> <span class="token function">install</span>

<span class="token comment"># \u542F\u52A8</span>
<span class="token function">npm</span> start
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><img src="https://wuxiaohui-1254415986.cos.ap-nanjing.myqcloud.com/2022/01/30/image20210830114836045.png" alt="image-20210830114836045" style="zoom:50%;"><hr><h2 id="\u9879\u76EE\u6280\u672F\u6808" tabindex="-1"><a class="header-anchor" href="#\u9879\u76EE\u6280\u672F\u6808" aria-hidden="true">#</a> \u9879\u76EE\u6280\u672F\u6808</h2><blockquote><p>\u76EE\u6807\uFF1A\u4E86\u89E3\u5F00\u53D1\u672C\u9879\u76EE\u6240\u8981\u4F7F\u7528\u7684\u5404\u7C7B\u6846\u67B6\u3001\u5E93</p></blockquote><ul><li><p>\u811A\u624B\u67B6\u5DE5\u5177\uFF1A<code>create-react-app</code></p></li><li><p>\u7EC4\u4EF6\u7F16\u5199\u65B9\u5F0F\uFF1A <code>\u51FD\u6570\u7EC4\u4EF6</code> + <code>Hooks</code></p></li><li><p>\u8DEF\u7531\u7EC4\u4EF6\u5E93\uFF1A<code>react-router-dom</code></p></li><li><p>\u5168\u5C40\u72B6\u6001\u5E93\uFF1A<code>redux + redux-thunk</code></p></li><li><p>\u7F51\u7EDC\u8BF7\u6C42\u5E93\uFF1A<code>axios</code></p></li><li><p>UI\u7EC4\u4EF6\u5E93\uFF1A<code>antd-mobile</code>\u3001\u4EE5\u53CA\u4E00\u4E9B\u7528\u6765\u5B9E\u73B0\u7279\u5B9A\u529F\u80FD\u7684\u7B2C\u4E09\u65B9\u7EC4\u4EF6\uFF08\u5982\uFF1A<code>formik</code>\u3001<code>react-content-loader</code>\u3001<code>react-window-infinite-loader</code> \u7B49\uFF09</p></li></ul><h1 id="\u9879\u76EE\u51C6\u5907" tabindex="-1"><a class="header-anchor" href="#\u9879\u76EE\u51C6\u5907" aria-hidden="true">#</a> \u9879\u76EE\u51C6\u5907</h1><h2 id="\u521B\u5EFA\u65B0\u9879\u76EE" tabindex="-1"><a class="header-anchor" href="#\u521B\u5EFA\u65B0\u9879\u76EE" aria-hidden="true">#</a> \u521B\u5EFA\u65B0\u9879\u76EE</h2><blockquote><p>\u76EE\u6807\uFF1A\u4F7F\u7528\u811A\u624B\u67B6\u547D\u4EE4\u521B\u65B0\u9879\u76EE</p></blockquote><p><strong>\u64CD\u4F5C\u6B65\u9AA4</strong></p><ol><li>\u901A\u8FC7\u547D\u4EE4\u884C\u521B\u5EFA\u9879\u76EE</li></ol><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>create-react-app geek-park
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><ol start="2"><li>\u4FEE\u6539\u9875\u9762\u6A21\u677F <code>public/index.html</code> \u4E2D\u7684\u9875\u9762\u6807\u9898</li></ol><div class="language-html ext-html line-numbers-mode"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>title</span><span class="token punctuation">&gt;</span></span>\u6781\u5BA2\u56ED App<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>title</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><ol start="3"><li>\u5220\u9664 <code>src</code> \u76EE\u5F55\u4E2D\u7684\u6240\u6709\u6587\u4EF6</li><li>\u65B0\u589E\u6587\u4EF6</li></ol><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>/src
  /assets         \u9879\u76EE\u8D44\u6E90\u6587\u4EF6\uFF0C\u6BD4\u5982\uFF0C\u56FE\u7247 \u7B49
  /components     \u901A\u7528\u7EC4\u4EF6
  /pages          \u9875\u9762
  /utils          \u5DE5\u5177\uFF0C\u6BD4\u5982\uFF0Ctoken\u3001axios \u7684\u5C01\u88C5\u7B49
  App.js          \u6839\u7EC4\u4EF6
  index.scss      \u5168\u5C40\u6837\u5F0F
  index.js        \u9879\u76EE\u5165\u53E3
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><hr><h2 id="\u516C\u7528\u6837\u5F0F" tabindex="-1"><a class="header-anchor" href="#\u516C\u7528\u6837\u5F0F" aria-hidden="true">#</a> \u516C\u7528\u6837\u5F0F</h2><blockquote><p>\u76EE\u6807\uFF1A\u5C06\u672C\u9879\u76EE\u8981\u7528\u7684\u516C\u7528\u6837\u5F0F\u6587\u4EF6\u653E\u5165\u5408\u9002\u7684\u76EE\u5F55\uFF0C\u5E76\u8C03\u7528</p></blockquote><div class="language-markdown ext-md line-numbers-mode"><pre class="language-markdown"><code>\u3010\u91CD\u8981\u8BF4\u660E\u3011
\u5728\u672C\u8BFE\u7A0B\u53D1\u653E\u7684\u8D44\u6599\u4E2D\uFF0C\u6709\u4E2A <span class="token code-snippet code keyword">\`\u8D44\u6E90 &gt; src\u4EE3\u7801\u6587\u4EF6 &gt; assets\`</span> \u76EE\u5F55\uFF0C\u91CC\u9762\u5B58\u653E\u7740\u516C\u7528\u6837\u5F0F\u6587\u4EF6\u548C\u56FE\u7247\u8D44\u6E90\uFF0C\u53EF\u76F4\u63A5\u590D\u5236\u5230\u4F60\u7684\u4EE3\u7801\u4E2D\u4F7F\u7528\u3002
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>\u64CD\u4F5C\u6B65\u9AA4</strong></p><ol><li><p>\u5C06\u4E0A\u9762\u63D0\u5230\u7684<code>assets</code>\u76EE\u5F55\uFF0C\u76F4\u63A5\u62F7\u8D1D\u5230\u65B0\u9879\u76EE\u7684 <code>src</code> \u76EE\u5F55\u4E0B</p></li><li><p>\u5728\u4E3B\u5165\u53E3 <code>index.js</code> \u4E2D\u5BFC\u5165\u516C\u7528\u6837\u5F0F\u6587\u4EF6</p></li></ol><div class="language-jsx ext-jsx line-numbers-mode"><pre class="language-jsx"><code><span class="token keyword">import</span> <span class="token string">&#39;./assets/styles/index.scss&#39;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><hr><h2 id="\u914D\u7F6E-sass-\u652F\u6301" tabindex="-1"><a class="header-anchor" href="#\u914D\u7F6E-sass-\u652F\u6301" aria-hidden="true">#</a> \u914D\u7F6E SASS \u652F\u6301</h2><blockquote><p>\u76EE\u6807\uFF1A\u8BA9\u9879\u76EE\u6837\u5F0F\u652F\u6301\u4F7F\u7528 SASS/SCSS \u8BED\u6CD5\u7F16\u5199</p></blockquote><p><strong>\u64CD\u4F5C\u6B65\u9AA4</strong></p><ol><li>\u5B89\u88C5 <code>sass</code></li></ol><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token function">yarn</span> <span class="token function">add</span> sass --save-dev
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h2 id="\u914D\u7F6E-ui-\u7EC4\u4EF6\u5E93" tabindex="-1"><a class="header-anchor" href="#\u914D\u7F6E-ui-\u7EC4\u4EF6\u5E93" aria-hidden="true">#</a> \u914D\u7F6E UI \u7EC4\u4EF6\u5E93</h2><blockquote><p>\u76EE\u6807\uFF1A\u5B89\u88C5\u672C\u9879\u76EE\u4F7F\u7528\u7684 UI \u7EC4\u4EF6\u5E93 Ant Design Mobile\uFF0C\u5E76\u901A\u8FC7 Babel \u63D2\u4EF6\u5B9E\u73B0\u6309\u9700\u52A0\u8F7D</p></blockquote>`,40),r={href:"https://mobile.ant.design/index-cn",target:"_blank",rel:"noopener noreferrer"},k=s("https://mobile.ant.design/index-cn"),d=p(`<p><strong>\u64CD\u4F5C\u6B65\u9AA4</strong></p><ol><li>\u5B89\u88C5 <code>antd-mobile</code></li></ol><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token function">yarn</span> <span class="token function">add</span> antd-mobile
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><ol start="2"><li>\u5BFC\u5165\u6837\u5F0F</li></ol><div class="language-jsx ext-jsx line-numbers-mode"><pre class="language-jsx"><code><span class="token keyword">import</span> <span class="token string">&#39;antd-mobile/dist/antd-mobile.css&#39;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><ol start="3"><li>\u4F7F\u7528\u7EC4\u4EF6</li></ol><div class="language-jsx ext-jsx line-numbers-mode"><pre class="language-jsx"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> Button<span class="token punctuation">,</span> Toast <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;antd-mobile&#39;</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">function</span> <span class="token function">App</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token punctuation">(</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">className</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>app<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Button</span></span>
        <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>primary<span class="token punctuation">&quot;</span></span>
        <span class="token attr-name">onClick</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> Toast<span class="token punctuation">.</span><span class="token function">success</span><span class="token punctuation">(</span><span class="token string">&#39;Load success !!!&#39;</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">}</span></span>
      <span class="token punctuation">&gt;</span></span><span class="token plain-text">
        default disabled
      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">Button</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
  <span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="antd-\u6309\u9700\u52A0\u8F7D" tabindex="-1"><a class="header-anchor" href="#antd-\u6309\u9700\u52A0\u8F7D" aria-hidden="true">#</a> antd-\u6309\u9700\u52A0\u8F7D</h2>`,8),v={href:"https://mobile.ant.design/docs/react/use-with-create-react-app-cn",target:"_blank",rel:"noopener noreferrer"},m=s("https://mobile.ant.design/docs/react/use-with-create-react-app-cn"),g=n("p",null,"craco",-1),b=n("p",null,"\u5B9E\u73B0\u601D\u8DEF\uFF1A",-1),x=s("\u4F7F\u7528 "),h={href:"https://github.com/arackaf/customize-cra/blob/HEAD/api.md",target:"_blank",rel:"noopener noreferrer"},y=s("customize-cra"),f=s(" \u6765\u6DFB\u52A0\u548C\u8986\u76D6\u811A\u624B\u67B6\u7684 webpack \u914D\u7F6E"),q=n("li",null,[s("\u4F7F\u7528 "),n("code",null,"react-app-rewired"),s(" \u6765\u6253\u5305\u548C\u8FD0\u884C\u4EE3\u7801")],-1),w=s("\u4F7F\u7528 babel-plugin-import, "),j={href:"https://github.com/ant-design/babel-plugin-import",target:"_blank",rel:"noopener noreferrer"},_=s("babel-plugin-import"),N=s(" \u662F\u4E00\u4E2A\u7528\u4E8E\u6309\u9700\u52A0\u8F7D\u7EC4\u4EF6\u4EE3\u7801\u548C\u6837\u5F0F\u7684 babel \u63D2\u4EF6"),R=p(`<p><strong>\u64CD\u4F5C\u6B65\u9AA4</strong></p><ol><li>\u5B89\u88C5 <code>customize-cra</code> \u548C <code>react-app-rewired</code></li></ol><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token function">yarn</span> <span class="token function">add</span> customize-cra react-app-rewired babel-plugin-import -D
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><ol start="2"><li>\u5728\u9879\u76EE\u6839\u76EE\u5F55\u4E2D\u521B\u5EFA <code>config-overrides.js</code>\uFF0C\u5E76\u7F16\u5199\u5982\u4E0B\u4EE3\u7801\uFF1A</li></ol><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">const</span> <span class="token punctuation">{</span> override<span class="token punctuation">,</span> fixBabelImports <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#39;customize-cra&#39;</span><span class="token punctuation">)</span>

<span class="token comment">// \u5BFC\u51FA\u8981\u8FDB\u884C\u8986\u76D6\u7684 webpack \u914D\u7F6E</span>
module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token function">override</span><span class="token punctuation">(</span>
  <span class="token function">fixBabelImports</span><span class="token punctuation">(</span><span class="token string">&#39;import&#39;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">libraryName</span><span class="token operator">:</span> <span class="token string">&#39;antd-mobile&#39;</span><span class="token punctuation">,</span>
    <span class="token literal-property property">style</span><span class="token operator">:</span> <span class="token string">&#39;css&#39;</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">)</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ol start="3"><li>\u4FEE\u6539\u542F\u52A8\u547D\u4EE4</li></ol><div class="language-json ext-json line-numbers-mode"><pre class="language-json"><code>
  <span class="token property">&quot;scripts&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">&quot;start&quot;</span><span class="token operator">:</span> <span class="token string">&quot;react-app-rewired start&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;build&quot;</span><span class="token operator">:</span> <span class="token string">&quot;react-app-rewired build&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;test&quot;</span><span class="token operator">:</span> <span class="token string">&quot;react-app-rewired test&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;eject&quot;</span><span class="token operator">:</span> <span class="token string">&quot;react-scripts eject&quot;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ol start="4"><li>\u5220\u9664index.js\u7684\u6837\u5F0F\u5BFC\u5165</li></ol><div class="language-diff ext-diff line-numbers-mode"><pre class="language-diff"><code><span class="token deleted-sign deleted"><span class="token prefix deleted">-</span><span class="token line"> import &#39;antd-mobile/dist/antd-mobile.css&#39;
</span></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><ol start="5"><li>\u91CD\u542F\u9879\u76EE\u6D4B\u8BD5</li></ol><h2 id="\u914D\u7F6E\u5FEB\u6377\u8DEF\u5F84" tabindex="-1"><a class="header-anchor" href="#\u914D\u7F6E\u5FEB\u6377\u8DEF\u5F84" aria-hidden="true">#</a> \u914D\u7F6E\u5FEB\u6377\u8DEF\u5F84 @</h2><blockquote><p>\u76EE\u6807\uFF1A\u8BA9\u4EE3\u7801\u4E2D\u652F\u6301\u4EE5 <code>@/xxxx</code> \u5F62\u5F0F\u7684\u8DEF\u5F84\u6765\u5BFC\u5165\u6587\u4EF6</p></blockquote><p><strong>\u64CD\u4F5C\u6B65\u9AA4</strong></p><ol><li>\u5728\u9879\u76EE\u6839\u76EE\u5F55\u4E2D\u521B\u5EFA <code>config-overrides.js</code>\uFF0C\u5E76\u7F16\u5199\u5982\u4E0B\u4EE3\u7801\uFF1A</li></ol><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">const</span> path <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#39;path&#39;</span><span class="token punctuation">)</span>
<span class="token keyword">const</span> <span class="token punctuation">{</span> override<span class="token punctuation">,</span> fixBabelImports<span class="token punctuation">,</span> addWebpackAlias <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#39;customize-cra&#39;</span><span class="token punctuation">)</span>

<span class="token keyword">const</span> babelPlugins <span class="token operator">=</span> <span class="token function">fixBabelImports</span><span class="token punctuation">(</span><span class="token string">&#39;import&#39;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">libraryName</span><span class="token operator">:</span> <span class="token string">&#39;antd-mobile&#39;</span><span class="token punctuation">,</span>
  <span class="token literal-property property">style</span><span class="token operator">:</span> <span class="token string">&#39;css&#39;</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token keyword">const</span> webpackAlias <span class="token operator">=</span> <span class="token function">addWebpackAlias</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token string-property property">&#39;@&#39;</span><span class="token operator">:</span> path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">&#39;src&#39;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token string-property property">&#39;@scss&#39;</span><span class="token operator">:</span> path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">&#39;src&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;assets&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;styles&#39;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token comment">// \u5BFC\u51FA\u8981\u8FDB\u884C\u8986\u76D6\u7684 webpack \u914D\u7F6E</span>
module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token function">override</span><span class="token punctuation">(</span>babelPlugins<span class="token punctuation">,</span> webpackAlias<span class="token punctuation">)</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ol start="2"><li>\u5728\u9879\u76EE\u6839\u76EE\u5F55\u4E2D\u521B\u5EFA <code>jsconfig.json</code>\uFF0C\u5E76\u7F16\u5199\u5982\u4E0B\u4EE3\u7801\uFF0C\u4E3A\u4E86\u8DEF\u5F84\u6709\u63D0\u793A</li></ol><div class="language-json ext-json line-numbers-mode"><pre class="language-json"><code><span class="token punctuation">{</span>
  <span class="token property">&quot;compilerOptions&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">&quot;baseUrl&quot;</span><span class="token operator">:</span> <span class="token string">&quot;./&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;paths&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token property">&quot;@/*&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&quot;src/*&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
      <span class="token property">&quot;@scss/*&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&quot;src/assets/styles/*&quot;</span><span class="token punctuation">]</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="\u914D\u7F6E\u89C6\u53E3\u5355\u4F4D\u63D2\u4EF6" tabindex="-1"><a class="header-anchor" href="#\u914D\u7F6E\u89C6\u53E3\u5355\u4F4D\u63D2\u4EF6" aria-hidden="true">#</a> \u914D\u7F6E\u89C6\u53E3\u5355\u4F4D\u63D2\u4EF6</h2><blockquote><p>\u76EE\u6807\uFF1A\u901A\u8FC7 webpack \u63D2\u4EF6\u5C06 px \u5355\u4F4D\u81EA\u52A8\u8F6C\u6362\u6210\u89C6\u53E3\u957F\u5EA6\u5355\u4F4D vw/vh\uFF0C\u5B9E\u73B0\u9875\u9762\u5BF9\u4E0D\u540C\u5C4F\u5E55\u7684\u81EA\u52A8\u9002\u914D</p></blockquote><p>\u5B9E\u73B0\u601D\u8DEF\uFF1A</p><p>\u4F7F\u7528 <code>postcss-px-to-viewport</code> \u63D2\u4EF6\uFF0C\u53EF\u8BA9\u6211\u4EEC\u76F4\u63A5\u5728\u4EE3\u7801\u4E2D\u6309\u8BBE\u8BA1\u7A3F\u7684 px \u503C\u6765\u7F16\u5199\u5143\u7D20\u5C3A\u5BF8\uFF0C\u5B83\u4EEC\u6700\u7EC8\u4F1A\u81EA\u52A8\u8F6C\u6362\u6210 vw/vh \u957F\u5EA6\u5355\u4F4D\u3002</p><p><strong>\u64CD\u4F5C\u6B65\u9AA4</strong></p><ol><li>\u5B89\u88C5 <code>postcss-px-to-viewport</code></li></ol><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token function">yarn</span> <span class="token function">add</span> postcss-px-to-viewport -D
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><ol start="2"><li>\u5728 <code>config-overrides.js</code> \u4E2D\u6DFB\u52A0\u914D\u7F6E\u4EE3\u7801\uFF1A</li></ol><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">const</span> path <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#39;path&#39;</span><span class="token punctuation">)</span>
<span class="token keyword">const</span> <span class="token punctuation">{</span> override<span class="token punctuation">,</span> addWebpackAlias<span class="token punctuation">,</span> addPostcssPlugins <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#39;customize-cra&#39;</span><span class="token punctuation">)</span>
<span class="token keyword">const</span> px2viewport <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#39;postcss-px-to-viewport&#39;</span><span class="token punctuation">)</span>

<span class="token comment">// \u914D\u7F6E\u8DEF\u5F84\u522B\u540D</span>
<span class="token comment">// ...</span>

<span class="token comment">// \u914D\u7F6E PostCSS \u6837\u5F0F\u8F6C\u6362\u63D2\u4EF6</span>
<span class="token keyword">const</span> postcssPlugins <span class="token operator">=</span> <span class="token function">addPostcssPlugins</span><span class="token punctuation">(</span><span class="token punctuation">[</span>
  <span class="token comment">// \u79FB\u52A8\u7AEF\u5E03\u5C40 viewport \u9002\u914D\u65B9\u6848</span>
  <span class="token function">px2viewport</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    <span class="token comment">// \u89C6\u53E3\u5BBD\u5EA6\uFF1A\u53EF\u4EE5\u8BBE\u7F6E\u4E3A\u8BBE\u8BA1\u7A3F\u7684\u5BBD\u5EA6</span>
    <span class="token literal-property property">viewportWidth</span><span class="token operator">:</span> <span class="token number">375</span><span class="token punctuation">,</span>
    <span class="token comment">// \u767D\u540D\u5355\uFF1A\u4E0D\u9700\u5BF9\u5176\u4E2D\u7684 px \u5355\u4F4D\u8F6C\u6210 vw \u7684\u6837\u5F0F\u7C7B\u7C7B\u540D</span>
    <span class="token comment">// selectorBlackList: [&#39;.ignore&#39;, &#39;.hairlines&#39;]</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">]</span><span class="token punctuation">)</span>

<span class="token comment">// \u5BFC\u51FA\u8981\u8FDB\u884C\u8986\u76D6\u7684 webpack \u914D\u7F6E</span>
module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token function">override</span><span class="token punctuation">(</span>alias<span class="token punctuation">,</span> postcssPlugins<span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="\u914D\u7F6E\u8DEF\u7531\u7BA1\u7406\u5668" tabindex="-1"><a class="header-anchor" href="#\u914D\u7F6E\u8DEF\u7531\u7BA1\u7406\u5668" aria-hidden="true">#</a> \u914D\u7F6E\u8DEF\u7531\u7BA1\u7406\u5668</h2><blockquote><p>\u76EE\u6807\uFF1A\u5B89\u88C5 react-router-dom\uFF0C\u521B\u5EFA App \u6839\u7EC4\u4EF6\u5E76\u5728\u8BE5\u7EC4\u4EF6\u4E2D\u914D\u7F6E\u8DEF\u7531</p></blockquote><p><strong>\u64CD\u4F5C\u6B65\u9AA4</strong></p><ol><li>\u5B89\u88C5 <code>react-router-dom</code></li></ol><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token function">yarn</span> <span class="token function">add</span> react-router-dom
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><ol start="2"><li>\u521B\u5EFA\u4E24\u4E2A\u7EC4\u4EF6</li></ol><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>pages/Home/index.js
pages/Login/index.js
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><ol start="3"><li>\u521B\u5EFA <code>App.js</code>\uFF0C\u7F16\u5199\u6839\u7EC4\u4EF6\uFF1A</li></ol><div class="language-jsx ext-jsx line-numbers-mode"><pre class="language-jsx"><code><span class="token keyword">import</span> React<span class="token punctuation">,</span> <span class="token punctuation">{</span> Suspense <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;react&#39;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span>
  BrowserRouter <span class="token keyword">as</span> Router<span class="token punctuation">,</span>
  Route<span class="token punctuation">,</span>
  Switch<span class="token punctuation">,</span>
  Redirect<span class="token punctuation">,</span>
<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;react-router-dom&#39;</span>
<span class="token keyword">import</span> <span class="token string">&#39;./App.scss&#39;</span>
<span class="token keyword">const</span> Login <span class="token operator">=</span> React<span class="token punctuation">.</span><span class="token function">lazy</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">import</span><span class="token punctuation">(</span><span class="token string">&#39;@/pages/Login&#39;</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token keyword">const</span> Home <span class="token operator">=</span> React<span class="token punctuation">.</span><span class="token function">lazy</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">import</span><span class="token punctuation">(</span><span class="token string">&#39;@/pages/Home&#39;</span><span class="token punctuation">)</span><span class="token punctuation">)</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">function</span> <span class="token function">App</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token punctuation">(</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Router</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">className</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>app<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
        </span><span class="token punctuation">{</span><span class="token comment">/* &lt;Link to=&quot;/login&quot;&gt;\u767B\u5F55&lt;/Link&gt;
        &lt;Link to=&quot;/home&quot;&gt;\u9996\u9875&lt;/Link&gt; */</span><span class="token punctuation">}</span><span class="token plain-text">
        </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Suspense</span></span> <span class="token attr-name">fallback</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">loading...</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">}</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
          </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Switch</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
            </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Redirect</span></span> <span class="token attr-name">exact</span> <span class="token attr-name">from</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>/<span class="token punctuation">&quot;</span></span> <span class="token attr-name">to</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>/home<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">Redirect</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
            </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Route</span></span> <span class="token attr-name">path</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>/login<span class="token punctuation">&quot;</span></span> <span class="token attr-name">component</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>Login<span class="token punctuation">}</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">Route</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
            </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Route</span></span> <span class="token attr-name">path</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>/home<span class="token punctuation">&quot;</span></span> <span class="token attr-name">component</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>Home<span class="token punctuation">}</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">Route</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
          </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">Switch</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
        </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">Suspense</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">Router</span></span><span class="token punctuation">&gt;</span></span>
  <span class="token punctuation">)</span>
<span class="token punctuation">}</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="\u914D\u7F6E-redux" tabindex="-1"><a class="header-anchor" href="#\u914D\u7F6E-redux" aria-hidden="true">#</a> \u914D\u7F6E Redux</h2><blockquote><p>\u76EE\u6807\uFF1A\u5B89\u88C5 <code>redux</code> \u548C <code>redux-thunk</code> \u76F8\u5173\u7684\u4F9D\u8D56\u5305\uFF0C\u5E76\u521B\u5EFA Redux Store \u5B9E\u4F8B\u540E\u5173\u8054\u5230\u5E94\u7528\u4E0A</p></blockquote><p>\u6240\u8981\u7528\u5230\u7684\u4F9D\u8D56\u5305\uFF1A</p><ul><li>redux</li><li>react-redux</li><li>redux-thunk</li><li>redux-devtools-extension</li></ul><p><strong>\u64CD\u4F5C\u6B65\u9AA4</strong></p><ol><li>\u5B89\u88C5\u4F9D\u8D56\u5305</li></ol><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token function">yarn</span> <span class="token function">add</span> redux react-redux redux-thunk redux-devtools-extension
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><ol start="2"><li><p>\u521B\u5EFA <code>store</code> \u76EE\u5F55\u53CA\u5B83\u7684\u5B50\u76EE\u5F55 <code>actions</code>\u3001<code>reducers</code>\uFF0C\u4E13\u95E8\u5B58\u653E redux \u76F8\u5173\u4EE3\u7801</p></li><li><p>\u521B\u5EFA <code>store/reducers/index.js</code>\uFF0C\u7528\u6765\u4F5C\u4E3A\u7EC4\u5408\u6240\u6709 reducers \u7684\u4E3B\u5165\u53E3\uFF1A</p></li></ol><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> combineReducers <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;redux&#39;</span>

<span class="token comment">// \u7EC4\u5408\u5404\u4E2A reducer \u51FD\u6570\uFF0C\u6210\u4E3A\u4E00\u4E2A\u6839 reducer</span>
<span class="token keyword">const</span> rootReducer <span class="token operator">=</span> <span class="token function">combineReducers</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token comment">// \u4E00\u4E2A\u6D4B\u8BD5\u7528\u7684 reducer\uFF0C\u907F\u514D\u8FD0\u884C\u65F6\u56E0\u6CA1\u6709 reducer \u800C\u62A5\u9519</span>
  <span class="token function-variable function">test</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token parameter">state <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span> action</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">(</span>state<span class="token punctuation">)</span>

  <span class="token comment">// \u5728\u8FD9\u91CC\u914D\u7F6E\u6709\u6240\u7684 reducer ...</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token comment">// \u5BFC\u51FA\u6839 reducer</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> rootReducer
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ol start="4"><li>\u521B\u5EFA <code>store/index.js</code>\uFF0C\u7F16\u5199 Redux Store \u5B9E\u4F8B\uFF1A</li></ol><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> applyMiddleware<span class="token punctuation">,</span> createStore <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;redux&#39;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> composeWithDevTools <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;redux-devtools-extension&#39;</span>
<span class="token keyword">import</span> thunk <span class="token keyword">from</span> <span class="token string">&#39;redux-thunk&#39;</span>
<span class="token keyword">import</span> rootReducer <span class="token keyword">from</span> <span class="token string">&#39;./reducers&#39;</span>

<span class="token comment">// \u521B\u5EFA Store \u5B9E\u4F8B</span>
<span class="token keyword">const</span> store <span class="token operator">=</span> <span class="token function">createStore</span><span class="token punctuation">(</span>
  <span class="token comment">// \u53C2\u6570\u4E00\uFF1A\u6839 reducer</span>
  rootReducer<span class="token punctuation">,</span>

  <span class="token comment">// \u53C2\u6570\u4E8C\uFF1A\u521D\u59CB\u5316\u65F6\u8981\u52A0\u8F7D\u7684\u72B6\u6001</span>
  <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span>

  <span class="token comment">// \u53C2\u6570\u4E09\uFF1A\u589E\u5F3A\u5668</span>
  <span class="token function">composeWithDevTools</span><span class="token punctuation">(</span>
    <span class="token function">applyMiddleware</span><span class="token punctuation">(</span>thunk<span class="token punctuation">)</span>
  <span class="token punctuation">)</span>
<span class="token punctuation">)</span>

<span class="token comment">// \u5BFC\u51FA Store \u5B9E\u4F8B</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> store
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ol start="5"><li>\u5728\u4E3B\u5165\u53E3 <code>index.js</code> \u4E2D\uFF0C\u914D\u7F6E Redux Provider</li></ol><div class="language-jsx ext-jsx line-numbers-mode"><pre class="language-jsx"><code><span class="token keyword">import</span> <span class="token string">&#39;@scss/index.scss&#39;</span>
<span class="token keyword">import</span> React <span class="token keyword">from</span> <span class="token string">&#39;react&#39;</span>
<span class="token keyword">import</span> ReactDOM <span class="token keyword">from</span> <span class="token string">&#39;react-dom&#39;</span>
<span class="token keyword">import</span> App <span class="token keyword">from</span> <span class="token string">&#39;./App&#39;</span>
<span class="token keyword">import</span> store <span class="token keyword">from</span> <span class="token string">&#39;@/store&#39;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> Provider <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;react-redux&#39;</span>

ReactDOM<span class="token punctuation">.</span><span class="token function">render</span><span class="token punctuation">(</span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Provider</span></span> <span class="token attr-name">store</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>store<span class="token punctuation">}</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">App</span></span> <span class="token punctuation">/&gt;</span></span><span class="token plain-text">
  </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">Provider</span></span><span class="token punctuation">&gt;</span></span><span class="token punctuation">,</span>
  document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">&#39;root&#39;</span><span class="token punctuation">)</span>
<span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h1 id="\u767B\u5F55\u9875\u9762" tabindex="-1"><a class="header-anchor" href="#\u767B\u5F55\u9875\u9762" aria-hidden="true">#</a> \u767B\u5F55\u9875\u9762</h1><p><img src="https://wuxiaohui-1254415986.cos.ap-nanjing.myqcloud.com/2022/01/30/image20210906163210003.png" alt="image-20210906163210003" loading="lazy"></p><h2 id="\u5B57\u4F53\u56FE\u6807\u7684\u57FA\u672C\u4F7F\u7528" tabindex="-1"><a class="header-anchor" href="#\u5B57\u4F53\u56FE\u6807\u7684\u57FA\u672C\u4F7F\u7528" aria-hidden="true">#</a> \u5B57\u4F53\u56FE\u6807\u7684\u57FA\u672C\u4F7F\u7528</h2><ol><li>\u5982\u679C\u4F7F\u7528class\u7C7B\u540D\u7684\u65B9\u5F0F\uFF0C\u5F69\u8272\u56FE\u6807\u65E0\u6CD5\u751F\u6548</li><li>\u53EF\u4EE5\u901A\u8FC7js\u7684\u65B9\u5F0F\u6765\u4F7F\u7528\u56FE\u6807</li></ol><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>1. \u5F15\u5165js
&lt;script src=&quot;//at.alicdn.com/t/font_2791161_ymhdfblw14.js&quot;&gt;&lt;/script&gt;

2. \u6837\u5F0F
/* \u5B57\u4F53\u56FE\u6807 */
.icon {
  width: 1em;
  height: 1em;
  vertical-align: -0.15em;
  fill: currentColor;
  overflow: hidden;
}


3. \u4F7F\u7528
&lt;svg className=&quot;icon&quot; aria-hidden=&quot;true&quot;&gt;
  &lt;use xlinkHref=&quot;#icon-mianxingfeizhunan&quot;&gt;&lt;/use&gt;
&lt;/svg&gt;
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="\u5C01\u88C5-svg-\u56FE\u6807\u5C0F\u7EC4\u4EF6" tabindex="-1"><a class="header-anchor" href="#\u5C01\u88C5-svg-\u56FE\u6807\u5C0F\u7EC4\u4EF6" aria-hidden="true">#</a> \u5C01\u88C5 svg \u56FE\u6807\u5C0F\u7EC4\u4EF6</h2>`,54),I={href:"//at.alicdn.com/t/font_2503709_f4q9dl3hktl.js",target:"_blank",rel:"noopener noreferrer"},C=s("//at.alicdn.com/t/font_2503709_f4q9dl3hktl.js"),T=p(`<blockquote><p>\u76EE\u6807\uFF1A\u5B9E\u73B0\u4E00\u4E2A\u7528\u4E8E\u5728\u9875\u9762\u4E0A\u663E\u793A svg \u5C0F\u56FE\u6807\u7684\u7EC4\u4EF6\uFF0C\u65B9\u4FBF\u540E\u7EED\u5F00\u53D1\u4E2D\u4E3A\u754C\u9762\u6DFB\u52A0\u5C0F\u56FE\u6807</p></blockquote><p><img src="https://wuxiaohui-1254415986.cos.ap-nanjing.myqcloud.com/2022/01/30/image20210905204352596.png" alt="image-20210905204352596" loading="lazy"></p><p>\u5B9E\u73B0\u601D\u8DEF\uFF1A</p><ul><li>\u5728\u7EC4\u4EF6\u4E2D\uFF0C\u8F93\u51FA\u4E00\u6BB5\u4F7F\u7528 <code>&lt;use&gt;</code> \u6807\u7B7E\u5F15\u7528\u4E8B\u5148\u51C6\u5907\u597D\u7684 SVG \u56FE\u7247\u8D44\u6E90\u7684 <code>&lt;svg&gt;</code> \u4EE3\u7801</li><li>\u7EC4\u4EF6\u9700\u8981\u4F20\u5165 SVG \u56FE\u7247\u7684\u540D\u5B57\uFF0C\u7528\u6765\u663E\u793A\u4E0D\u540C\u7684\u56FE\u6807</li><li>\u7EC4\u4EF6\u53EF\u4EE5\u8BBE\u7F6E\u989D\u5916\u7684\u6837\u5F0F\u7C7B\u540D\u3001\u53CA\u70B9\u51FB\u4E8B\u4EF6\u76D1\u542C</li></ul><p><strong>\u64CD\u4F5C\u6B65\u9AA4</strong></p><ol><li>\u5B89\u88C5 <code>classnames</code> \uFF0C\u8F85\u52A9\u7EC4\u4EF6\u7684\u5F00\u53D1</li></ol><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token function">yarn</span> <span class="token function">add</span> classnames
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><ol start="2"><li>\u5728 <code>public/index.html</code> \u4E2D\u5F15\u5165 svg \u56FE\u6807\u8D44\u6E90\uFF1A</li></ol><div class="language-html ext-html line-numbers-mode"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>//at.alicdn.com/t/font_2503709_f4q9dl3hktl.js<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><ol start="3"><li>\u521B\u5EFA <code>components/Icon/index.js</code> \uFF0C\u7F16\u5199\u56FE\u6807\u7EC4\u4EF6\uFF1A</li></ol><div class="language-jsx ext-jsx line-numbers-mode"><pre class="language-jsx"><code><span class="token keyword">import</span> React <span class="token keyword">from</span> <span class="token string">&#39;react&#39;</span>
<span class="token keyword">import</span> classNames <span class="token keyword">from</span> <span class="token string">&#39;classnames&#39;</span>
<span class="token keyword">import</span> PropTypes <span class="token keyword">from</span> <span class="token string">&#39;prop-types&#39;</span>
<span class="token comment">// \`\`</span>
<span class="token keyword">function</span> <span class="token function">Icon</span><span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> type<span class="token punctuation">,</span> className<span class="token punctuation">,</span> <span class="token operator">...</span>rest <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token punctuation">(</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>svg</span> <span class="token spread"><span class="token punctuation">{</span><span class="token operator">...</span>rest<span class="token punctuation">}</span></span> <span class="token attr-name">className</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token function">classNames</span><span class="token punctuation">(</span><span class="token string">&#39;icon&#39;</span><span class="token punctuation">,</span> className<span class="token punctuation">)</span><span class="token punctuation">}</span></span> <span class="token attr-name">aria-hidden</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>true<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>use</span> <span class="token attr-name">xlinkHref</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token template-string"><span class="token template-punctuation string">\`</span><span class="token string">#</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">\${</span>type<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">\`</span></span><span class="token punctuation">}</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>use</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>svg</span><span class="token punctuation">&gt;</span></span>
  <span class="token punctuation">)</span>
<span class="token punctuation">}</span>
Icon<span class="token punctuation">.</span>propTypes <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">type</span><span class="token operator">:</span> PropTypes<span class="token punctuation">.</span>string<span class="token punctuation">.</span>isRequired<span class="token punctuation">,</span>
<span class="token punctuation">}</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> Icon

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ol start="4"><li>\u6D4B\u8BD5\u7EC4\u4EF6\uFF0C\u786E\u8BA4\u80FD\u5426\u6B63\u786E\u663E\u793A\u51FA\u56FE\u6807</li></ol><div class="language-jsx ext-jsx line-numbers-mode"><pre class="language-jsx"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Icon</span></span> 
  <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>iconbtn_share<span class="token punctuation">&quot;</span></span> 
  <span class="token attr-name">className</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>test-icon<span class="token punctuation">&quot;</span></span> 
  <span class="token attr-name">onClick</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span> <span class="token function">alert</span><span class="token punctuation">(</span><span class="token string">&#39;clicked&#39;</span><span class="token punctuation">)</span> <span class="token punctuation">}</span><span class="token punctuation">}</span></span> 
  <span class="token punctuation">/&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="\u5B9E\u73B0\u9876\u90E8\u5BFC\u822A\u680F\u7EC4\u4EF6" tabindex="-1"><a class="header-anchor" href="#\u5B9E\u73B0\u9876\u90E8\u5BFC\u822A\u680F\u7EC4\u4EF6" aria-hidden="true">#</a> \u5B9E\u73B0\u9876\u90E8\u5BFC\u822A\u680F\u7EC4\u4EF6</h2><ul><li>\u57FA\u7840\u7ED3\u6784</li></ul><div class="language-jsx ext-jsx line-numbers-mode"><pre class="language-jsx"><code><span class="token keyword">import</span> React <span class="token keyword">from</span> <span class="token string">&#39;react&#39;</span>
<span class="token keyword">import</span> Icon <span class="token keyword">from</span> <span class="token string">&#39;@/components/Icon&#39;</span>
<span class="token keyword">import</span> styles <span class="token keyword">from</span> <span class="token string">&#39;./index.module.scss&#39;</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">function</span> <span class="token function">Login</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token punctuation">(</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">className</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>styles<span class="token punctuation">.</span>root<span class="token punctuation">}</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
      </span><span class="token punctuation">{</span><span class="token comment">/* \u540E\u9000\u6309\u94AE */</span><span class="token punctuation">}</span><span class="token plain-text">
      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">className</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>left<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
        </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Icon</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>iconfanhui<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span><span class="token plain-text">
      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
      </span><span class="token punctuation">{</span><span class="token comment">/* \u5C45\u4E2D\u6807\u9898 */</span><span class="token punctuation">}</span><span class="token plain-text">
      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">className</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>title<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">\u6211\u662F\u6807\u9898</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">

      </span><span class="token punctuation">{</span><span class="token comment">/* \u53F3\u4FA7\u5185\u5BB9 */</span><span class="token punctuation">}</span><span class="token plain-text">
      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">className</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>right<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">\u53F3\u4FA7\u5185\u5BB9</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
  <span class="token punctuation">)</span>
<span class="token punctuation">}</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>\u6837\u5F0F</li></ul><div class="language-jsx ext-jsx line-numbers-mode"><pre class="language-jsx"><code><span class="token punctuation">.</span>root <span class="token punctuation">{</span>
  <span class="token literal-property property">position</span><span class="token operator">:</span> relative<span class="token punctuation">;</span>
  <span class="token literal-property property">display</span><span class="token operator">:</span> flex<span class="token punctuation">;</span>
  align<span class="token operator">-</span>items<span class="token operator">:</span> center<span class="token punctuation">;</span>
  <span class="token literal-property property">height</span><span class="token operator">:</span> 46px<span class="token punctuation">;</span>
  <span class="token literal-property property">width</span><span class="token operator">:</span> <span class="token number">100</span><span class="token operator">%</span><span class="token punctuation">;</span>
  <span class="token comment">// padding: 0 42px;</span>
  background<span class="token operator">-</span>color<span class="token operator">:</span> #fff<span class="token punctuation">;</span>
  border<span class="token operator">-</span>bottom<span class="token operator">:</span> 1px solid #ccc<span class="token punctuation">;</span>

  <span class="token operator">:</span>global <span class="token punctuation">{</span>
    <span class="token punctuation">.</span>left <span class="token punctuation">{</span>
      <span class="token literal-property property">padding</span><span class="token operator">:</span> <span class="token number">0</span> 12px <span class="token number">0</span> 16px<span class="token punctuation">;</span>
      line<span class="token operator">-</span>height<span class="token operator">:</span> 46px<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token punctuation">.</span>icon <span class="token punctuation">{</span>
      font<span class="token operator">-</span>size<span class="token operator">:</span> 16px<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token punctuation">.</span>title <span class="token punctuation">{</span>
      <span class="token literal-property property">flex</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">;</span>
      <span class="token literal-property property">margin</span><span class="token operator">:</span> <span class="token number">0</span> auto<span class="token punctuation">;</span>
      <span class="token literal-property property">color</span><span class="token operator">:</span> #<span class="token number">323233</span><span class="token punctuation">;</span>
      font<span class="token operator">-</span>weight<span class="token operator">:</span> <span class="token number">500</span><span class="token punctuation">;</span>
      font<span class="token operator">-</span>size<span class="token operator">:</span> 16px<span class="token punctuation">;</span>
      text<span class="token operator">-</span>align<span class="token operator">:</span> center<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token punctuation">.</span>right <span class="token punctuation">{</span>
      padding<span class="token operator">-</span>right<span class="token operator">:</span> 16px<span class="token punctuation">;</span>
      <span class="token comment">// position: absolute;</span>
      <span class="token comment">// right: 16px;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="\u79FB\u52A8\u7AEF-1px-\u50CF\u7D20\u8FB9\u6846" tabindex="-1"><a class="header-anchor" href="#\u79FB\u52A8\u7AEF-1px-\u50CF\u7D20\u8FB9\u6846" aria-hidden="true">#</a> \u79FB\u52A8\u7AEF 1px \u50CF\u7D20\u8FB9\u6846</h2>`,19),L={href:"https://github.com/ant-design/ant-design-mobile/blob/v2/components/style/mixins/hairline.less",target:"_blank",rel:"noopener noreferrer"},S=s("\u53C2\u8003 antd-mobile \u7684\u5B9E\u73B0"),A={href:"https://juejin.cn/post/6994196887402184734",target:"_blank",rel:"noopener noreferrer"},P=s("\u5B9E\u73B0\u65B9\u5F0F\u53C2\u8003"),z=n("li",null,[s("\u5B9E\u73B0\u539F\u7406\uFF1A"),n("strong",null,"\u4F2A\u5143\u7D20 + transform \u7F29\u653E"),n("ul",null,[n("li",null,[s("\u4F2A\u5143\u7D20"),n("code",null,"::after"),s("\u6216"),n("code",null,"::before"),s("\u72EC\u7ACB\u4E8E\u5F53\u524D\u5143\u7D20\uFF0C\u53EF\u4EE5\u5355\u72EC\u5BF9\u5176\u7F29\u653E\u800C\u4E0D\u5F71\u54CD\u5143\u7D20\u672C\u8EAB\u7684\u7F29\u653E")])])],-1),E=p(`<div class="language-scss ext-scss line-numbers-mode"><pre class="language-scss"><code><span class="token comment">// src/assets/styles/hairline.scss</span>

<span class="token keyword">@mixin</span> <span class="token function">scale-hairline-common</span><span class="token punctuation">(</span><span class="token variable">$color</span><span class="token punctuation">,</span> <span class="token variable">$top</span><span class="token punctuation">,</span> <span class="token variable">$right</span><span class="token punctuation">,</span> <span class="token variable">$bottom</span><span class="token punctuation">,</span> <span class="token variable">$left</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token property">content</span><span class="token punctuation">:</span> <span class="token string">&#39;&#39;</span><span class="token punctuation">;</span>
  <span class="token property">position</span><span class="token punctuation">:</span> absolute<span class="token punctuation">;</span>
  <span class="token property">display</span><span class="token punctuation">:</span> block<span class="token punctuation">;</span>
  <span class="token property">z-index</span><span class="token punctuation">:</span> 1<span class="token punctuation">;</span>
  <span class="token property">top</span><span class="token punctuation">:</span> <span class="token variable">$top</span><span class="token punctuation">;</span>
  <span class="token property">right</span><span class="token punctuation">:</span> <span class="token variable">$right</span><span class="token punctuation">;</span>
  <span class="token property">bottom</span><span class="token punctuation">:</span> <span class="token variable">$bottom</span><span class="token punctuation">;</span>
  <span class="token property">left</span><span class="token punctuation">:</span> <span class="token variable">$left</span><span class="token punctuation">;</span>
  <span class="token property">background-color</span><span class="token punctuation">:</span> <span class="token variable">$color</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">// \u6DFB\u52A0\u8FB9\u6846</span>
<span class="token comment">/* 
  \u7528\u6CD5\uFF1A

  // \u5BFC\u5165
  @import &#39;@scss/hairline.scss&#39;;

  // \u5728\u7C7B\u4E2D\u4F7F\u7528
  .a {
    @include hairline(bottom, #f0f0f0);
  }
*/</span>
<span class="token keyword">@mixin</span> <span class="token function">hairline</span><span class="token punctuation">(</span><span class="token variable">$direction</span><span class="token punctuation">,</span> <span class="token property"><span class="token variable">$color</span></span><span class="token punctuation">:</span> #000<span class="token punctuation">,</span> <span class="token property"><span class="token variable">$radius</span></span><span class="token punctuation">:</span> 0<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">@if</span> <span class="token selector"><span class="token variable">$direction</span> == top </span><span class="token punctuation">{</span>
    <span class="token property">border-top</span><span class="token punctuation">:</span> 1px solid <span class="token variable">$color</span><span class="token punctuation">;</span>

    <span class="token comment">// min-resolution \u7528\u6765\u68C0\u6D4B\u8BBE\u5907\u7684\u6700\u5C0F\u50CF\u7D20\u5BC6\u5EA6</span>
    <span class="token atrule"><span class="token rule">@media</span> <span class="token punctuation">(</span><span class="token property">min-resolution</span><span class="token punctuation">:</span> 2dppx<span class="token punctuation">)</span></span> <span class="token punctuation">{</span>
      <span class="token property">border-top</span><span class="token punctuation">:</span> none<span class="token punctuation">;</span>

      <span class="token selector"><span class="token parent important">&amp;</span>::before </span><span class="token punctuation">{</span>
        <span class="token keyword">@include</span> <span class="token function">scale-hairline-common</span><span class="token punctuation">(</span><span class="token variable">$color</span><span class="token punctuation">,</span> 0<span class="token punctuation">,</span> auto<span class="token punctuation">,</span> auto<span class="token punctuation">,</span> 0<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token property">width</span><span class="token punctuation">:</span> 100%<span class="token punctuation">;</span>
        <span class="token property">height</span><span class="token punctuation">:</span> 1px<span class="token punctuation">;</span>
        <span class="token property">transform-origin</span><span class="token punctuation">:</span> 50% 50%<span class="token punctuation">;</span>
        <span class="token property">transform</span><span class="token punctuation">:</span> <span class="token function">scaleY</span><span class="token punctuation">(</span>0.5<span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token atrule"><span class="token rule">@media</span> <span class="token punctuation">(</span><span class="token property">min-resolution</span><span class="token punctuation">:</span> 3dppx<span class="token punctuation">)</span></span> <span class="token punctuation">{</span>
          <span class="token property">transform</span><span class="token punctuation">:</span> <span class="token function">scaleY</span><span class="token punctuation">(</span>0.33<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span> <span class="token keyword">@else if</span> <span class="token selector"><span class="token variable">$direction</span> == right </span><span class="token punctuation">{</span>
    <span class="token property">border-right</span><span class="token punctuation">:</span> 1px solid <span class="token variable">$color</span><span class="token punctuation">;</span>

    <span class="token atrule"><span class="token rule">@media</span> <span class="token punctuation">(</span><span class="token property">min-resolution</span><span class="token punctuation">:</span> 2dppx<span class="token punctuation">)</span></span> <span class="token punctuation">{</span>
      <span class="token property">border-right</span><span class="token punctuation">:</span> none<span class="token punctuation">;</span>

      <span class="token selector"><span class="token parent important">&amp;</span>::after </span><span class="token punctuation">{</span>
        <span class="token keyword">@include</span> <span class="token function">scale-hairline-common</span><span class="token punctuation">(</span><span class="token variable">$color</span><span class="token punctuation">,</span> 0<span class="token punctuation">,</span> 0<span class="token punctuation">,</span> auto<span class="token punctuation">,</span> auto<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token property">width</span><span class="token punctuation">:</span> 1px<span class="token punctuation">;</span>
        <span class="token property">height</span><span class="token punctuation">:</span> 100%<span class="token punctuation">;</span>
        <span class="token property">background</span><span class="token punctuation">:</span> <span class="token variable">$color</span><span class="token punctuation">;</span>
        <span class="token property">transform-origin</span><span class="token punctuation">:</span> 100% 50%<span class="token punctuation">;</span>
        <span class="token property">transform</span><span class="token punctuation">:</span> <span class="token function">scaleX</span><span class="token punctuation">(</span>0.5<span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token atrule"><span class="token rule">@media</span> <span class="token punctuation">(</span><span class="token property">min-resolution</span><span class="token punctuation">:</span> 3dppx<span class="token punctuation">)</span></span> <span class="token punctuation">{</span>
          <span class="token property">transform</span><span class="token punctuation">:</span> <span class="token function">scaleX</span><span class="token punctuation">(</span>0.33<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span> <span class="token keyword">@else if</span> <span class="token selector"><span class="token variable">$direction</span> == bottom </span><span class="token punctuation">{</span>
    <span class="token property">border-bottom</span><span class="token punctuation">:</span> 1px solid <span class="token variable">$color</span><span class="token punctuation">;</span>

    <span class="token atrule"><span class="token rule">@media</span> <span class="token punctuation">(</span><span class="token property">min-resolution</span><span class="token punctuation">:</span> 2dppx<span class="token punctuation">)</span></span> <span class="token punctuation">{</span>
      <span class="token property">border-bottom</span><span class="token punctuation">:</span> none<span class="token punctuation">;</span>

      <span class="token selector"><span class="token parent important">&amp;</span>::after </span><span class="token punctuation">{</span>
        <span class="token keyword">@include</span> <span class="token function">scale-hairline-common</span><span class="token punctuation">(</span><span class="token variable">$color</span><span class="token punctuation">,</span> auto<span class="token punctuation">,</span> auto<span class="token punctuation">,</span> 0<span class="token punctuation">,</span> 0<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token property">width</span><span class="token punctuation">:</span> 100%<span class="token punctuation">;</span>
        <span class="token property">height</span><span class="token punctuation">:</span> 1px<span class="token punctuation">;</span>
        <span class="token property">transform-origin</span><span class="token punctuation">:</span> 50% 100%<span class="token punctuation">;</span>
        <span class="token property">transform</span><span class="token punctuation">:</span> <span class="token function">scaleY</span><span class="token punctuation">(</span>0.5<span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token atrule"><span class="token rule">@media</span> <span class="token punctuation">(</span><span class="token property">min-resolution</span><span class="token punctuation">:</span> 3dppx<span class="token punctuation">)</span></span> <span class="token punctuation">{</span>
          <span class="token property">transform</span><span class="token punctuation">:</span> <span class="token function">scaleY</span><span class="token punctuation">(</span>0.33<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span> <span class="token keyword">@else if</span> <span class="token selector"><span class="token variable">$direction</span> == left </span><span class="token punctuation">{</span>
    <span class="token property">border-left</span><span class="token punctuation">:</span> 1px solid <span class="token variable">$color</span><span class="token punctuation">;</span>

    <span class="token atrule"><span class="token rule">@media</span> <span class="token punctuation">(</span><span class="token property">min-resolution</span><span class="token punctuation">:</span> 2dppx<span class="token punctuation">)</span></span> <span class="token punctuation">{</span>
      <span class="token property">border-left</span><span class="token punctuation">:</span> none<span class="token punctuation">;</span>

      <span class="token selector"><span class="token parent important">&amp;</span>::before </span><span class="token punctuation">{</span>
        <span class="token keyword">@include</span> <span class="token function">scale-hairline-common</span><span class="token punctuation">(</span><span class="token variable">$color</span><span class="token punctuation">,</span> 0<span class="token punctuation">,</span> auto<span class="token punctuation">,</span> auto<span class="token punctuation">,</span> 0<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token property">width</span><span class="token punctuation">:</span> 1px<span class="token punctuation">;</span>
        <span class="token property">height</span><span class="token punctuation">:</span> 100%<span class="token punctuation">;</span>
        <span class="token property">transform-origin</span><span class="token punctuation">:</span> 100% 50%<span class="token punctuation">;</span>
        <span class="token property">transform</span><span class="token punctuation">:</span> <span class="token function">scaleX</span><span class="token punctuation">(</span>0.5<span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token atrule"><span class="token rule">@media</span> <span class="token punctuation">(</span><span class="token property">min-resolution</span><span class="token punctuation">:</span> 3dppx<span class="token punctuation">)</span></span> <span class="token punctuation">{</span>
          <span class="token property">transform</span><span class="token punctuation">:</span> <span class="token function">scaleX</span><span class="token punctuation">(</span>0.33<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span> <span class="token keyword">@else if</span> <span class="token selector"><span class="token variable">$direction</span> == all </span><span class="token punctuation">{</span>
    <span class="token property">border</span><span class="token punctuation">:</span> 1px solid <span class="token variable">$color</span><span class="token punctuation">;</span>
    <span class="token property">border-radius</span><span class="token punctuation">:</span> <span class="token variable">$radius</span><span class="token punctuation">;</span>

    <span class="token atrule"><span class="token rule">@media</span> <span class="token punctuation">(</span><span class="token property">min-resolution</span><span class="token punctuation">:</span> 2dppx<span class="token punctuation">)</span></span> <span class="token punctuation">{</span>
      <span class="token property">position</span><span class="token punctuation">:</span> relative<span class="token punctuation">;</span>
      <span class="token property">border</span><span class="token punctuation">:</span> none<span class="token punctuation">;</span>

      <span class="token selector"><span class="token parent important">&amp;</span>::before </span><span class="token punctuation">{</span>
        <span class="token property">content</span><span class="token punctuation">:</span> <span class="token string">&#39;&#39;</span><span class="token punctuation">;</span>
        <span class="token property">position</span><span class="token punctuation">:</span> absolute<span class="token punctuation">;</span>
        <span class="token property">left</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>
        <span class="token property">top</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>
        <span class="token property">width</span><span class="token punctuation">:</span> 200%<span class="token punctuation">;</span>
        <span class="token property">height</span><span class="token punctuation">:</span> 200%<span class="token punctuation">;</span>
        <span class="token property">border</span><span class="token punctuation">:</span> 1px solid <span class="token variable">$color</span><span class="token punctuation">;</span>
        <span class="token property">border-radius</span><span class="token punctuation">:</span> <span class="token variable">$radius</span> <span class="token operator">*</span> 2<span class="token punctuation">;</span>
        <span class="token property">transform-origin</span><span class="token punctuation">:</span> 0 0<span class="token punctuation">;</span>
        <span class="token property">transform</span><span class="token punctuation">:</span> <span class="token function">scale</span><span class="token punctuation">(</span>0.5<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token property">box-sizing</span><span class="token punctuation">:</span> border-box<span class="token punctuation">;</span>
        <span class="token property">pointer-events</span><span class="token punctuation">:</span> none<span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">// \u79FB\u9664\u8FB9\u6846</span>
<span class="token keyword">@mixin</span> <span class="token function">hairline-remove</span><span class="token punctuation">(</span><span class="token property"><span class="token variable">$position</span></span><span class="token punctuation">:</span> all<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">@if</span> <span class="token selector"><span class="token variable">$position</span> == left </span><span class="token punctuation">{</span>
    <span class="token property">border-left</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>
    <span class="token selector"><span class="token parent important">&amp;</span>::before </span><span class="token punctuation">{</span>
      <span class="token property">display</span><span class="token punctuation">:</span> none <span class="token important">!important</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span> <span class="token keyword">@else if</span> <span class="token selector"><span class="token variable">$position</span> == right </span><span class="token punctuation">{</span>
    <span class="token property">border-right</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>
    <span class="token selector"><span class="token parent important">&amp;</span>::after </span><span class="token punctuation">{</span>
      <span class="token property">display</span><span class="token punctuation">:</span> none <span class="token important">!important</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span> <span class="token keyword">@else if</span> <span class="token selector"><span class="token variable">$position</span> == top </span><span class="token punctuation">{</span>
    <span class="token property">border-top</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>
    <span class="token selector"><span class="token parent important">&amp;</span>::before </span><span class="token punctuation">{</span>
      <span class="token property">display</span><span class="token punctuation">:</span> none <span class="token important">!important</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span> <span class="token keyword">@else if</span> <span class="token selector"><span class="token variable">$position</span> == bottom </span><span class="token punctuation">{</span>
    <span class="token property">border-bottom</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>
    <span class="token selector"><span class="token parent important">&amp;</span>::after </span><span class="token punctuation">{</span>
      <span class="token property">display</span><span class="token punctuation">:</span> none <span class="token important">!important</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span> <span class="token keyword">@else if</span> <span class="token selector"><span class="token variable">$position</span> == all </span><span class="token punctuation">{</span>
    <span class="token property">border</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>
    <span class="token selector"><span class="token parent important">&amp;</span>::before </span><span class="token punctuation">{</span>
      <span class="token property">display</span><span class="token punctuation">:</span> none <span class="token important">!important</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token selector"><span class="token parent important">&amp;</span>::after </span><span class="token punctuation">{</span>
      <span class="token property">display</span><span class="token punctuation">:</span> none <span class="token important">!important</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>\u9700\u8981\u5BFC\u5165\u8FD9\u4E2Ascss</li></ul><div class="language-jsx ext-jsx line-numbers-mode"><pre class="language-jsx"><code><span class="token comment">// \u5BFC\u5165\u53E6\u4E00\u4E2Ascss\u6587\u4EF6</span>
@<span class="token keyword">import</span> <span class="token string">&#39;@scss/hiarline.scss&#39;</span><span class="token punctuation">;</span>
<span class="token punctuation">.</span>root <span class="token punctuation">{</span>
  <span class="token literal-property property">position</span><span class="token operator">:</span> relative<span class="token punctuation">;</span>
  <span class="token literal-property property">display</span><span class="token operator">:</span> flex<span class="token punctuation">;</span>
  align<span class="token operator">-</span>items<span class="token operator">:</span> center<span class="token punctuation">;</span>
  <span class="token literal-property property">height</span><span class="token operator">:</span> 46px<span class="token punctuation">;</span>
  <span class="token literal-property property">width</span><span class="token operator">:</span> <span class="token number">100</span><span class="token operator">%</span><span class="token punctuation">;</span>
  <span class="token comment">// padding: 0 42px;</span>
  background<span class="token operator">-</span>color<span class="token operator">:</span> #fff<span class="token punctuation">;</span>
  <span class="token comment">// border-bottom: 1px solid red;</span>
  @include <span class="token function">hairline</span><span class="token punctuation">(</span><span class="token string">&#39;bottom&#39;</span><span class="token punctuation">,</span> red<span class="token punctuation">)</span><span class="token punctuation">;</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="\u5B9E\u73B0\u9876\u90E8\u5BFC\u822A\u680F\u7EC4\u4EF6-\u5C01\u88C5" tabindex="-1"><a class="header-anchor" href="#\u5B9E\u73B0\u9876\u90E8\u5BFC\u822A\u680F\u7EC4\u4EF6-\u5C01\u88C5" aria-hidden="true">#</a> \u5B9E\u73B0\u9876\u90E8\u5BFC\u822A\u680F\u7EC4\u4EF6-\u5C01\u88C5</h2><blockquote><p>\u76EE\u6807\uFF1A\u5C01\u88C5\u9876\u90E8\u5BFC\u822A\u680F\u7EC4\u4EF6\uFF0C\u53EF\u4EE5\u7528\u6765\u663E\u793A\u9875\u9762\u6807\u9898\u3001\u540E\u9000\u6309\u94AE\u3001\u53CA\u6DFB\u52A0\u989D\u5916\u7684\u529F\u80FD\u533A\u57DF</p></blockquote><p>\u56FE\u4F8B\u4E00\uFF1A</p><img src="https://wuxiaohui-1254415986.cos.ap-nanjing.myqcloud.com/2022/01/30/image20210831163053705.png" alt="image-20210831163053705" style="zoom:30%;"><p>\u56FE\u4F8B\u4E8C\uFF1A</p><img src="https://wuxiaohui-1254415986.cos.ap-nanjing.myqcloud.com/2022/01/30/image20210831163126729.png" alt="image-20210831163126729" style="zoom:30%;"><p>\u56FE\u4F8B\u4E09\uFF1A</p><img src="https://wuxiaohui-1254415986.cos.ap-nanjing.myqcloud.com/2022/01/30/image20210831205954290.png" alt="image-20210831205954290" style="zoom:30%;"><p>\u5B9E\u73B0\u601D\u8DEF\uFF1A</p><ul><li>\u7EC4\u4EF6\u5E03\u5C40\u5206\u4E3A\uFF1A\u5DE6\u3001\u4E2D\u3001\u53F3\u4E09\u4E2A\u533A\u57DF</li><li>\u53EF\u901A\u8FC7\u7EC4\u4EF6\u5C5E\u6027\u4F20\u5165\u5185\u5BB9\uFF0C\u586B\u5145\u4E2D\u95F4\u548C\u53F3\u8FB9\u533A\u57DF</li><li>\u53EF\u4E3A\u5DE6\u8FB9\u7684\u201C\u540E\u9000\u201D\u6309\u94AE\u6DFB\u52A0\u4E8B\u4EF6\u76D1\u542C</li></ul><p><strong>\u64CD\u4F5C\u6B65\u9AA4</strong></p><ol><li>\u521B\u5EFA <code>components/NavBar/index.js</code>\uFF0C\u5E76\u5728\u8BE5\u76EE\u5F55\u62F7\u8D1D\u5165\u8D44\u6E90\u5305\u4E2D\u7684\u6837\u5F0F\u6587\u4EF6\uFF0C\u7136\u540E\u7F16\u5199\u7EC4\u4EF6\u4EE3\u7801\uFF1A</li></ol><div class="language-jsx ext-jsx line-numbers-mode"><pre class="language-jsx"><code><span class="token keyword">import</span> React <span class="token keyword">from</span> <span class="token string">&#39;react&#39;</span>
<span class="token keyword">import</span> Icon <span class="token keyword">from</span> <span class="token string">&#39;@/components/Icon&#39;</span>
<span class="token keyword">import</span> styles <span class="token keyword">from</span> <span class="token string">&#39;./index.module.scss&#39;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> useHistory <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;react-router&#39;</span>
<span class="token comment">// import { withRouter } from &#39;react-router-dom&#39;</span>
<span class="token comment">// 1. withRouter\u7684\u4F7F\u7528</span>
<span class="token comment">// history match location: \u8FD9\u4E2A\u7EC4\u4EF6\u5FC5\u987B\u662F\u901A\u8FC7\u8DEF\u7531\u914D\u7F6E\u7684  &lt;Route&gt;&lt;/Route&gt;</span>
<span class="token comment">// \u81EA\u5DF1\u6E32\u67D3\u7684\u7EC4\u4EF6\uFF0C\u65E0\u6CD5\u83B7\u53D6\u5230\u8DEF\u7531\u4FE1\u606F  &lt;NavBar&gt;&lt;/NavBar&gt;</span>

<span class="token comment">// 2. \u8DEF\u7531\u63D0\u4F9B\u4E86\u51E0\u4E2A\u548C\u8DEF\u7531\u76F8\u5173\u7684hook</span>
<span class="token comment">// useHistory  useLocation  useParams</span>
<span class="token keyword">function</span> <span class="token function">NavBar</span><span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> children<span class="token punctuation">,</span> extra <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> history <span class="token operator">=</span> <span class="token function">useHistory</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token keyword">const</span> <span class="token function-variable function">back</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token comment">// \u8DF3\u56DE\u4E0A\u4E00\u9875</span>
    history<span class="token punctuation">.</span><span class="token function">go</span><span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">return</span> <span class="token punctuation">(</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">className</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>styles<span class="token punctuation">.</span>root<span class="token punctuation">}</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
      </span><span class="token punctuation">{</span><span class="token comment">/* \u540E\u9000\u6309\u94AE */</span><span class="token punctuation">}</span><span class="token plain-text">
      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">className</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>left<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
        </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Icon</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>iconfanhui<span class="token punctuation">&quot;</span></span> <span class="token attr-name">onClick</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>back<span class="token punctuation">}</span></span> <span class="token punctuation">/&gt;</span></span><span class="token plain-text">
      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
      </span><span class="token punctuation">{</span><span class="token comment">/* \u5C45\u4E2D\u6807\u9898 */</span><span class="token punctuation">}</span><span class="token plain-text">
      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">className</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>title<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token punctuation">{</span>children<span class="token punctuation">}</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">

      </span><span class="token punctuation">{</span><span class="token comment">/* \u53F3\u4FA7\u5185\u5BB9 */</span><span class="token punctuation">}</span><span class="token plain-text">
      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">className</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>right<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token punctuation">{</span>extra<span class="token punctuation">}</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
  <span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> NavBar

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ol start="2"><li>\u6D4B\u8BD5\u7EC4\u4EF6\u529F\u80FD</li></ol><div class="language-jsx ext-jsx line-numbers-mode"><pre class="language-jsx"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">NavBar</span></span>
  <span class="token attr-name">onLeftClick</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token function">alert</span><span class="token punctuation">(</span><span class="token number">123</span><span class="token punctuation">)</span><span class="token punctuation">}</span></span>
  <span class="token attr-name">rightContent</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">\u53F3\u4FA7\u5185\u5BB9</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">&gt;</span></span>
  <span class="token punctuation">}</span></span>
  <span class="token punctuation">&gt;</span></span><span class="token plain-text">
  \u6807\u9898\u5185\u5BB9
</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">NavBar</span></span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u6548\u679C\uFF1A</p><img src="https://wuxiaohui-1254415986.cos.ap-nanjing.myqcloud.com/2022/01/30/image20210831212932784.png" alt="image-20210831212932784" style="zoom:50%;"><hr><h2 id="\u8868\u5355\u57FA\u672C\u7ED3\u6784" tabindex="-1"><a class="header-anchor" href="#\u8868\u5355\u57FA\u672C\u7ED3\u6784" aria-hidden="true">#</a> \u8868\u5355\u57FA\u672C\u7ED3\u6784</h2><ul><li>\u7ED3\u6784</li></ul><div class="language-jsx ext-jsx line-numbers-mode"><pre class="language-jsx"><code><span class="token keyword">import</span> React <span class="token keyword">from</span> <span class="token string">&#39;react&#39;</span>
<span class="token keyword">import</span> NavBar <span class="token keyword">from</span> <span class="token string">&#39;@/components/NavBar&#39;</span>
<span class="token keyword">import</span> styles <span class="token keyword">from</span> <span class="token string">&#39;./index.module.scss&#39;</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">function</span> <span class="token function">Login</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token punctuation">(</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">className</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>styles<span class="token punctuation">.</span>root<span class="token punctuation">}</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">NavBar</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">\u767B\u5F55</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">NavBar</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">className</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>content<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
        </span><span class="token punctuation">{</span><span class="token comment">/* \u6807\u9898 */</span><span class="token punctuation">}</span><span class="token plain-text">
        </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h3</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">\u77ED\u4FE1\u767B\u5F55</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h3</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
        </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>form</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
          </span><span class="token punctuation">{</span><span class="token comment">/* \u624B\u673A\u53F7\u8F93\u5165\u6846 */</span><span class="token punctuation">}</span><span class="token plain-text">
          </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">className</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>input-item<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
            </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">className</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>input-box<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
              </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span>
                <span class="token attr-name">className</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>input<span class="token punctuation">&quot;</span></span>
                <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>mobile<span class="token punctuation">&quot;</span></span>
                <span class="token attr-name">placeholder</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>\u8BF7\u8F93\u5165\u624B\u673A\u53F7<span class="token punctuation">&quot;</span></span>
                <span class="token attr-name">autoComplete</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>off<span class="token punctuation">&quot;</span></span>
              <span class="token punctuation">/&gt;</span></span><span class="token plain-text">
            </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
            </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">className</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>validate<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">\u624B\u673A\u53F7\u9A8C\u8BC1\u9519\u8BEF\u4FE1\u606F</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
          </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">

          </span><span class="token punctuation">{</span><span class="token comment">/* \u77ED\u4FE1\u9A8C\u8BC1\u7801\u8F93\u5165\u6846 */</span><span class="token punctuation">}</span><span class="token plain-text">
          </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">className</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>input-item<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
            </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">className</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>input-box<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
              </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span>
                <span class="token attr-name">className</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>input<span class="token punctuation">&quot;</span></span>
                <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>code<span class="token punctuation">&quot;</span></span>
                <span class="token attr-name">placeholder</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>\u8BF7\u8F93\u5165\u9A8C\u8BC1\u7801<span class="token punctuation">&quot;</span></span>
                <span class="token attr-name">maxLength</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token number">6</span><span class="token punctuation">}</span></span>
                <span class="token attr-name">autoComplete</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>off<span class="token punctuation">&quot;</span></span>
              <span class="token punctuation">/&gt;</span></span><span class="token plain-text">
              </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">className</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>extra<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">\u83B7\u53D6\u9A8C\u8BC1\u7801</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
            </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
            </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">className</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>validate<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">\u9A8C\u8BC1\u7801\u9A8C\u8BC1\u9519\u8BEF\u4FE1\u606F</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
          </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">

          </span><span class="token punctuation">{</span><span class="token comment">/* \u767B\u5F55\u6309\u94AE */</span><span class="token punctuation">}</span><span class="token plain-text">
          </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>submit<span class="token punctuation">&quot;</span></span> <span class="token attr-name">className</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>login-btn<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
            \u767B\u5F55
          </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
        </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>form</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
  <span class="token punctuation">)</span>
<span class="token punctuation">}</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>\u6837\u5F0F</li></ul><div class="language-scss ext-scss line-numbers-mode"><pre class="language-scss"><code><span class="token keyword">@import</span> <span class="token string">&#39;@scss/hairline.scss&#39;</span><span class="token punctuation">;</span>
<span class="token selector">.root </span><span class="token punctuation">{</span>
  <span class="token selector">:global </span><span class="token punctuation">{</span>
    <span class="token selector">.iconfanhui </span><span class="token punctuation">{</span>
      <span class="token property">font-size</span><span class="token punctuation">:</span> 20px<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token selector">.content </span><span class="token punctuation">{</span>
      <span class="token property">padding</span><span class="token punctuation">:</span> 0 32px<span class="token punctuation">;</span>

      <span class="token selector">h3 </span><span class="token punctuation">{</span>
        <span class="token property">padding</span><span class="token punctuation">:</span> 30px 0<span class="token punctuation">;</span>
        <span class="token property">font-size</span><span class="token punctuation">:</span> 24px<span class="token punctuation">;</span>
      <span class="token punctuation">}</span>

      <span class="token selector">.input-item </span><span class="token punctuation">{</span>
        <span class="token property">position</span><span class="token punctuation">:</span> relative<span class="token punctuation">;</span>

        <span class="token selector"><span class="token parent important">&amp;</span>:first-child </span><span class="token punctuation">{</span>
          <span class="token property">margin-bottom</span><span class="token punctuation">:</span> 17px<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token selector">.input-box </span><span class="token punctuation">{</span>
          <span class="token property">position</span><span class="token punctuation">:</span> relative<span class="token punctuation">;</span>
          <span class="token keyword">@include</span> <span class="token function">hairline</span><span class="token punctuation">(</span>bottom<span class="token punctuation">,</span> #ccc<span class="token punctuation">)</span><span class="token punctuation">;</span>
          <span class="token selector">.input </span><span class="token punctuation">{</span>
            <span class="token property">width</span><span class="token punctuation">:</span> 100%<span class="token punctuation">;</span>
            <span class="token property">height</span><span class="token punctuation">:</span> 58px<span class="token punctuation">;</span>
            <span class="token property">padding</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>
            <span class="token property">font-size</span><span class="token punctuation">:</span> 16px<span class="token punctuation">;</span>

            <span class="token selector"><span class="token parent important">&amp;</span>::placeholder </span><span class="token punctuation">{</span>
              <span class="token property">color</span><span class="token punctuation">:</span> #a5a6ab<span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
          <span class="token punctuation">}</span>
          <span class="token selector">.extra </span><span class="token punctuation">{</span>
            <span class="token property">position</span><span class="token punctuation">:</span> absolute<span class="token punctuation">;</span>
            <span class="token property">right</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>
            <span class="token property">top</span><span class="token punctuation">:</span> 50%<span class="token punctuation">;</span>
            <span class="token property">margin-top</span><span class="token punctuation">:</span> -8px<span class="token punctuation">;</span>
            <span class="token property">color</span><span class="token punctuation">:</span> #999<span class="token punctuation">;</span>
          <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span>

      <span class="token selector">.validate </span><span class="token punctuation">{</span>
        <span class="token property">position</span><span class="token punctuation">:</span> absolute<span class="token punctuation">;</span>

        <span class="token property">color</span><span class="token punctuation">:</span> #ee0a24<span class="token punctuation">;</span>
        <span class="token property">font-size</span><span class="token punctuation">:</span> 12px<span class="token punctuation">;</span>
      <span class="token punctuation">}</span>

      <span class="token selector">.login-btn </span><span class="token punctuation">{</span>
        <span class="token property">width</span><span class="token punctuation">:</span> 100%<span class="token punctuation">;</span>
        <span class="token property">height</span><span class="token punctuation">:</span> 50px<span class="token punctuation">;</span>
        <span class="token property">margin-top</span><span class="token punctuation">:</span> 38px<span class="token punctuation">;</span>
        <span class="token property">border-radius</span><span class="token punctuation">:</span> 8px<span class="token punctuation">;</span>
        <span class="token property">border</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>
        <span class="token property">color</span><span class="token punctuation">:</span> #fff<span class="token punctuation">;</span>
        <span class="token property">background</span><span class="token punctuation">:</span> <span class="token function">linear-gradient</span><span class="token punctuation">(</span>315deg<span class="token punctuation">,</span> #fe4f4f<span class="token punctuation">,</span> #fc6627<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
      <span class="token selector">.disabled </span><span class="token punctuation">{</span>
        <span class="token property">background</span><span class="token punctuation">:</span> <span class="token function">linear-gradient</span><span class="token punctuation">(</span>315deg<span class="token punctuation">,</span> #ff9999<span class="token punctuation">,</span> #ffa179<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="\u5B9E\u73B0\u80FD\u663E\u793A\u989D\u5916\u5185\u5BB9\u7684input\u7EC4\u4EF6" tabindex="-1"><a class="header-anchor" href="#\u5B9E\u73B0\u80FD\u663E\u793A\u989D\u5916\u5185\u5BB9\u7684input\u7EC4\u4EF6" aria-hidden="true">#</a> \u5B9E\u73B0\u80FD\u663E\u793A\u989D\u5916\u5185\u5BB9\u7684Input\u7EC4\u4EF6</h2><blockquote><p>\u76EE\u6807\uFF1A\u5C06\u539F\u751F\u7684 input \u6807\u7B7E\u8FDB\u884C\u5C01\u88C5\uFF0C\u4F7F\u5F97\u8BE5\u7EC4\u4EF6\u53EF\u5728 input \u53F3\u4FA7\u653E\u7F6E\u989D\u5916\u5185\u5BB9\u5143\u7D20</p></blockquote><img src="https://wuxiaohui-1254415986.cos.ap-nanjing.myqcloud.com/2022/01/30/image20210831213942878.png" alt="image-20210831213942878" style="zoom:50%;"><p>\u5B9E\u73B0\u601D\u8DEF\uFF1A</p><ul><li>\u5DE6\u53F3\u5E03\u5C40\uFF1A\u5DE6\u4FA7<code>&lt;input&gt;</code> \uFF0C\u53F3\u4FA7\u662F\u4E00\u4E2A\u53EF\u81EA\u5B9A\u4E49\u7684\u5185\u5BB9\u533A\u57DF</li><li>\u5C06\u5C01\u88C5\u7684\u7EC4\u4EF6\u4F20\u5165\u7684\u5C5E\u6027\uFF0C\u5168\u90E8\u4F20\u9012\u5230 <code>&lt;input&gt;</code> \u6807\u7B7E\u4E0A\uFF0C\u4F7F\u5F97\u80FD\u5145\u5206\u5229\u7528\u539F\u6807\u7B7E\u7684\u529F\u80FD</li></ul><p><strong>\u64CD\u4F5C\u6B65\u9AA4</strong></p><ol><li>\u521B\u5EFA <code>components/Input/index.js</code>\uFF0C\u5E76\u5728\u8BE5\u76EE\u5F55\u62F7\u8D1D\u5165\u8D44\u6E90\u5305\u4E2D\u7684\u6837\u5F0F\u6587\u4EF6\uFF0C\u7136\u540E\u7F16\u5199\u7EC4\u4EF6\u4EE3\u7801\uFF1A</li></ol><div class="language-jsx ext-jsx line-numbers-mode"><pre class="language-jsx"><code><span class="token keyword">import</span> React <span class="token keyword">from</span> <span class="token string">&#39;react&#39;</span>
<span class="token keyword">import</span> styles <span class="token keyword">from</span> <span class="token string">&#39;./index.module.scss&#39;</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">function</span> <span class="token function">Input</span><span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> extra<span class="token punctuation">,</span> onExtraClick<span class="token punctuation">,</span> <span class="token operator">...</span>rest <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token punctuation">(</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">className</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>styles<span class="token punctuation">.</span>root<span class="token punctuation">}</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">className</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>input<span class="token punctuation">&quot;</span></span> <span class="token spread"><span class="token punctuation">{</span><span class="token operator">...</span>rest<span class="token punctuation">}</span></span> <span class="token punctuation">/&gt;</span></span><span class="token plain-text">
      </span><span class="token punctuation">{</span>extra <span class="token operator">&amp;&amp;</span> <span class="token punctuation">(</span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">className</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>extra<span class="token punctuation">&quot;</span></span> <span class="token attr-name">onClick</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>onExtraClick<span class="token punctuation">}</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
          </span><span class="token punctuation">{</span>extra<span class="token punctuation">}</span><span class="token plain-text">
        </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
      <span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token plain-text">
    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
  <span class="token punctuation">)</span>
<span class="token punctuation">}</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><hr><h2 id="\u767B\u5F55\u9875\u9762\u7684\u9759\u6001\u7ED3\u6784" tabindex="-1"><a class="header-anchor" href="#\u767B\u5F55\u9875\u9762\u7684\u9759\u6001\u7ED3\u6784" aria-hidden="true">#</a> \u767B\u5F55\u9875\u9762\u7684\u9759\u6001\u7ED3\u6784</h2><blockquote><p>\u76EE\u6807\uFF1A\u5B9E\u73B0\u767B\u5F55\u9875\u7684\u9875\u9762\u9759\u6001\u7ED3\u6784\u548C\u6837\u5F0F</p></blockquote><p>\u767B\u5F55\u9875\u9762\u5E03\u5C40\u5206\u89E3\uFF1A</p><img src="https://wuxiaohui-1254415986.cos.ap-nanjing.myqcloud.com/2022/01/30/image20210831220941555.png" alt="image-20210831220941555" style="zoom:50%;"><div class="language-markdown ext-md line-numbers-mode"><pre class="language-markdown"><code>\u3010\u7279\u522B\u8BF4\u660E\u3011
\u672C\u6848\u4F8B\u4E2D\uFF0C\u8868\u5355\u5C3D\u91CF\u4E0D\u4F7F\u7528 antd-mobile \u7EC4\u4EF6\u5E93\u91CC\u7684\u8868\u5355\u7EC4\u4EF6\u6765\u5B9E\u73B0\uFF0C\u56E0\u4E3A\u5B83\u7684\u8868\u5355\u7EC4\u4EF6\u5E76\u4E0D\u597D\u7528\uFF0C\u5C24\u5176\u662F\u5F53\u8981\u5B9E\u73B0\u8868\u5355\u9A8C\u8BC1\u65F6\u6BD4\u8F83\u9EBB\u70E6\u3002

\u56E0\u6B64\uFF0C\u6211\u4EEC\u4F1A\u4F7F\u7528\u539F\u751F\u7684\u8868\u5355\u6807\u7B7E\u6765\u5B9E\u73B0\u3002
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>\u64CD\u4F5C\u6B65\u9AA4</strong></p><ol><li>\u5C06\u8D44\u6E90\u5305\u4E2D\u767B\u5F55\u9875\u9762\u7684\u6837\u5F0F\u6587\u4EF6\u62F7\u8D1D\u5230 <code>pages/Login</code>\u76EE\u5F55\u4E2D\uFF0C\u7136\u540E\u5728 <code>pages/Login/index.js</code> \u4E2D\u7F16\u5199\u5982\u4E0B\u4EE3\u7801\uFF1A</li></ol><div class="language-jsx ext-jsx line-numbers-mode"><pre class="language-jsx"><code><span class="token keyword">import</span> NavBar <span class="token keyword">from</span> <span class="token string">&#39;@/components/NavBar&#39;</span>
<span class="token keyword">import</span> styles <span class="token keyword">from</span> <span class="token string">&#39;./index.module.scss&#39;</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">function</span> <span class="token function">Login</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token punctuation">(</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">className</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>styles<span class="token punctuation">.</span>root<span class="token punctuation">}</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
      </span><span class="token punctuation">{</span><span class="token comment">/* \u5BFC\u822A\u6761 */</span><span class="token punctuation">}</span><span class="token plain-text">
      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">NavBar</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">\u767B\u5F55</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">NavBar</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
      </span><span class="token punctuation">{</span><span class="token comment">/* \u5185\u5BB9 */</span><span class="token punctuation">}</span><span class="token plain-text">
      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">className</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>content<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
        </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h3</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">\u77ED\u4FE1\u767B\u5F55</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h3</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
        </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>form</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
          </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">className</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>input-item<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
            </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>text<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span><span class="token plain-text">
            </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">className</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>validate<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">\u624B\u673A\u53F7\u9A8C\u8BC1\u9519\u8BEF\u4FE1\u606F</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
          </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
          </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">className</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>input-item<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
            </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>text<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span><span class="token plain-text">
            </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">className</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>validate<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">\u9A8C\u8BC1\u7801\u9A8C\u8BC1\u9519\u8BEF\u4FE1\u606F</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
          </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
          </span><span class="token punctuation">{</span><span class="token comment">/* \u767B\u5F55\u6309\u94AE */</span><span class="token punctuation">}</span><span class="token plain-text">
          </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>submit<span class="token punctuation">&quot;</span></span> <span class="token attr-name">className</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>login-btn<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
            \u767B\u5F55
          </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
        </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>form</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
  <span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><hr><h2 id="\u767B\u5F55\u8868\u5355\u7684\u6570\u636E\u7ED1\u5B9A" tabindex="-1"><a class="header-anchor" href="#\u767B\u5F55\u8868\u5355\u7684\u6570\u636E\u7ED1\u5B9A" aria-hidden="true">#</a> \u767B\u5F55\u8868\u5355\u7684\u6570\u636E\u7ED1\u5B9A</h2><blockquote><p>\u76EE\u6807\uFF1A\u4E3A\u767B\u5F55\u8868\u5355\u4E2D\u7684\u8F93\u5165\u7EC4\u4EF6\u8FDB\u884C\u6570\u636E\u7ED1\u5B9A\uFF0C\u6536\u96C6\u8868\u5355\u6570\u636E</p></blockquote><p>\u5B9E\u73B0\u601D\u8DEF\uFF1A</p><ul><li>\u4F7F\u7528 <code>formik</code> \u5E93\u8FDB\u884C\u8868\u5355\u7684\u6570\u636E\u7ED1\u5B9A</li></ul><p><strong>\u64CD\u4F5C\u6B65\u9AA4</strong></p><ol><li>\u5B89\u88C5 <code>formik</code></li></ol><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token function">yarn</span> <span class="token function">add</span> formik
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><ol start="2"><li>\u4F7F\u7528 <code>formik</code> \u5E93\u4E2D\u63D0\u4F9B\u7684 Hook \u51FD\u6570\u521B\u5EFA formik \u8868\u5355\u5BF9\u8C61</li></ol><div class="language-jsx ext-jsx line-numbers-mode"><pre class="language-jsx"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> useFormik <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;formik&#39;</span>

<span class="token comment">// ...</span>

<span class="token comment">// Formik \u8868\u5355\u5BF9\u8C61</span>
<span class="token keyword">const</span> form <span class="token operator">=</span> <span class="token function">useFormik</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token comment">// \u8BBE\u7F6E\u8868\u5355\u5B57\u6BB5\u7684\u521D\u59CB\u503C</span>
  <span class="token literal-property property">initialValues</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">mobile</span><span class="token operator">:</span> <span class="token string">&#39;13900001111&#39;</span><span class="token punctuation">,</span>
    <span class="token literal-property property">code</span><span class="token operator">:</span> <span class="token string">&#39;246810&#39;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token comment">// \u63D0\u4EA4</span>
  <span class="token function-variable function">onSubmit</span><span class="token operator">:</span> <span class="token parameter">values</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>values<span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ol start="3"><li>\u7ED1\u5B9A\u8868\u5355\u5143\u7D20\u548C formik \u8868\u5355\u5BF9\u8C61</li></ol><div class="language-jsx ext-jsx line-numbers-mode"><pre class="language-jsx"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>form</span> <span class="token attr-name">onSubmit</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>form<span class="token punctuation">.</span>handleSubmit<span class="token punctuation">}</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
</span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><div class="language-jsx ext-jsx line-numbers-mode"><pre class="language-jsx"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Input</span></span>
  <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>mobile<span class="token punctuation">&quot;</span></span>
  <span class="token attr-name">placeholder</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>\u8BF7\u8F93\u5165\u624B\u673A\u53F7<span class="token punctuation">&quot;</span></span>
  <span class="token attr-name">value</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>form<span class="token punctuation">.</span>values<span class="token punctuation">.</span>mobile<span class="token punctuation">}</span></span>
  <span class="token attr-name">onChange</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>form<span class="token punctuation">.</span>handleChange<span class="token punctuation">}</span></span>
  <span class="token punctuation">/&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-jsx ext-jsx line-numbers-mode"><pre class="language-jsx"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Input</span></span>
  <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>code<span class="token punctuation">&quot;</span></span>
  <span class="token attr-name">placeholder</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>\u8BF7\u8F93\u5165\u9A8C\u8BC1\u7801<span class="token punctuation">&quot;</span></span>
  <span class="token attr-name">extra</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>\u53D1\u9001\u9A8C\u8BC1\u7801<span class="token punctuation">&quot;</span></span>
  <span class="token attr-name">maxLength</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token number">6</span><span class="token punctuation">}</span></span>
  <span class="token attr-name">value</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>form<span class="token punctuation">.</span>values<span class="token punctuation">.</span>code<span class="token punctuation">}</span></span>
  <span class="token attr-name">onChange</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>form<span class="token punctuation">.</span>handleChange<span class="token punctuation">}</span></span>
  <span class="token punctuation">/&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><hr><h2 id="\u767B\u5F55\u8868\u5355\u7684\u6570\u636E\u9A8C\u8BC1-\u57FA\u672C" tabindex="-1"><a class="header-anchor" href="#\u767B\u5F55\u8868\u5355\u7684\u6570\u636E\u9A8C\u8BC1-\u57FA\u672C" aria-hidden="true">#</a> \u767B\u5F55\u8868\u5355\u7684\u6570\u636E\u9A8C\u8BC1-\u57FA\u672C</h2><ul><li>\u7ED9useFormik\u63D0\u4F9Bvalidate\u51FD\u6570\u8FDB\u884C\u6821\u9A8C</li></ul><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">const</span> formik <span class="token operator">=</span> <span class="token function">useFormik</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token literal-property property">initialValues</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">mobile</span><span class="token operator">:</span> <span class="token string">&#39;&#39;</span><span class="token punctuation">,</span>
    <span class="token literal-property property">code</span><span class="token operator">:</span> <span class="token string">&#39;&#39;</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token comment">// \u5F53\u8868\u5355\u63D0\u4EA4\u7684\u65F6\u5019\uFF0C\u4F1A\u89E6\u53D1</span>
  <span class="token function">onSubmit</span><span class="token punctuation">(</span><span class="token parameter">values</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>values<span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token function">validate</span><span class="token punctuation">(</span><span class="token parameter">values</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> errors <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>values<span class="token punctuation">.</span>mobile<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      errors<span class="token punctuation">.</span>mobile <span class="token operator">=</span> <span class="token string">&#39;\u624B\u673A\u53F7\u4E0D\u80FD\u4E3A\u7A7A&#39;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>values<span class="token punctuation">.</span>code<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      errors<span class="token punctuation">.</span>code <span class="token operator">=</span> <span class="token string">&#39;\u9A8C\u8BC1\u7801\u4E0D\u80FD\u4E3A\u7A7A&#39;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> errors
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>\u9700\u8981\u7ED9\u6BCF\u4E00\u4E2A\u8868\u5355\u5143\u7D20\u7ED1\u5B9A\u4E00\u4E2A\u4E8B\u4EF6 onBlur,,,\u76EE\u7684\u662F\u4E3A\u4E86\u533A\u5206\u90A3\u4E9B\u8F93\u5165\u6846\u662F\u88AB\u70B9\u51FB\u8FC7\u7684</li></ul><div class="language-jsx ext-jsx line-numbers-mode"><pre class="language-jsx"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Input</span></span>
  <span class="token attr-name">placeholder</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>\u8BF7\u8F93\u5165\u624B\u673A\u53F7<span class="token punctuation">&quot;</span></span>
  <span class="token attr-name">value</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>mobile<span class="token punctuation">}</span></span>
  <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>mobile<span class="token punctuation">&quot;</span></span>
  <span class="token attr-name">autoComplete</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>off<span class="token punctuation">&quot;</span></span>
  <span class="token attr-name">onChange</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>handleChange<span class="token punctuation">}</span></span>
  <span class="token attr-name">onBlur</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>handleBlur<span class="token punctuation">}</span></span>
<span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">Input</span></span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>\u901A\u8FC7formik\u53EF\u4EE5\u89E3\u6784\u51FA\u6765\u4E24\u4E2A\u5C5E\u6027 touched \u548C errors,,,,\u63A7\u5236\u9519\u8BEF\u4FE1\u606F\u7684\u5C55\u793A</li></ul><div class="language-jsx ext-jsx line-numbers-mode"><pre class="language-jsx"><code><span class="token punctuation">{</span>touched<span class="token punctuation">.</span>mobile <span class="token operator">&amp;&amp;</span> errors<span class="token punctuation">.</span>mobile <span class="token operator">?</span> <span class="token punctuation">(</span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">className</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>validate<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token punctuation">{</span>errors<span class="token punctuation">.</span>mobile<span class="token punctuation">}</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token punctuation">)</span> <span class="token operator">:</span> <span class="token keyword">null</span><span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="\u767B\u5F55\u8868\u5355\u7684\u6570\u636E\u9A8C\u8BC1" tabindex="-1"><a class="header-anchor" href="#\u767B\u5F55\u8868\u5355\u7684\u6570\u636E\u9A8C\u8BC1" aria-hidden="true">#</a> \u767B\u5F55\u8868\u5355\u7684\u6570\u636E\u9A8C\u8BC1</h2><blockquote><p>\u76EE\u6807\uFF1A\u9A8C\u8BC1\u8868\u5355\u4E2D\u8F93\u5165\u7684\u5185\u5BB9\u7684\u5408\u6CD5\u6027</p></blockquote><img src="https://wuxiaohui-1254415986.cos.ap-nanjing.myqcloud.com/2022/01/30/image20210901091137594.png" alt="image-20210901091137594" style="zoom:50%;"><p>\u5B9E\u73B0\u601D\u8DEF\uFF1A</p><ul><li>\u4F7F\u7528 <code>formik</code> \u81EA\u5E26\u7684\u8868\u5355\u9A8C\u8BC1\u529F\u80FD</li><li>\u4F7F\u7528 <code>yup</code> \u8F85\u52A9\u7F16\u5199\u6570\u636E\u7684\u9A8C\u8BC1\u89C4\u5219</li><li>\u9A8C\u8BC1\u4E0D\u901A\u8FC7\u65F6\uFF0C\u5728\u8F93\u5165\u9879\u4E0B\u663E\u793A\u9A8C\u8BC1\u540E\u5F97\u5230\u7684\u5B9E\u9645\u9519\u8BEF\u4FE1\u606F</li><li>\u9A8C\u8BC1\u4E0D\u901A\u8FC7\u65F6\uFF0C\u7981\u7528\u63D0\u4EA4\u6309\u94AE</li></ul><p><strong>\u64CD\u4F5C\u6B65\u9AA4</strong></p><ol><li>\u5B89\u88C5 <code>yup</code></li></ol><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token function">npm</span> i yup --save
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><ol start="2"><li>\u5728\u521B\u5EFA <code>formik</code> \u8868\u5355\u5BF9\u8C61\u65F6\uFF0C\u6DFB\u52A0\u8868\u5355\u9A8C\u8BC1\u76F8\u5173\u53C2\u6570</li></ol><div class="language-jsx ext-jsx line-numbers-mode"><pre class="language-jsx"><code><span class="token keyword">import</span> <span class="token operator">*</span> <span class="token keyword">as</span> Yup <span class="token keyword">from</span> <span class="token string">&#39;yup&#39;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><div class="language-jsx ext-jsx line-numbers-mode"><pre class="language-jsx"><code><span class="token comment">// Formik \u8868\u5355\u5BF9\u8C61</span>
<span class="token keyword">const</span> form <span class="token operator">=</span> <span class="token function">useFormik</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  
  <span class="token comment">// \u8868\u5355\u9A8C\u8BC1</span>
  <span class="token literal-property property">validationSchema</span><span class="token operator">:</span> Yup<span class="token punctuation">.</span><span class="token function">object</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">shape</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    <span class="token comment">// \u624B\u673A\u53F7\u9A8C\u8BC1\u89C4\u5219</span>
    <span class="token literal-property property">mobile</span><span class="token operator">:</span> Yup<span class="token punctuation">.</span><span class="token function">string</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    	<span class="token punctuation">.</span><span class="token function">required</span><span class="token punctuation">(</span><span class="token string">&#39;\u8BF7\u8F93\u5165\u624B\u673A\u53F7&#39;</span><span class="token punctuation">)</span>
    	<span class="token punctuation">.</span><span class="token function">matches</span><span class="token punctuation">(</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">^1[3456789]\\d{9}$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span> <span class="token string">&#39;\u624B\u673A\u53F7\u683C\u5F0F\u9519\u8BEF&#39;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    
    <span class="token comment">// \u624B\u673A\u9A8C\u8BC1\u7801\u9A8C\u8BC1\u89C4\u5219</span>
    <span class="token literal-property property">code</span><span class="token operator">:</span> Yup<span class="token punctuation">.</span><span class="token function">string</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    	<span class="token punctuation">.</span><span class="token function">required</span><span class="token punctuation">(</span><span class="token string">&#39;\u8BF7\u8F93\u5165\u9A8C\u8BC1\u7801&#39;</span><span class="token punctuation">)</span>
    	<span class="token punctuation">.</span><span class="token function">matches</span><span class="token punctuation">(</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">^\\d{6}$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span> <span class="token string">&#39;\u9A8C\u8BC1\u78016\u4E2A\u6570\u5B57&#39;</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>

  <span class="token comment">// ...</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ol start="3"><li>\u5904\u7406\u9A8C\u8BC1\u9519\u8BEF\u4FE1\u606F</li></ol><div class="language-jsx ext-jsx line-numbers-mode"><pre class="language-jsx"><code><span class="token comment">// \u539F\u5148\u7684\u4E24\u5904\u9519\u8BEF\u4FE1\u606F\u4EE3\u7801</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">className</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>validate<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">\u624B\u673A\u53F7\u9A8C\u8BC1\u9519\u8BEF\u4FE1\u606F</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">className</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>validate<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token punctuation">{</span>form<span class="token punctuation">.</span>errors<span class="token punctuation">.</span>code<span class="token punctuation">}</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>

<span class="token comment">// \u6539\u9020\u6210\u5982\u4E0B\u4EE3\u7801</span>
<span class="token punctuation">{</span>form<span class="token punctuation">.</span>errors<span class="token punctuation">.</span>mobile <span class="token operator">&amp;&amp;</span> form<span class="token punctuation">.</span>touched<span class="token punctuation">.</span>mobile <span class="token operator">&amp;&amp;</span> <span class="token punctuation">(</span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">className</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>validate<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token punctuation">{</span>form<span class="token punctuation">.</span>errors<span class="token punctuation">.</span>mobile<span class="token punctuation">}</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token punctuation">)</span><span class="token punctuation">}</span>

<span class="token punctuation">{</span>form<span class="token punctuation">.</span>errors<span class="token punctuation">.</span>code <span class="token operator">&amp;&amp;</span> form<span class="token punctuation">.</span>touched<span class="token punctuation">.</span>code <span class="token operator">&amp;&amp;</span> <span class="token punctuation">(</span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">className</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>validate<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token punctuation">{</span>form<span class="token punctuation">.</span>errors<span class="token punctuation">.</span>code<span class="token punctuation">}</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token punctuation">)</span><span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ol start="4"><li>\u9A8C\u8BC1\u51FA\u9519\u65F6\u7981\u7528\u767B\u5F55\u6309\u94AE</li></ol><div class="language-jsx ext-jsx line-numbers-mode"><pre class="language-jsx"><code><span class="token keyword">import</span> classnames <span class="token keyword">from</span> <span class="token string">&#39;classnames&#39;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><div class="language-jsx ext-jsx line-numbers-mode"><pre class="language-jsx"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span>
  <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>submit<span class="token punctuation">&quot;</span></span>
  <span class="token attr-name">className</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token function">classnames</span><span class="token punctuation">(</span><span class="token string">&#39;login-btn&#39;</span><span class="token punctuation">,</span> form<span class="token punctuation">.</span>isValid <span class="token operator">?</span> <span class="token string">&#39;&#39;</span> <span class="token operator">:</span> <span class="token string">&#39;disabled&#39;</span><span class="token punctuation">)</span><span class="token punctuation">}</span></span>
  <span class="token attr-name">disabled</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token operator">!</span>form<span class="token punctuation">.</span>isValid<span class="token punctuation">}</span></span>
  <span class="token punctuation">&gt;</span></span><span class="token plain-text">
  \u767B\u5F55
</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><hr><h2 id="\u521D\u6B65\u5C01\u88C5\u7F51\u7EDC\u8BF7\u6C42\u6A21\u5757" tabindex="-1"><a class="header-anchor" href="#\u521D\u6B65\u5C01\u88C5\u7F51\u7EDC\u8BF7\u6C42\u6A21\u5757" aria-hidden="true">#</a> \u521D\u6B65\u5C01\u88C5\u7F51\u7EDC\u8BF7\u6C42\u6A21\u5757</h2><blockquote><p>\u76EE\u6807\uFF1A\u5C06 axios \u5C01\u88C5\u6210\u516C\u7528\u7684\u7F51\u7EDC\u8BF7\u6C42\u6A21\u5757\uFF0C\u65B9\u4FBF\u540E\u7EED\u8C03\u7528\u540E\u7AEF\u63A5\u53E3</p><p>\uFF08\u672C\u7AE0\u8282\u4E2D\u6682\u4E0D\u5904\u7406 token \u548C token \u7EED\u671F\uFF09</p></blockquote><p><strong>\u64CD\u4F5C\u6B65\u9AA4</strong></p><ol><li>\u5B89\u88C5 <code>axios</code></li></ol><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token function">npm</span> i axios --save
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><ol start="2"><li>\u521B\u5EFA <code>utils/request.js</code>\uFF0C\u5E76\u7F16\u5199\u5982\u4E0B\u4EE3\u7801</li></ol><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">import</span> axios <span class="token keyword">from</span> <span class="token string">&#39;axios&#39;</span>

<span class="token comment">// 1. \u521B\u5EFA\u65B0\u7684 axios \u5B9E\u4F8B</span>
<span class="token keyword">const</span> http <span class="token operator">=</span> axios<span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token literal-property property">baseURL</span><span class="token operator">:</span> <span class="token string">&#39;http://geek.itheima.net/v1_0&#39;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token comment">// 2. \u8BBE\u7F6E\u8BF7\u6C42\u62E6\u622A\u5668\u548C\u54CD\u5E94\u62E6\u622A\u5668</span>
http<span class="token punctuation">.</span>interceptors<span class="token punctuation">.</span>request<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span><span class="token parameter">config</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> config
<span class="token punctuation">}</span><span class="token punctuation">)</span>

http<span class="token punctuation">.</span>interceptors<span class="token punctuation">.</span>response<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span><span class="token parameter">response</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> response<span class="token punctuation">.</span>data
<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token parameter">error</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> Promise<span class="token punctuation">.</span><span class="token function">reject</span><span class="token punctuation">(</span>error<span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token comment">// 3. \u5BFC\u51FA\u8BE5 axios \u5B9E\u4F8B</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> http
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><hr><h2 id="\u53D1\u9001\u624B\u673A\u9A8C\u8BC1\u7801" tabindex="-1"><a class="header-anchor" href="#\u53D1\u9001\u624B\u673A\u9A8C\u8BC1\u7801" aria-hidden="true">#</a> \u53D1\u9001\u624B\u673A\u9A8C\u8BC1\u7801</h2><blockquote><p>\u76EE\u6807\uFF1A\u70B9\u51FB\u767B\u5F55\u754C\u9762\u4E2D\u7684\u53D1\u9001\u9A8C\u8BC1\u7801\u6309\u94AE\uFF0C\u8C03\u7528\u540E\u7AEF\u63A5\u53E3\u8FDB\u884C\u9A8C\u8BC1\u7801\u7684\u53D1\u9001</p></blockquote><img src="https://wuxiaohui-1254415986.cos.ap-nanjing.myqcloud.com/2022/01/30/image20210901092838694.png" alt="image-20210901092838694" style="zoom:50%;"><p>\u5B9E\u73B0\u601D\u8DEF\uFF1A</p><ul><li>\u5B9E\u73B0\u4E00\u4E2A redux action \u51FD\u6570\uFF0C\u8BF7\u6C42\u53D1\u9001\u9A8C\u8BC1\u7801\u540E\u7AEF\u63A5\u53E3</li><li>\u5728\u9A8C\u8BC1\u7801\u7684 Input \u7EC4\u4EF6\u7684 <code>onExtraClick</code> \u4E8B\u4EF6\u76D1\u542C\u51FD\u6570\u4E2D\u8C03\u7528 action</li></ul><p><strong>\u64CD\u4F5C\u6B65\u9AA4</strong></p><ol><li>\u521B\u5EFA <code>store/actions/login.js</code>\uFF0C\u5E76\u5B9E\u73B0\u4E00\u4E2A Action \u51FD\u6570</li></ol><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">import</span> http <span class="token keyword">from</span> <span class="token string">&#39;@/utils/http&#39;</span>

<span class="token doc-comment comment">/**
 * \u53D1\u9001\u77ED\u4FE1\u9A8C\u8BC1\u7801
 * <span class="token keyword">@param</span> <span class="token class-name"><span class="token punctuation">{</span>string<span class="token punctuation">}</span></span> <span class="token parameter">mobile</span> \u624B\u673A\u53F7\u7801
 * <span class="token keyword">@returns</span> thunk
 */</span>
<span class="token keyword">export</span> <span class="token keyword">const</span> <span class="token function-variable function">sendValidationCode</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">mobile</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token parameter">dispatch</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> res <span class="token operator">=</span> <span class="token keyword">await</span> http<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">\`</span><span class="token string">/sms/codes/</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">\${</span>mobile<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">\`</span></span><span class="token punctuation">)</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>res<span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ol start="2"><li>\u4E3A\u9A8C\u8BC1\u7801\u8F93\u5165\u6846\u7EC4\u4EF6\u6DFB\u52A0 <code>onExtraClick</code> \u4E8B\u4EF6\u76D1\u542C</li></ol><div class="language-jsx ext-jsx line-numbers-mode"><pre class="language-jsx"><code><span class="token operator">&lt;</span>Input 
  <span class="token punctuation">{</span><span class="token comment">/* ... */</span><span class="token punctuation">}</span> 
  
  onExtraClick<span class="token operator">=</span><span class="token punctuation">{</span>sendSMSCode<span class="token punctuation">}</span> 
  <span class="token operator">/</span><span class="token operator">&gt;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ol start="3"><li>\u5B9E\u73B0\u4E8B\u4EF6\u76D1\u542C\u51FD\u6570\uFF0C\u8C03\u7528 Action</li></ol><div class="language-jsx ext-jsx line-numbers-mode"><pre class="language-jsx"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> useDispatch <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;react-redux&#39;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><div class="language-jsx ext-jsx line-numbers-mode"><pre class="language-jsx"><code><span class="token comment">// \u83B7\u53D6 Redux \u5206\u53D1\u5668</span>
<span class="token keyword">const</span> dispatch <span class="token operator">=</span> <span class="token function">useDispatch</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

<span class="token comment">// \u53D1\u9001\u77ED\u4FE1\u9A8C\u8BC1\u7801</span>
<span class="token keyword">const</span> <span class="token function-variable function">sendSMSCode</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">try</span> <span class="token punctuation">{</span>
    <span class="token comment">// \u624B\u673A\u53F7</span>
    <span class="token keyword">const</span> mobile <span class="token operator">=</span> form<span class="token punctuation">.</span>values<span class="token punctuation">.</span>mobile

    <span class="token comment">// \u83B7\u53D6 Action </span>
    <span class="token keyword">const</span> action <span class="token operator">=</span> <span class="token function">sendValidationCode</span><span class="token punctuation">(</span>mobile<span class="token punctuation">)</span>

    <span class="token comment">// \u8C03\u7528 Action</span>
    <span class="token function">dispatch</span><span class="token punctuation">(</span>action<span class="token punctuation">)</span>
  <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span>e<span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="\u9A8C\u8BC1\u7801\u5012\u8BA1\u65F6\u529F\u80FD" tabindex="-1"><a class="header-anchor" href="#\u9A8C\u8BC1\u7801\u5012\u8BA1\u65F6\u529F\u80FD" aria-hidden="true">#</a> \u9A8C\u8BC1\u7801\u5012\u8BA1\u65F6\u529F\u80FD</h2><div class="language-jsx ext-jsx line-numbers-mode"><pre class="language-jsx"><code><span class="token keyword">const</span> <span class="token function-variable function">onExtraClick</span> <span class="token operator">=</span> <span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>time <span class="token operator">&gt;</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token keyword">return</span>
  <span class="token comment">// \u5148\u5BF9\u624B\u673A\u53F7\u8FDB\u884C\u9A8C\u8BC1</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">^1[3-9]\\d{9}$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span>mobile<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    formik<span class="token punctuation">.</span><span class="token function">setTouched</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      <span class="token literal-property property">mobile</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token keyword">return</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">try</span> <span class="token punctuation">{</span>
    <span class="token keyword">await</span> <span class="token function">dispatch</span><span class="token punctuation">(</span><span class="token function">sendCode</span><span class="token punctuation">(</span>mobile<span class="token punctuation">)</span><span class="token punctuation">)</span>
    Toast<span class="token punctuation">.</span><span class="token function">success</span><span class="token punctuation">(</span><span class="token string">&#39;\u83B7\u53D6\u9A8C\u8BC1\u7801\u6210\u529F&#39;</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span>

    <span class="token comment">// \u5F00\u542F\u5012\u8BA1\u65F6</span>
    <span class="token function">setTime</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">)</span>
    <span class="token keyword">let</span> timeId <span class="token operator">=</span> <span class="token function">setInterval</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      <span class="token comment">// \u5F53\u6211\u4EEC\u6BCF\u6B21\u90FD\u60F3\u8981\u83B7\u53D6\u5230\u6700\u65B0\u7684\u72B6\u6001\uFF0C\u9700\u8981\u5199\u6210 \u7BAD\u5934\u51FD\u6570\u7684\u5F62\u5F0F</span>
      <span class="token function">setTime</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">time</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>time <span class="token operator">===</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
          <span class="token function">clearInterval</span><span class="token punctuation">(</span>timeId<span class="token punctuation">)</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">return</span> time <span class="token operator">-</span> <span class="token number">1</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">1000</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span>err<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>err<span class="token punctuation">.</span>response<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      Toast<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span>err<span class="token punctuation">.</span>response<span class="token punctuation">.</span>data<span class="token punctuation">.</span>message<span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
      Toast<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token string">&#39;\u670D\u52A1\u5668\u7E41\u5FD9\uFF0C\u8BF7\u7A0D\u540E\u91CD\u8BD5&#39;</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="\u51FD\u6570\u7EC4\u4EF6\u7684\u7279\u6027" tabindex="-1"><a class="header-anchor" href="#\u51FD\u6570\u7EC4\u4EF6\u7684\u7279\u6027" aria-hidden="true">#</a> \u51FD\u6570\u7EC4\u4EF6\u7684\u7279\u6027</h2><p>React \u4E2D\u7684\u51FD\u6570\u7EC4\u4EF6\u662F\u901A\u8FC7\u51FD\u6570\u6765\u5B9E\u73B0\u7684\uFF0C\u51FD\u6570\u7EC4\u4EF6\u7684\u516C\u5F0F\uFF1A<code>f(state) =&gt; UI</code>\uFF0C\u5373\uFF1A\u6570\u636E\u5230\u89C6\u56FE\u7684\u6620\u5C04\u3002</p><p>\u51FD\u6570\u7EC4\u4EF6\u672C\u8EAB\u5F88\u7B80\u5355\uFF0C\u4F46\u56E0\u4E3A\u662F\u901A\u8FC7\u51FD\u6570\u5B9E\u73B0\u7684\uFF0C\u6240\u4EE5\uFF0C\u5728\u4F7F\u7528\u51FD\u6570\u7EC4\u4EF6\u65F6\uFF0C\u5C31\u4F1A\u4F53\u73B0\u51FA\u51FD\u6570\u6240\u5177\u6709\u7684\u7279\u6027\u6765\u3002</p><p>\u51FD\u6570\u7EC4\u4EF6\u7684\u7279\u6027\u8BF4\u660E\uFF1A</p><ul><li>\u5BF9\u4E8E\u51FD\u6570\u7EC4\u4EF6\u6765\u8BF4\uFF0C\u6BCF\u6B21\u72B6\u6001\u66F4\u65B0\u540E\uFF0C\u7EC4\u4EF6\u90FD\u4F1A\u91CD\u65B0\u6E32\u67D3\u3002</li><li>\u5E76\u4E14\uFF0C<strong>\u6BCF\u6B21\u7EC4\u4EF6\u66F4\u65B0\u90FD\u50CF\u662F\u5728\u7ED9\u7EC4\u4EF6\u62CD\u7167\u3002\u6BCF\u5F20\u7167\u7247\u5C31\u4EE3\u8868\u7EC4\u4EF6\u5728\u67D0\u4E2A\u7279\u5B9A\u65F6\u523B\u7684\u72B6\u6001\u3002\u5FEB\u7167</strong></li><li>\u6216\u8005\u8BF4\uFF1A<code>\u7EC4\u4EF6\u7684\u6BCF\u6B21\u7279\u5B9A\u6E32\u67D3\uFF0C\u90FD\u6709\u81EA\u5DF1\u7684 props/state/\u4E8B\u4EF6\u5904\u7406\u7A0B\u5E8F</code> \u7B49\u3002</li><li>\u8FD9\u4E9B\u7167\u7247\u8BB0\u5F55\u7684\u72B6\u6001\uFF0C\u4ECE\u4EE3\u7801\u5C42\u9762\u6765\u8BF4\uFF0C\u662F\u901A\u8FC7 JS \u4E2D\u51FD\u6570\u7684\u95ED\u5305\u673A\u5236\u6765\u5B9E\u73B0\u7684\u3002</li></ul><p>\u8FD9\u5C31\u662F React \u4E2D\u51FD\u6570\u7EC4\u4EF6\u7684\u7279\u6027\uFF0C\u66F4\u52A0\u7684\u51FD\u6570\u5F0F\uFF08\u5229\u7528\u51FD\u6570\u7684\u7279\u6027\uFF09</p><div class="language-jsx ext-jsx line-numbers-mode"><pre class="language-jsx"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> useState <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;react&#39;</span>
<span class="token keyword">import</span> ReactDOM <span class="token keyword">from</span> <span class="token string">&#39;react-dom&#39;</span>

<span class="token comment">// \u6CA1\u6709 hooks \u7684\u51FD\u6570\u7EC4\u4EF6\uFF1A</span>
<span class="token keyword">const</span> <span class="token function-variable function">Counter</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> count <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token comment">// console.log(count)</span>
  <span class="token keyword">const</span> <span class="token function-variable function">showCount</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;\u5C55\u793A count \u503C\uFF1A&#39;</span><span class="token punctuation">,</span> count<span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">3000</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">return</span> <span class="token punctuation">(</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">onClick</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>showCount<span class="token punctuation">}</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">\u70B9\u51FB\u6309\u94AE3\u79D2\u540E\u663E\u793Acount</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
  <span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">const</span> <span class="token function-variable function">App</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> <span class="token punctuation">[</span>count<span class="token punctuation">,</span> setCount<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useState</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span>

  <span class="token keyword">return</span> <span class="token punctuation">(</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h1</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">\u8BA1\u6570\u5668\uFF1A</span><span class="token punctuation">{</span>count<span class="token punctuation">}</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h1</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">onClick</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token function">setCount</span><span class="token punctuation">(</span>count <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">}</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">+1</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>hr</span> <span class="token punctuation">/&gt;</span></span><span class="token plain-text">
      </span><span class="token punctuation">{</span><span class="token comment">/* \u5B50\u7EC4\u4EF6 */</span><span class="token punctuation">}</span><span class="token plain-text">
      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Counter</span></span> <span class="token attr-name">count</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>count<span class="token punctuation">}</span></span> <span class="token punctuation">/&gt;</span></span><span class="token plain-text">
    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
  <span class="token punctuation">)</span>
<span class="token punctuation">}</span>

ReactDOM<span class="token punctuation">.</span><span class="token function">render</span><span class="token punctuation">(</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">App</span></span> <span class="token punctuation">/&gt;</span></span><span class="token punctuation">,</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">&#39;root&#39;</span><span class="token punctuation">)</span><span class="token punctuation">)</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="useref\u9AD8\u7EA7\u7528\u6CD5" tabindex="-1"><a class="header-anchor" href="#useref\u9AD8\u7EA7\u7528\u6CD5" aria-hidden="true">#</a> useRef\u9AD8\u7EA7\u7528\u6CD5</h2><p><img src="https://wuxiaohui-1254415986.cos.ap-nanjing.myqcloud.com/2022/01/30/image20210907203744867.png" alt="image-20210907203744867" loading="lazy"></p><p><img src="https://wuxiaohui-1254415986.cos.ap-nanjing.myqcloud.com/2022/01/30/image20210907203811908.png" alt="image-20210907203811908" loading="lazy"></p><h2 id="\u767B\u5F55\u5E76\u83B7\u53D6-token" tabindex="-1"><a class="header-anchor" href="#\u767B\u5F55\u5E76\u83B7\u53D6-token" aria-hidden="true">#</a> \u767B\u5F55\u5E76\u83B7\u53D6 Token</h2><blockquote><p>\u76EE\u6807\uFF1A\u70B9\u51FB\u767B\u5F55\u6309\u94AE\u540E\uFF0C\u53D1\u9001\u8868\u5355\u6570\u636E\u5230\u540E\u7AEF\u767B\u5F55\u63A5\u53E3\uFF0C\u83B7\u53D6\u767B\u5F55\u51ED\u8BC1 Token</p></blockquote><p>\u5B9E\u73B0\u601D\u8DEF\uFF1A</p><ul><li>\u5B9E\u73B0\u4E00\u4E2A Action\uFF0C\u53BB\u8C03\u7528\u540E\u7AEF\u767B\u5F55\u63A5\u53E3</li><li>\u5728 <code>formik</code> \u7684\u8868\u5355\u63D0\u4EA4\u65B9\u6CD5 <code>onSubmit</code> \u4E2D\u8C03\u7528 Action</li></ul><p><strong>\u64CD\u4F5C\u6B65\u9AA4</strong></p><ol><li>\u5728 <code>store/actions/login.js</code>\u4E2D\uFF0C\u6DFB\u52A0\u4E00\u4E2A Action \u51FD\u6570</li></ol><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token doc-comment comment">/**
 * \u767B\u5F55
 * <span class="token keyword">@param</span> <span class="token class-name"><span class="token punctuation">{</span><span class="token punctuation">{</span> mobile<span class="token punctuation">,</span> code <span class="token punctuation">}</span><span class="token punctuation">}</span></span> <span class="token parameter">values</span> \u767B\u5F55\u4FE1\u606F
 * <span class="token keyword">@returns</span> thunk
 */</span>
<span class="token keyword">export</span> <span class="token keyword">const</span> <span class="token function-variable function">login</span> <span class="token operator">=</span> <span class="token parameter">params</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token keyword">async</span> <span class="token parameter">dispatch</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> res <span class="token operator">=</span> <span class="token keyword">await</span> http<span class="token punctuation">.</span><span class="token function">post</span><span class="token punctuation">(</span><span class="token string">&#39;/authorizations&#39;</span><span class="token punctuation">,</span> params<span class="token punctuation">)</span>
    <span class="token keyword">const</span> tokenInfo <span class="token operator">=</span> res<span class="token punctuation">.</span>data<span class="token punctuation">.</span>data
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>tokenInfo<span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ol start="2"><li>\u5728\u767B\u5F55\u9875\u9762\u7EC4\u4EF6\u4E2D\u7684 <code>formik</code> \u8868\u5355\u5BF9\u8C61\u7684 <code>onSubmit</code> \u65B9\u6CD5\u4E2D\uFF0C\u8C03\u7528 Action</li></ol><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> login<span class="token punctuation">,</span> sendValidationCode <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;@/store/actions/login&#39;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><div class="language-jsx ext-jsx line-numbers-mode"><pre class="language-jsx"><code><span class="token comment">// Formik \u8868\u5355\u5BF9\u8C61</span>
<span class="token keyword">const</span> form <span class="token operator">=</span> <span class="token function">useFormik</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token comment">// ...</span>

  <span class="token comment">// \u63D0\u4EA4</span>
  <span class="token function-variable function">onSubmit</span><span class="token operator">:</span> <span class="token keyword">async</span> <span class="token parameter">values</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">await</span> <span class="token function">dispatch</span><span class="token punctuation">(</span><span class="token function">login</span><span class="token punctuation">(</span>values<span class="token punctuation">)</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u5982\u679C\u80FD\u6210\u529F\u83B7\u53D6 Token \u4FE1\u606F\uFF0C\u63A7\u5236\u53F0\u4F1A\u6253\u5370\u51FA\u5982\u4E0B\u5185\u5BB9\uFF1A</p><img src="https://wuxiaohui-1254415986.cos.ap-nanjing.myqcloud.com/2022/01/30/image20210901101009155.png" alt="image-20210901101009155" style="zoom:50%;"><hr><h2 id="\u4FDD\u5B58-token-\u5230-redux" tabindex="-1"><a class="header-anchor" href="#\u4FDD\u5B58-token-\u5230-redux" aria-hidden="true">#</a> \u4FDD\u5B58 Token \u5230 Redux</h2><blockquote><p>\u76EE\u6807\uFF1A\u5C06\u8C03\u7528\u540E\u7AEF\u63A5\u53E3\u83B7\u53D6\u5230\u7684 Token \u4FE1\u606F\uFF0C\u653E\u5165 Redux \u8FDB\u884C\u7EF4\u62A4</p></blockquote><p>\u5B9E\u73B0\u601D\u8DEF\uFF1A</p><ul><li>\u5B9E\u73B0\u4E00\u4E2A Reducer\uFF0C\u7528\u4E8E\u5728 Redux \u4E2D\u64CD\u4F5C Token \u72B6\u6001</li><li>\u5B9E\u73B0\u4E00\u4E2A Action\uFF0C\u5728\u8BE5 Action \u4E2D\u8C03\u7528 Reducer \u6765\u4FDD\u5B58 Token \u72B6\u6001</li><li>\u5728\u4E0A\u4E00\u7AE0\u8282\u83B7\u53D6 Token \u7684 Action \u4E2D\uFF0C\u8C03\u7528\u4E0A\u9762\u7684 Action \u6765\u4FDD\u5B58\u4ECE\u540E\u7AEF\u521A\u83B7\u53D6\u5230\u7684 Token</li></ul><p><strong>\u64CD\u4F5C\u6B65\u9AA4</strong></p><ol><li>\u521B\u5EFA <code>store/reducers/login.js</code>\uFF0C\u5E76\u7F16\u5199\u4E00\u4E2A Reducer \u51FD\u6570</li></ol><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token comment">// \u521D\u59CB\u72B6\u6001</span>
<span class="token keyword">const</span> initialState <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">token</span><span class="token operator">:</span> <span class="token string">&#39;&#39;</span><span class="token punctuation">,</span>
  <span class="token literal-property property">refresh_token</span><span class="token operator">:</span> <span class="token string">&#39;&#39;</span>
<span class="token punctuation">}</span>

<span class="token comment">// \u64CD\u4F5C Token \u72B6\u6001\u4FE1\u606F\u7684 reducer \u51FD\u6570</span>
<span class="token keyword">export</span> <span class="token keyword">const</span> <span class="token function-variable function">login</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">state <span class="token operator">=</span> initialState<span class="token punctuation">,</span> action</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> <span class="token punctuation">{</span> type<span class="token punctuation">,</span> payload <span class="token punctuation">}</span> <span class="token operator">=</span> action
  <span class="token keyword">switch</span> <span class="token punctuation">(</span>type<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">case</span> <span class="token string">&#39;login/token&#39;</span><span class="token operator">:</span> <span class="token keyword">return</span> <span class="token punctuation">{</span> <span class="token operator">...</span>payload <span class="token punctuation">}</span>
    <span class="token keyword">default</span><span class="token operator">:</span> <span class="token keyword">return</span> state
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ol start="2"><li>\u5728 <code>store/reducers/index.js</code>\u4E2D\uFF0C\u5C06\u4EE5\u4E0A\u7684 Reducer \u51FD\u6570\u7EC4\u5408\u8FDB\u6839 Reducer</li></ol><div class="language-jsx ext-jsx line-numbers-mode"><pre class="language-jsx"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> combineReducers <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;redux&#39;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> login <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;./login&#39;</span>

<span class="token comment">// \u7EC4\u5408\u5404\u4E2A reducer \u51FD\u6570\uFF0C\u6210\u4E3A\u4E00\u4E2A\u6839 reducer</span>
<span class="token keyword">const</span> rootReducer <span class="token operator">=</span> <span class="token function">combineReducers</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  login
<span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token comment">// \u5BFC\u51FA\u6839 reducer</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> rootReducer
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ol start="3"><li>\u5728 <code>store/actions/login.js</code> \u4E2D\uFF0C\u5B9E\u73B0\u4E00\u4E2A\u8C03\u7528\u4EE5\u4E0A Reducer \u7684 Action</li></ol><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token doc-comment comment">/**
 * \u5C06 Token \u4FE1\u606F\u4FDD\u5B58\u5230 Redux \u4E2D
 * <span class="token keyword">@param</span> <span class="token class-name"><span class="token punctuation">{</span><span class="token operator">*</span><span class="token punctuation">}</span></span> <span class="token parameter">tokens</span> 
 * <span class="token keyword">@returns</span> 
 */</span>
<span class="token keyword">export</span> <span class="token keyword">const</span> <span class="token function-variable function">saveToken</span> <span class="token operator">=</span> <span class="token parameter">tokenInfo</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">type</span><span class="token operator">:</span> <span class="token string">&#39;login/token&#39;</span><span class="token punctuation">,</span>
    <span class="token literal-property property">payload</span><span class="token operator">:</span> tokenInfo
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ol start="4"><li>\u5728\u539F\u5148\u8C03\u7528\u540E\u7AEF\u63A5\u53E3\u83B7\u53D6 Token \u7684 Action \u4E2D\uFF0C\u8C03\u7528 <code>saveToken</code> Action</li></ol><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token comment">// \u63D0\u4EA4</span>
<span class="token function-variable function">onSubmit</span><span class="token operator">:</span> <span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token parameter">values</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">try</span> <span class="token punctuation">{</span>
    <span class="token keyword">await</span> <span class="token function">dispatch</span><span class="token punctuation">(</span><span class="token function">login</span><span class="token punctuation">(</span>values<span class="token punctuation">)</span><span class="token punctuation">)</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;\u767B\u9646\u6210\u529F&#39;</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span>e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>e<span class="token punctuation">.</span>response<span class="token punctuation">.</span>data<span class="token punctuation">.</span>message<span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u53EF\u4EE5\u901A\u8FC7 Redux DevTools \u63D2\u4EF6\uFF0C\u67E5\u770B\u4FDD\u5B58\u540E\u7684\u503C\uFF1A</p><img src="https://wuxiaohui-1254415986.cos.ap-nanjing.myqcloud.com/2022/01/30/image20210901182935828.png" alt="image-20210901182935828" style="zoom:50%;"><hr><h2 id="\u63D0\u793A\u6D88\u606F\u4F18\u5316" tabindex="-1"><a class="header-anchor" href="#\u63D0\u793A\u6D88\u606F\u4F18\u5316" aria-hidden="true">#</a> \u63D0\u793A\u6D88\u606F\u4F18\u5316</h2><div class="language-jsx ext-jsx line-numbers-mode"><pre class="language-jsx"><code><span class="token function-variable function">onSubmit</span><span class="token operator">:</span> <span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token parameter">values</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">try</span> <span class="token punctuation">{</span>
    <span class="token keyword">await</span> <span class="token function">dispatch</span><span class="token punctuation">(</span><span class="token function">login</span><span class="token punctuation">(</span>values<span class="token punctuation">)</span><span class="token punctuation">)</span>
    Toast<span class="token punctuation">.</span><span class="token function">success</span><span class="token punctuation">(</span><span class="token string">&#39;\u767B\u9646\u6210\u529F&#39;</span><span class="token punctuation">)</span>
    history<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token string">&#39;/home&#39;</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span>e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// console.log(e.response.data.message)</span>
    Toast<span class="token punctuation">.</span><span class="token function">fail</span><span class="token punctuation">(</span>e<span class="token punctuation">.</span>response<span class="token punctuation">.</span>data<span class="token punctuation">.</span>message<span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="\u4FDD\u5B58-token-\u5230\u672C\u5730\u7F13\u5B58" tabindex="-1"><a class="header-anchor" href="#\u4FDD\u5B58-token-\u5230\u672C\u5730\u7F13\u5B58" aria-hidden="true">#</a> \u4FDD\u5B58 Token \u5230\u672C\u5730\u7F13\u5B58</h2><blockquote><p>\u76EE\u6807\uFF1A\u5C06\u4ECE\u540E\u7AEF\u83B7\u53D6\u5230\u7684 Token \u4FDD\u5B58\u5230\u6D4F\u89C8\u5668\u7684 LocalStorage \u4E2D</p></blockquote><p>\u5B9E\u73B0\u601D\u8DEF\uFF1A</p><ul><li>\u5B9E\u73B0\u4E00\u4E2A\u5DE5\u5177\u6A21\u5757\uFF0C\u5728\u8BE5\u6A21\u5757\u4E2D\u4E13\u95E8\u64CD\u4F5C LocalStorage \u4E2D\u7684 Token \u4FE1\u606F</li><li>\u5728\u8C03\u7528\u540E\u7AEF\u63A5\u53E3\u83B7\u53D6 Token \u7684 Action \u4E2D\uFF0C\u8C03\u7528\u8BE5\u5DE5\u5177\u6A21\u5757\u4E2D\u7684\u65B9\u6CD5\u6765\u5B58\u50A8 Token</li></ul><p><strong>\u64CD\u4F5C\u6B65\u9AA4</strong></p><ol><li>\u521B\u5EFA <code>utils/storage.js</code>\uFF0C\u5E76\u7F16\u5199 Token \u7684\u8BBE\u7F6E\u3001\u83B7\u53D6\u3001\u5220\u9664\u7B49\u5DE5\u5177\u65B9\u6CD5</li></ol><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token comment">// \u7528\u6237 Token \u7684\u672C\u5730\u7F13\u5B58\u952E\u540D</span>
<span class="token keyword">const</span> <span class="token constant">TOKEN_KEY</span> <span class="token operator">=</span> <span class="token string">&#39;geek-itcast&#39;</span>

<span class="token doc-comment comment">/**
 * \u4ECE\u672C\u5730\u7F13\u5B58\u4E2D\u83B7\u53D6 Token \u4FE1\u606F
 */</span>
<span class="token keyword">export</span> <span class="token keyword">const</span> <span class="token function-variable function">getTokenInfo</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">parse</span><span class="token punctuation">(</span>localStorage<span class="token punctuation">.</span><span class="token function">getItem</span><span class="token punctuation">(</span><span class="token constant">TOKEN_KEY</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">||</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token doc-comment comment">/**
 * \u5C06 Token \u4FE1\u606F\u5B58\u5165\u7F13\u5B58
 * <span class="token keyword">@param</span> <span class="token class-name"><span class="token punctuation">{</span>Object<span class="token punctuation">}</span></span> <span class="token parameter">tokenInfo</span> \u4ECE\u540E\u7AEF\u83B7\u53D6\u5230\u7684 Token \u4FE1\u606F
 */</span>
<span class="token keyword">export</span> <span class="token keyword">const</span> <span class="token function-variable function">setTokenInfo</span> <span class="token operator">=</span> <span class="token parameter">tokenInfo</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  localStorage<span class="token punctuation">.</span><span class="token function">setItem</span><span class="token punctuation">(</span><span class="token constant">TOKEN_KEY</span><span class="token punctuation">,</span> <span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span>tokenInfo<span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token doc-comment comment">/**
 * \u5220\u9664\u672C\u5730\u7F13\u5B58\u4E2D\u7684 Token \u4FE1\u606F
 */</span>
<span class="token keyword">export</span> <span class="token keyword">const</span> <span class="token function-variable function">removeTokenInfo</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  localStorage<span class="token punctuation">.</span><span class="token function">removeItem</span><span class="token punctuation">(</span><span class="token constant">TOKEN_KEY</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token doc-comment comment">/**
 * \u5224\u65AD\u672C\u5730\u7F13\u5B58\u4E2D\u662F\u5426\u5B58\u5728 Token \u4FE1\u606F
 */</span>
<span class="token keyword">export</span> <span class="token keyword">const</span> <span class="token function-variable function">hasToken</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token operator">!</span><span class="token operator">!</span><span class="token function">getTokenInfo</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>token
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ol start="2"><li>\u539F\u5148\u8C03\u7528\u540E\u7AEF\u63A5\u53E3\u83B7\u53D6 Token \u7684 Action \u4E2D\uFF0C\u8C03\u7528\u4EE5\u4E0A\u7684\u672C\u5730\u7F13\u5B58\u5DE5\u5177\u65B9\u6CD5\u6765\u4FDD\u5B58 Token \u4FE1\u606F</li></ol><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> http<span class="token punctuation">,</span> removeTokens<span class="token punctuation">,</span> setTokens <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;@/utils&#39;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">export</span> <span class="token keyword">const</span> <span class="token function-variable function">login</span> <span class="token operator">=</span> <span class="token parameter">params</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token keyword">async</span> <span class="token parameter">dispatch</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> res <span class="token operator">=</span> <span class="token keyword">await</span> http<span class="token punctuation">.</span><span class="token function">post</span><span class="token punctuation">(</span><span class="token string">&#39;/authorizations&#39;</span><span class="token punctuation">,</span> params<span class="token punctuation">)</span>
    <span class="token keyword">const</span> tokenInfo <span class="token operator">=</span> res<span class="token punctuation">.</span>data<span class="token punctuation">.</span>data

    <span class="token comment">// \u4FDD\u5B58 Token \u5230 Redux \u4E2D</span>
    <span class="token function">dispatch</span><span class="token punctuation">(</span><span class="token function">saveToken</span><span class="token punctuation">(</span>tokenInfo<span class="token punctuation">)</span><span class="token punctuation">)</span>
    
    <span class="token comment">// \u4FDD\u5B58 Token \u5230 LocalStorage \u4E2D</span>
    <span class="token function">setTokenInfo</span><span class="token punctuation">(</span>tokenInfo<span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u6548\u679C\uFF1A</p><img src="https://wuxiaohui-1254415986.cos.ap-nanjing.myqcloud.com/2022/01/30/image20210901104851802.png" alt="image-20210901104851802" style="zoom:50%;"><hr><h2 id="\u52A0\u8F7D\u7F13\u5B58\u7684-token-\u6765\u521D\u59CB\u5316-redux" tabindex="-1"><a class="header-anchor" href="#\u52A0\u8F7D\u7F13\u5B58\u7684-token-\u6765\u521D\u59CB\u5316-redux" aria-hidden="true">#</a> \u52A0\u8F7D\u7F13\u5B58\u7684 Token \u6765\u521D\u59CB\u5316 Redux</h2><blockquote><p>\u76EE\u6807\uFF1A\u4ECE\u7F13\u5B58\u4E2D\u8BFB\u53D6 token \u4FE1\u606F\uFF0C\u5982\u679C\u5B58\u5728\u5219\u8BBE\u7F6E\u4E3A Redux Store \u7684\u521D\u59CB\u72B6\u6001</p><p>\u3010\u5982\u679C\u4E0D\u505A\u672C\u64CD\u4F5C\u7684\u8BDD\uFF0C\u4F1A\u51FA\u73B0\u5F53\u9875\u9762\u5237\u65B0\u540E\uFF0C\u7F13\u5B58\u4E2D\u6709\u503C\u800C Redux \u4E2D\u65E0\u503C\u7684\u60C5\u51B5\u3011</p></blockquote><p><strong>\u64CD\u4F5C\u6B65\u9AA4</strong></p><ol><li>\u5728 <code>store/index.js</code> \u4E2D\uFF0C\u8C03\u7528\u7F13\u5B58\u5DE5\u5177\u65B9\u6CD5\u6765\u8BFB\u53D6 Token \u4FE1\u606F\uFF0C\u5E76\u8BBE\u7F6E\u7ED9 <code>createStore</code> \u76F8\u5173\u53C2\u6570\uFF1A</li></ol><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> getTokenInfo <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;@/utils/storage&#39;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">const</span> store <span class="token operator">=</span> <span class="token function">createStore</span><span class="token punctuation">(</span>
  <span class="token comment">// ...</span>
  
  <span class="token comment">// \u53C2\u6570\u4E8C\uFF1A\u521D\u59CB\u5316\u65F6\u8981\u52A0\u8F7D\u7684\u72B6\u6001</span>
  <span class="token punctuation">{</span>
    <span class="token literal-property property">login</span><span class="token operator">:</span> <span class="token function">getTokenInfo</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  
  <span class="token comment">// ...</span>
<span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><hr><h2 id="redux-\u5728\u5B9E\u9645\u5F00\u53D1\u4E2D\u7684\u5E38\u7528\u6A21\u5F0F" tabindex="-1"><a class="header-anchor" href="#redux-\u5728\u5B9E\u9645\u5F00\u53D1\u4E2D\u7684\u5E38\u7528\u6A21\u5F0F" aria-hidden="true">#</a> Redux \u5728\u5B9E\u9645\u5F00\u53D1\u4E2D\u7684\u5E38\u7528\u6A21\u5F0F</h2><blockquote><p>\u76EE\u6807\uFF1A\u6839\u636E\u4E0A\u9762\u51E0\u7AE0\u7684 redux \u4F7F\u7528\u60C5\u51B5\uFF0C\u603B\u7ED3\u5B9E\u9645\u5F00\u53D1\u65F6\u7684\u6700\u4F73\u5B9E\u8DF5\u6A21\u5F0F</p></blockquote><p><strong>\u63A8\u8350\u7684\u76EE\u5F55\u7ED3\u6784</strong></p><img src="https://wuxiaohui-1254415986.cos.ap-nanjing.myqcloud.com/2022/01/30/image20210901150309264.png" alt="image-20210901150309264" style="zoom:50%;"><p><strong>\u76EE\u5F55\uFF1A<code>store/actions</code></strong></p><p>\u6309\u529F\u80FD\u6A21\u5757\u7684\u4E0D\u540C\uFF0C\u62C6\u5206\u82E5\u5E72\u72EC\u7ACB\u7684\u6587\u4EF6\uFF0C\u5B58\u653E Action Creator \u51FD\u6570\u3002</p><ul><li>Action Creator \u8FD4\u56DE\u51FD\u6570\uFF1A\u7528\u4E8E\u542B\u6709\u5F02\u6B65\u884C\u4E3A\u7684\u64CD\u4F5C</li></ul><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">export</span> <span class="token keyword">const</span> <span class="token function-variable function">test1</span> <span class="token operator">=</span> <span class="token parameter">params</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token keyword">async</span> <span class="token parameter">dispatch</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token comment">// \u6267\u884C\u5F02\u6B65\u4E1A\u52A1\u903B\u8F91 ...</span>
    <span class="token comment">// \u901A\u8FC7 dispatch \u53EF\u4EE5\u518D\u8C03\u7528\u5176\u4ED6 Action ...</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>Action Creator \u8FD4\u56DE\u5BF9\u8C61\uFF1A\u7528\u4E8E\u540C\u6B65\u884C\u4E3A\u7684\u64CD\u4F5C</li></ul><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">export</span> <span class="token keyword">const</span> <span class="token function-variable function">test2</span> <span class="token operator">=</span> <span class="token parameter">params</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token comment">// \u63A8\u8350\u8FD4\u56DE\u7684 action \u5BF9\u8C61\u4E2D\uFF0C\u53EA\u5B58\u653E\u4E24\u4E2A\u5C5E\u6027\uFF1Atype\u3001payload</span>
  <span class="token keyword">return</span> <span class="token punctuation">{</span>
    <span class="token comment">// \u6CE8\u610F\u547D\u540D\u89C4\u8303\uFF0C\u63A8\u8350\u89C4\u5219\u4E3A domain/eventName\u3002\u4F8B\u5982\uFF1Alogin/token</span>
    <span class="token literal-property property">type</span><span class="token operator">:</span> <span class="token string">&#39;abc/hello&#39;</span><span class="token punctuation">,</span>
    <span class="token comment">// \u6240\u6709\u8981\u4F20\u9012\u7ED9 reducer \u7684\u4E1A\u52A1\u6570\u636E\uFF0C\u90FD\u653E\u5230 payload \u5C5E\u6027\u4E0A</span>
    <span class="token literal-property property">payload</span><span class="token operator">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>\u76EE\u5F55\uFF1A<code>store/reducers</code></strong></p><p>\u6309\u529F\u80FD\u6A21\u5757\u7684\u4E0D\u540C\uFF0C\u62C6\u5206\u82E5\u5E72\u72EC\u7ACB\u6587\u4EF6\uFF0C\u5B58\u653E Reducer \u51FD\u6570\u3002</p><p>\u6700\u540E\uFF0C\u5C06\u8FD9\u4E9B\u72EC\u7ACB\u7684 Reducer \u6A21\u5757\u901A\u8FC7\u8BE5\u76EE\u5F55\u4E2D\u7684 <code>index.js</code> \u5408\u5E76\u4E3A\u6839 Reducer\u3002</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token comment">// \u6839 Reducer</span>
<span class="token keyword">const</span> rootReducer <span class="token operator">=</span> <span class="token function">combineReducers</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  login<span class="token punctuation">,</span>
  profile<span class="token punctuation">,</span>
  home<span class="token punctuation">,</span>
  <span class="token comment">// ...</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>\u6587\u4EF6\uFF1A<code>store/index.js</code></strong></p><p>\u7528\u4E8E\u521B\u5EFA\u548C\u914D\u7F6E Redux Store\u3002</p><p><strong>\u5728\u7EC4\u4EF6\u4E2D\u8C03\u7528 Redux \u7684\u6781\u7B80\u6D41\u7A0B</strong></p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token comment">// \u7B2C\u4E00\u6B65\uFF1A\u4F7F\u7528 useDispatch() \u83B7\u53D6\u5206\u53D1\u5668</span>
<span class="token keyword">const</span> dispatch <span class="token operator">=</span> <span class="token function">useDispatch</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

<span class="token comment">// \u7B2C\u4E8C\u6B65\uFF1A\u8C03\u7528 Action Creator \u83B7\u53D6 Action</span>
<span class="token keyword">const</span> action <span class="token operator">=</span> <span class="token function">someActionCreatorFuncion</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

<span class="token comment">// \u7B2C\u4E09\u6B65\uFF1A\u901A\u8FC7\u5411\u5206\u53D1\u5668\u8C03\u7528 Action \u51FD\u6570\u5185\u6216 Reducer \u51FD\u6570\u5185\u7684\u4E1A\u52A1\u903B\u8F91</span>
<span class="token function">dispatch</span><span class="token punctuation">(</span>action<span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><hr><h2 id="\u4E3A\u7F51\u7EDC\u8BF7\u6C42\u6DFB\u52A0-token-\u8BF7\u6C42\u5934" tabindex="-1"><a class="header-anchor" href="#\u4E3A\u7F51\u7EDC\u8BF7\u6C42\u6DFB\u52A0-token-\u8BF7\u6C42\u5934" aria-hidden="true">#</a> \u4E3A\u7F51\u7EDC\u8BF7\u6C42\u6DFB\u52A0 Token \u8BF7\u6C42\u5934</h2><blockquote><p>\u76EE\u6807\uFF1A\u5728\u53D1\u9001\u8BF7\u6C42\u65F6\u5728\u8BF7\u6C42\u5934\u4E2D\u643A\u5E26\u4E0A Token \u4FE1\u606F\uFF0C\u4EE5\u4FBF\u5728\u8BF7\u6C42\u9700\u8981\u9274\u6743\u7684\u540E\u7AEF\u63A5\u53E3\u65F6\u53EF\u4EE5\u987A\u5229\u8C03\u7528</p></blockquote><p>\u5B9E\u73B0\u601D\u8DEF\uFF1A</p><ul><li>\u5728 axios \u8BF7\u6C42\u62E6\u622A\u5668\u4E2D\uFF0C\u8BFB\u53D6\u4FDD\u5B58\u5728 Redux \u6216 LocalStorage \u4E2D\u7684 Token \u4FE1\u606F\uFF0C\u5E76\u8BBE\u7F6E\u5230\u8BF7\u6C42\u5934\u4E0A</li></ul><p><strong>\u64CD\u4F5C\u6B65\u9AA4</strong></p><ol><li>\u5728 <code>utils/http.js</code> \u4E2D\uFF0C\u6539\u9020\u8BF7\u6C42\u62E6\u622A\u5668\uFF1A</li></ol><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> getTokenInfo <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;./storage&#39;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token comment">// 2. \u8BBE\u7F6E\u8BF7\u6C42\u62E6\u622A\u5668\u548C\u54CD\u5E94\u62E6\u622A\u5668</span>
http<span class="token punctuation">.</span>interceptors<span class="token punctuation">.</span>request<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">config</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token comment">// \u83B7\u53D6\u7F13\u5B58\u4E2D\u7684 Token \u4FE1\u606F</span>
  <span class="token keyword">const</span> token <span class="token operator">=</span> <span class="token function">getTokenInfo</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>token
  <span class="token keyword">if</span> <span class="token punctuation">(</span>token<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// \u8BBE\u7F6E\u8BF7\u6C42\u5934\u7684 Authorization \u5B57\u6BB5</span>
    config<span class="token punctuation">.</span>headers<span class="token punctuation">[</span><span class="token string">&#39;Authorization&#39;</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token template-string"><span class="token template-punctuation string">\`</span><span class="token string">Bearer </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">\${</span>token<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">\`</span></span>
  <span class="token punctuation">}</span>
  <span class="token keyword">return</span> config
<span class="token punctuation">}</span><span class="token punctuation">)</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h1 id="\u6574\u4F53\u5E03\u5C40" tabindex="-1"><a class="header-anchor" href="#\u6574\u4F53\u5E03\u5C40" aria-hidden="true">#</a> \u6574\u4F53\u5E03\u5C40</h1><h2 id="\u5B9E\u73B0\u5E95\u90E8-tab-\u5E03\u5C40" tabindex="-1"><a class="header-anchor" href="#\u5B9E\u73B0\u5E95\u90E8-tab-\u5E03\u5C40" aria-hidden="true">#</a> \u5B9E\u73B0\u5E95\u90E8 tab \u5E03\u5C40</h2><blockquote><p>\u76EE\u6807\uFF1A\u5B9E\u73B0\u4E00\u4E2A\u5E26\u6709\u5E95\u90E8 tab \u5BFC\u822A\u680F\u7684\u9875\u9762\u5E03\u5C40\u5BB9\u5668\u7EC4\u4EF6\uFF0C\u5F53\u70B9\u51FB\u5E95\u90E8\u6309\u94AE\u540E\uFF0C\u53EF\u5207\u6362\u663E\u793A\u4E0D\u540C\u5185\u5BB9</p></blockquote><img src="https://wuxiaohui-1254415986.cos.ap-nanjing.myqcloud.com/2022/01/30/image20210830181305183.png" alt="image-20210830181305183" style="zoom:40%;"><p>\u5B9E\u73B0\u601D\u8DEF\uFF1A</p><ul><li>\u5728\u7EC4\u4EF6\u4E2D\u5B58\u5728\u4E24\u4E2A\u533A\u57DF\uFF1A\u9875\u9762\u5185\u5BB9\u533A\u57DF\u3001tab \u6309\u94AE\u533A\u57DF</li><li>\u5B9A\u4E49\u4E00\u4E2A\u6570\u7EC4\u6765\u5B58\u653E tab \u6309\u94AE\u76F8\u5173\u6570\u636E\uFF0C\u8FD9\u6837\u53EF\u4EE5\u65B9\u4FBF\u7EDF\u4E00\u7BA1\u7406\u6309\u94AE</li><li>\u901A\u8FC7\u904D\u5386\u6570\u7EC4\u6765\u6E32\u67D3 tab \u6309\u94AE</li><li>\u70B9\u51FB\u6309\u94AE\u65F6\uFF0C\u6839\u636E\u5F53\u524D\u8BBF\u95EE\u7684\u9875\u9762\u8DEF\u5F84\u548C\u6309\u94AE\u672C\u8EAB\u7684\u8DEF\u5F84\uFF0C\u5224\u65AD\u5F53\u524D\u6309\u94AE\u662F\u5426\u662F\u9009\u4E2D\u72B6\u6001\uFF0C\u5E76\u6DFB\u52A0\u9AD8\u4EAE\u6837\u5F0F</li><li>\u70B9\u51FB\u6309\u94AE\u540E\uFF0C\u8FDB\u884C\u8DEF\u7531\u8DF3\u8F6C</li></ul><p><strong>\u64CD\u4F5C\u6B65\u9AA4</strong></p><ul><li>\u51C6\u5907\u57FA\u672C\u7ED3\u6784</li></ul><div class="language-jsx ext-jsx line-numbers-mode"><pre class="language-jsx"><code><span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">function</span> <span class="token function">Home</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token punctuation">(</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">className</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>styles<span class="token punctuation">.</span>root<span class="token punctuation">}</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
      </span><span class="token punctuation">{</span><span class="token comment">/* \u533A\u57DF\u4E00\uFF1A\u70B9\u51FB\u6309\u94AE\u5207\u6362\u663E\u793A\u5185\u5BB9\u7684\u533A\u57DF */</span><span class="token punctuation">}</span><span class="token plain-text">
      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">className</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>tab-content<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
      </span><span class="token punctuation">{</span><span class="token comment">/* \u533A\u57DF\u4E8C\uFF1A\u6309\u94AE\u533A\u57DF\uFF0C\u4F1A\u4F7F\u7528\u56FA\u5B9A\u5B9A\u4F4D\u663E\u793A\u5728\u9875\u9762\u5E95\u90E8 */</span><span class="token punctuation">}</span><span class="token plain-text">
      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">className</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>tabbar<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
        </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">className</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>tabbar-item tabbar-item-active<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
          </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Icon</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>iconbtn_home_sel<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span><span class="token plain-text">
          </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">\u9996\u9875</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
        </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
        </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">className</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>tabbar-item<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
          </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Icon</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>iconbtn_qa<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span><span class="token plain-text">
          </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">\u95EE\u7B54</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
        </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
        </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">className</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>tabbar-item<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
          </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Icon</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>iconbtn_video<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span><span class="token plain-text">
          </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">\u89C6\u9891</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
        </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
        </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">className</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>tabbar-item<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
          </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Icon</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>iconbtn_mine<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span><span class="token plain-text">
          </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">\u6211\u7684</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
        </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
  <span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li><p>\u5C06\u53D1\u653E\u8D44\u6599\u4E2D\u7684 <code>\u8D44\u6E90 &gt; src\u4EE3\u7801\u6587\u4EF6 &gt; layouts &gt; index.module.scss</code> \u62F7\u8D1D\u5230\u8BE5\u76EE\u5F55\u4E0B</p></li><li><p>\u5728\u7EC4\u4EF6\u5B9A\u4E49\u4E00\u4E2A\u6570\u7EC4\uFF0C\u4EE3\u8868 tab \u6309\u94AE\u7684\u6570\u636E</p></li></ul><div class="language-jsx ext-jsx line-numbers-mode"><pre class="language-jsx"><code><span class="token comment">// \u5C06 tab \u6309\u94AE\u7684\u6570\u636E\u653E\u5728\u4E00\u4E2A\u6570\u7EC4\u4E2D</span>
<span class="token comment">// - id \u552F\u4E00\u6027ID</span>
<span class="token comment">// - title \u6309\u94AE\u663E\u793A\u7684\u6587\u672C</span>
<span class="token comment">// - to \u70B9\u51FB\u6309\u94AE\u540E\u5207\u6362\u5230\u7684\u9875\u9762\u8DEF\u5F84</span>
<span class="token comment">// - icon \u6309\u94AE\u4E0A\u663E\u793A\u7684\u56FE\u6807\u540D\u79F0</span>
<span class="token keyword">const</span> buttons <span class="token operator">=</span> <span class="token punctuation">[</span>
  <span class="token punctuation">{</span> <span class="token literal-property property">id</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token literal-property property">title</span><span class="token operator">:</span> <span class="token string">&#39;\u9996\u9875&#39;</span><span class="token punctuation">,</span> <span class="token literal-property property">to</span><span class="token operator">:</span> <span class="token string">&#39;/home&#39;</span><span class="token punctuation">,</span> <span class="token literal-property property">icon</span><span class="token operator">:</span> <span class="token string">&#39;iconbtn_home&#39;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">{</span> <span class="token literal-property property">id</span><span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token literal-property property">title</span><span class="token operator">:</span> <span class="token string">&#39;\u95EE\u7B54&#39;</span><span class="token punctuation">,</span> <span class="token literal-property property">to</span><span class="token operator">:</span> <span class="token string">&#39;/home/question&#39;</span><span class="token punctuation">,</span> <span class="token literal-property property">icon</span><span class="token operator">:</span> <span class="token string">&#39;iconbtn_qa&#39;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">{</span> <span class="token literal-property property">id</span><span class="token operator">:</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token literal-property property">title</span><span class="token operator">:</span> <span class="token string">&#39;\u89C6\u9891&#39;</span><span class="token punctuation">,</span> <span class="token literal-property property">to</span><span class="token operator">:</span> <span class="token string">&#39;/home/video&#39;</span><span class="token punctuation">,</span> <span class="token literal-property property">icon</span><span class="token operator">:</span> <span class="token string">&#39;iconbtn_video&#39;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">{</span> <span class="token literal-property property">id</span><span class="token operator">:</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token literal-property property">title</span><span class="token operator">:</span> <span class="token string">&#39;\u6211\u7684&#39;</span><span class="token punctuation">,</span> <span class="token literal-property property">to</span><span class="token operator">:</span> <span class="token string">&#39;/home/profile&#39;</span><span class="token punctuation">,</span> <span class="token literal-property property">icon</span><span class="token operator">:</span> <span class="token string">&#39;iconbtn_mine&#39;</span> <span class="token punctuation">}</span>
<span class="token punctuation">]</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>\u52A8\u6001\u6E32\u67D3TabBar</li></ul><div class="language-jsx ext-jsx line-numbers-mode"><pre class="language-jsx"><code><span class="token keyword">import</span> Icon <span class="token keyword">from</span> <span class="token string">&#39;@/components/Icon&#39;</span>
<span class="token keyword">import</span> classnames <span class="token keyword">from</span> <span class="token string">&#39;classnames&#39;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> useHistory<span class="token punctuation">,</span> useLocation <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;react-router-dom&#39;</span>
<span class="token keyword">import</span> styles <span class="token keyword">from</span> <span class="token string">&#39;./index.module.scss&#39;</span>

<span class="token comment">// \u5C06 tab \u6309\u94AE\u7684\u6570\u636E\u653E\u5728\u4E00\u4E2A\u6570\u7EC4\u4E2D</span>
<span class="token comment">// ...</span>

<span class="token comment">/**
 * \u5B9A\u4E49 tab \u5E03\u5C40\u7EC4\u4EF6
 */</span>
<span class="token keyword">const</span> <span class="token function-variable function">TabBarLayout</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token comment">// \u83B7\u53D6\u8DEF\u7531\u5386\u53F2 history \u5BF9\u8C61</span>
  <span class="token keyword">const</span> history <span class="token operator">=</span> <span class="token function">useHistory</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

  <span class="token comment">// \u83B7\u53D6\u8DEF\u7531\u4FE1\u606F location \u5BF9\u8C61</span>
  <span class="token keyword">const</span> location <span class="token operator">=</span> <span class="token function">useLocation</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

  <span class="token keyword">return</span> <span class="token punctuation">(</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">className</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>styles<span class="token punctuation">.</span>root<span class="token punctuation">}</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
      </span><span class="token punctuation">{</span><span class="token comment">/* \u533A\u57DF\u4E00\uFF1A\u70B9\u51FB\u6309\u94AE\u5207\u6362\u663E\u793A\u5185\u5BB9\u7684\u533A\u57DF */</span><span class="token punctuation">}</span><span class="token plain-text">
      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">className</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>tab-content<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">

      </span><span class="token punctuation">{</span><span class="token comment">/* \u533A\u57DF\u4E8C\uFF1A\u6309\u94AE\u533A\u57DF\uFF0C\u4F1A\u4F7F\u7528\u56FA\u5B9A\u5B9A\u4F4D\u663E\u793A\u5728\u9875\u9762\u5E95\u90E8 */</span><span class="token punctuation">}</span><span class="token plain-text">
      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">className</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>tabbar<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
        </span><span class="token punctuation">{</span>buttons<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token parameter">btn</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
          <span class="token comment">// \u5224\u65AD\u5F53\u524D\u9875\u9762\u8DEF\u5F84\u548C\u6309\u94AE\u8DEF\u5F84\u662F\u5426\u4E00\u81F4\uFF0C\u5982\u679C\u4E00\u81F4\u5219\u8868\u793A\u8BE5\u6309\u94AE\u5904\u4E8E\u9009\u4E2D\u72B6\u6001</span>
          <span class="token keyword">const</span> selected <span class="token operator">=</span> btn<span class="token punctuation">.</span>to <span class="token operator">===</span> location<span class="token punctuation">.</span>pathname

          <span class="token keyword">return</span> <span class="token punctuation">(</span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span>
              <span class="token attr-name">key</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>btn<span class="token punctuation">.</span>id<span class="token punctuation">}</span></span>
              <span class="token attr-name">className</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token function">classnames</span><span class="token punctuation">(</span><span class="token string">&#39;tabbar-item&#39;</span><span class="token punctuation">,</span> selected <span class="token operator">?</span> <span class="token string">&#39;tabbar-item-active&#39;</span> <span class="token operator">:</span> <span class="token string">&#39;&#39;</span><span class="token punctuation">)</span><span class="token punctuation">}</span></span>
              <span class="token attr-name">onClick</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> history<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>btn<span class="token punctuation">.</span>to<span class="token punctuation">)</span><span class="token punctuation">}</span></span>
            <span class="token punctuation">&gt;</span></span><span class="token plain-text">
              </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Icon</span></span> <span class="token attr-name">type</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>btn<span class="token punctuation">.</span>icon <span class="token operator">+</span> <span class="token punctuation">(</span>selected <span class="token operator">?</span> <span class="token string">&#39;_sel&#39;</span> <span class="token operator">:</span> <span class="token string">&#39;&#39;</span><span class="token punctuation">)</span><span class="token punctuation">}</span></span> <span class="token punctuation">/&gt;</span></span><span class="token plain-text">
              </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">{</span>btn<span class="token punctuation">.</span>title<span class="token punctuation">}</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
            </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
          <span class="token punctuation">)</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token plain-text">
      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
  <span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> TabBarLayout
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u6548\u679C\uFF1A</p><img src="https://wuxiaohui-1254415986.cos.ap-nanjing.myqcloud.com/2022/01/30/image20210831131915002.png" alt="image-20210831131915002" style="zoom:40%;"><hr><h2 id="\u521B\u5EFA-tab-\u6309\u94AE\u9875\u9762\u5E76\u914D\u7F6E\u5D4C\u5957\u8DEF\u7531" tabindex="-1"><a class="header-anchor" href="#\u521B\u5EFA-tab-\u6309\u94AE\u9875\u9762\u5E76\u914D\u7F6E\u5D4C\u5957\u8DEF\u7531" aria-hidden="true">#</a> \u521B\u5EFA tab \u6309\u94AE\u9875\u9762\u5E76\u914D\u7F6E\u5D4C\u5957\u8DEF\u7531</h2><blockquote><p>\u76EE\u6807\uFF1A\u4E3A tab \u5E03\u5C40\u7EC4\u4EF6\u4E2D\u7684 4 \u4E2A\u6309\u94AE\u521B\u5EFA\u5BF9\u5E94\u7684\u9875\u9762\uFF1B\u5E76\u914D\u7F6E\u8DEF\u7531\uFF0C\u4F7F\u6309\u94AE\u70B9\u51FB\u540E\u80FD\u663E\u793A\u5BF9\u5E94\u9875\u9762</p></blockquote><p><strong>\u64CD\u4F5C\u6B65\u9AA4</strong></p><ol><li>\u521B\u5EFA\u56DB\u4E2A\u9875\u9762\u7EC4\u4EF6\uFF1A</li></ol><div class="language-markdown ext-md line-numbers-mode"><pre class="language-markdown"><code><span class="token list punctuation">-</span> \u9996\u9875\uFF1Apages/Home/index.js
<span class="token list punctuation">-</span> \u95EE\u7B54\uFF1Apages/Question/index.js
<span class="token list punctuation">-</span> \u89C6\u9891\uFF1Apages/Video/index.js
<span class="token list punctuation">-</span> \u6211\u7684\uFF1Apages/Profile/index.js
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u5F53\u524D\uFF0C\u8FD9\u4E9B\u7EC4\u4EF6\u7684\u4EE3\u7801\u4F7F\u7528\u6700\u7B80\u5355\u7684\u5373\u53EF\uFF0C\u5982\uFF1A</p><div class="language-jsx ext-jsx line-numbers-mode"><pre class="language-jsx"><code><span class="token keyword">const</span> <span class="token function-variable function">Home</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token punctuation">(</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">\u9996\u9875</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
  <span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> Home
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ol start="2"><li>\u5728 <code>layouts/TabBarLayout.js</code> \u4E2D\u914D\u7F6E4\u4E2A\u9875\u9762\u7684\u8DEF\u7531</li></ol><div class="language-jsx ext-jsx line-numbers-mode"><pre class="language-jsx"><code><span class="token keyword">import</span> Home <span class="token keyword">from</span> <span class="token string">&#39;@/pages/Home&#39;</span>
<span class="token keyword">import</span> Profile <span class="token keyword">from</span> <span class="token string">&#39;@/pages/Profile&#39;</span>
<span class="token keyword">import</span> Question <span class="token keyword">from</span> <span class="token string">&#39;@/pages/Question&#39;</span>
<span class="token keyword">import</span> Video <span class="token keyword">from</span> <span class="token string">&#39;@/pages/Video&#39;</span>

<span class="token comment">// ...</span>


<span class="token punctuation">{</span><span class="token comment">/* \u533A\u57DF\u4E00\uFF1A\u70B9\u51FB\u6309\u94AE\u5207\u6362\u663E\u793A\u5185\u5BB9\u7684\u533A\u57DF */</span><span class="token punctuation">}</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">className</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>tab-content<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
  </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Route</span></span> <span class="token attr-name">path</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>/home/index<span class="token punctuation">&quot;</span></span> <span class="token attr-name">exact</span> <span class="token attr-name">component</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>Home<span class="token punctuation">}</span></span> <span class="token punctuation">/&gt;</span></span><span class="token plain-text">
  </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Route</span></span> <span class="token attr-name">path</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>/home/question<span class="token punctuation">&quot;</span></span> <span class="token attr-name">exact</span> <span class="token attr-name">component</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>Question<span class="token punctuation">}</span></span> <span class="token punctuation">/&gt;</span></span><span class="token plain-text">
  </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Route</span></span> <span class="token attr-name">path</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>/home/video<span class="token punctuation">&quot;</span></span> <span class="token attr-name">exact</span> <span class="token attr-name">component</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>Video<span class="token punctuation">}</span></span> <span class="token punctuation">/&gt;</span></span><span class="token plain-text">
  </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Route</span></span> <span class="token attr-name">path</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>/home/profile<span class="token punctuation">&quot;</span></span> <span class="token attr-name">exact</span> <span class="token attr-name">component</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>Profile<span class="token punctuation">}</span></span> <span class="token punctuation">/&gt;</span></span><span class="token plain-text">
</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u6548\u679C\uFF1A</p><img src="https://wuxiaohui-1254415986.cos.ap-nanjing.myqcloud.com/2022/01/30/image20210831161825392.png" alt="image-20210831161825392" style="zoom:40%;"><h2 id="\u521B\u5EFA\u5176\u4ED6\u529F\u80FD\u9875\u9762\u5E76\u914D\u7F6E\u8DEF\u7531" tabindex="-1"><a class="header-anchor" href="#\u521B\u5EFA\u5176\u4ED6\u529F\u80FD\u9875\u9762\u5E76\u914D\u7F6E\u8DEF\u7531" aria-hidden="true">#</a> \u521B\u5EFA\u5176\u4ED6\u529F\u80FD\u9875\u9762\u5E76\u914D\u7F6E\u8DEF\u7531</h2><blockquote><p>\u76EE\u6807\uFF1A\u4E8B\u5148\u521B\u5EFA\u672C\u9879\u76EE\u4E2D\u5C06\u8981\u5F00\u53D1\u7684\u5404\u4E2A\u9875\u9762\u7EC4\u4EF6\uFF0C\u5E76\u914D\u7F6E\u8DEF\u7531</p></blockquote><p><strong>\u3010\u672C\u7AE0\u8282\u6240\u505A\u7684\u4E8B\uFF0C\u4F60\u4E5F\u53EF\u4EE5\u4E0D\u4E00\u6B21\u6027\u505A\u5B8C\uFF0C\u53EF\u4EE5\u4E00\u4E2A\u4E00\u4E2A\u9875\u9762\u8FB9\u5F00\u53D1\u8FB9\u914D\u7F6E\u3011</strong></p><div class="language-markdown ext-md line-numbers-mode"><pre class="language-markdown"><code>\u8BF4\u660E\uFF1A\u8FD9\u4E9B\u9875\u9762\u662F\u9664\u4E86 tab \u5E95\u90E8\u5BFC\u822A\u680F\u4E0A\u76844\u4E2A\u9875\u9762\u4EE5\u5916\u7684\u5176\u4ED6\u529F\u80FD\u9875
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p><strong>\u64CD\u4F5C\u6B65\u9AA4</strong></p><ol><li>\u521B\u5EFA\u4EE5\u4E0B\u9875\u9762\u7EC4\u4EF6\uFF1A</li></ol><div class="language-markdown ext-md line-numbers-mode"><pre class="language-markdown"><code><span class="token list punctuation">-</span> \u767B\u5F55\u9875\u9762\uFF1Apages/Login/index.js
<span class="token list punctuation">-</span> \u641C\u7D22\u9875\u9762\uFF1Apages/Search/index.js
<span class="token list punctuation">-</span> \u641C\u7D22\u7ED3\u679C\u9875\u9762\uFF1Apages/Search/Result/index.js
<span class="token list punctuation">-</span> \u6587\u7AE0\u8BE6\u60C5\u9875\u9762\uFF1Apages/Article/index.js
<span class="token list punctuation">-</span> \u4E2A\u4EBA\u4FE1\u606F\u7F16\u8F91\u9875\u9762\uFF1Apages/Profile/Edit/index.js
<span class="token list punctuation">-</span> \u7528\u6237\u53CD\u9988\u9875\u9762\uFF1Apages/Profile/Feedback/index.js
<span class="token list punctuation">-</span> \u673A\u5668\u4EBA\u5BA2\u670D\u804A\u5929\u9875\u9762\uFF1Apages/Profile/Chat/index.js
<span class="token list punctuation">-</span> 404 \u9519\u8BEF\u9875\u9762\uFF1Apages/NotFound/index.js
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u5F53\u524D\uFF0C\u8FD9\u4E9B\u7EC4\u4EF6\u7684\u4EE3\u7801\u4F7F\u7528\u6700\u7B80\u5355\u7684\u5373\u53EF\uFF0C\u5982\uFF1A</p><div class="language-jsx ext-jsx line-numbers-mode"><pre class="language-jsx"><code><span class="token keyword">const</span> <span class="token function-variable function">Login</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token punctuation">(</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">\u767B\u5F55</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
  <span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> Login
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ol start="2"><li>\u5728\u6839\u7EC4\u4EF6 App \u4E2D\uFF0C\u914D\u7F6E\u4EE5\u4E0A\u9875\u9762\u7684\u8DEF\u7531\uFF1A</li></ol><div class="language-jsx ext-jsx line-numbers-mode"><pre class="language-jsx"><code><span class="token keyword">import</span> Article <span class="token keyword">from</span> <span class="token string">&quot;./pages/Article&quot;</span>
<span class="token keyword">import</span> Login <span class="token keyword">from</span> <span class="token string">&quot;./pages/Login&quot;</span>
<span class="token keyword">import</span> NotFound <span class="token keyword">from</span> <span class="token string">&quot;./pages/NotFound&quot;</span>
<span class="token keyword">import</span> Chat <span class="token keyword">from</span> <span class="token string">&quot;./pages/Profile/Chat&quot;</span>
<span class="token keyword">import</span> ProfileEdit <span class="token keyword">from</span> <span class="token string">&quot;./pages/Profile/Edit&quot;</span>
<span class="token keyword">import</span> ProfileFeedback <span class="token keyword">from</span> <span class="token string">&quot;./pages/Profile/Feedback&quot;</span>
<span class="token keyword">import</span> Search <span class="token keyword">from</span> <span class="token string">&quot;./pages/Search&quot;</span>
<span class="token keyword">import</span> SearchResult <span class="token keyword">from</span> <span class="token string">&quot;./pages/Search/Result&quot;</span>

<span class="token comment">// ...</span>

<span class="token keyword">const</span> <span class="token function-variable function">App</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token punctuation">(</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Router</span></span> <span class="token attr-name">history</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>history<span class="token punctuation">}</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Switch</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
        </span><span class="token punctuation">{</span><span class="token comment">/* ... */</span><span class="token punctuation">}</span><span class="token plain-text">

        </span><span class="token punctuation">{</span><span class="token comment">/* \u4E0D\u4F7F\u7528 tab \u5E03\u5C40\u7684\u754C\u9762 */</span><span class="token punctuation">}</span><span class="token plain-text">
        </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Route</span></span> <span class="token attr-name">path</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>/login<span class="token punctuation">&quot;</span></span> <span class="token attr-name">component</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>Login<span class="token punctuation">}</span></span> <span class="token punctuation">/&gt;</span></span><span class="token plain-text">
        </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Route</span></span> <span class="token attr-name">path</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>/search<span class="token punctuation">&quot;</span></span> <span class="token attr-name">component</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>Search<span class="token punctuation">}</span></span> <span class="token punctuation">/&gt;</span></span><span class="token plain-text">
        </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Route</span></span> <span class="token attr-name">path</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>/article/:id<span class="token punctuation">&quot;</span></span> <span class="token attr-name">component</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>Article<span class="token punctuation">}</span></span> <span class="token punctuation">/&gt;</span></span><span class="token plain-text">
        </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Route</span></span> <span class="token attr-name">path</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>/search/result<span class="token punctuation">&quot;</span></span> <span class="token attr-name">component</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>SearchResult<span class="token punctuation">}</span></span> <span class="token punctuation">/&gt;</span></span><span class="token plain-text">
        </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Route</span></span> <span class="token attr-name">path</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>/profile/edit<span class="token punctuation">&quot;</span></span> <span class="token attr-name">component</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>ProfileEdit<span class="token punctuation">}</span></span> <span class="token punctuation">/&gt;</span></span><span class="token plain-text">
        </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Route</span></span> <span class="token attr-name">path</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>/profile/feedback<span class="token punctuation">&quot;</span></span> <span class="token attr-name">component</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>ProfileFeedback<span class="token punctuation">}</span></span> <span class="token punctuation">/&gt;</span></span><span class="token plain-text">
        </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Route</span></span> <span class="token attr-name">path</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>/profile/chat<span class="token punctuation">&quot;</span></span> <span class="token attr-name">component</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>Chat<span class="token punctuation">}</span></span> <span class="token punctuation">/&gt;</span></span><span class="token plain-text">
        </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Route</span></span> <span class="token attr-name">component</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>NotFound<span class="token punctuation">}</span></span> <span class="token punctuation">/&gt;</span></span><span class="token plain-text">
      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">Switch</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">Router</span></span><span class="token punctuation">&gt;</span></span>
  <span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h1 id="\u4E2A\u4EBA\u4E2D\u5FC3" tabindex="-1"><a class="header-anchor" href="#\u4E2A\u4EBA\u4E2D\u5FC3" aria-hidden="true">#</a> \u4E2A\u4EBA\u4E2D\u5FC3</h1><h2 id="\u4E2A\u4EBA\u4E2D\u5FC3\u4E3B\u9875\u7684\u9759\u6001\u7ED3\u6784" tabindex="-1"><a class="header-anchor" href="#\u4E2A\u4EBA\u4E2D\u5FC3\u4E3B\u9875\u7684\u9759\u6001\u7ED3\u6784" aria-hidden="true">#</a> \u4E2A\u4EBA\u4E2D\u5FC3\u4E3B\u9875\u7684\u9759\u6001\u7ED3\u6784</h2><blockquote><p>\u76EE\u6807\uFF1A\u5B9E\u73B0\u4E2A\u4EBA\u4E2D\u5FC3\u4E3B\u9875\u9762\u7684\u9759\u6001\u7ED3\u6784\u548C\u6837\u5F0F</p></blockquote><p>\u9875\u9762\u5E03\u5C40\u5206\u89E3\u793A\u610F\uFF1A</p><img src="https://wuxiaohui-1254415986.cos.ap-nanjing.myqcloud.com/2022/01/30/image20210901112241300.png" alt="image-20210901112241300" style="zoom:50%;"><p><strong>\u64CD\u4F5C\u6B65\u9AA4</strong></p><ol><li>\u5C06\u8D44\u6E90\u5305\u4E2D\u4E2A\u4EBA\u4E2D\u5FC3\u9875\u9762\u7684\u6837\u5F0F\u6587\u4EF6\u62F7\u8D1D\u5230 <code>pages/Profile</code>\u76EE\u5F55\u4E2D\uFF0C\u7136\u540E\u5728 <code>pages/Profile/index.js</code> \u4E2D\u7F16\u5199\u5982\u4E0B\u4EE3\u7801\uFF1A</li></ol><div class="language-jsx ext-jsx line-numbers-mode"><pre class="language-jsx"><code><span class="token keyword">import</span> Icon <span class="token keyword">from</span> <span class="token string">&#39;@/components/Icon&#39;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> Link<span class="token punctuation">,</span> useHistory <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;react-router-dom&#39;</span>
<span class="token keyword">import</span> styles <span class="token keyword">from</span> <span class="token string">&#39;./index.module.scss&#39;</span>

<span class="token keyword">const</span> <span class="token function-variable function">Profile</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> history <span class="token operator">=</span> <span class="token function">useHistory</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

  <span class="token keyword">return</span> <span class="token punctuation">(</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">className</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>styles<span class="token punctuation">.</span>root<span class="token punctuation">}</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">className</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>profile<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
        </span><span class="token punctuation">{</span><span class="token comment">/* \u9876\u90E8\u4E2A\u4EBA\u4FE1\u606F\u533A\u57DF */</span><span class="token punctuation">}</span><span class="token plain-text">
        </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">className</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>user-info<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
          </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">className</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>avatar<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
            </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>img</span> <span class="token attr-name">src</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token string">&#39;&#39;</span><span class="token punctuation">}</span></span> <span class="token attr-name">alt</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span><span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span><span class="token plain-text">
          </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
          </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">className</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>user-name<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token punctuation">{</span><span class="token string">&#39;xxxxxxxx&#39;</span><span class="token punctuation">}</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
          </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Link</span></span> <span class="token attr-name">to</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>/profile/edit<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
            \u4E2A\u4EBA\u4FE1\u606F </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Icon</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>iconbtn_right<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span><span class="token plain-text">
          </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">Link</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
        </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">

        </span><span class="token punctuation">{</span><span class="token comment">/* \u4ECA\u65E5\u9605\u8BFB\u533A\u57DF */</span><span class="token punctuation">}</span><span class="token plain-text">
        </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">className</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>read-info<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
          </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Icon</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>iconbtn_readingtime<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span><span class="token plain-text">
          \u4ECA\u65E5\u9605\u8BFB </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">10</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">&gt;</span></span><span class="token plain-text"> \u5206\u949F
        </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">

        </span><span class="token punctuation">{</span><span class="token comment">/* \u7EDF\u8BA1\u4FE1\u606F\u533A\u57DF */</span><span class="token punctuation">}</span><span class="token plain-text">
        </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">className</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>count-list<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
          </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">className</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>count-item<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
            </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">{</span><span class="token number">0</span><span class="token punctuation">}</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
            </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">\u52A8\u6001</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
          </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
          </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">className</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>count-item<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
            </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">{</span><span class="token number">0</span><span class="token punctuation">}</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
            </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">\u5173\u6CE8</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
          </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
          </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">className</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>count-item<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
            </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">{</span><span class="token number">0</span><span class="token punctuation">}</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
            </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">\u7C89\u4E1D</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
          </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
          </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">className</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>count-item<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
            </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">{</span><span class="token number">0</span><span class="token punctuation">}</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
            </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">\u88AB\u8D5E</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
          </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
        </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">

        </span><span class="token punctuation">{</span><span class="token comment">/* \u4E3B\u529F\u80FD\u83DC\u5355\u533A\u57DF */</span><span class="token punctuation">}</span><span class="token plain-text">
        </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">className</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>user-links<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
          </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">className</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>link-item<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
            </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Icon</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>iconbtn_mymessages<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span><span class="token plain-text">
            </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">\u6D88\u606F\u901A\u77E5</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
          </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
          </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">className</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>link-item<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
            </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Icon</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>iconbtn_mycollect<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span><span class="token plain-text">
            </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">\u6536\u85CF</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
          </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
          </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">className</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>link-item<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
            </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Icon</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>iconbtn_history1<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span><span class="token plain-text">
            </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">\u6D4F\u89C8\u5386\u53F2</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
          </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
          </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">className</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>link-item<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
            </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Icon</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>iconbtn_myworks<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span><span class="token plain-text">
            </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">\u6211\u7684\u4F5C\u54C1</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
          </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
        </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">

      </span><span class="token punctuation">{</span><span class="token comment">/* \u66F4\u591A\u670D\u52A1\u83DC\u5355\u533A\u57DF */</span><span class="token punctuation">}</span><span class="token plain-text">
      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">className</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>more-service<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
        </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h3</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">\u66F4\u591A\u670D\u52A1</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h3</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
        </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">className</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>service-list<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
          </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">className</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>service-item<span class="token punctuation">&quot;</span></span> <span class="token attr-name">onClick</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> history<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token string">&#39;/profile/feedback&#39;</span><span class="token punctuation">)</span><span class="token punctuation">}</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
            </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Icon</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>iconbtn_feedback<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span><span class="token plain-text">
            </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">\u7528\u6237\u53CD\u9988</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
          </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
          </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">className</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>service-item<span class="token punctuation">&quot;</span></span> <span class="token attr-name">onClick</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> history<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token string">&#39;/profile/chat&#39;</span><span class="token punctuation">)</span><span class="token punctuation">}</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
            </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Icon</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>iconbtn_xiaozhitongxue<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span><span class="token plain-text">
            </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">\u5C0F\u667A\u540C\u5B66</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
          </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
        </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
  <span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> Profile
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><hr><h2 id="\u8BF7\u6C42\u4E2A\u4EBA\u57FA\u672C\u4FE1\u606F" tabindex="-1"><a class="header-anchor" href="#\u8BF7\u6C42\u4E2A\u4EBA\u57FA\u672C\u4FE1\u606F" aria-hidden="true">#</a> \u8BF7\u6C42\u4E2A\u4EBA\u57FA\u672C\u4FE1\u606F</h2><blockquote><p>\u76EE\u6807\uFF1A\u8FDB\u5165\u4E2A\u4EBA\u4E2D\u5FC3\u9875\u9762\u65F6\uFF0C\u8C03\u7528\u540E\u7AEF\u63A5\u53E3\uFF0C\u83B7\u53D6\u4E2A\u4EBA\u57FA\u672C\u4FE1\u606F\u6570\u636E</p></blockquote><p>\u5B9E\u73B0\u601D\u8DEF\uFF1A</p><ul><li>\u4F7F\u7528 Hook \u51FD\u6570 <code>useEffect</code> \uFF0C\u5728\u9875\u9762\u8FDB\u5165\u65F6\uFF0C\u901A\u8FC7\u8C03\u7528 Action \u6765\u8C03\u7528\u540E\u7AEF\u63A5\u53E3</li></ul><p><strong>\u64CD\u4F5C\u6B65\u9AA4</strong></p><ol><li>\u521B\u5EFA <code>store/actions/profile.js</code>\uFF0C\u5E76\u7F16\u5199 Action Creator \u51FD\u6570\uFF1A</li></ol><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">import</span> http <span class="token keyword">from</span> <span class="token string">&quot;@/utils/http&quot;</span>

<span class="token doc-comment comment">/**
 * \u83B7\u53D6\u7528\u6237\u57FA\u672C\u4FE1\u606F
 * <span class="token keyword">@returns</span> thunk
 */</span>
<span class="token keyword">export</span> <span class="token keyword">const</span> <span class="token function-variable function">getUser</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token keyword">async</span> <span class="token parameter">dispatch</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> res <span class="token operator">=</span> <span class="token keyword">await</span> http<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">&#39;/user&#39;</span><span class="token punctuation">)</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>res<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ol start="2"><li>\u5728 <code>pages/Profile/index.js</code> \u4E2D\uFF0C\u4F7F\u7528 <code>useEffect</code> \u5728\u8FDB\u5165\u9875\u9762\u65F6\u8C03\u7528 Action\uFF1A</li></ol><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> getUser <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;@/store/actions/profile&#39;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> useEffect <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;react&#39;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> useDispatch <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;react-redux&#39;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">const</span> dispatch <span class="token operator">=</span> <span class="token function">useDispatch</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

<span class="token comment">// \u5728\u8FDB\u5165\u9875\u9762\u65F6\u6267\u884C</span>
<span class="token function">useEffect</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token function">dispatch</span><span class="token punctuation">(</span><span class="token function">getUser</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">[</span>dispatch<span class="token punctuation">]</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u6210\u529F\u8C03\u7528\u540E\uFF0C\u53EF\u5728\u63A7\u5236\u53F0\u4E2D\u67E5\u770B\u6253\u5370\u7684\u4E2A\u4EBA\u57FA\u672C\u4FE1\u606F\u6570\u636E\uFF1A</p><img src="https://wuxiaohui-1254415986.cos.ap-nanjing.myqcloud.com/2022/01/30/image20210901175404937.png" alt="image-20210901175404937" style="zoom:40%;"><hr><h2 id="\u5C06\u4E2A\u4EBA\u57FA\u672C\u4FE1\u606F\u5B58\u5165-redux" tabindex="-1"><a class="header-anchor" href="#\u5C06\u4E2A\u4EBA\u57FA\u672C\u4FE1\u606F\u5B58\u5165-redux" aria-hidden="true">#</a> \u5C06\u4E2A\u4EBA\u57FA\u672C\u4FE1\u606F\u5B58\u5165 Redux</h2><blockquote><p>\u76EE\u6807\uFF1A\u5C06\u4ECE\u540E\u7AEF\u83B7\u53D6\u5230\u7684\u4E2A\u4EBA\u57FA\u672C\u4FE1\u606F\u5B58\u5165 Redux\uFF0C\u4EE5\u5907\u7528\u4E8E\u540E\u7EED\u7684\u4E2A\u4EBA\u4E2D\u5FC3\u4E3B\u9875\u7684\u754C\u9762\u6E32\u67D3\u7B49</p></blockquote><p>\u5B9E\u73B0\u601D\u8DEF\uFF1A</p><ul><li>\u5B9E\u73B0\u4E00\u4E2A Reducer\uFF0C\u7528\u4E8E\u64CD\u4F5C Store \u4E2D\u7684\u4E2A\u4EBA\u57FA\u672C\u4FE1\u606F\u72B6\u6001</li><li>\u901A\u8FC7\u4E00\u4E2A Action \u6765\u8C03\u7528 Reducer\uFF0C\u5C06\u4E2A\u4EBA\u57FA\u672C\u4FE1\u606F\u4FDD\u5B58\u5230 Store \u4E2D</li></ul><p><strong>\u64CD\u4F5C\u6B65\u9AA4</strong></p><ol><li>\u521B\u5EFA <code>store/reducers/profile.js</code>\uFF0C\u7F16\u5199\u64CD\u4F5C\u4E2A\u4EBA\u57FA\u672C\u4FE1\u606F\u7684 Reducer \u51FD\u6570</li></ol><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token comment">// \u521D\u59CB\u72B6\u6001</span>
<span class="token keyword">const</span> initialState <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">// \u57FA\u672C\u4FE1\u606F</span>
  <span class="token literal-property property">user</span><span class="token operator">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>

<span class="token comment">// \u64CD\u4F5C\u7528\u6237\u4E2A\u4EBA\u4FE1\u606F\u72B6\u6001\u7684 reducer \u51FD\u6570</span>
<span class="token keyword">export</span> <span class="token keyword">const</span> <span class="token function-variable function">profile</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">state <span class="token operator">=</span> initialState<span class="token punctuation">,</span> action</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> <span class="token punctuation">{</span> type<span class="token punctuation">,</span> payload <span class="token punctuation">}</span> <span class="token operator">=</span> action

  <span class="token keyword">switch</span> <span class="token punctuation">(</span>type<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// \u8BBE\u7F6E\u57FA\u672C\u4FE1\u606F</span>
    <span class="token keyword">case</span> <span class="token string">&#39;profile/user&#39;</span><span class="token operator">:</span>
      <span class="token keyword">return</span> <span class="token punctuation">{</span>
        <span class="token operator">...</span>state<span class="token punctuation">,</span>
        <span class="token literal-property property">user</span><span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token operator">...</span>payload <span class="token punctuation">}</span>
      <span class="token punctuation">}</span>

    <span class="token comment">// \u9ED8\u8BA4</span>
    <span class="token keyword">default</span><span class="token operator">:</span>
      <span class="token keyword">return</span> state
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ol start="2"><li>\u5728 <code>store/index.js</code> \u4E2D\u914D\u7F6E\u4EE5\u4E0A\u65B0\u589E\u7684 Reducer</li></ol><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> profile <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;./profile&#39;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">const</span> rootReducer <span class="token operator">=</span> <span class="token function">combineReducers</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  login<span class="token punctuation">,</span>
  profile
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ol start="3"><li>\u5728 <code>store/actions/profile.js</code> \u4E2D\uFF0C\u6DFB\u52A0\u4E00\u4E2A\u53EF\u7528\u4E8E\u8C03\u7528\u4EE5\u4E0A Reducer \u4E2D\u7684 <code>profile/user</code> \u903B\u8F91\u7684 Action Creator\uFF1A</li></ol><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token doc-comment comment">/**
 * \u8BBE\u7F6E\u4E2A\u4EBA\u57FA\u672C\u4FE1\u606F
 * <span class="token keyword">@param</span> <span class="token class-name"><span class="token punctuation">{</span><span class="token operator">*</span><span class="token punctuation">}</span></span> <span class="token parameter">user</span> 
 * <span class="token keyword">@returns</span> 
 */</span>
<span class="token keyword">export</span> <span class="token keyword">const</span> <span class="token function-variable function">setUser</span> <span class="token operator">=</span> <span class="token parameter">user</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">type</span><span class="token operator">:</span> <span class="token string">&#39;profile/user&#39;</span><span class="token punctuation">,</span>
    <span class="token literal-property property">payload</span><span class="token operator">:</span> user
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ol start="4"><li>\u5728\u4E4B\u524D\u8C03\u7528\u540E\u7AEF\u63A5\u53E3\u7684 Action Creator \u51FD\u6570 <code>getUser</code> \u4E2D\uFF0C\u8C03\u7528<code>setUser</code> \u5C06\u6570\u636E\u4FDD\u5B58\u5230 Redux Store\uFF1A</li></ol><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">export</span> <span class="token keyword">const</span> <span class="token function-variable function">getUser</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token keyword">async</span> <span class="token parameter">dispatch</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> res <span class="token operator">=</span> <span class="token keyword">await</span> http<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">&#39;/user&#39;</span><span class="token punctuation">)</span>
    <span class="token keyword">const</span> user <span class="token operator">=</span> res<span class="token punctuation">.</span>data<span class="token punctuation">.</span>data

    <span class="token comment">// \u4FDD\u5B58\u5230 Redux \u4E2D</span>
    <span class="token function">dispatch</span><span class="token punctuation">(</span><span class="token function">setUser</span><span class="token punctuation">(</span>user<span class="token punctuation">)</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u5728 Redux DevTools \u4E2D\u786E\u8BA4\u6570\u636E\u662F\u5426\u5DF2\u6B63\u786E\u8BBE\u7F6E\uFF1A</p><img src="https://wuxiaohui-1254415986.cos.ap-nanjing.myqcloud.com/2022/01/30/image20210901183426325.png" alt="image-20210901183426325" style="zoom:50%;"><hr><h2 id="\u5C06\u4E2A\u4EBA\u57FA\u672C\u4FE1\u606F\u6E32\u67D3\u5230\u754C\u9762" tabindex="-1"><a class="header-anchor" href="#\u5C06\u4E2A\u4EBA\u57FA\u672C\u4FE1\u606F\u6E32\u67D3\u5230\u754C\u9762" aria-hidden="true">#</a> \u5C06\u4E2A\u4EBA\u57FA\u672C\u4FE1\u606F\u6E32\u67D3\u5230\u754C\u9762</h2><blockquote><p>\u76EE\u6807\uFF1A\u4ECE Redux Store \u4E2D\u83B7\u53D6\u4E4B\u524D\u5B58\u5165\u7684\u7528\u6237\u57FA\u672C\u4FE1\u606F\uFF0C\u5E76\u6E32\u67D3\u5230\u4E2A\u4EBA\u4E2D\u5FC3\u9875\u9762\u7684\u5BF9\u5E94\u4F4D\u7F6E</p></blockquote><p>\u5B9E\u73B0\u601D\u8DEF\uFF1A</p><ul><li>\u4F7F\u7528 <code>useSelector</code> \u4ECE Redux Store \u4E2D\u83B7\u53D6\u72B6\u6001</li><li>\u5C06\u83B7\u53D6\u7684\u72B6\u6001\u6E32\u67D3\u5230\u754C\u9762\u4E0A</li></ul><p><strong>\u64CD\u4F5C\u6B65\u9AA4</strong></p><ol><li>\u5728 <code>pages/Profile/index.js</code> \u4E2D\uFF0C\u8C03\u7528 <code>react-redux</code> \u63D0\u4F9B\u7684 Hook \u51FD\u6570 <code>useSelector</code>\uFF0C\u4ECE Store \u4E2D\u83B7\u53D6\u4E4B\u524D\u5B58\u50A8\u7684 <code>user</code> \u72B6\u6001\uFF1A</li></ol><div class="language-jsx ext-jsx line-numbers-mode"><pre class="language-jsx"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> useDispatch<span class="token punctuation">,</span> useSelector <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;react-redux&#39;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><div class="language-jsx ext-jsx line-numbers-mode"><pre class="language-jsx"><code><span class="token comment">// \u83B7\u53D6 Redux Store \u4E2D\u7684\u4E2A\u4EBA\u57FA\u672C\u4FE1\u606F</span>
<span class="token keyword">const</span> user <span class="token operator">=</span> <span class="token function">useSelector</span><span class="token punctuation">(</span><span class="token parameter">state</span> <span class="token operator">=&gt;</span> state<span class="token punctuation">.</span>profile<span class="token punctuation">.</span>user<span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><ol start="2"><li>\u4F7F\u7528\u4EE5\u4E0A\u83B7\u53D6\u5230\u7684\u6570\u636E\uFF0C\u586B\u5145\u754C\u9762\u4E0A\u7684\u76F8\u5173\u5143\u7D20</li></ol><p>\u7528\u6237\u5934\u50CF\u548C\u7528\u6237\u540D\uFF1A</p><div class="language-jsx ext-jsx line-numbers-mode"><pre class="language-jsx"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">className</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>avatar<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
  </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>img</span> <span class="token attr-name">src</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>user<span class="token punctuation">.</span>photo<span class="token punctuation">}</span></span> <span class="token attr-name">alt</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span><span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span><span class="token plain-text">
</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">className</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>user-name<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token punctuation">{</span>user<span class="token punctuation">.</span>name<span class="token punctuation">}</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><img src="https://wuxiaohui-1254415986.cos.ap-nanjing.myqcloud.com/2022/01/30/image20210902083418445.png" alt="image-20210902083418445" style="zoom:50%;"><p>\u7EDF\u8BA1\u4FE1\u606F\uFF1A</p><div class="language-jsx ext-jsx line-numbers-mode"><pre class="language-jsx"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">className</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>count-list<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
  </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">className</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>count-item<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">{</span>art_count<span class="token punctuation">}</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">\u52A8\u6001</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
  </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
  </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">className</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>count-item<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">{</span>follow_count<span class="token punctuation">}</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">\u5173\u6CE8</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
  </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
  </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">className</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>count-item<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">{</span>fans_count<span class="token punctuation">}</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">\u7C89\u4E1D</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
  </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
  </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">className</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>count-item<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">{</span>like_count<span class="token punctuation">}</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">\u88AB\u8D5E</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
  </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><img src="https://wuxiaohui-1254415986.cos.ap-nanjing.myqcloud.com/2022/01/30/image20210902083434060.png" alt="image-20210902083434060" style="zoom:50%;"><hr><h2 id="\u4E2A\u4EBA\u8BE6\u60C5\u9875\u9762\u7684\u9759\u6001\u7ED3\u6784" tabindex="-1"><a class="header-anchor" href="#\u4E2A\u4EBA\u8BE6\u60C5\u9875\u9762\u7684\u9759\u6001\u7ED3\u6784" aria-hidden="true">#</a> \u4E2A\u4EBA\u8BE6\u60C5\u9875\u9762\u7684\u9759\u6001\u7ED3\u6784</h2><blockquote><p>\u76EE\u6807\uFF1A\u5B9E\u73B0\u4E2A\u4EBA\u8BE6\u60C5\u9875\u7684\u9759\u6001\u7ED3\u6784\u548C\u6837\u5F0F</p></blockquote><p>\u9875\u9762\u5E03\u5C40\u5206\u89E3\u793A\u610F\uFF1A</p><img src="https://wuxiaohui-1254415986.cos.ap-nanjing.myqcloud.com/2022/01/30/image20210902090634094.png" alt="image-20210902090634094" style="zoom:40%;"><p><strong>\u64CD\u4F5C\u6B65\u9AA4</strong></p><ol><li>\u5C06\u8D44\u6E90\u5305\u4E2D\u4E2A\u4EBA\u8BE6\u60C5\u9875\u9762\u7684\u6837\u5F0F\u6587\u4EF6\u62F7\u8D1D\u5230 <code>pages/Profile/Edit/</code>\u76EE\u5F55\u4E2D\uFF0C\u7136\u540E\u5728 <code>pages/Profile/Edit/index.js</code> \u4E2D\u7F16\u5199\u5982\u4E0B\u4EE3\u7801</li></ol><div class="language-jsx ext-jsx line-numbers-mode"><pre class="language-jsx"><code><span class="token keyword">import</span> NavBar <span class="token keyword">from</span> <span class="token string">&#39;@/components/NavBar&#39;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> DatePicker<span class="token punctuation">,</span> List <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;antd-mobile&#39;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> useHistory <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;react-router-dom&#39;</span>
<span class="token keyword">import</span> styles <span class="token keyword">from</span> <span class="token string">&#39;./index.module.scss&#39;</span>

<span class="token keyword">const</span> <span class="token function-variable function">ProfileEdit</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> history <span class="token operator">=</span> <span class="token function">useHistory</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

  <span class="token keyword">return</span> <span class="token punctuation">(</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">className</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>styles<span class="token punctuation">.</span>root<span class="token punctuation">}</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">className</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>content<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
        
        </span><span class="token punctuation">{</span><span class="token comment">/* \u9876\u90E8\u5BFC\u822A\u680F */</span><span class="token punctuation">}</span><span class="token plain-text">
        </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">NavBar</span></span> <span class="token attr-name">onLeftClick</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> history<span class="token punctuation">.</span><span class="token function">go</span><span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">}</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">\u4E2A\u4EBA\u4FE1\u606F</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">NavBar</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">

        </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">className</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>wrapper<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
          </span><span class="token punctuation">{</span><span class="token comment">/* \u5217\u8868\u4E00\uFF1A\u663E\u793A\u5934\u50CF\u3001\u6635\u79F0\u3001\u7B80\u4ECB */</span><span class="token punctuation">}</span><span class="token plain-text">
          </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">List</span></span> <span class="token attr-name">className</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>profile-list<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
            </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">List.Item</span></span> <span class="token attr-name">arrow</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>horizontal<span class="token punctuation">&quot;</span></span> <span class="token attr-name">extra</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>
              <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span> <span class="token attr-name">className</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>avatar-wrapper<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
                </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>img</span> <span class="token attr-name">src</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token string">&#39;&#39;</span><span class="token punctuation">}</span></span> <span class="token attr-name">alt</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span><span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span><span class="token plain-text">
              </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">&gt;</span></span>
            <span class="token punctuation">}</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">\u5934\u50CF</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">List.Item</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">

            </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">List.Item</span></span> <span class="token attr-name">arrow</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>horizontal<span class="token punctuation">&quot;</span></span> <span class="token attr-name">extra</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token string">&#39;\u6635\u79F0xxxx&#39;</span><span class="token punctuation">}</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">\u6635\u79F0</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">List.Item</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">

            </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">List.Item</span></span> <span class="token attr-name">arrow</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>horizontal<span class="token punctuation">&quot;</span></span> <span class="token attr-name">extra</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>
              <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span> <span class="token attr-name">className</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>intro<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token punctuation">{</span><span class="token string">&#39;\u672A\u586B\u5199&#39;</span><span class="token punctuation">}</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">&gt;</span></span>
            <span class="token punctuation">}</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">\u7B80\u4ECB</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">List.Item</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
          </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">List</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">

          </span><span class="token punctuation">{</span><span class="token comment">/* \u5217\u8868\u4E8C\uFF1A\u663E\u793A\u6027\u522B\u3001\u751F\u65E5 */</span><span class="token punctuation">}</span><span class="token plain-text">
          </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">List</span></span> <span class="token attr-name">className</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>profile-list<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
            </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">List.Item</span></span> <span class="token attr-name">arrow</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>horizontal<span class="token punctuation">&quot;</span></span> <span class="token attr-name">extra</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token string">&#39;\u7537&#39;</span><span class="token punctuation">}</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">\u6027\u522B</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">List.Item</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
            </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">DatePicker</span></span>
              <span class="token attr-name">mode</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>date<span class="token punctuation">&quot;</span></span>
              <span class="token attr-name">title</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>\u9009\u62E9\u5E74\u6708\u65E5<span class="token punctuation">&quot;</span></span>
              <span class="token attr-name">value</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">}</span></span>
              <span class="token attr-name">minDate</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token number">1900</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">}</span></span>
              <span class="token attr-name">maxDate</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">}</span></span>
              <span class="token attr-name">onChange</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span> <span class="token punctuation">}</span><span class="token punctuation">}</span></span>
            <span class="token punctuation">&gt;</span></span><span class="token plain-text">
              </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">List.Item</span></span> <span class="token attr-name">arrow</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>horizontal<span class="token punctuation">&quot;</span></span> <span class="token attr-name">extra</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token string">&#39;2020-02-02&#39;</span><span class="token punctuation">}</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">\u751F\u65E5</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">List.Item</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
            </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">DatePicker</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
          </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">List</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">

          </span><span class="token punctuation">{</span><span class="token comment">/* \u6587\u4EF6\u9009\u62E9\u6846\uFF0C\u7528\u4E8E\u5934\u50CF\u56FE\u7247\u7684\u4E0A\u4F20 */</span><span class="token punctuation">}</span><span class="token plain-text">
          </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>file<span class="token punctuation">&quot;</span></span> <span class="token attr-name">hidden</span> <span class="token punctuation">/&gt;</span></span><span class="token plain-text">
          
        </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">

        </span><span class="token punctuation">{</span><span class="token comment">/* \u5E95\u90E8\u680F\uFF1A\u9000\u51FA\u767B\u5F55\u6309\u94AE */</span><span class="token punctuation">}</span><span class="token plain-text">
        </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">className</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>logout<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
          </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">className</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>btn<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">\u9000\u51FA\u767B\u5F55</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
        </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
      
    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
  <span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> ProfileEdit
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><hr><h2 id="\u8BF7\u6C42\u4E2A\u4EBA\u8BE6\u60C5" tabindex="-1"><a class="header-anchor" href="#\u8BF7\u6C42\u4E2A\u4EBA\u8BE6\u60C5" aria-hidden="true">#</a> \u8BF7\u6C42\u4E2A\u4EBA\u8BE6\u60C5</h2><blockquote><p>\u76EE\u6807\uFF1A\u8FDB\u5165\u4E2A\u4EBA\u8BE6\u60C5\u9875\u9762\u65F6\uFF0C\u8C03\u7528\u540E\u7AEF\u63A5\u53E3\uFF0C\u83B7\u53D6\u4E2A\u4EBA\u8BE6\u60C5\u6570\u636E</p></blockquote><p>\u5B9E\u73B0\u601D\u8DEF\uFF1A</p><ul><li>\u4F7F\u7528 Hook \u51FD\u6570 <code>useEffect</code> \uFF0C\u5728\u9875\u9762\u8FDB\u5165\u65F6\uFF0C\u901A\u8FC7\u8C03\u7528 Action \u6765\u8C03\u7528\u540E\u7AEF\u63A5\u53E3</li></ul><p><strong>\u64CD\u4F5C\u6B65\u9AA4</strong></p><ol><li>\u5728 <code>store/actions/profile.js</code> \u4E2D\u7F16\u5199 Action Creator \u51FD\u6570\uFF1A</li></ol><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token doc-comment comment">/**
 * \u83B7\u53D6\u7528\u6237\u8BE6\u60C5
 * <span class="token keyword">@returns</span> thunk
 */</span>
<span class="token keyword">export</span> <span class="token keyword">const</span> <span class="token function-variable function">getUserProfile</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token keyword">async</span> <span class="token parameter">dispatch</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> res <span class="token operator">=</span> <span class="token keyword">await</span> http<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">&#39;/user/profile&#39;</span><span class="token punctuation">)</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>res<span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ol start="2"><li>\u5728 <code>pages/Profile/Edit/index.js</code> \u4E2D\uFF0C\u4F7F\u7528 <code>useEffect</code> \u5728\u8FDB\u5165\u9875\u9762\u65F6\u8C03\u7528 Action\uFF1A</li></ol><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> getUserProfile <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;@/store/actions/profile&#39;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> useEffect <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;react&#39;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> useDispatch <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;react-redux&#39;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-jsx ext-jsx line-numbers-mode"><pre class="language-jsx"><code><span class="token keyword">const</span> dispatch <span class="token operator">=</span> <span class="token function">useDispatch</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

<span class="token function">useEffect</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token function">dispatch</span><span class="token punctuation">(</span><span class="token function">getUserProfile</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">[</span>dispatch<span class="token punctuation">]</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u6210\u529F\u8C03\u7528\u540E\uFF0C\u53EF\u5728\u63A7\u5236\u53F0\u4E2D\u67E5\u770B\u6253\u5370\u6570\u636E\uFF1A</p><img src="https://wuxiaohui-1254415986.cos.ap-nanjing.myqcloud.com/2022/01/30/image20210902093122663.png" alt="image-20210902093122663" style="zoom:40%;"><hr><h2 id="\u5C06\u4E2A\u4EBA\u8BE6\u60C5\u5B58\u5165-redux" tabindex="-1"><a class="header-anchor" href="#\u5C06\u4E2A\u4EBA\u8BE6\u60C5\u5B58\u5165-redux" aria-hidden="true">#</a> \u5C06\u4E2A\u4EBA\u8BE6\u60C5\u5B58\u5165 Redux</h2><blockquote><p>\u76EE\u6807\uFF1A\u5C06\u4ECE\u540E\u7AEF\u83B7\u53D6\u5230\u7684\u4E2A\u4EBA\u8BE6\u60C5\u5B58\u5165 Redux\uFF0C\u4EE5\u5907\u7528\u4E8E\u540E\u7EED\u7684\u4E2A\u4EBA\u8BE6\u60C5\u9875\u9762\u7684\u754C\u9762\u6E32\u67D3</p></blockquote><p>\u5B9E\u73B0\u601D\u8DEF\uFF1A</p><ul><li>\u5B9E\u73B0\u4E00\u4E2A Reducer\uFF0C\u7528\u4E8E\u64CD\u4F5C Store \u4E2D\u7684\u4E2A\u4EBA\u8BE6\u60C5\u72B6\u6001</li><li>\u901A\u8FC7\u4E00\u4E2A Action \u6765\u8C03\u7528 Reducer\uFF0C\u5C06\u4E2A\u4EBA\u8BE6\u60C5\u4FDD\u5B58\u5230 Store \u4E2D</li></ul><p><strong>\u64CD\u4F5C\u6B65\u9AA4</strong></p><ol><li>\u5728 <code>store/reducers/profile.js</code>\u4E2D\uFF0C\u6DFB\u52A0\u4E2A\u4EBA\u8BE6\u60C5\u72B6\u6001\uFF0C\u4EE5\u53CA\u8BBE\u7F6E\u4E2A\u4EBA\u8BE6\u60C5\u7684 Reducer \u903B\u8F91\uFF1A</li></ol><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token comment">// \u521D\u59CB\u72B6\u6001</span>
<span class="token keyword">const</span> initialState <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">// ...</span>
  <span class="token comment">// \u8BE6\u60C5\u4FE1\u606F</span>
  <span class="token literal-property property">userProfile</span><span class="token operator">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token comment">// \u64CD\u4F5C\u7528\u6237\u4E2A\u4EBA\u4FE1\u606F\u72B6\u6001\u7684 reducer \u51FD\u6570</span>
<span class="token keyword">export</span> <span class="token keyword">const</span> <span class="token function-variable function">profile</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">state <span class="token operator">=</span> initialState<span class="token punctuation">,</span> action</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> <span class="token punctuation">{</span> type<span class="token punctuation">,</span> payload <span class="token punctuation">}</span> <span class="token operator">=</span> action

  <span class="token keyword">switch</span> <span class="token punctuation">(</span>type<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// \u8BBE\u7F6E\u8BE6\u60C5\u4FE1\u606F</span>
    <span class="token keyword">case</span> <span class="token string">&#39;profile/profile&#39;</span><span class="token operator">:</span>
      <span class="token keyword">return</span> <span class="token punctuation">{</span>
        <span class="token operator">...</span>state<span class="token punctuation">,</span>
        <span class="token literal-property property">userProfile</span><span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token operator">...</span>payload <span class="token punctuation">}</span>
      <span class="token punctuation">}</span>

    <span class="token comment">// ...</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ol start="2"><li>\u5728 <code>store/actions/profile.js</code> \u4E2D\uFF0C\u6DFB\u52A0\u4E00\u4E2A\u53EF\u7528\u4E8E\u8C03\u7528\u4EE5\u4E0A Reducer \u4E2D\u7684 <code>profile/profile</code> \u903B\u8F91\u7684 Action Creator\uFF1A</li></ol><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token doc-comment comment">/**
 * \u8BBE\u7F6E\u4E2A\u4EBA\u8BE6\u60C5
 * <span class="token keyword">@param</span> <span class="token class-name"><span class="token punctuation">{</span><span class="token operator">*</span><span class="token punctuation">}</span></span> <span class="token parameter">profile</span> 
 * <span class="token keyword">@returns</span> 
 */</span>
<span class="token keyword">export</span> <span class="token keyword">const</span> <span class="token function-variable function">setUserProfile</span> <span class="token operator">=</span> <span class="token parameter">profile</span> <span class="token operator">=&gt;</span> <span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token literal-property property">type</span><span class="token operator">:</span> <span class="token string">&#39;profile/profile&#39;</span><span class="token punctuation">,</span>
  <span class="token literal-property property">payload</span><span class="token operator">:</span> profile
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ol start="3"><li>\u5728\u4E4B\u524D\u8C03\u7528\u540E\u7AEF\u63A5\u53E3\u7684 Action Creator \u51FD\u6570 <code>getUserProfile</code> \u4E2D\uFF0C\u8C03\u7528<code>setUserProfile</code> \u5C06\u6570\u636E\u4FDD\u5B58\u5230 Redux Store\uFF1A</li></ol><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">export</span> <span class="token keyword">const</span> <span class="token function-variable function">getUserProfile</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token keyword">async</span> <span class="token parameter">dispatch</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> res <span class="token operator">=</span> <span class="token keyword">await</span> http<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">&#39;/user/profile&#39;</span><span class="token punctuation">)</span>
    <span class="token keyword">const</span> profile <span class="token operator">=</span> res<span class="token punctuation">.</span>data<span class="token punctuation">.</span>data

    <span class="token comment">// \u4FDD\u5B58\u5230 Redux \u4E2D</span>
    <span class="token function">dispatch</span><span class="token punctuation">(</span><span class="token function">setUserProfile</span><span class="token punctuation">(</span>profile<span class="token punctuation">)</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><hr><h2 id="\u5C06\u4E2A\u4EBA\u8BE6\u60C5\u6E32\u67D3\u5230\u754C\u9762" tabindex="-1"><a class="header-anchor" href="#\u5C06\u4E2A\u4EBA\u8BE6\u60C5\u6E32\u67D3\u5230\u754C\u9762" aria-hidden="true">#</a> \u5C06\u4E2A\u4EBA\u8BE6\u60C5\u6E32\u67D3\u5230\u754C\u9762</h2><blockquote><p>\u76EE\u6807\uFF1A\u4ECE Redux Store \u4E2D\u83B7\u53D6\u4E4B\u524D\u4FDD\u5B58\u7684\u4E2A\u4EBA\u8BE6\u60C5\uFF0C\u5E76\u6E32\u67D3\u5230\u4E2A\u4EBA\u8BE6\u60C5\u9875\u7684\u5BF9\u5E94\u4F4D\u7F6E</p></blockquote><p>\u5B9E\u73B0\u601D\u8DEF\uFF1A</p><ul><li>\u4F7F\u7528 <code>useSelector</code> \u4ECE Redux Store \u4E2D\u83B7\u53D6\u72B6\u6001</li><li>\u5C06\u83B7\u53D6\u7684\u72B6\u6001\u6E32\u67D3\u5230\u754C\u9762\u4E0A</li></ul><p><strong>\u64CD\u4F5C\u6B65\u9AA4</strong></p><ol><li>\u5728 <code>pages/Profile/Edit/index.js</code> \u4E2D\uFF0C\u8C03\u7528 <code>react-redux</code> \u63D0\u4F9B\u7684 Hook \u51FD\u6570 <code>useSelector</code>\uFF0C\u4ECE Store \u4E2D\u83B7\u53D6\u4E4B\u524D\u5B58\u50A8\u7684 <code>userProfile</code> \u72B6\u6001\uFF1A</li></ol><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> useDispatch<span class="token punctuation">,</span> useSelector <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;react-redux&#39;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token comment">// \u83B7\u53D6 Redux Store \u4E2D\u4E2A\u4EBA\u8BE6\u60C5</span>
<span class="token keyword">const</span> profile <span class="token operator">=</span> <span class="token function">useSelector</span><span class="token punctuation">(</span><span class="token parameter">state</span> <span class="token operator">=&gt;</span> state<span class="token punctuation">.</span>profile<span class="token punctuation">.</span>userProfile<span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><ol start="2"><li>\u4F7F\u7528\u4EE5\u4E0A\u83B7\u53D6\u5230\u7684\u6570\u636E\uFF0C\u586B\u5145\u754C\u9762\u4E0A\u7684\u76F8\u5173\u5143\u7D20</li></ol><p>\u5934\u50CF\u3001\u6635\u79F0\u3001\u7B80\u4ECB\uFF1A</p><div class="language-jsx ext-jsx line-numbers-mode"><pre class="language-jsx"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">List.Item</span></span> <span class="token attr-name">arrow</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>horizontal<span class="token punctuation">&quot;</span></span> <span class="token attr-name">extra</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span> <span class="token attr-name">className</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>avatar-wrapper<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>img</span> <span class="token attr-name">src</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>profile<span class="token punctuation">.</span>photo<span class="token punctuation">}</span></span> <span class="token attr-name">alt</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span><span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span><span class="token plain-text">
    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">&gt;</span></span>
  <span class="token punctuation">}</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">\u5934\u50CF</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">List.Item</span></span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">List.Item</span></span> <span class="token attr-name">arrow</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>horizontal<span class="token punctuation">&quot;</span></span> <span class="token attr-name">extra</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>profile<span class="token punctuation">.</span>name<span class="token punctuation">}</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">\u6635\u79F0</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">List.Item</span></span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">List.Item</span></span> <span class="token attr-name">arrow</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>horizontal<span class="token punctuation">&quot;</span></span> <span class="token attr-name">extra</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span> <span class="token attr-name">className</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token function">classnames</span><span class="token punctuation">(</span><span class="token string">&quot;intro&quot;</span><span class="token punctuation">,</span> profile<span class="token punctuation">.</span>intro <span class="token operator">?</span> <span class="token string">&#39;normal&#39;</span> <span class="token operator">:</span> <span class="token string">&#39;&#39;</span><span class="token punctuation">)</span><span class="token punctuation">}</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
      </span><span class="token punctuation">{</span>profile<span class="token punctuation">.</span>intro <span class="token operator">||</span> <span class="token string">&#39;\u672A\u586B\u5199&#39;</span><span class="token punctuation">}</span><span class="token plain-text">
    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">&gt;</span></span>
  <span class="token punctuation">}</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">\u7B80\u4ECB</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">List.Item</span></span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u6027\u522B\u3001\u751F\u65E5\uFF1A</p><div class="language-jsx ext-jsx line-numbers-mode"><pre class="language-jsx"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">List.Item</span></span> <span class="token attr-name">arrow</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>horizontal<span class="token punctuation">&quot;</span></span> <span class="token attr-name">extra</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>profile<span class="token punctuation">.</span>gender <span class="token operator">===</span> <span class="token number">0</span> <span class="token operator">?</span> <span class="token string">&#39;\u7537&#39;</span> <span class="token operator">:</span> <span class="token string">&#39;\u5973&#39;</span><span class="token punctuation">}</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">\u6027\u522B</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">List.Item</span></span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">DatePicker</span></span>
  <span class="token attr-name">mode</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>date<span class="token punctuation">&quot;</span></span>
  <span class="token attr-name">title</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>\u9009\u62E9\u5E74\u6708\u65E5<span class="token punctuation">&quot;</span></span>
  <span class="token attr-name">value</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span>profile<span class="token punctuation">.</span>birthday<span class="token punctuation">)</span><span class="token punctuation">}</span></span>
  <span class="token attr-name">minDate</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token number">1900</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">}</span></span>
  <span class="token attr-name">maxDate</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">}</span></span>
  <span class="token attr-name">onChange</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span> <span class="token punctuation">}</span><span class="token punctuation">}</span></span>
  <span class="token punctuation">&gt;</span></span><span class="token plain-text">
  </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">List.Item</span></span> <span class="token attr-name">arrow</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>horizontal<span class="token punctuation">&quot;</span></span> <span class="token attr-name">extra</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>profile<span class="token punctuation">.</span>birthday<span class="token punctuation">}</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">\u751F\u65E5</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">List.Item</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">DatePicker</span></span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><hr><h2 id="\u7F16\u8F91\u4E2A\u4EBA\u8BE6\u60C5-\u4ECB\u7ECD" tabindex="-1"><a class="header-anchor" href="#\u7F16\u8F91\u4E2A\u4EBA\u8BE6\u60C5-\u4ECB\u7ECD" aria-hidden="true">#</a> \u7F16\u8F91\u4E2A\u4EBA\u8BE6\u60C5\uFF1A\u4ECB\u7ECD</h2><blockquote><p>\u76EE\u6807\uFF1A\u4E86\u89E3\u7F16\u8F91\u4E2A\u4EBA\u8BE6\u60C5\u65F6\uFF0C\u5BF9\u4E8E\u4E0D\u540C\u5B57\u6BB5\u7684\u7F16\u8F91\u754C\u9762\u5F62\u5F0F</p></blockquote><p>\u5F53\u70B9\u51FB\u4E2A\u4EBA\u4FE1\u606F\u9879\u65F6\u4F1A\u4EE5\u6ED1\u52A8\u62BD\u5C49\u7684\u5F62\u5F0F\u5C55\u73B0\u8F93\u5165\u754C\u9762\uFF0C\u4E3B\u8981\u6709\u4E24\u79CD\uFF1A</p><p><strong>\u4E00\u3001\u4ECE\u5C4F\u5E55\u53F3\u4FA7\u6ED1\u5165\u7684\uFF1A\u5168\u5C4F\u8868\u5355\u62BD\u5C49</strong></p><img src="https://wuxiaohui-1254415986.cos.ap-nanjing.myqcloud.com/2022/01/30/image20210902110852864.png" alt="image-20210902110852864" style="zoom:25%;"><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>\u8BE5\u754C\u9762\u7684\u5E03\u5C40\u662F\u56FA\u5B9A\u7684\uFF1A\u9876\u90E8\u5BFC\u822A\u680F\u3001\u8981\u7F16\u8F91\u7684\u5B57\u6BB5\u540D\u79F0\u3001\u4E00\u4E2A\u5185\u5BB9\u8F93\u5165\u6846\u3002

\u91C7\u7528\u8FD9\u79CD\u754C\u9762\u65B9\u5F0F\u8FDB\u884C\u7F16\u8F91\u7684\u662F\uFF1A\u6635\u79F0\u3001\u7B80\u4ECB\u3002
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>\u4E8C\u3001\u4ECE\u5C4F\u5E55\u5E95\u90E8\u6ED1\u5165\u7684\uFF1A\u83DC\u5355\u5217\u8868\u62BD\u5C49</strong></p><img src="https://wuxiaohui-1254415986.cos.ap-nanjing.myqcloud.com/2022/01/30/image20210902111141816.png" alt="image-20210902111141816" style="zoom:25%;"><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>\u8BE5\u754C\u9762\u7684\u5E03\u5C40\u662F\u56FA\u5B9A\u7684\uFF1A\u4E00\u4E2A\u5217\u8868\u3001\u4E00\u4E2A\u53D6\u6D88\u6309\u94AE\u3002

\u91C7\u7528\u8FD9\u79CD\u754C\u9762\u65B9\u5F0F\u8FDB\u884C\u7F16\u8F91\u7684\u662F\uFF1A\u5934\u50CF\u3001\u6027\u522B\u3002
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>\u5B9E\u73B0\u601D\u8DEF</strong></p><ul><li>\u5C06\u8FD9\u4E24\u79CD\u754C\u9762\u5C01\u88C5\u62102\u4E2A\u7EC4\u4EF6</li><li>\u5411\u7EC4\u4EF6\u4F20\u5165\u914D\u7F6E\u4FE1\u606F\uFF0C\u8BA9\u7EC4\u4EF6\u6309\u914D\u7F6E\u4FE1\u606F\u663E\u793A\u5BF9\u5E94\u7684\u5185\u5BB9</li></ul><hr><h2 id="\u7F16\u8F91\u4E2A\u4EBA\u8BE6\u60C5-\u62BD\u5C49\u7EC4\u4EF6\u57FA\u672C\u4F7F\u7528" tabindex="-1"><a class="header-anchor" href="#\u7F16\u8F91\u4E2A\u4EBA\u8BE6\u60C5-\u62BD\u5C49\u7EC4\u4EF6\u57FA\u672C\u4F7F\u7528" aria-hidden="true">#</a> \u7F16\u8F91\u4E2A\u4EBA\u8BE6\u60C5-\u62BD\u5C49\u7EC4\u4EF6\u57FA\u672C\u4F7F\u7528</h2><div class="language-jsx ext-jsx line-numbers-mode"><pre class="language-jsx"><code><span class="token comment">// \u63A7\u5236\u62BD\u5C49\u7EC4\u4EF6\u7684\u663E\u793A</span>
<span class="token keyword">const</span> <span class="token punctuation">[</span>inputOpen<span class="token punctuation">,</span> setInputOpen<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useState</span><span class="token punctuation">(</span><span class="token parameter"><span class="token boolean">false</span></span><span class="token punctuation">)</span>

<span class="token punctuation">{</span><span class="token comment">/* \u5168\u5C4F\u8868\u5355\u62BD\u5C49 */</span><span class="token punctuation">}</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Drawer</span></span>
  <span class="token attr-name">position</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>right<span class="token punctuation">&quot;</span></span>
  <span class="token attr-name">className</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>drawer<span class="token punctuation">&quot;</span></span>
  <span class="token attr-name">style</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token punctuation">{</span> <span class="token literal-property property">minHeight</span><span class="token operator">:</span> document<span class="token punctuation">.</span>documentElement<span class="token punctuation">.</span>clientHeight <span class="token punctuation">}</span><span class="token punctuation">}</span></span>
  <span class="token attr-name">sidebar</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">onClick</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token function">setInputOpen</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">}</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">\u5168\u5C4F\u62BD\u5C49</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">}</span></span>
  <span class="token attr-name">open</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>inputOpen<span class="token punctuation">}</span></span>
<span class="token punctuation">/&gt;</span></span>



<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">List.Item</span></span>
  <span class="token attr-name">arrow</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>horizontal<span class="token punctuation">&quot;</span></span>
  <span class="token attr-name">extra</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>profile<span class="token punctuation">.</span>name<span class="token punctuation">}</span></span>
  <span class="token attr-name">onClick</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token function">setInputOpen</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">}</span></span>
<span class="token punctuation">&gt;</span></span><span class="token plain-text">
  \u6635\u79F0
</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">List.Item</span></span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">List.Item</span></span>
  <span class="token attr-name">arrow</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>horizontal<span class="token punctuation">&quot;</span></span>
  <span class="token attr-name">extra</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span>
      <span class="token attr-name">className</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token function">classNames</span><span class="token punctuation">(</span><span class="token string">&#39;intro&#39;</span><span class="token punctuation">,</span> profile<span class="token punctuation">.</span>intro <span class="token operator">?</span> <span class="token string">&#39;normal&#39;</span> <span class="token operator">:</span> <span class="token string">&#39;&#39;</span><span class="token punctuation">)</span><span class="token punctuation">}</span></span>
    <span class="token punctuation">&gt;</span></span><span class="token plain-text">
      </span><span class="token punctuation">{</span>profile<span class="token punctuation">.</span>intro <span class="token operator">||</span> <span class="token string">&#39;\u672A\u586B\u5199&#39;</span><span class="token punctuation">}</span><span class="token plain-text">
    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">&gt;</span></span>
  <span class="token punctuation">}</span></span>
  <span class="token attr-name">onClick</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token function">setInputOpen</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">}</span></span>
<span class="token punctuation">&gt;</span></span><span class="token plain-text">
  \u7B80\u4ECB
</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">List.Item</span></span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="\u7F16\u8F91\u4E2A\u4EBA\u8BE6\u60C5-editinput\u7EC4\u4EF6" tabindex="-1"><a class="header-anchor" href="#\u7F16\u8F91\u4E2A\u4EBA\u8BE6\u60C5-editinput\u7EC4\u4EF6" aria-hidden="true">#</a> \u7F16\u8F91\u4E2A\u4EBA\u8BE6\u60C5-EditInput\u7EC4\u4EF6</h2><ul><li>\u5BFC\u5165\u6837\u5F0F</li><li>\u51C6\u5907\u7ED3\u6784</li></ul><div class="language-jsx ext-jsx line-numbers-mode"><pre class="language-jsx"><code><span class="token keyword">import</span> React <span class="token keyword">from</span> <span class="token string">&#39;react&#39;</span>
<span class="token keyword">import</span> NavBar <span class="token keyword">from</span> <span class="token string">&#39;@/components/NavBar&#39;</span>
<span class="token keyword">import</span> styles <span class="token keyword">from</span> <span class="token string">&#39;./index.module.scss&#39;</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">function</span> <span class="token function">EditInput</span><span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> onClose <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token punctuation">(</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">className</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>styles<span class="token punctuation">.</span>root<span class="token punctuation">}</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">NavBar</span></span>
        <span class="token attr-name">rightContent</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span> <span class="token attr-name">className</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>commit-btn<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">\u63D0\u4EA4</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">}</span></span>
        <span class="token attr-name">className</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>navbar<span class="token punctuation">&quot;</span></span>
        <span class="token attr-name">onLeftClick</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>onClose<span class="token punctuation">}</span></span>
      <span class="token punctuation">&gt;</span></span><span class="token plain-text">
        \u7F16\u8F91\u6635\u79F0
      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">NavBar</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">className</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>content<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
        </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h3</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">\u6635\u79F0</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h3</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
  <span class="token punctuation">)</span>
<span class="token punctuation">}</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>\u7236\u7EC4\u4EF6\u6E32\u67D3</li></ul><div class="language-jsx ext-jsx line-numbers-mode"><pre class="language-jsx"><code><span class="token punctuation">{</span><span class="token comment">/* \u5168\u5C4F\u8868\u5355\u62BD\u5C49 */</span><span class="token punctuation">}</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Drawer</span></span>
  <span class="token attr-name">position</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>right<span class="token punctuation">&quot;</span></span>
  <span class="token attr-name">className</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>drawer<span class="token punctuation">&quot;</span></span>
  <span class="token attr-name">style</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token punctuation">{</span> <span class="token literal-property property">minHeight</span><span class="token operator">:</span> document<span class="token punctuation">.</span>documentElement<span class="token punctuation">.</span>clientHeight <span class="token punctuation">}</span><span class="token punctuation">}</span></span>
  <span class="token attr-name">sidebar</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">EditInput</span></span> <span class="token attr-name">onClose</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>onClose<span class="token punctuation">}</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">EditInput</span></span><span class="token punctuation">&gt;</span></span><span class="token punctuation">}</span></span>
  <span class="token attr-name">open</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>inputOpen<span class="token punctuation">}</span></span>
  <span class="token attr-name">children</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token string">&#39;&#39;</span><span class="token punctuation">}</span></span>
<span class="token punctuation">/&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="\u7F16\u8F91\u4E2A\u4EBA\u8BE6\u60C5-navbar\u7EC4\u4EF6\u4FEE\u6539" tabindex="-1"><a class="header-anchor" href="#\u7F16\u8F91\u4E2A\u4EBA\u8BE6\u60C5-navbar\u7EC4\u4EF6\u4FEE\u6539" aria-hidden="true">#</a> \u7F16\u8F91\u4E2A\u4EBA\u8BE6\u60C5-navBar\u7EC4\u4EF6\u4FEE\u6539</h2><h2 id="\u7F16\u8F91\u4E2A\u4EBA\u8BE6\u60C5-\u540C\u65F6\u63A7\u5236\u6635\u79F0\u548C\u7B80\u4ECB" tabindex="-1"><a class="header-anchor" href="#\u7F16\u8F91\u4E2A\u4EBA\u8BE6\u60C5-\u540C\u65F6\u63A7\u5236\u6635\u79F0\u548C\u7B80\u4ECB" aria-hidden="true">#</a> \u7F16\u8F91\u4E2A\u4EBA\u8BE6\u60C5-\u540C\u65F6\u63A7\u5236\u6635\u79F0\u548C\u7B80\u4ECB</h2><ul><li>\u4FEE\u6539\u6570\u636E\u683C\u5F0F</li></ul><div class="language-jsx ext-jsx line-numbers-mode"><pre class="language-jsx"><code><span class="token comment">// \u63A7\u5236\u62BD\u5C49\u7EC4\u4EF6\u7684\u663E\u793A</span>
<span class="token keyword">const</span> <span class="token punctuation">[</span>inputOpen<span class="token punctuation">,</span> setInputOpen<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useState</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token comment">// \u62BD\u5C49\u663E\u793A\u72B6\u6001</span>
  <span class="token literal-property property">visible</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
  <span class="token comment">// \u663E\u793A\u7684\u7C7B\u578B</span>
  <span class="token literal-property property">type</span><span class="token operator">:</span> <span class="token string">&#39;&#39;</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>


<span class="token keyword">const</span> <span class="token function-variable function">onClose</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token function">setInputOpen</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    <span class="token literal-property property">visible</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
    <span class="token literal-property property">type</span><span class="token operator">:</span> <span class="token string">&#39;&#39;</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>


<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">List.Item</span></span>
  <span class="token attr-name">arrow</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>horizontal<span class="token punctuation">&quot;</span></span>
  <span class="token attr-name">extra</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>profile<span class="token punctuation">.</span>name<span class="token punctuation">}</span></span>
  <span class="token attr-name">onClick</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span>
    <span class="token function">setInputOpen</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      <span class="token literal-property property">visible</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
      <span class="token literal-property property">type</span><span class="token operator">:</span> <span class="token string">&#39;name&#39;</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span></span>
<span class="token punctuation">&gt;</span></span><span class="token plain-text">
  \u6635\u79F0
</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">List.Item</span></span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">List.Item</span></span>
  <span class="token attr-name">arrow</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>horizontal<span class="token punctuation">&quot;</span></span>
  <span class="token attr-name">extra</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span>
      <span class="token attr-name">className</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token function">classNames</span><span class="token punctuation">(</span><span class="token string">&#39;intro&#39;</span><span class="token punctuation">,</span> profile<span class="token punctuation">.</span>intro <span class="token operator">?</span> <span class="token string">&#39;normal&#39;</span> <span class="token operator">:</span> <span class="token string">&#39;&#39;</span><span class="token punctuation">)</span><span class="token punctuation">}</span></span>
    <span class="token punctuation">&gt;</span></span><span class="token plain-text">
      </span><span class="token punctuation">{</span>profile<span class="token punctuation">.</span>intro <span class="token operator">||</span> <span class="token string">&#39;\u672A\u586B\u5199&#39;</span><span class="token punctuation">}</span><span class="token plain-text">
    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">&gt;</span></span>
  <span class="token punctuation">}</span></span>
  <span class="token attr-name">onClick</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span>
    <span class="token function">setInputOpen</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      <span class="token literal-property property">visible</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
      <span class="token literal-property property">type</span><span class="token operator">:</span> <span class="token string">&#39;intro&#39;</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span></span>
<span class="token punctuation">&gt;</span></span><span class="token plain-text">
  \u7B80\u4ECB
</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">List.Item</span></span><span class="token punctuation">&gt;</span></span>




<span class="token punctuation">{</span><span class="token comment">/* \u5168\u5C4F\u8868\u5355\u62BD\u5C49 */</span><span class="token punctuation">}</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Drawer</span></span>
  <span class="token attr-name">position</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>right<span class="token punctuation">&quot;</span></span>
  <span class="token attr-name">className</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>drawer<span class="token punctuation">&quot;</span></span>
  <span class="token attr-name">style</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token punctuation">{</span> <span class="token literal-property property">minHeight</span><span class="token operator">:</span> document<span class="token punctuation">.</span>documentElement<span class="token punctuation">.</span>clientHeight <span class="token punctuation">}</span><span class="token punctuation">}</span></span>
  <span class="token attr-name">sidebar</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">EditInput</span></span> <span class="token attr-name">onClose</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>onClose<span class="token punctuation">}</span></span> <span class="token attr-name">type</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>inputOpen<span class="token punctuation">.</span>type<span class="token punctuation">}</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">EditInput</span></span><span class="token punctuation">&gt;</span></span>
  <span class="token punctuation">}</span></span>
  <span class="token attr-name">open</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>inputOpen<span class="token punctuation">.</span>visible<span class="token punctuation">}</span></span>
  <span class="token attr-name">children</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token string">&#39;&#39;</span><span class="token punctuation">}</span></span>
<span class="token punctuation">/&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="\u7F16\u8F91\u4E2A\u4EBA\u8BE6\u60C5-\u5C01\u88C5\u5305\u542B\u5B57\u6570\u7EDF\u8BA1\u7684textarea" tabindex="-1"><a class="header-anchor" href="#\u7F16\u8F91\u4E2A\u4EBA\u8BE6\u60C5-\u5C01\u88C5\u5305\u542B\u5B57\u6570\u7EDF\u8BA1\u7684textarea" aria-hidden="true">#</a> \u7F16\u8F91\u4E2A\u4EBA\u8BE6\u60C5-\u5C01\u88C5\u5305\u542B\u5B57\u6570\u7EDF\u8BA1\u7684TextArea</h2><blockquote><p>\u76EE\u6807\uFF1A\u5BF9 <code>&lt;textarea&gt;</code>\u8FDB\u884C\u5C01\u88C5\uFF0C\u4F7F\u5F97\u5728\u8F93\u5165\u5185\u5BB9\u65F6\u53EF\u4EE5\u663E\u793A\u5F53\u524D\u5DF2\u8F93\u5165\u5B57\u6570\u548C\u5141\u8BB8\u8F93\u5165\u7684\u603B\u5B57\u6570</p></blockquote><img src="https://wuxiaohui-1254415986.cos.ap-nanjing.myqcloud.com/2022/01/30/image20210902154346207.png" alt="image-20210902154346207" style="zoom:40%;"><p>\u5B9E\u73B0\u601D\u8DEF\uFF1A</p><ul><li>\u58F0\u660E\u4E00\u4E2A\u72B6\u6001\uFF0C\u7528\u4E8E\u8BB0\u5F55\u8F93\u5165\u5B57\u6570</li><li>\u5728<code>&lt;textarea&gt;</code>\u8F93\u5165\u5185\u5BB9\u89E6\u53D1<code>change</code>\u4E8B\u4EF6\u65F6\uFF0C\u83B7\u53D6\u5F53\u524D\u6700\u65B0\u5185\u5BB9\u5F97\u5230\u6700\u65B0\u5B57\u6570\uFF0C\u66F4\u65B0\u5230\u72B6\u6001\u4E2D</li></ul><p><strong>\u64CD\u4F5C\u6B65\u9AA4</strong></p><ol><li>\u521B\u5EFA <code>components/Textarea/index.js</code>\uFF0C\u5E76\u5C06\u8D44\u6E90\u5305\u4E2D\u7684\u6837\u5F0F\u6587\u4EF6\u62F7\u8D1D\u8FC7\u6765\uFF0C\u7136\u540E\u7F16\u5199\u4EE5\u4E0B\u4EE3\u7801\uFF1A</li></ol><div class="language-jsx ext-jsx line-numbers-mode"><pre class="language-jsx"><code><span class="token keyword">import</span> classnames <span class="token keyword">from</span> <span class="token string">&#39;classnames&#39;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> useState <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;react&#39;</span>
<span class="token keyword">import</span> styles <span class="token keyword">from</span> <span class="token string">&#39;./index.module.scss&#39;</span>

<span class="token comment">/**
 * \u5E26\u5B57\u6570\u7EDF\u8BA1\u7684\u591A\u884C\u6587\u672C
 * @param {String} className \u6837\u5F0F\u7C7B 
 * @param {String} value \u6587\u672C\u6846\u7684\u5185\u5BB9
 * @param {String} placeholder \u5360\u4F4D\u6587\u672C
 * @param {Function} onChange \u8F93\u5165\u5185\u5BB9\u53D8\u52A8\u4E8B\u4EF6 
 * @param {String} maxLength \u5141\u8BB8\u6700\u5927\u8F93\u5165\u7684\u5B57\u6570\uFF08\u9ED8\u8BA4100\u4E2A\u5B57\u7B26\uFF09 
 */</span>
<span class="token keyword">const</span> <span class="token function-variable function">Textarea</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> className<span class="token punctuation">,</span> value<span class="token punctuation">,</span> placeholder<span class="token punctuation">,</span> onChange<span class="token punctuation">,</span> maxLength <span class="token operator">=</span> <span class="token number">100</span> <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token comment">// \u5B57\u6570\u72B6\u6001</span>
  <span class="token keyword">const</span> <span class="token punctuation">[</span>count<span class="token punctuation">,</span> setCount<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useState</span><span class="token punctuation">(</span>value<span class="token punctuation">.</span>length <span class="token operator">||</span> <span class="token number">0</span><span class="token punctuation">)</span>

  <span class="token comment">// \u8F93\u5165\u6846\u7684 change \u4E8B\u4EF6\u76D1\u542C\u51FD\u6570</span>
  <span class="token keyword">const</span> <span class="token function-variable function">onValueChange</span> <span class="token operator">=</span> <span class="token parameter">e</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token comment">// \u83B7\u53D6\u6700\u65B0\u7684\u8F93\u5165\u5185\u5BB9\uFF0C\u5E76\u5C06\u5B83\u7684\u957F\u5EA6\u66F4\u65B0\u5230 count \u72B6\u6001</span>
    <span class="token keyword">const</span> newValue <span class="token operator">=</span> e<span class="token punctuation">.</span>target<span class="token punctuation">.</span>value
    <span class="token function">setCount</span><span class="token punctuation">(</span>newValue<span class="token punctuation">.</span>length<span class="token punctuation">)</span>
    
    <span class="token comment">// \u8C03\u7528\u5916\u90E8\u4F20\u5165\u7684\u4E8B\u4EF6\u56DE\u8C03\u51FD\u6570</span>
    <span class="token function">onChange</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">return</span> <span class="token punctuation">(</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">className</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token function">classnames</span><span class="token punctuation">(</span>styles<span class="token punctuation">.</span>root<span class="token punctuation">,</span> className<span class="token punctuation">)</span><span class="token punctuation">}</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
      </span><span class="token punctuation">{</span><span class="token comment">/* \u6587\u672C\u8F93\u5165\u6846 */</span><span class="token punctuation">}</span><span class="token plain-text">
      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>textarea</span>
        <span class="token attr-name">className</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>textarea<span class="token punctuation">&quot;</span></span>
        <span class="token attr-name">maxLength</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>maxLength<span class="token punctuation">}</span></span>
        <span class="token attr-name">placeholder</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>placeholder<span class="token punctuation">}</span></span>
        <span class="token attr-name">value</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>value<span class="token punctuation">}</span></span>
        <span class="token attr-name">onChange</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>onValueChange<span class="token punctuation">}</span></span>
      <span class="token punctuation">/&gt;</span></span><span class="token plain-text">

      </span><span class="token punctuation">{</span><span class="token comment">/* \u5F53\u524D\u5B57\u6570/\u6700\u5927\u5141\u8BB8\u5B57\u6570 */</span><span class="token punctuation">}</span><span class="token plain-text">
      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">className</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>count<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token punctuation">{</span>count<span class="token punctuation">}</span><span class="token plain-text">/</span><span class="token punctuation">{</span>maxLength<span class="token punctuation">}</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
  <span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> Textarea
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="\u7F16\u8F91\u4E2A\u4EBA\u8BE6\u60C5-\u6635\u79F0\u548C\u7B80\u4ECB\u7684\u56DE\u663E" tabindex="-1"><a class="header-anchor" href="#\u7F16\u8F91\u4E2A\u4EBA\u8BE6\u60C5-\u6635\u79F0\u548C\u7B80\u4ECB\u7684\u56DE\u663E" aria-hidden="true">#</a> \u7F16\u8F91\u4E2A\u4EBA\u8BE6\u60C5-\u6635\u79F0\u548C\u7B80\u4ECB\u7684\u56DE\u663E</h2><ul><li>\u63A7\u5236\u663E\u793A\u6635\u79F0\u548C\u7B80\u4ECB</li></ul><div class="language-jsx ext-jsx line-numbers-mode"><pre class="language-jsx"><code><span class="token keyword">import</span> React <span class="token keyword">from</span> <span class="token string">&#39;react&#39;</span>
<span class="token keyword">import</span> NavBar <span class="token keyword">from</span> <span class="token string">&#39;@/components/NavBar&#39;</span>
<span class="token keyword">import</span> styles <span class="token keyword">from</span> <span class="token string">&#39;./index.module.scss&#39;</span>
<span class="token keyword">import</span> Input <span class="token keyword">from</span> <span class="token string">&#39;@/components/Input&#39;</span>
<span class="token keyword">import</span> Textarea <span class="token keyword">from</span> <span class="token string">&#39;@/components/Textarea&#39;</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">function</span> <span class="token function">EditInput</span><span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> onClose<span class="token punctuation">,</span> type <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token punctuation">(</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">className</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>styles<span class="token punctuation">.</span>root<span class="token punctuation">}</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">NavBar</span></span>
        <span class="token attr-name">rightContent</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span> <span class="token attr-name">className</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>commit-btn<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">\u63D0\u4EA4</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">}</span></span>
        <span class="token attr-name">className</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>navbar<span class="token punctuation">&quot;</span></span>
        <span class="token attr-name">onLeftClick</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>onClose<span class="token punctuation">}</span></span>
      <span class="token punctuation">&gt;</span></span><span class="token plain-text">
        \u7F16\u8F91</span><span class="token punctuation">{</span>type <span class="token operator">===</span> <span class="token string">&#39;name&#39;</span> <span class="token operator">?</span> <span class="token string">&#39;\u6635\u79F0&#39;</span> <span class="token operator">:</span> <span class="token string">&#39;\u7B80\u4ECB&#39;</span><span class="token punctuation">}</span><span class="token plain-text">
      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">NavBar</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">className</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>content-box<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
        </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h3</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">{</span>type <span class="token operator">===</span> <span class="token string">&#39;name&#39;</span> <span class="token operator">?</span> <span class="token string">&#39;\u6635\u79F0&#39;</span> <span class="token operator">:</span> <span class="token string">&#39;\u7B80\u4ECB&#39;</span><span class="token punctuation">}</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h3</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
        </span><span class="token punctuation">{</span>type <span class="token operator">===</span> <span class="token string">&#39;name&#39;</span> <span class="token operator">?</span> <span class="token punctuation">(</span>
          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">className</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>input-wrap<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
            </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Input</span></span> <span class="token punctuation">/&gt;</span></span><span class="token plain-text">
          </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
        <span class="token punctuation">)</span> <span class="token operator">:</span> <span class="token punctuation">(</span>
          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Textarea</span></span> <span class="token attr-name">placeholder</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>\u8BF7\u8F93\u5165<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
        <span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token plain-text">
      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
  <span class="token punctuation">)</span>
<span class="token punctuation">}</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>\u6570\u636E\u56DE\u663E</li></ul><div class="language-jsx ext-jsx line-numbers-mode"><pre class="language-jsx"><code><span class="token keyword">import</span> Input <span class="token keyword">from</span> <span class="token string">&#39;@/components/Input&#39;</span>
<span class="token keyword">import</span> NavBar <span class="token keyword">from</span> <span class="token string">&#39;@/components/NavBar&#39;</span>
<span class="token keyword">import</span> Textarea <span class="token keyword">from</span> <span class="token string">&#39;@/components/Textarea&#39;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> useState <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;react&#39;</span>
<span class="token keyword">import</span> styles <span class="token keyword">from</span> <span class="token string">&#39;./index.module.scss&#39;</span>

<span class="token keyword">const</span> <span class="token function-variable function">EditInput</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> config<span class="token punctuation">,</span> onClose<span class="token punctuation">,</span> onCommit <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> <span class="token punctuation">[</span>value<span class="token punctuation">,</span> setValue<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useState</span><span class="token punctuation">(</span>config<span class="token punctuation">.</span>value <span class="token operator">||</span> <span class="token string">&#39;&#39;</span><span class="token punctuation">)</span>

  <span class="token keyword">const</span> <span class="token punctuation">{</span> title<span class="token punctuation">,</span> type <span class="token punctuation">}</span> <span class="token operator">=</span> config

  <span class="token keyword">const</span> <span class="token function-variable function">onValueChange</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token function">setValue</span><span class="token punctuation">(</span>e<span class="token punctuation">.</span>target<span class="token punctuation">.</span>value<span class="token punctuation">)</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">return</span> <span class="token punctuation">(</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">className</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>styles<span class="token punctuation">.</span>root<span class="token punctuation">}</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">NavBar</span></span>
        <span class="token attr-name">className</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>navbar<span class="token punctuation">&quot;</span></span>
        <span class="token attr-name">onLeftClick</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>onClose<span class="token punctuation">}</span></span>
        <span class="token attr-name">rightContent</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>
          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span> <span class="token attr-name">className</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>commit-btn<span class="token punctuation">&quot;</span></span> <span class="token attr-name">onClick</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token function">onCommit</span><span class="token punctuation">(</span>type<span class="token punctuation">,</span> value<span class="token punctuation">)</span><span class="token punctuation">}</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
            \u63D0\u4EA4
          </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">&gt;</span></span>
        <span class="token punctuation">}</span></span>
      <span class="token punctuation">&gt;</span></span><span class="token plain-text">
        \u7F16\u8F91</span><span class="token punctuation">{</span>title<span class="token punctuation">}</span><span class="token plain-text">
      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">NavBar</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">

      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">className</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>content<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
        </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h3</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">{</span>title<span class="token punctuation">}</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h3</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
        </span><span class="token punctuation">{</span>type <span class="token operator">===</span> <span class="token string">&#39;name&#39;</span> <span class="token operator">?</span> <span class="token punctuation">(</span>
          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">className</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>input-wrap<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
            </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Input</span></span> <span class="token attr-name">value</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>value<span class="token punctuation">}</span></span> <span class="token attr-name">onChange</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>onValueChange<span class="token punctuation">}</span></span> <span class="token punctuation">/&gt;</span></span><span class="token plain-text">
          </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
        <span class="token punctuation">)</span> <span class="token operator">:</span> <span class="token punctuation">(</span>
          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Textarea</span></span>
            <span class="token attr-name">placeholder</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>\u8BF7\u8F93\u5165<span class="token punctuation">&quot;</span></span>
            <span class="token attr-name">value</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>value<span class="token punctuation">}</span></span>
            <span class="token attr-name">onChange</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>onValueChange<span class="token punctuation">}</span></span>
          <span class="token punctuation">/&gt;</span></span>
        <span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token plain-text">
      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
  <span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> EditInput

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="\u7F16\u8F91\u4E2A\u4EBA\u8BE6\u60C5-\u5B8C\u6210\u6635\u79F0\u548C\u7B80\u4ECB\u7684\u4FEE\u6539" tabindex="-1"><a class="header-anchor" href="#\u7F16\u8F91\u4E2A\u4EBA\u8BE6\u60C5-\u5B8C\u6210\u6635\u79F0\u548C\u7B80\u4ECB\u7684\u4FEE\u6539" aria-hidden="true">#</a> \u7F16\u8F91\u4E2A\u4EBA\u8BE6\u60C5\uFF1A\u5B8C\u6210\u6635\u79F0\u548C\u7B80\u4ECB\u7684\u4FEE\u6539</h2><blockquote><p>\u76EE\u6807\uFF1A\u5728\u62BD\u5C49\u8868\u5355\u4E2D\u7F16\u8F91\u6635\u79F0\u6216\u7B80\u4ECB\u540E\uFF0C\u5C06\u8868\u5355\u8FD4\u56DE\u7684\u6570\u636E\u63D0\u4EA4\u5230\u540E\u7AEF\u8FDB\u884C\u66F4\u65B0\uFF0C\u5E76\u66F4\u65B0\u5230 Redux</p></blockquote><p>\u5B9E\u73B0\u601D\u8DEF\uFF1A</p><ul><li>\u7F16\u5199\u7528\u4E8E\u5728 Redux \u4E2D\u66F4\u65B0\u4E2A\u4EBA\u8BE6\u60C5\u5B57\u6BB5\u7684 Reducer</li><li>\u7F16\u5199\u7528\u4E8E\u901A\u8FC7\u8C03\u7528\u540E\u7AEF\u63A5\u53E3\u5373 Reducer \u6765\u66F4\u65B0\u4E2A\u4EBA\u8BE6\u60C5\u5B57\u6BB5\u7684 Action</li><li>\u5728\u62BD\u5C49\u8868\u5355\u63D0\u4EA4\u6570\u636E\u65F6\u8C03\u7528 Action</li></ul><p><strong>\u64CD\u4F5C\u6B65\u9AA4</strong></p><ol><li>\u5728 <code>store/actions/profile.js</code>\u4E2D\uFF0C\u7F16\u5199 Action Creator\uFF1A</li></ol><div class="language-jsx ext-jsx line-numbers-mode"><pre class="language-jsx"><code>
<span class="token comment">/**
 * \u4FEE\u6539\u4E2A\u4EBA\u8BE6\u60C5\uFF1A\u6635\u79F0\u3001\u7B80\u4ECB\u3001\u751F\u65E5\u3001\u6027\u522B \uFF08\u6BCF\u6B21\u4FEE\u6539\u4E00\u4E2A\u5B57\u6BB5\uFF09
 * @param {String} name \u8981\u4FEE\u6539\u7684\u5B57\u6BB5\u540D\u79F0
 * @param {*} value \u8981\u4FEE\u6539\u7684\u5B57\u6BB5\u503C
 * @returns thunk
 */</span>
<span class="token keyword">export</span> <span class="token keyword">const</span> <span class="token function-variable function">updateProfile</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">name<span class="token punctuation">,</span> value</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token keyword">async</span> <span class="token parameter">dispatch</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token comment">// \u8C03\u7528\u63A5\u53E3\u5C06\u6570\u636E\u66F4\u65B0\u5230\u540E\u7AEF</span>
    <span class="token keyword">const</span> res <span class="token operator">=</span> <span class="token keyword">await</span> http<span class="token punctuation">.</span><span class="token function">patch</span><span class="token punctuation">(</span><span class="token string">&#39;/user/profile&#39;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> <span class="token punctuation">[</span>name<span class="token punctuation">]</span><span class="token operator">:</span> value <span class="token punctuation">}</span><span class="token punctuation">)</span>

    <span class="token comment">// \u5982\u679C\u540E\u7AEF\u66F4\u65B0\u6210\u529F\uFF0C\u5219\u518D\u66F4\u65B0 Redux \u4E2D\u7684\u6570\u636E</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>res<span class="token punctuation">.</span>data<span class="token punctuation">.</span>message <span class="token operator">===</span> <span class="token string">&#39;OK&#39;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token function">dispatch</span><span class="token punctuation">(</span><span class="token function">getUserProfile</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ol start="3"><li>\u4E3A\u62BD\u5C49\u8868\u5355\u7EC4\u4EF6\u8BBE\u7F6E <code>onCommit</code> \u56DE\u8C03\u51FD\u6570\uFF0C\u5E76\u5728\u8BE5\u51FD\u6570\u4E2D\u8C03\u7528\u4EE5\u4E0A\u7684 Action\uFF1A</li></ol><div class="language-jsx ext-jsx line-numbers-mode"><pre class="language-jsx"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">EditInput</span></span>
  <span class="token comment">// ...</span>
  <span class="token attr-name">onCommit</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>onFormCommit<span class="token punctuation">}</span></span>
  <span class="token punctuation">/&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-jsx ext-jsx line-numbers-mode"><pre class="language-jsx"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> getUserProfile<span class="token punctuation">,</span> updateProfile <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;@/store/actions/profile&#39;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><div class="language-jsx ext-jsx line-numbers-mode"><pre class="language-jsx"><code><span class="token comment">// \u62BD\u5C49\u8868\u5355\u7684\u6570\u636E\u63D0\u4EA4</span>
<span class="token keyword">const</span> <span class="token function-variable function">onFormCommit</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">name<span class="token punctuation">,</span> value</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token comment">// \u8C03\u7528 Action \u66F4\u65B0\u6570\u636E</span>
  <span class="token function">dispatch</span><span class="token punctuation">(</span><span class="token function">updateProfile</span><span class="token punctuation">(</span>name<span class="token punctuation">,</span> value<span class="token punctuation">)</span><span class="token punctuation">)</span>
  <span class="token comment">// \u5173\u95ED\u62BD\u5C49</span>
  <span class="token function">toggleDrawer</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="\u7F16\u8F91\u4E2A\u4EBA\u8BE6\u60C5-\u51C6\u5907\u6027\u522B\u548C\u5934\u50CF\u7684\u62BD\u5C49\u7EC4\u4EF6" tabindex="-1"><a class="header-anchor" href="#\u7F16\u8F91\u4E2A\u4EBA\u8BE6\u60C5-\u51C6\u5907\u6027\u522B\u548C\u5934\u50CF\u7684\u62BD\u5C49\u7EC4\u4EF6" aria-hidden="true">#</a> \u7F16\u8F91\u4E2A\u4EBA\u8BE6\u60C5-\u51C6\u5907\u6027\u522B\u548C\u5934\u50CF\u7684\u62BD\u5C49\u7EC4\u4EF6</h2><div class="language-jsx ext-jsx line-numbers-mode"><pre class="language-jsx"><code><span class="token comment">// \u5173\u95ED\u6635\u79F0\u548C\u7B80\u4ECB\u7684\u663E\u793A</span>
<span class="token keyword">const</span> <span class="token function-variable function">onClose</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token function">setInputOpen</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    <span class="token literal-property property">visible</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
    <span class="token literal-property property">type</span><span class="token operator">:</span> <span class="token string">&#39;&#39;</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token function">setListOpen</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    <span class="token literal-property property">visible</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
    <span class="token literal-property property">type</span><span class="token operator">:</span> <span class="token string">&#39;&#39;</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>


<span class="token comment">// \u63A7\u5236\u5934\u50CF\u548C\u6027\u522B</span>
<span class="token keyword">const</span> <span class="token punctuation">[</span>listOpen<span class="token punctuation">,</span> setListOpen<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useState</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token literal-property property">visible</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
  <span class="token literal-property property">type</span><span class="token operator">:</span> <span class="token string">&#39;&#39;</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token punctuation">{</span><span class="token comment">/* \u5934\u50CF\u3001\u6027\u522B */</span><span class="token punctuation">}</span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Drawer</span></span>
    <span class="token attr-name">className</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>drawer-list<span class="token punctuation">&quot;</span></span>
    <span class="token attr-name">position</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>bottom<span class="token punctuation">&quot;</span></span>
    <span class="token attr-name">sidebar</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">\u6027\u522B\u548C\u5934\u50CF</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">}</span></span>
    <span class="token attr-name">open</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>listOpen<span class="token punctuation">.</span>visible<span class="token punctuation">}</span></span>
    <span class="token attr-name">onOpenChange</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>onClose<span class="token punctuation">}</span></span>
  <span class="token punctuation">&gt;</span></span><span class="token plain-text">
    </span><span class="token punctuation">{</span><span class="token string">&#39;&#39;</span><span class="token punctuation">}</span><span class="token plain-text">
  </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">Drawer</span></span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>



<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">List.Item</span></span>
  <span class="token attr-name">arrow</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>horizontal<span class="token punctuation">&quot;</span></span>
  <span class="token attr-name">onClick</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span>
    <span class="token function">setListOpen</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      <span class="token literal-property property">visible</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
      <span class="token literal-property property">type</span><span class="token operator">:</span> <span class="token string">&#39;avatar&#39;</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span></span>
  <span class="token attr-name">extra</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span> <span class="token attr-name">className</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>avatar-wrapper<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>img</span> <span class="token attr-name">src</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>profile<span class="token punctuation">.</span>photo<span class="token punctuation">}</span></span> <span class="token attr-name">alt</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span><span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span><span class="token plain-text">
    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">&gt;</span></span>
  <span class="token punctuation">}</span></span>
<span class="token punctuation">&gt;</span></span><span class="token plain-text">
  \u5934\u50CF
</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">List.Item</span></span><span class="token punctuation">&gt;</span></span>
	

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">List.Item</span></span>
  <span class="token attr-name">arrow</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>horizontal<span class="token punctuation">&quot;</span></span>
  <span class="token attr-name">extra</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>profile<span class="token punctuation">.</span>gender <span class="token operator">===</span> <span class="token number">0</span> <span class="token operator">?</span> <span class="token string">&#39;\u7537&#39;</span> <span class="token operator">:</span> <span class="token string">&#39;\u5973&#39;</span><span class="token punctuation">}</span></span>
  <span class="token attr-name">onClick</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span>
    <span class="token function">setListOpen</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      <span class="token literal-property property">visible</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
      <span class="token literal-property property">type</span><span class="token operator">:</span> <span class="token string">&#39;avatar&#39;</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span></span>
<span class="token punctuation">&gt;</span></span><span class="token plain-text">
  \u6027\u522B
</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">List.Item</span></span><span class="token punctuation">&gt;</span></span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="\u7F16\u8F91\u4E2A\u4EBA\u8BE6\u60C5-editlist\u7EC4\u4EF6" tabindex="-1"><a class="header-anchor" href="#\u7F16\u8F91\u4E2A\u4EBA\u8BE6\u60C5-editlist\u7EC4\u4EF6" aria-hidden="true">#</a> \u7F16\u8F91\u4E2A\u4EBA\u8BE6\u60C5-EditList\u7EC4\u4EF6</h2><ul><li>\u51C6\u5907\u6837\u5F0F</li><li>\u51C6\u5907\u7ED3\u6784</li></ul><div class="language-jsx ext-jsx line-numbers-mode"><pre class="language-jsx"><code><span class="token keyword">import</span> styles <span class="token keyword">from</span> <span class="token string">&#39;./index.module.scss&#39;</span>
<span class="token keyword">const</span> <span class="token function-variable function">EditList</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token punctuation">(</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">className</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>styles<span class="token punctuation">.</span>root<span class="token punctuation">}</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">className</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>list-item<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">\u7537</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">className</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>list-item<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">\u5973</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">

      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">className</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>list-item<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">\u53D6\u6D88</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
  <span class="token punctuation">)</span>
<span class="token punctuation">}</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> EditList

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="\u7F16\u8F91\u4E2A\u4EBA\u8BE6\u60C5-\u63A7\u5236\u663E\u793A" tabindex="-1"><a class="header-anchor" href="#\u7F16\u8F91\u4E2A\u4EBA\u8BE6\u60C5-\u63A7\u5236\u663E\u793A" aria-hidden="true">#</a> \u7F16\u8F91\u4E2A\u4EBA\u8BE6\u60C5-\u63A7\u5236\u663E\u793A</h2><ul><li>\u7236\u7EC4\u4EF6\u63D0\u4F9B\u6570\u636E</li></ul><div class="language-jsx ext-jsx line-numbers-mode"><pre class="language-jsx"><code><span class="token keyword">const</span> config <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">avatar</span><span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token punctuation">{</span>
      <span class="token literal-property property">title</span><span class="token operator">:</span> <span class="token string">&#39;\u62CD\u7167&#39;</span><span class="token punctuation">,</span>
      <span class="token function-variable function">onClick</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span>
      <span class="token literal-property property">title</span><span class="token operator">:</span> <span class="token string">&#39;\u672C\u5730\u9009\u62E9&#39;</span><span class="token punctuation">,</span>
      <span class="token function-variable function">onClick</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token literal-property property">gender</span><span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token punctuation">{</span>
      <span class="token literal-property property">title</span><span class="token operator">:</span> <span class="token string">&#39;\u7537&#39;</span><span class="token punctuation">,</span>
      <span class="token function-variable function">onClick</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span>
      <span class="token literal-property property">title</span><span class="token operator">:</span> <span class="token string">&#39;\u5973&#39;</span><span class="token punctuation">,</span>
      <span class="token function-variable function">onClick</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>\u4F20\u9012\u7ED9\u5B50\u7EC4\u4EF6</li></ul><div class="language-jsx ext-jsx line-numbers-mode"><pre class="language-jsx"><code><span class="token punctuation">{</span><span class="token comment">/* \u5934\u50CF\u3001\u6027\u522B */</span><span class="token punctuation">}</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Drawer</span></span>
  <span class="token attr-name">className</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>drawer-list<span class="token punctuation">&quot;</span></span>
  <span class="token attr-name">position</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>bottom<span class="token punctuation">&quot;</span></span>
  <span class="token attr-name">sidebar</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">EditList</span></span> <span class="token attr-name">config</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>config<span class="token punctuation">}</span></span> <span class="token attr-name">type</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>listOpen<span class="token punctuation">.</span>type<span class="token punctuation">}</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">EditList</span></span><span class="token punctuation">&gt;</span></span><span class="token punctuation">}</span></span>
  <span class="token attr-name">open</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>listOpen<span class="token punctuation">.</span>visible<span class="token punctuation">}</span></span>
  <span class="token attr-name">onOpenChange</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>onClose<span class="token punctuation">}</span></span>
<span class="token punctuation">&gt;</span></span><span class="token plain-text">
  </span><span class="token punctuation">{</span><span class="token string">&#39;&#39;</span><span class="token punctuation">}</span><span class="token plain-text">
</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">Drawer</span></span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>\u5B50\u7EC4\u4EF6\u6E32\u67D3</li></ul><div class="language-jsx ext-jsx line-numbers-mode"><pre class="language-jsx"><code><span class="token keyword">import</span> styles <span class="token keyword">from</span> <span class="token string">&#39;./index.module.scss&#39;</span>

<span class="token keyword">const</span> <span class="token function-variable function">EditList</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> type<span class="token punctuation">,</span> config<span class="token punctuation">,</span> onClose <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> list <span class="token operator">=</span> config<span class="token punctuation">[</span>type<span class="token punctuation">]</span>
  <span class="token keyword">return</span> <span class="token punctuation">(</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">className</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>styles<span class="token punctuation">.</span>root<span class="token punctuation">}</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
      </span><span class="token punctuation">{</span>list<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">item</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">(</span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">className</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>list-item<span class="token punctuation">&quot;</span></span> <span class="token attr-name">key</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>item<span class="token punctuation">.</span>title<span class="token punctuation">}</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
          </span><span class="token punctuation">{</span>item<span class="token punctuation">.</span>title<span class="token punctuation">}</span><span class="token plain-text">
        </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
      <span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token plain-text">
      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">className</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>list-item<span class="token punctuation">&quot;</span></span> <span class="token attr-name">onClick</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>onClose<span class="token punctuation">}</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
        \u53D6\u6D88
      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
  <span class="token punctuation">)</span>
<span class="token punctuation">}</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> EditList

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="\u7F16\u8F91\u4E2A\u4EBA\u8BE6\u60C5-\u62BD\u5C49\u4E0A\u7684\u5217\u8868\u7EC4\u4EF6" tabindex="-1"><a class="header-anchor" href="#\u7F16\u8F91\u4E2A\u4EBA\u8BE6\u60C5-\u62BD\u5C49\u4E0A\u7684\u5217\u8868\u7EC4\u4EF6" aria-hidden="true">#</a> \u7F16\u8F91\u4E2A\u4EBA\u8BE6\u60C5\uFF1A\u62BD\u5C49\u4E0A\u7684\u5217\u8868\u7EC4\u4EF6</h2><blockquote><p>\u76EE\u6807\uFF1A\u5C01\u88C5\u7528\u4E8E\u663E\u793A\u5728\u5217\u8868\u62BD\u5C49\u4E2D\u7684\u5217\u8868\u7EC4\u4EF6\uFF0C\u5B83\u53EF\u901A\u8FC7\u914D\u7F6E\u7684\u65B9\u5F0F\u663E\u793A\u4E0D\u540C\u5217\u8868\u9879</p></blockquote><img src="https://wuxiaohui-1254415986.cos.ap-nanjing.myqcloud.com/2022/01/30/image20210902171500980.png" alt="image-20210902171500980" style="zoom:30%;"><img src="https://wuxiaohui-1254415986.cos.ap-nanjing.myqcloud.com/2022/01/30/image20210902171524407.png" alt="image-20210902171524407" style="zoom:30%;"><p>\u5B9E\u73B0\u601D\u8DEF\uFF1A</p><ul><li>\u754C\u9762\u4E3B\u8981\u7531\u4E00\u4E2A\u5217\u8868\u548C\u4E00\u4E2A\u53D6\u6D88\u6309\u94AE\u7EC4\u6210</li><li>\u754C\u9762\u4E2D\u7684\u5217\u8868\u6570\u636E\u901A\u8FC7\u7EC4\u4EF6\u5C5E\u6027\u4F20\u5165</li><li>\u201C\u53D6\u6D88\u201D \u6309\u94AE\u7684\u76D1\u542C\u51FD\u6570\u901A\u8FC7\u7EC4\u4EF6\u5C5E\u6027\u4F20\u5165</li></ul><p><strong>\u64CD\u4F5C\u6B65\u9AA4</strong></p><ol><li><p>\u521B\u5EFA <code>pages/Profile/Edit/components/EditList/</code> \u76EE\u5F55\uFF0C\u5E76\u5C06\u8D44\u6E90\u5305\u4E2D\u7684\u6837\u5F0F\u6587\u4EF6\u62F7\u8D1D\u8FDB\u6765</p></li><li><p>\u521B\u5EFA <code>pages/Profile/Edit/components/EditList/index.js</code>\uFF0C\u7F16\u5199\u7EC4\u4EF6\uFF1A</p></li></ol><div class="language-json ext-json line-numbers-mode"><pre class="language-json"><code><span class="token comment">//\u3010\u8BF4\u660E\u3011\uFF1A\u7EC4\u4EF6\u7684 config \u5C5E\u6027\u662F\u4E00\u4E2A\u5BF9\u8C61\uFF0C\u5305\u542B\u4EE5\u4E0B\u5185\u5BB9\uFF1A</span>
<span class="token punctuation">{</span>
  <span class="token property">&quot;\u5B57\u6BB51&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    name<span class="token operator">:</span> &#39;\u6570\u7EC4\u5B57\u6BB5\u540D&#39;<span class="token punctuation">,</span>
    items<span class="token operator">:</span> <span class="token punctuation">[</span>
      <span class="token punctuation">{</span>
        title<span class="token operator">:</span> &#39;\u9009\u9879\u4E00&#39;<span class="token punctuation">,</span>
        value<span class="token operator">:</span> &#39;\u9009\u9879\u4E00\u7684\u503C&#39;
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">{</span>
        title<span class="token operator">:</span> &#39;\u9009\u9879\u4E8C&#39;<span class="token punctuation">,</span>
        value<span class="token operator">:</span> &#39;\u9009\u9879\u4E8C\u7684\u503C&#39;
      <span class="token punctuation">}</span>
    <span class="token punctuation">]</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  
  <span class="token comment">// \u5176\u4ED6\u5B57\u6BB5...</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u7EC4\u4EF6\u4EE3\u7801\uFF1A</p><div class="language-jsx ext-jsx line-numbers-mode"><pre class="language-jsx"><code><span class="token keyword">import</span> styles <span class="token keyword">from</span> <span class="token string">&#39;./index.module.scss&#39;</span>

<span class="token comment">/**
 * \u4E2A\u4EBA\u4FE1\u606F\u9879\u4FEE\u6539\u5217\u8868
 * @param {Object} config \u914D\u7F6E\u4FE1\u606F\u5BF9\u8C61
 * @param {Function} onSelect \u9009\u62E9\u5217\u8868\u9879\u7684\u56DE\u8C03\u51FD\u6570
 * @param {Function} onClose \u53D6\u6D88\u6309\u94AE\u7684\u56DE\u8C03\u51FD\u6570
 */</span>
<span class="token keyword">const</span> <span class="token function-variable function">EditList</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> config <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span> onSelect<span class="token punctuation">,</span> onClose <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token punctuation">(</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">className</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>styles<span class="token punctuation">.</span>root<span class="token punctuation">}</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
      </span><span class="token punctuation">{</span><span class="token comment">/* \u5217\u8868\u9879 */</span><span class="token punctuation">}</span><span class="token plain-text">
      </span><span class="token punctuation">{</span>config<span class="token punctuation">.</span>items<span class="token operator">?.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">item<span class="token punctuation">,</span> index</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">(</span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span>
          <span class="token attr-name">className</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>list-item<span class="token punctuation">&quot;</span></span>
          <span class="token attr-name">key</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>index<span class="token punctuation">}</span></span>
          <span class="token attr-name">onClick</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token function">onSelect</span><span class="token punctuation">(</span>config<span class="token punctuation">.</span>name<span class="token punctuation">,</span> item<span class="token punctuation">,</span> index<span class="token punctuation">)</span><span class="token punctuation">}</span></span>
        <span class="token punctuation">&gt;</span></span><span class="token plain-text">
          </span><span class="token punctuation">{</span>item<span class="token punctuation">.</span>title<span class="token punctuation">}</span><span class="token plain-text">
        </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
      <span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token plain-text">

      </span><span class="token punctuation">{</span><span class="token comment">/* \u53D6\u6D88\u6309\u94AE */</span><span class="token punctuation">}</span><span class="token plain-text">
      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">className</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>list-item<span class="token punctuation">&quot;</span></span> <span class="token attr-name">onClick</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>onClose<span class="token punctuation">}</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">\u53D6\u6D88</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
  <span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> EditList
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="\u7F16\u8F91\u4E2A\u4EBA\u8BE6\u60C5-\u5B8C\u6210\u6027\u522B\u7684\u4FEE\u6539" tabindex="-1"><a class="header-anchor" href="#\u7F16\u8F91\u4E2A\u4EBA\u8BE6\u60C5-\u5B8C\u6210\u6027\u522B\u7684\u4FEE\u6539" aria-hidden="true">#</a> \u7F16\u8F91\u4E2A\u4EBA\u8BE6\u60C5\uFF1A\u5B8C\u6210\u6027\u522B\u7684\u4FEE\u6539</h2><blockquote><p>\u76EE\u6807\uFF1A\u5728\u4ECE\u70B9\u51FB\u6027\u522B\u8FDB\u5165\u7684\u62BD\u5C49\u5217\u8868\u4E2D\u9009\u62E9\u4E00\u9879\u540E\uFF0C\u5C06\u9009\u4E2D\u7684\u6570\u636E\u63D0\u4EA4\u5230\u540E\u7AEF\u8FDB\u884C\u66F4\u65B0\uFF0C\u5E76\u66F4\u65B0\u5230 Redux</p></blockquote><p>\u5B9E\u73B0\u601D\u8DEF\uFF1A</p><ul><li>\u501F\u52A9\u4E4B\u524D\u5B9E\u73B0\u7684\u66F4\u65B0\u4E2A\u4EBA\u8BE6\u60C5\u7684 Action <strong>\u5C01\u88C5\u7684\u9B45\u529B</strong></li></ul><div class="language-jsx ext-jsx line-numbers-mode"><pre class="language-jsx"><code><span class="token keyword">const</span> config <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">gender</span><span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token punctuation">{</span>
      <span class="token literal-property property">title</span><span class="token operator">:</span> <span class="token string">&#39;\u7537&#39;</span><span class="token punctuation">,</span>
      <span class="token function-variable function">onClick</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        <span class="token function">onCommit</span><span class="token punctuation">(</span><span class="token string">&#39;gender&#39;</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span>
      <span class="token literal-property property">title</span><span class="token operator">:</span> <span class="token string">&#39;\u5973&#39;</span><span class="token punctuation">,</span>
      <span class="token function-variable function">onClick</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        <span class="token function">onCommit</span><span class="token punctuation">(</span><span class="token string">&#39;gender&#39;</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="\u7F16\u8F91\u4E2A\u4EBA\u8BE6\u60C5-\u5B8C\u6210\u5934\u50CF\u7684\u4FEE\u6539" tabindex="-1"><a class="header-anchor" href="#\u7F16\u8F91\u4E2A\u4EBA\u8BE6\u60C5-\u5B8C\u6210\u5934\u50CF\u7684\u4FEE\u6539" aria-hidden="true">#</a> \u7F16\u8F91\u4E2A\u4EBA\u8BE6\u60C5\uFF1A\u5B8C\u6210\u5934\u50CF\u7684\u4FEE\u6539</h2><blockquote><p>\u76EE\u6807\uFF1A\u5728\u4ECE\u70B9\u51FB\u5934\u50CF\u8FDB\u5165\u7684\u62BD\u5C49\u5217\u8868\u4E2D\u9009\u62E9\u4E00\u9879\u540E\uFF0C\u4ECE\u5F39\u51FA\u7684\u6587\u4EF6\u9009\u62E9\u5668\u4E2D\u9009\u53D6\u4E00\u5F20\u56FE\u7247\u4E0A\u4F20\u5230\u540E\u7AEF\uFF0C\u5E76\u5C06\u65B0\u5934\u50CF\u5730\u5740\u66F4\u65B0\u5230 Redux</p></blockquote><p>\u5B9E\u73B0\u601D\u8DEF\uFF1A</p><ul><li>\u5B9E\u73B0\u4E00\u4E2A\u7528\u4E8E\u8C03\u7528\u63A5\u53E3\u8FDB\u884C\u5934\u50CF\u4E0A\u4F20\u3001\u53CA\u5C06\u4E0A\u4F20\u540E\u7684\u65B0\u56FE\u7247\u5730\u5740\u66F4\u65B0\u5230 Redux \u7684 Action</li><li>\u4F7F\u7528 Hook \u51FD\u6570 <code>useRef</code> \u64CD\u4F5C\u6587\u4EF6\u8F93\u5165\u6846\u5143\u7D20 <code>&lt;input type=&quot;file&quot;&gt;</code> \uFF0C\u89E6\u53D1\u6587\u4EF6\u8F93\u5165\u5F39\u6846</li><li>\u76D1\u542C\u6587\u4EF6\u8F93\u5165\u6846\u7684 <code>onChange</code> \u4E8B\u4EF6\uFF0C\u5728\u6587\u4EF6\u53D8\u5316\u65F6\u8C03\u7528 Action \u8FDB\u884C\u4E0A\u4F20</li></ul><p><strong>\u64CD\u4F5C\u6B65\u9AA4</strong></p><ul><li>\u5728 <code>store/actions/profile.js</code>\u4E2D\uFF0C\u5B9E\u73B0\u7528\u4E8E\u4E0A\u4F20\u5934\u50CF\u7684 Action Creator\uFF1A</li></ul><div class="language-jsx ext-jsx line-numbers-mode"><pre class="language-jsx"><code><span class="token comment">/**
 * \u66F4\u65B0\u5934\u50CF
 * @param {FormData} formData \u4E0A\u4F20\u5934\u50CF\u4FE1\u606F\u7684\u8868\u5355\u6570\u636E
 * @returns thunk
 */</span>
<span class="token keyword">export</span> <span class="token keyword">const</span> <span class="token function-variable function">updateAvatar</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">formData</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token parameter">dispatch</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token comment">// \u8C03\u7528\u63A5\u53E3\u8FDB\u884C\u4E0A\u4F20</span>
    <span class="token keyword">const</span> res <span class="token operator">=</span> <span class="token keyword">await</span> http<span class="token punctuation">.</span><span class="token function">patch</span><span class="token punctuation">(</span><span class="token string">&#39;/user/photo&#39;</span><span class="token punctuation">,</span> formData<span class="token punctuation">)</span>

    <span class="token comment">// \u5982\u679C\u540E\u7AEF\u66F4\u65B0\u6210\u529F\uFF0C\u5219\u518D\u66F4\u65B0 Redux \u4E2D\u7684\u6570\u636E</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>res<span class="token punctuation">.</span>data<span class="token punctuation">.</span>message <span class="token operator">===</span> <span class="token string">&#39;OK&#39;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token function">dispatch</span><span class="token punctuation">(</span><span class="token function">getUserProfile</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>\u521B\u5EFA ref \u5BF9\u8C61\uFF0C\u5E76\u5173\u8054\u5230\u6587\u4EF6\u8F93\u5165\u6846\u5143\u7D20</li></ul><div class="language-jsx ext-jsx line-numbers-mode"><pre class="language-jsx"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> useEffect<span class="token punctuation">,</span> useRef<span class="token punctuation">,</span> useState <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;react&#39;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><div class="language-jsx ext-jsx line-numbers-mode"><pre class="language-jsx"><code><span class="token keyword">const</span> fileRef <span class="token operator">=</span> <span class="token function">useRef</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><div class="language-jsx ext-jsx line-numbers-mode"><pre class="language-jsx"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>file<span class="token punctuation">&quot;</span></span> <span class="token attr-name">hidden</span> <span class="token attr-name">ref</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>fileRef<span class="token punctuation">}</span></span> <span class="token punctuation">/&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><ul><li>\u4FEE\u6539config\u5BF9\u8C61</li></ul><div class="language-jsx ext-jsx line-numbers-mode"><pre class="language-jsx"><code><span class="token keyword">const</span> config <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">avatar</span><span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token punctuation">{</span>
      <span class="token literal-property property">title</span><span class="token operator">:</span> <span class="token string">&#39;\u62CD\u7167&#39;</span><span class="token punctuation">,</span>
      <span class="token function-variable function">onClick</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        fileRef<span class="token punctuation">.</span>current<span class="token punctuation">.</span><span class="token function">click</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span>
      <span class="token literal-property property">title</span><span class="token operator">:</span> <span class="token string">&#39;\u672C\u5730\u9009\u62E9&#39;</span><span class="token punctuation">,</span>
      <span class="token function-variable function">onClick</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        fileRef<span class="token punctuation">.</span>current<span class="token punctuation">.</span><span class="token function">click</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token literal-property property">gender</span><span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token punctuation">{</span>
      <span class="token literal-property property">title</span><span class="token operator">:</span> <span class="token string">&#39;\u7537&#39;</span><span class="token punctuation">,</span>
      <span class="token function-variable function">onClick</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        <span class="token function">onCommit</span><span class="token punctuation">(</span><span class="token string">&#39;gender&#39;</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span>
      <span class="token literal-property property">title</span><span class="token operator">:</span> <span class="token string">&#39;\u5973&#39;</span><span class="token punctuation">,</span>
      <span class="token function-variable function">onClick</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        <span class="token function">onCommit</span><span class="token punctuation">(</span><span class="token string">&#39;gender&#39;</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>\u4E3A\u6587\u4EF6\u8F93\u5165\u6846\u6DFB\u52A0 <code>onChange</code> \u76D1\u542C\u51FD\u6570\uFF0C\u5E76\u5728\u8BE5\u51FD\u6570\u4E2D\u83B7\u53D6\u9009\u4E2D\u7684\u6587\u4EF6\u540E\u8C03\u7528 Action \u8FDB\u884C\u4E0A\u4F20\u548C\u66F4\u65B0</li></ul><div class="language-jsx ext-jsx line-numbers-mode"><pre class="language-jsx"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>file<span class="token punctuation">&quot;</span></span> <span class="token attr-name">hidden</span> <span class="token attr-name">ref</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>fileRef<span class="token punctuation">}</span></span> <span class="token attr-name">onChange</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>onAvatarChange<span class="token punctuation">}</span></span> <span class="token punctuation">/&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><div class="language-jsx ext-jsx line-numbers-mode"><pre class="language-jsx"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> getUserProfile<span class="token punctuation">,</span> updateAvatar<span class="token punctuation">,</span> updateProfile <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;@/store/actions/profile&#39;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><div class="language-jsx ext-jsx line-numbers-mode"><pre class="language-jsx"><code><span class="token keyword">const</span> <span class="token function-variable function">onAvatarChange</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token comment">// \u83B7\u53D6\u9009\u4E2D\u7684\u56FE\u7247\u6587\u4EF6</span>
  <span class="token keyword">const</span> file <span class="token operator">=</span> e<span class="token punctuation">.</span>target<span class="token punctuation">.</span>files<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span>

  <span class="token comment">// \u751F\u6210\u8868\u5355\u6570\u636E</span>
  <span class="token keyword">const</span> formData <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">FormData</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  formData<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token string">&#39;photo&#39;</span><span class="token punctuation">,</span> file<span class="token punctuation">)</span>

  <span class="token comment">// \u8C03\u7528 Action \u8FDB\u884C\u4E0A\u4F20\u548C Redux \u6570\u636E\u66F4\u65B0</span>
  <span class="token function">dispatch</span><span class="token punctuation">(</span><span class="token function">updateAvatar</span><span class="token punctuation">(</span>formData<span class="token punctuation">)</span><span class="token punctuation">)</span>

  Toast<span class="token punctuation">.</span><span class="token function">success</span><span class="token punctuation">(</span><span class="token string">&#39;\u5934\u50CF\u4E0A\u4F20\u6210\u529F&#39;</span><span class="token punctuation">)</span>
  <span class="token function">onClose</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><hr><h2 id="\u7F16\u8F91\u4E2A\u4EBA\u8BE6\u60C5-\u5B8C\u6210\u751F\u65E5\u7684\u4FEE\u6539" tabindex="-1"><a class="header-anchor" href="#\u7F16\u8F91\u4E2A\u4EBA\u8BE6\u60C5-\u5B8C\u6210\u751F\u65E5\u7684\u4FEE\u6539" aria-hidden="true">#</a> \u7F16\u8F91\u4E2A\u4EBA\u8BE6\u60C5\uFF1A\u5B8C\u6210\u751F\u65E5\u7684\u4FEE\u6539</h2><blockquote><p>\u76EE\u6807\uFF1A\u5728\u4ECE\u70B9\u51FB\u751F\u65E5\u8FDB\u5165\u7684\u65E5\u671F\u9009\u62E9\u5668\u4E2D\u9009\u62E9\u65B0\u65E5\u671F\u540E\uFF0C\u5C06\u9009\u4E2D\u6570\u636E\u63D0\u4EA4\u5230\u540E\u7AEF\u8FDB\u884C\u66F4\u65B0\uFF0C\u5E76\u66F4\u65B0\u5230 Redux</p></blockquote><p>\u5B9E\u73B0\u601D\u8DEF\uFF1A</p><ul><li>\u501F\u52A9\u4E4B\u524D\u5B9E\u73B0\u7684\u66F4\u65B0\u4E2A\u4EBA\u8BE6\u60C5\u7684 Action</li></ul><p><strong>\u64CD\u4F5C\u6B65\u9AA4</strong></p><ol><li>\u4E3A\u65E5\u671F\u9009\u62E9\u5668\u7EC4\u4EF6\u8BBE\u7F6E <code>onChange</code> \u56DE\u8C03\u51FD\u6570\uFF0C\u5728\u8BE5\u51FD\u6570\u6267\u884C\u5BF9\u5E94 Action</li></ol><div class="language-jsx ext-jsx line-numbers-mode"><pre class="language-jsx"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">DatePicker</span></span>
  <span class="token comment">// ...</span>
  <span class="token attr-name">onChange</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>onBirthdayChange<span class="token punctuation">}</span></span>
  <span class="token punctuation">&gt;</span></span><span class="token plain-text">
</span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-jsx ext-jsx line-numbers-mode"><pre class="language-jsx"><code><span class="token comment">// \u4FEE\u6539\u751F\u65E5</span>
<span class="token keyword">const</span> <span class="token function-variable function">onBirthdayChange</span> <span class="token operator">=</span> <span class="token parameter">value</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token comment">// \u5C06\u4ECE DatePicker \u7EC4\u4EF6\u83B7\u53D6\u5230\u7684 Date \u5BF9\u8C61\uFF0C\u8F6C\u6210\u5B57\u7B26\u4E32\u7684\u5F62\u5F0F</span>
  <span class="token keyword">const</span> year <span class="token operator">=</span> value<span class="token punctuation">.</span><span class="token function">getFullYear</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token keyword">const</span> month <span class="token operator">=</span> value<span class="token punctuation">.</span><span class="token function">getMonth</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token number">1</span>
  <span class="token keyword">const</span> day <span class="token operator">=</span> value<span class="token punctuation">.</span><span class="token function">getDate</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token keyword">const</span> dateStr <span class="token operator">=</span> <span class="token template-string"><span class="token template-punctuation string">\`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">\${</span>year<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">-</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">\${</span>month<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">-</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">\${</span>day<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">\`</span></span>

  <span class="token comment">// \u8C03\u7528 Action \u66F4\u65B0\u6570\u636E</span>
  <span class="token function">dispatch</span><span class="token punctuation">(</span><span class="token function">updateProfile</span><span class="token punctuation">(</span><span class="token string">&#39;birthday&#39;</span><span class="token punctuation">,</span> dateStr<span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><hr><hr><h2 id="\u804A\u5929\u5BA2\u670D-\u5C0F\u667A\u540C\u5B66\u9875\u9762\u7684\u9759\u6001\u7ED3\u6784" tabindex="-1"><a class="header-anchor" href="#\u804A\u5929\u5BA2\u670D-\u5C0F\u667A\u540C\u5B66\u9875\u9762\u7684\u9759\u6001\u7ED3\u6784" aria-hidden="true">#</a> \u804A\u5929\u5BA2\u670D\uFF1A\u5C0F\u667A\u540C\u5B66\u9875\u9762\u7684\u9759\u6001\u7ED3\u6784</h2><blockquote><p>\u76EE\u6807\uFF1A\u5B9E\u73B0\u5C0F\u667A\u540C\u5B66\u9875\u9762\u7684\u9759\u6001\u7ED3\u6784\u548C\u6837\u5F0F</p></blockquote><p>\u9875\u9762\u5E03\u5C40\u7ED3\u6784\u5206\u6790\uFF1A</p><img src="https://wuxiaohui-1254415986.cos.ap-nanjing.myqcloud.com/2022/01/30/image20210903174406559.png" alt="image-20210903174406559" style="zoom:40%;"><p><strong>\u64CD\u4F5C\u6B65\u9AA4</strong></p><ol><li>\u5C06\u8D44\u6E90\u5305\u4E2D\u7684\u6837\u5F0F\u6587\u4EF6\u62F7\u8D1D\u5230 <code>pages/Profile/Chat/</code>\u76EE\u5F55\u4E0B\uFF0C\u7136\u540E\u5728\u8BE5\u76EE\u5F55\u4E2D\u7684<code>index.js</code>\u91CC\u7F16\u5199\uFF1A</li></ol><div class="language-jsx ext-jsx line-numbers-mode"><pre class="language-jsx"><code><span class="token keyword">import</span> Icon <span class="token keyword">from</span> <span class="token string">&#39;@/components/Icon&#39;</span>
<span class="token keyword">import</span> Input <span class="token keyword">from</span> <span class="token string">&#39;@/components/Input&#39;</span>
<span class="token keyword">import</span> NavBar <span class="token keyword">from</span> <span class="token string">&#39;@/components/NavBar&#39;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> useHistory <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;react-router-dom&#39;</span>
<span class="token keyword">import</span> styles <span class="token keyword">from</span> <span class="token string">&#39;./index.module.scss&#39;</span>

<span class="token keyword">const</span> <span class="token function-variable function">Chat</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> history <span class="token operator">=</span> <span class="token function">useHistory</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

  <span class="token keyword">return</span> <span class="token punctuation">(</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">className</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>styles<span class="token punctuation">.</span>root<span class="token punctuation">}</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
      </span><span class="token punctuation">{</span><span class="token comment">/* \u9876\u90E8\u5BFC\u822A\u680F */</span><span class="token punctuation">}</span><span class="token plain-text">
      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">NavBar</span></span> <span class="token attr-name">className</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>fixed-header<span class="token punctuation">&quot;</span></span> <span class="token attr-name">onLeftClick</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> history<span class="token punctuation">.</span><span class="token function">go</span><span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">}</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
        \u5C0F\u667A\u540C\u5B66
      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">NavBar</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">

      </span><span class="token punctuation">{</span><span class="token comment">/* \u804A\u5929\u8BB0\u5F55\u5217\u8868 */</span><span class="token punctuation">}</span><span class="token plain-text">
      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">className</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>chat-list<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
        </span><span class="token punctuation">{</span><span class="token comment">/* \u673A\u5668\u4EBA\u7684\u6D88\u606F */</span><span class="token punctuation">}</span><span class="token plain-text">
        </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">className</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>chat-item<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
          </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Icon</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>iconbtn_xiaozhitongxue<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span><span class="token plain-text">
          </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">className</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>message<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">\u4F60\u597D\uFF01</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
        </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">

        </span><span class="token punctuation">{</span><span class="token comment">/* \u7528\u6237\u7684\u6D88\u606F */</span><span class="token punctuation">}</span><span class="token plain-text">
        </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">className</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>chat-item user<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
          </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>img</span> <span class="token attr-name">src</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token string">&#39;http://toutiao.itheima.net/images/user_head.jpg&#39;</span><span class="token punctuation">}</span></span> <span class="token attr-name">alt</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span><span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span><span class="token plain-text">
          </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">className</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>message<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">\u4F60\u597D\uFF1F</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
        </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">

      </span><span class="token punctuation">{</span><span class="token comment">/* \u5E95\u90E8\u6D88\u606F\u8F93\u5165\u6846 */</span><span class="token punctuation">}</span><span class="token plain-text">
      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">className</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>input-footer<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
        </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Input</span></span>
          <span class="token attr-name">className</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>no-border<span class="token punctuation">&quot;</span></span>
          <span class="token attr-name">placeholder</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>\u8BF7\u63CF\u8FF0\u60A8\u7684\u95EE\u9898<span class="token punctuation">&quot;</span></span>
        <span class="token punctuation">/&gt;</span></span><span class="token plain-text">
        </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Icon</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>iconbianji<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span><span class="token plain-text">
      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
  <span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> Chat
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><hr><h2 id="\u804A\u5929\u5BA2\u670D-\u52A8\u6001\u6E32\u67D3\u804A\u5929\u8BB0\u5F55\u5217\u8868" tabindex="-1"><a class="header-anchor" href="#\u804A\u5929\u5BA2\u670D-\u52A8\u6001\u6E32\u67D3\u804A\u5929\u8BB0\u5F55\u5217\u8868" aria-hidden="true">#</a> \u804A\u5929\u5BA2\u670D\uFF1A\u52A8\u6001\u6E32\u67D3\u804A\u5929\u8BB0\u5F55\u5217\u8868</h2><blockquote><p>\u76EE\u6807\uFF1A\u5C06\u804A\u5929\u6570\u636E\u5B58\u5728\u6570\u7EC4\u72B6\u6001\u4E2D\uFF0C\u518D\u52A8\u6001\u6E32\u67D3\u5230\u754C\u9762\u4E0A</p></blockquote><p><strong>\u64CD\u4F5C\u6B65\u9AA4</strong></p><ol><li>\u58F0\u660E\u4E00\u4E2A\u6570\u7EC4\u72B6\u6001</li></ol><div class="language-jsx ext-jsx line-numbers-mode"><pre class="language-jsx"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> useEffect<span class="token punctuation">,</span> useRef<span class="token punctuation">,</span> useState <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;react&#39;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><div class="language-jsx ext-jsx line-numbers-mode"><pre class="language-jsx"><code><span class="token comment">// \u804A\u5929\u8BB0\u5F55</span>
<span class="token keyword">const</span> <span class="token punctuation">[</span>messageList<span class="token punctuation">,</span> setMessageList<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useState</span><span class="token punctuation">(</span><span class="token punctuation">[</span>
  <span class="token comment">// \u653E\u4E24\u6761\u521D\u59CB\u6D88\u606F</span>
  <span class="token punctuation">{</span> <span class="token literal-property property">type</span><span class="token operator">:</span> <span class="token string">&#39;robot&#39;</span><span class="token punctuation">,</span> <span class="token literal-property property">text</span><span class="token operator">:</span> <span class="token string">&#39;\u4EB2\u7231\u7684\u7528\u6237\u60A8\u597D\uFF0C\u5C0F\u667A\u540C\u5B66\u4E3A\u60A8\u670D\u52A1\u3002&#39;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">{</span> <span class="token literal-property property">type</span><span class="token operator">:</span> <span class="token string">&#39;user&#39;</span><span class="token punctuation">,</span> <span class="token literal-property property">text</span><span class="token operator">:</span> <span class="token string">&#39;\u4F60\u597D&#39;</span> <span class="token punctuation">}</span>
<span class="token punctuation">]</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ol start="2"><li>\u4ECE Redux \u4E2D\u83B7\u53D6\u5F53\u524D\u7528\u6237\u57FA\u672C\u4FE1\u606F</li></ol><div class="language-jsx ext-jsx line-numbers-mode"><pre class="language-jsx"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> useSelector <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;react-redux&#39;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><div class="language-jsx ext-jsx line-numbers-mode"><pre class="language-jsx"><code><span class="token comment">// \u5F53\u524D\u7528\u6237\u4FE1\u606F</span>
<span class="token keyword">const</span> user <span class="token operator">=</span> <span class="token function">useSelector</span><span class="token punctuation">(</span><span class="token parameter">state</span> <span class="token operator">=&gt;</span> state<span class="token punctuation">.</span>profile<span class="token punctuation">.</span>user<span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><ol start="3"><li>\u6839\u636E\u6570\u7EC4\u6570\u636E\uFF0C\u52A8\u6001\u6E32\u67D3\u804A\u5929\u8BB0\u5F55\u5217\u8868</li></ol><div class="language-jsx ext-jsx line-numbers-mode"><pre class="language-jsx"><code><span class="token punctuation">{</span><span class="token comment">/* \u804A\u5929\u8BB0\u5F55\u5217\u8868 */</span><span class="token punctuation">}</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">className</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>chat-list<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
  </span><span class="token punctuation">{</span>messageList<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">msg<span class="token punctuation">,</span> index</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token comment">// \u673A\u5668\u4EBA\u7684\u6D88\u606F</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>msg<span class="token punctuation">.</span>type <span class="token operator">===</span> <span class="token string">&#39;robot&#39;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span> <span class="token punctuation">(</span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">className</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>chat-item<span class="token punctuation">&quot;</span></span> <span class="token attr-name">key</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>index<span class="token punctuation">}</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
          </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Icon</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>iconbtn_xiaozhitongxue<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span><span class="token plain-text">
          </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">className</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>message<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token punctuation">{</span>msg<span class="token punctuation">.</span>text<span class="token punctuation">}</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
        </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
      <span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
    <span class="token comment">// \u7528\u6237\u7684\u6D88\u606F</span>
    <span class="token keyword">else</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span> <span class="token punctuation">(</span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">className</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>chat-item user<span class="token punctuation">&quot;</span></span> <span class="token attr-name">key</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>index<span class="token punctuation">}</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
          </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>img</span> <span class="token attr-name">src</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>user<span class="token punctuation">.</span>photo <span class="token operator">||</span> <span class="token string">&#39;http://toutiao.itheima.net/images/user_head.jpg&#39;</span><span class="token punctuation">}</span></span> <span class="token attr-name">alt</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span><span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span><span class="token plain-text">
          </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">className</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>message<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token punctuation">{</span>msg<span class="token punctuation">.</span>text<span class="token punctuation">}</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
        </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
      <span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token plain-text">
</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u6548\u679C\uFF1A</p><img src="https://wuxiaohui-1254415986.cos.ap-nanjing.myqcloud.com/2022/01/30/image20210904085509862.png" alt="image-20210904085509862" style="zoom:50%;"><hr><h2 id="\u804A\u5929\u5BA2\u670D-\u5EFA\u7ACB\u4E0E\u670D\u52A1\u5668\u7684\u8FDE\u63A5" tabindex="-1"><a class="header-anchor" href="#\u804A\u5929\u5BA2\u670D-\u5EFA\u7ACB\u4E0E\u670D\u52A1\u5668\u7684\u8FDE\u63A5" aria-hidden="true">#</a> \u804A\u5929\u5BA2\u670D\uFF1A\u5EFA\u7ACB\u4E0E\u670D\u52A1\u5668\u7684\u8FDE\u63A5</h2>`,460),B=s("\u76EE\u6807\uFF1A\u4F7F\u7528 "),D={href:"http://socket.io",target:"_blank",rel:"noopener noreferrer"},$=s("socket.io"),H=s(" \u5BA2\u6237\u7AEF\u4E0E\u670D\u52A1\u5668\u5EFA\u7ACB WebSocket \u957F\u8FDE\u63A5"),O=s("\u672C\u9879\u76EE\u804A\u5929\u5BA2\u670D\u7684\u540E\u7AEF\u63A5\u53E3\uFF0C\u4F7F\u7528\u7684\u662F\u57FA\u4E8E WebSocket \u534F\u8BAE\u7684 "),F={href:"http://socket.io",target:"_blank",rel:"noopener noreferrer"},U=s("socket.io"),V=s(" \u63A5\u53E3\u3002\u6211\u4EEC\u53EF\u4EE5\u4F7F\u7528\u4E13\u95E8\u7684 "),M={href:"http://socket.io",target:"_blank",rel:"noopener noreferrer"},Y=s("socket.io"),K=s(" \u5BA2\u6237\u7AEF\u5E93\uFF0C\u5C31\u80FD\u8F7B\u677E\u5EFA\u7ACB\u8D77\u8FDE\u63A5\u5E76\u8FDB\u884C\u4E92\u76F8\u901A\u4FE1\u3002"),W=n("p",null,"\u5B9E\u73B0\u601D\u8DEF\uFF1A",-1),Q=s("\u501F\u52A9 "),X=n("code",null,"useEffect",-1),J=s("\uFF0C\u5728\u8FDB\u5165\u9875\u9762\u65F6\u8C03\u7528\u5BA2\u6237\u7AEF\u5E93\u5EFA\u7ACB "),G={href:"http://socket.io",target:"_blank",rel:"noopener noreferrer"},Z=s("socket.io"),nn=s(" \u8FDE\u63A5"),sn=n("p",null,[n("strong",null,"\u64CD\u4F5C\u6B65\u9AA4")],-1),an=s("\u5B89\u88C5 "),tn={href:"http://socket.io",target:"_blank",rel:"noopener noreferrer"},pn=s("socket.io"),en=s(" \u5BA2\u6237\u7AEF\u5E93\uFF1A"),on=n("code",null,"socket.io-client",-1),cn=p(`<div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token function">npm</span> i socket.io-client --save
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div>`,1),ln={start:"2"},un=s("\u5728\u8FDB\u5165\u673A\u5668\u4EBA\u5BA2\u670D\u9875\u9762\u65F6\uFF0C\u521B\u5EFA "),rn={href:"http://socket.io",target:"_blank",rel:"noopener noreferrer"},kn=s("socket.io"),dn=s(" \u5BA2\u6237\u7AEF"),vn=p(`<div class="language-jsx ext-jsx line-numbers-mode"><pre class="language-jsx"><code><span class="token keyword">import</span> io <span class="token keyword">from</span> <span class="token string">&#39;socket.io-client&#39;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> getTokenInfo <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;@/utils/storage&#39;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-jsx ext-jsx line-numbers-mode"><pre class="language-jsx"><code><span class="token comment">// \u7528\u4E8E\u7F13\u5B58 socket.io \u5BA2\u6237\u7AEF\u5B9E\u4F8B</span>
<span class="token keyword">const</span> clientRef <span class="token operator">=</span> <span class="token function">useRef</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">)</span>

<span class="token function">useEffect</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token comment">// \u521B\u5EFA\u5BA2\u6237\u7AEF\u5B9E\u4F8B</span>
  <span class="token keyword">const</span> client <span class="token operator">=</span> <span class="token function">io</span><span class="token punctuation">(</span><span class="token string">&#39;http://toutiao.itheima.net&#39;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">transports</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&#39;websocket&#39;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token comment">// \u5728\u67E5\u8BE2\u5B57\u7B26\u4E32\u53C2\u6570\u4E2D\u4F20\u9012 token</span>
    <span class="token literal-property property">query</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token literal-property property">token</span><span class="token operator">:</span> <span class="token function">getTokenInfo</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>token
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>

  <span class="token comment">// \u76D1\u542C\u8FDE\u63A5\u6210\u529F\u7684\u4E8B\u4EF6</span>
  client<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">&#39;connect&#39;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token comment">// \u5411\u804A\u5929\u8BB0\u5F55\u4E2D\u6DFB\u52A0\u4E00\u6761\u6D88\u606F</span>
    <span class="token function">setMessageList</span><span class="token punctuation">(</span><span class="token parameter">messageList</span> <span class="token operator">=&gt;</span> <span class="token punctuation">[</span>
      <span class="token operator">...</span>messageList<span class="token punctuation">,</span>
      <span class="token punctuation">{</span> <span class="token literal-property property">type</span><span class="token operator">:</span> <span class="token string">&#39;robot&#39;</span><span class="token punctuation">,</span> <span class="token literal-property property">text</span><span class="token operator">:</span> <span class="token string">&#39;\u6211\u73B0\u5728\u606D\u5019\u7740\u60A8\u7684\u63D0\u95EE\u3002&#39;</span> <span class="token punctuation">}</span>
    <span class="token punctuation">]</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>

  <span class="token comment">// \u76D1\u542C\u6536\u5230\u6D88\u606F\u7684\u4E8B\u4EF6</span>
  client<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">&#39;message&#39;</span><span class="token punctuation">,</span> <span class="token parameter">data</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;&gt;&gt;&gt;&gt;\u6536\u5230 socket.io \u6D88\u606F:&#39;</span><span class="token punctuation">,</span> data<span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>

  <span class="token comment">// \u5C06\u5BA2\u6237\u7AEF\u5B9E\u4F8B\u7F13\u5B58\u5230 ref \u5F15\u7528\u4E2D</span>
  clientRef<span class="token punctuation">.</span>current <span class="token operator">=</span> client

  <span class="token comment">// \u5728\u7EC4\u4EF6\u9500\u6BC1\u65F6\u5173\u95ED socket.io \u7684\u8FDE\u63A5</span>
  <span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    client<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u6B63\u5E38\u60C5\u51B5\uFF0C\u4E00\u8FDB\u5165\u5BA2\u670D\u9875\u9762\uFF0C\u5C31\u80FD\u5728\u63A7\u5236\u53F0\u770B\u5230\u8FDE\u63A5\u6210\u529F\u7684\u4FE1\u606F\uFF1A</p><img src="https://wuxiaohui-1254415986.cos.ap-nanjing.myqcloud.com/2022/01/30/image20210903181934664.png" alt="image-20210903181934664" style="zoom:40%;"><hr><h2 id="\u804A\u5929\u5BA2\u670D-\u7ED9\u673A\u5668\u4EBA\u53D1\u6D88\u606F" tabindex="-1"><a class="header-anchor" href="#\u804A\u5929\u5BA2\u670D-\u7ED9\u673A\u5668\u4EBA\u53D1\u6D88\u606F" aria-hidden="true">#</a> \u804A\u5929\u5BA2\u670D\uFF1A\u7ED9\u673A\u5668\u4EBA\u53D1\u6D88\u606F</h2>`,6),mn=s("\u76EE\u6807\uFF1A\u5C06\u8F93\u5165\u6846\u5185\u5BB9\u901A\u8FC7 "),gn={href:"http://socket.io",target:"_blank",rel:"noopener noreferrer"},bn=s("socket.io"),xn=s(" \u53D1\u9001\u5230\u670D\u52A1\u7AEF"),hn=n("p",null,"\u5B9E\u73B0\u601D\u8DEF\uFF1A",-1),yn=s("\u4F7F\u7528 "),fn={href:"http://socket.io",target:"_blank",rel:"noopener noreferrer"},qn=s("socket.io"),wn=s(" \u5B9E\u4F8B\u7684 "),jn=n("code",null,"emit()",-1),_n=s(" \u65B9\u6CD5\u53D1\u9001\u4FE1\u606F"),Nn=p(`<p><strong>\u64CD\u4F5C\u6B65\u9AA4</strong></p><ol><li>\u58F0\u660E\u4E00\u4E2A\u72B6\u6001\uFF0C\u5E76\u7ED1\u5B9A\u6D88\u606F\u8F93\u5165\u6846</li></ol><div class="language-jsx ext-jsx line-numbers-mode"><pre class="language-jsx"><code><span class="token comment">// \u8F93\u5165\u6846\u4E2D\u7684\u5185\u5BB9</span>
<span class="token keyword">const</span> <span class="token punctuation">[</span>message<span class="token punctuation">,</span> setMessage<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useState</span><span class="token punctuation">(</span><span class="token string">&#39;&#39;</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-jsx ext-jsx line-numbers-mode"><pre class="language-jsx"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Input</span></span>
  <span class="token attr-name">className</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>no-border<span class="token punctuation">&quot;</span></span>
  <span class="token attr-name">placeholder</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>\u8BF7\u63CF\u8FF0\u60A8\u7684\u95EE\u9898<span class="token punctuation">&quot;</span></span>
  <span class="token attr-name">value</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>message<span class="token punctuation">}</span></span>
  <span class="token attr-name">onChange</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token parameter">e</span> <span class="token operator">=&gt;</span> <span class="token function">setMessage</span><span class="token punctuation">(</span>e<span class="token punctuation">.</span>target<span class="token punctuation">.</span>value<span class="token punctuation">)</span><span class="token punctuation">}</span></span>
  <span class="token punctuation">/&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ol start="2"><li>\u4E3A\u6D88\u606F\u8F93\u5165\u6846\u6DFB\u52A0\u952E\u76D8\u4E8B\u4EF6\uFF0C\u5728\u8F93\u5165\u56DE\u8F66\u65F6\u53D1\u9001\u6D88\u606F</li></ol><div class="language-jsx ext-jsx line-numbers-mode"><pre class="language-jsx"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Input</span></span>
	<span class="token comment">// ...</span>
  <span class="token attr-name">onKeyUp</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>onSendMessage<span class="token punctuation">}</span></span>
  <span class="token punctuation">/&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-jsx ext-jsx line-numbers-mode"><pre class="language-jsx"><code><span class="token comment">// \u6309\u56DE\u8F66\u53D1\u9001\u6D88\u606F</span>
<span class="token keyword">const</span> <span class="token function-variable function">onSendMessage</span> <span class="token operator">=</span> <span class="token parameter">e</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>e<span class="token punctuation">.</span>keyCode <span class="token operator">===</span> <span class="token number">13</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// \u901A\u8FC7 socket.io \u5BA2\u6237\u7AEF\u5411\u670D\u52A1\u7AEF\u53D1\u9001\u6D88\u606F</span>
    clientRef<span class="token punctuation">.</span>current<span class="token punctuation">.</span><span class="token function">emit</span><span class="token punctuation">(</span><span class="token string">&#39;message&#39;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
      <span class="token literal-property property">msg</span><span class="token operator">:</span> message<span class="token punctuation">,</span>
      <span class="token literal-property property">timestamp</span><span class="token operator">:</span> Date<span class="token punctuation">.</span><span class="token function">now</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>

    <span class="token comment">// \u5411\u804A\u5929\u8BB0\u5F55\u4E2D\u6DFB\u52A0\u5F53\u524D\u53D1\u9001\u7684\u6D88\u606F</span>
    <span class="token function">setMessageList</span><span class="token punctuation">(</span><span class="token parameter">messageList</span> <span class="token operator">=&gt;</span> <span class="token punctuation">[</span>
      <span class="token operator">...</span>messageList<span class="token punctuation">,</span>
      <span class="token punctuation">{</span> <span class="token literal-property property">type</span><span class="token operator">:</span> <span class="token string">&#39;user&#39;</span><span class="token punctuation">,</span> <span class="token literal-property property">text</span><span class="token operator">:</span> message <span class="token punctuation">}</span>
    <span class="token punctuation">]</span><span class="token punctuation">)</span>

    <span class="token comment">// \u53D1\u9001\u540E\u6E05\u7A7A\u8F93\u5165\u6846</span>
    <span class="token function">setMessage</span><span class="token punctuation">(</span><span class="token string">&#39;&#39;</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><hr><h2 id="\u804A\u5929\u5BA2\u670D-\u63A5\u6536\u673A\u5668\u4EBA\u56DE\u590D\u7684\u6D88\u606F" tabindex="-1"><a class="header-anchor" href="#\u804A\u5929\u5BA2\u670D-\u63A5\u6536\u673A\u5668\u4EBA\u56DE\u590D\u7684\u6D88\u606F" aria-hidden="true">#</a> \u804A\u5929\u5BA2\u670D\uFF1A\u63A5\u6536\u673A\u5668\u4EBA\u56DE\u590D\u7684\u6D88\u606F</h2>`,9),Rn=n("p",null,"\u76EE\u6807\uFF1A",-1),In=s("\u901A\u8FC7 "),Cn={href:"http://socket.io",target:"_blank",rel:"noopener noreferrer"},Tn=s("socket.io"),Ln=s(" \u76D1\u542C\u56DE\u590D\u7684\u6D88\u606F\uFF0C\u5E76\u6DFB\u52A0\u5230\u804A\u5929\u5217\u8868\u4E2D\uFF1B"),Sn=n("li",null,[n("p",null,"\u4E14\u5F53\u6D88\u606F\u8F83\u591A\u51FA\u73B0\u6EDA\u52A8\u6761\u65F6\uFF0C\u6709\u540E\u7EED\u65B0\u6D88\u606F\u7684\u8BDD\u603B\u5C06\u6EDA\u52A8\u6761\u6EDA\u52A8\u5230\u6700\u5E95\u90E8\u3002")],-1),An=n("p",null,"\u5B9E\u73B0\u601D\u8DEF\uFF1A",-1),Pn=s("\u4F7F\u7528 "),zn={href:"http://socket.io",target:"_blank",rel:"noopener noreferrer"},En=s("socket.io"),Bn=s(" \u5B9E\u4F8B\u7684 "),Dn=n("code",null,"message",-1),$n=s(" \u4E8B\u4EF6\u63A5\u6536\u4FE1\u606F"),Hn=n("li",null,"\u5728\u804A\u5929\u5217\u8868\u6570\u636E\u53D8\u5316\u65F6\uFF0C\u64CD\u4F5C\u5217\u8868\u5BB9\u5668\u5143\u7D20\u6765\u8BBE\u7F6E\u6EDA\u52A8\u91CF",-1),On=n("p",null,[n("strong",null,"\u64CD\u4F5C\u6B65\u9AA4")],-1),Fn=s("\u5728 "),Un={href:"http://socket.io",target:"_blank",rel:"noopener noreferrer"},Vn=s("socket.io"),Mn=s(" \u5B9E\u4F8B\u7684 "),Yn=n("code",null,"message",-1),Kn=s(" \u4E8B\u4EF6\u4E2D\uFF0C\u5C06\u63A5\u6536\u5230\u7684\u6D88\u606F\u6DFB\u52A0\u5230\u804A\u5929\u5217\u8868\uFF1A"),Wn=p(`<div class="language-jsx ext-jsx line-numbers-mode"><pre class="language-jsx"><code><span class="token comment">// \u76D1\u542C\u6536\u5230\u6D88\u606F\u7684\u4E8B\u4EF6</span>
client<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">&#39;message&#39;</span><span class="token punctuation">,</span> <span class="token parameter">data</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token comment">// \u5411\u804A\u5929\u8BB0\u5F55\u4E2D\u6DFB\u52A0\u673A\u5668\u4EBA\u56DE\u590D\u7684\u6D88\u606F</span>
  <span class="token function">setMessageList</span><span class="token punctuation">(</span><span class="token parameter">messageList</span> <span class="token operator">=&gt;</span> <span class="token punctuation">[</span>
    <span class="token operator">...</span>messageList<span class="token punctuation">,</span>
    <span class="token punctuation">{</span> <span class="token literal-property property">type</span><span class="token operator">:</span> <span class="token string">&#39;robot&#39;</span><span class="token punctuation">,</span> <span class="token literal-property property">text</span><span class="token operator">:</span> data<span class="token punctuation">.</span>msg <span class="token punctuation">}</span>
  <span class="token punctuation">]</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ol start="2"><li>\u58F0\u660E\u4E00\u4E2A ref \u5E76\u8BBE\u7F6E\u5230\u804A\u5929\u5217\u8868\u7684\u5BB9\u5668\u5143\u7D20\u4E0A</li></ol><div class="language-jsx ext-jsx line-numbers-mode"><pre class="language-jsx"><code><span class="token comment">// \u7528\u4E8E\u64CD\u4F5C\u804A\u5929\u5217\u8868\u5143\u7D20\u7684\u5F15\u7528</span>
<span class="token keyword">const</span> chatListRef <span class="token operator">=</span> <span class="token function">useRef</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-jsx ext-jsx line-numbers-mode"><pre class="language-jsx"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">className</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>chat-list<span class="token punctuation">&quot;</span></span> <span class="token attr-name">ref</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>chatListRef<span class="token punctuation">}</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
</span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><ol start="3"><li>\u901A\u8FC7 <code>useEffect</code> \u76D1\u542C\u804A\u5929\u6570\u636E\u53D8\u5316\uFF0C\u5BF9\u804A\u5929\u5BB9\u5668\u5143\u7D20\u7684 scrollTop \u8FDB\u884C\u8BBE\u7F6E\uFF1A</li></ol><div class="language-jsx ext-jsx line-numbers-mode"><pre class="language-jsx"><code><span class="token comment">// \u76D1\u542C\u804A\u5929\u6570\u636E\u7684\u53D8\u5316\uFF0C\u6539\u53D8\u804A\u5929\u5BB9\u5668\u5143\u7D20\u7684 scrollTop \u503C\u8BA9\u9875\u9762\u6EDA\u5230\u6700\u5E95\u90E8</span>
<span class="token function">useEffect</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  chatListRef<span class="token punctuation">.</span>current<span class="token punctuation">.</span>scrollTop <span class="token operator">=</span> chatListRef<span class="token punctuation">.</span>current<span class="token punctuation">.</span>scrollHeight
<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">[</span>messageList<span class="token punctuation">]</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><hr><h2 id="\u9000\u51FA\u767B\u5F55" tabindex="-1"><a class="header-anchor" href="#\u9000\u51FA\u767B\u5F55" aria-hidden="true">#</a> \u9000\u51FA\u767B\u5F55</h2><blockquote><p>\u76EE\u6807\uFF1A\u70B9\u51FB \u201C\u9000\u51FA\u767B\u5F55\u201D \u6309\u94AE\u540E\u8FD4\u56DE\u5230\u767B\u5F55\u9875\u9762</p></blockquote><img src="https://wuxiaohui-1254415986.cos.ap-nanjing.myqcloud.com/2022/01/30/image20210902104308053.png" alt="image-20210902104308053" style="zoom:40%;"><p>\u5B9E\u73B0\u601D\u8DEF\uFF1A</p><ul><li>\u70B9\u51FB \u201C\u9000\u51FA\u767B\u5F55\u201D \u540E\uFF0C\u9700\u8981\u5F39\u4FE1\u606F\u6846\u8BA9\u7528\u6237\u786E\u8BA4</li><li>\u786E\u8BA4\u9000\u51FA\uFF0C\u5219\u6E05\u7A7A Redux \u548C LocalStorage \u4E2D\u7684 Token \u4FE1\u606F</li><li>\u6E05\u7A7A Token \u540E\u8DF3\u8F6C\u9875\u9762\u5230\u767B\u5F55\u9875</li></ul><p><strong>\u64CD\u4F5C\u6B65\u9AA4</strong></p><ol><li>\u4E3A\u201C\u9000\u51FA\u767B\u5F55\u201D\u6309\u94AE\u6DFB\u52A0\u70B9\u51FB\u4E8B\u4EF6\uFF0C\u5E76\u5728\u76D1\u542C\u51FD\u6570\u4E2D\u5F39\u51FA\u786E\u8BA4\u6846\uFF1A</li></ol><div class="language-jsx ext-jsx line-numbers-mode"><pre class="language-jsx"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">className</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>btn<span class="token punctuation">&quot;</span></span> <span class="token attr-name">onClick</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>onLogout<span class="token punctuation">}</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">\u9000\u51FA\u767B\u5F55</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><div class="language-jsx ext-jsx line-numbers-mode"><pre class="language-jsx"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> DatePicker<span class="token punctuation">,</span> List<span class="token punctuation">,</span> Modal <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;antd-mobile&#39;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><div class="language-jsx ext-jsx line-numbers-mode"><pre class="language-jsx"><code><span class="token comment">// \u9000\u51FA\u767B\u5F55</span>
<span class="token keyword">const</span> <span class="token function-variable function">onLogout</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token comment">// \u5F39\u51FA\u786E\u8BA4\u5BF9\u8BDD\u6846</span>
  Modal<span class="token punctuation">.</span><span class="token function">alert</span><span class="token punctuation">(</span><span class="token string">&#39;\u6E29\u99A8\u63D0\u793A&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;\u4F60\u786E\u5B9A\u9000\u51FA\u5417\uFF1F&#39;</span><span class="token punctuation">,</span> <span class="token punctuation">[</span>
    <span class="token comment">// \u53D6\u6D88\u6309\u94AE</span>
    <span class="token punctuation">{</span> <span class="token literal-property property">text</span><span class="token operator">:</span> <span class="token string">&#39;\u53D6\u6D88&#39;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token comment">// \u786E\u8BA4\u6309\u94AE</span>
    <span class="token punctuation">{</span>
      <span class="token literal-property property">text</span><span class="token operator">:</span> <span class="token string">&#39;\u786E\u8BA4&#39;</span><span class="token punctuation">,</span>
      <span class="token literal-property property">style</span><span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token literal-property property">color</span><span class="token operator">:</span> <span class="token string">&#39;#FC6627&#39;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token function-variable function">onPress</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;\u6267\u884C\u767B\u51FA....&#39;</span><span class="token punctuation">)</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">]</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ol start="2"><li>\u5728 <code>store/reducers/login.js</code>\u4E2D\uFF0C\u6DFB\u52A0\u5220\u9664 Token \u4FE1\u606F\u7684 Reducer \u903B\u8F91\uFF1A</li></ol><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">switch</span> <span class="token punctuation">(</span>type<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">case</span> <span class="token string">&#39;login/clear&#39;</span><span class="token operator">:</span> <span class="token keyword">return</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
  
  <span class="token comment">// ...</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ol start="3"><li>\u5728 <code>store/action/login.js</code>\u4E2D\uFF0C\u6DFB\u52A0\u7528\u4E8E\u4ECE Redux \u548C LocalStorage \u4E2D\u5220\u9664 Token \u4FE1\u606F\u7684 Action Creator\uFF1A</li></ol><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token doc-comment comment">/**
 * \u5C06 Token \u4FE1\u606F\u4ECE Redux \u4E2D\u5220\u9664
 */</span>
<span class="token keyword">export</span> <span class="token keyword">const</span> <span class="token function-variable function">clearToken</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">type</span><span class="token operator">:</span> <span class="token string">&#39;login/clear&#39;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token doc-comment comment">/**
 * \u767B\u51FA
 * <span class="token keyword">@returns</span> thunk
 */</span>
<span class="token keyword">export</span> <span class="token keyword">const</span> <span class="token function-variable function">logout</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token parameter">dispatch</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token comment">// \u5220\u9664 LocalStorage \u4E2D\u7684 Token \u4FE1\u606F</span>
    <span class="token function">removeTokenInfo</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    
    <span class="token comment">// \u5220\u9664 Redux \u4E2D\u7684 Token \u4FE1\u606F</span>
    <span class="token function">dispatch</span><span class="token punctuation">(</span><span class="token function">clearToken</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ol start="4"><li>\u5728\u201C\u9000\u51FA\u767B\u5F55\u201D\u7684\u5F39\u6846\u56DE\u8C03 <code>onPress</code> \u4E2D\u8C03\u7528\u4EE5\u4E0A Action \u5220\u9664 Token \u540E\uFF0C\u8DF3\u8F6C\u5230\u767B\u5F55\u9875\uFF1A</li></ol><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> logout <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;@/store/actions/login&#39;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token function-variable function">onPress</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token comment">// \u5220\u9664 Token \u4FE1\u606F</span>
  <span class="token function">dispatch</span><span class="token punctuation">(</span><span class="token function">logout</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
  <span class="token comment">// \u8DF3\u8F6C\u5230\u767B\u5F55\u9875</span>
  history<span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token string">&#39;/login&#39;</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><hr><h1 id="\u6743\u9650\u63A7\u5236" tabindex="-1"><a class="header-anchor" href="#\u6743\u9650\u63A7\u5236" aria-hidden="true">#</a> \u6743\u9650\u63A7\u5236</h1><h2 id="\u5904\u7406\u767B\u5F55\u540E\u7684\u9875\u9762\u8DF3\u8F6C" tabindex="-1"><a class="header-anchor" href="#\u5904\u7406\u767B\u5F55\u540E\u7684\u9875\u9762\u8DF3\u8F6C" aria-hidden="true">#</a> \u5904\u7406\u767B\u5F55\u540E\u7684\u9875\u9762\u8DF3\u8F6C</h2><blockquote><p>\u76EE\u6807\uFF1A\u5F53\u8FDB\u884C\u767B\u5F55\u83B7\u53D6\u5230 Token \u540E\uFF0C\u5E94\u5F53\u5C06\u9875\u9762\u8DF3\u5230\u5408\u9002\u7684\u9875\u9762\u53BB</p></blockquote><p><strong>\u64CD\u4F5C\u6B65\u9AA4</strong></p><ol><li>\u5728\u767B\u5F55\u9875\u9762\u8868\u5355\u5BF9\u8C61\u7684 <code>onSubmit</code> \u65B9\u6CD5\u4E2D\uFF0C\u5728\u83B7\u53D6 Token \u540E\u6DFB\u52A0\u9875\u9762\u8DF3\u8F6C\u903B\u8F91</li></ol><div class="language-jsx ext-jsx line-numbers-mode"><pre class="language-jsx"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> useHistory<span class="token punctuation">,</span> useLocation <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;react-router-dom&#39;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><div class="language-jsx ext-jsx line-numbers-mode"><pre class="language-jsx"><code><span class="token comment">// \u83B7\u53D6\u8DEF\u7531\u4FE1\u606F location \u5BF9\u8C61</span>
<span class="token keyword">const</span> location <span class="token operator">=</span> <span class="token function">useLocation</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

<span class="token comment">// Formik \u8868\u5355\u5BF9\u8C61</span>
<span class="token keyword">const</span> form <span class="token operator">=</span> <span class="token function">useFormik</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token comment">// ...</span>

  <span class="token comment">// \u63D0\u4EA4</span>
  <span class="token function-variable function">onSubmit</span><span class="token operator">:</span> <span class="token keyword">async</span> <span class="token parameter">values</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">await</span> <span class="token function">dispatch</span><span class="token punctuation">(</span><span class="token function">login</span><span class="token punctuation">(</span>values<span class="token punctuation">)</span><span class="token punctuation">)</span>

    <span class="token comment">// \u767B\u5F55\u540E\u8FDB\u884C\u9875\u9762\u8DF3\u8F6C</span>
    <span class="token keyword">const</span> <span class="token punctuation">{</span> state <span class="token punctuation">}</span> <span class="token operator">=</span> location
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>state<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token comment">// \u5982\u679C\u4E0D\u662F\u4ECE\u5176\u4ED6\u9875\u9762\u8DF3\u5230\u7684\u767B\u5F55\u9875\uFF0C\u5219\u767B\u5F55\u540E\u9ED8\u8BA4\u8FDB\u5165\u9996\u9875</span>
      history<span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token string">&#39;/home/index&#39;</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
      <span class="token comment">// \u5426\u5219\u8DF3\u56DE\u5230\u4E4B\u524D\u8BBF\u95EE\u7684\u9875\u9762</span>
      history<span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span>state<span class="token punctuation">.</span>from<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="token-\u7684\u5931\u6548\u5904\u7406\u548C\u65E0\u611F\u5237\u65B0" tabindex="-1"><a class="header-anchor" href="#token-\u7684\u5931\u6548\u5904\u7406\u548C\u65E0\u611F\u5237\u65B0" aria-hidden="true">#</a> Token \u7684\u5931\u6548\u5904\u7406\u548C\u65E0\u611F\u5237\u65B0</h2><blockquote><p>\u76EE\u6807\uFF1A\u4E86\u89E3\u5F53\u8BF7\u6C42\u540E\u7AEF\u63A5\u53E3\u65F6\uFF0C\u5982\u679C\u53D1\u751F\u4E86\u7531\u4E8E Token \u5931\u6548\u800C\u4EA7\u751F\u7684\u8BF7\u6C42\u5931\u8D25\uFF0C\u5E94\u8BE5\u5982\u4F55\u8FDB\u884C\u5904\u7406</p></blockquote><p>\u5E38\u7528\u7684\u5904\u7406\u6D41\u7A0B\uFF1A</p><p><img src="https://wuxiaohui-1254415986.cos.ap-nanjing.myqcloud.com/2022/01/30/image20210903111508949.png" alt="image-20210903111508949" loading="lazy"></p><p>\u601D\u60F3\u603B\u7ED3\uFF1A</p><ul><li>\u65E0 Token\uFF0C\u76F4\u63A5\u8DF3\u5230\u767B\u5F55\u9875</li><li>\u6709 Token\uFF0C\u5219\u7528 Refresh Token \u6362\u65B0 Token\uFF1A\u6362\u6210\u529F\u5219\u7528\u65B0 Token \u91CD\u53D1\u539F\u5148\u7684\u8BF7\u6C42\uFF0C\u6CA1\u6362\u6210\u529F\u5219\u8DF3\u5230\u767B\u5F55\u9875</li></ul><blockquote><p>\u8FD9\u4E00\u7CFB\u5217\u64CD\u4F5C\uFF0C\u53EF\u4EE5\u5728\u5C01\u88C5\u7684 http \u8BF7\u6C42\u6A21\u5757\u4E2D\u5B8C\u6210\u3002</p></blockquote><p><strong>\u64CD\u4F5C\u6B65\u9AA4</strong></p><ol><li>\u5728 <code>utils/http.js</code>\u6A21\u5757\u91CC\uFF0C\u54CD\u5E94\u62E6\u622A\u5668\u7684\u9519\u8BEF\u56DE\u8C03\u51FD\u6570\u4E2D\uFF0C\u5904\u7406 401 \u9519\u8BEF\uFF1A</li></ol><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> getTokenInfo<span class="token punctuation">,</span> removeTokenInfo<span class="token punctuation">,</span> setTokenInfo <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;./storage&#39;</span>
<span class="token keyword">import</span> store <span class="token keyword">from</span> <span class="token string">&#39;@/store&#39;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>http<span class="token punctuation">.</span>interceptors<span class="token punctuation">.</span>response<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span><span class="token parameter">response</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> response
<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token keyword">async</span> <span class="token parameter">error</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token comment">// \u83B7\u53D6\u9519\u8BEF\u4FE1\u606F\u4E2D\u5305\u542B\u7684\u8BF7\u6C42\u914D\u7F6E\u4FE1\u606F\u548C\u54CD\u5E94\u6570\u636E</span>
  <span class="token keyword">const</span> <span class="token punctuation">{</span> config<span class="token punctuation">,</span> response <span class="token punctuation">}</span> <span class="token operator">=</span> error

  <span class="token comment">// \u5224\u65AD HTTP \u72B6\u6001\u7801\u662F\u5426\u4E3A 401\uFF0C\u5373 token \u4E0D\u6B63\u786E\u9020\u6210\u7684\u6388\u6743\u95EE\u9898</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>response<span class="token punctuation">.</span>status <span class="token operator">===</span> <span class="token number">401</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
     
    <span class="token comment">// ... \u3010\u6211\u4EEC\u7684\u4E3B\u8981\u5904\u7406\u903B\u8F91\u5728\u8FD9\u91CC\u3011 ...</span>
  <span class="token punctuation">}</span>

  <span class="token comment">// \u5176\u4ED6\u9519\u8BEF</span>
  <span class="token keyword">return</span> Promise<span class="token punctuation">.</span><span class="token function">reject</span><span class="token punctuation">(</span>error<span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ol start="2"><li>\u5728\u4E0A\u9762 401 \u5224\u65AD\u8BED\u53E5\u4E0B\uFF1A\u5148\u83B7\u53D6\u5F53\u524D Token \u4FE1\u606F\uFF0C\u5E76\u5224\u65AD token \u548C refresh_token \u662F\u5426\u5B58\u5728\uFF0C\u5982\u679C\u4E0D\u5B58\u5728\u5219\u8DF3\u5230\u767B\u5F55\u9875</li></ol><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">const</span> <span class="token punctuation">{</span> token<span class="token punctuation">,</span> refresh_token <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">getTokenInfo</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

<span class="token comment">// \u5982\u679C\u662F\u6CA1\u6709 Token \u6216 Refresh Token</span>
<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>token <span class="token operator">||</span> <span class="token operator">!</span>refresh_token<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// \u8DF3\u8F6C\u5230\u767B\u5F55\u9875\uFF0C\u5E76\u643A\u5E26\u4E0A\u5F53\u524D\u6B63\u5728\u8BBF\u95EE\u7684\u9875\u9762\uFF0C\u7B49\u767B\u5F55\u6210\u529F\u540E\u518D\u8DF3\u56DE\u8BE5\u9875\u9762</span>
  history<span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token string">&#39;/login&#39;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">from</span><span class="token operator">:</span> history<span class="token punctuation">.</span>location<span class="token punctuation">.</span>pathname <span class="token operator">||</span> <span class="token string">&#39;/home&#39;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token keyword">return</span> Promise<span class="token punctuation">.</span><span class="token function">reject</span><span class="token punctuation">(</span>error<span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ol start="3"><li>\u63A5\u4E0A\u9762\u7684\u903B\u8F91\uFF1A\u5982\u679C\u4E0D\u662F\u6CA1\u6709 Token \u4FE1\u606F\u7684\u60C5\u51B5\uFF0C\u5219\u5C31\u662F Token \u5931\u6548\u4E86\uFF0C\u6240\u4EE5\u6211\u4EEC\u63A5\u4E0B\u6765\u7528 refresh token \u53BB\u5C1D\u8BD5\u6362\u53D6\u65B0 token\uFF0C\u83B7\u53D6\u5230\u540E\u5B58\u50A8\uFF0C\u5E76\u91CD\u53D1\u8BF7\u6C42</li></ol><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">try</span> <span class="token punctuation">{</span>
  <span class="token comment">// \u901A\u8FC7 Refresh Token \u6362\u53D6\u65B0 Token</span>
  <span class="token comment">// \u7279\u522B\u8BF4\u660E\uFF1A\u8FD9\u4E2A\u5730\u65B9\u53D1\u8BF7\u6C42\u7684\u65F6\u5019\uFF0C\u4E0D\u80FD\u4F7F\u7528\u65B0\u5EFA\u7684 http \u5B9E\u4F8B\u53BB\u8BF7\u6C42\uFF0C\u8981\u7528\u9ED8\u8BA4\u5B9E\u4F8B axios \u53BB\u8BF7\u6C42\uFF01</span>
  <span class="token comment">// \u5426\u5219\u4F1A\u56E0 http \u5B9E\u4F8B\u7684\u8BF7\u6C42\u62E6\u622A\u5668\u7684\u4F5C\u7528\uFF0C\u643A\u5E26\u4E0A\u8001\u7684 token \u800C\u4E0D\u662F refresh_token</span>
  <span class="token keyword">const</span> res <span class="token operator">=</span> <span class="token keyword">await</span> axios<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">\`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">\${</span>config<span class="token punctuation">.</span>baseURL<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">/authorizations</span><span class="token template-punctuation string">\`</span></span><span class="token punctuation">,</span> <span class="token keyword">null</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">headers</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token string-property property">&#39;Content-Type&#39;</span><span class="token operator">:</span> <span class="token string">&#39;application/x-www-form-urlencoded&#39;</span><span class="token punctuation">,</span>
      <span class="token string-property property">&#39;Authorization&#39;</span><span class="token operator">:</span> <span class="token template-string"><span class="token template-punctuation string">\`</span><span class="token string">Bearer </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">\${</span>refresh_token<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">\`</span></span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>

  <span class="token comment">// \u5C06\u65B0\u6362\u5230\u7684 Token \u4FE1\u606F\u4FDD\u5B58\u5230 Redux \u548C LocalStorage \u4E2D</span>
  <span class="token keyword">const</span> tokenInfo <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">token</span><span class="token operator">:</span> res<span class="token punctuation">.</span>data<span class="token punctuation">.</span>data<span class="token punctuation">.</span>token<span class="token punctuation">,</span>
    refresh_token<span class="token punctuation">,</span>
  <span class="token punctuation">}</span>
  <span class="token function">setTokenInfo</span><span class="token punctuation">(</span>tokenInfo<span class="token punctuation">)</span>
  store<span class="token punctuation">.</span><span class="token function">dispatch</span><span class="token punctuation">(</span><span class="token function">saveToken</span><span class="token punctuation">(</span>tokenInfo<span class="token punctuation">)</span><span class="token punctuation">)</span>

  <span class="token comment">// \u91CD\u65B0\u53D1\u9001\u4E4B\u524D\u56E0 Token \u65E0\u6548\u800C\u5931\u8D25\u7684\u8BF7\u6C42</span>
  <span class="token keyword">return</span> <span class="token function">http</span><span class="token punctuation">(</span>config<span class="token punctuation">)</span>
<span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span>error<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  
  <span class="token comment">// ... \u8FD9\u91CC\u540E\u7EED\u7F16\u5199 Token \u6362\u53D6\u5931\u8D25\u7684\u903B\u8F91 ...</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ol start="4"><li>\u5982\u679C\u6362\u53D6\u65B0 token \u5931\u8D25\uFF0C\u5219\u6E05\u7A7A\u672C\u5730\u5DF2\u6709\u7684 Token \u4FE1\u606F\u540E\uFF0C\u8DF3\u8F6C\u5230\u767B\u5F55\u9875</li></ol><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">try</span> <span class="token punctuation">{</span>
  <span class="token comment">// ...</span>
<span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span>error<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// \u6E05\u9664 Redux \u548C LocalStorage \u4E2D Token \u4FE1\u606F</span>
  <span class="token function">removeTokenInfo</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  store<span class="token punctuation">.</span><span class="token function">dispatch</span><span class="token punctuation">(</span><span class="token function">clearToken</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>

  <span class="token comment">// \u8DF3\u8F6C\u5230\u767B\u5F55\u9875\uFF0C\u5E76\u643A\u5E26\u4E0A\u5F53\u524D\u6B63\u5728\u8BBF\u95EE\u7684\u9875\u9762\uFF0C\u7B49\u767B\u5F55\u6210\u529F\u540E\u518D\u8DF3\u56DE\u8BE5\u9875\u9762</span>
  history<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token string">&#39;/login&#39;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">from</span><span class="token operator">:</span> history<span class="token punctuation">.</span>location<span class="token punctuation">.</span>pathname <span class="token operator">||</span> <span class="token string">&#39;/home&#39;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>

  <span class="token keyword">return</span> Promise<span class="token punctuation">.</span><span class="token function">reject</span><span class="token punctuation">(</span>error<span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u6548\u679C\u6D4B\u8BD5\uFF1A</p><p>\u6309\u4E0B\u56FE\u4FEE\u6539 LocalStorage \u4E2D\u7684 token\uFF0C\u4FEE\u6539\u540E\u5237\u65B0\u9875\u9762\uFF0C\u6210\u529F\u6267\u884C\u7684\u8BDD\uFF0C\u53EF\u4EE5\u8BE5token\u88AB\u66FF\u6362\u6210\u4E86\u65B0\u7684 token</p><img src="https://wuxiaohui-1254415986.cos.ap-nanjing.myqcloud.com/2022/01/30/image20210903153923341.png" alt="image-20210903153923341" style="zoom:50%;"><hr><h2 id="\u5C01\u88C5\u9274\u6743\u8DEF\u7531\u7EC4\u4EF6" tabindex="-1"><a class="header-anchor" href="#\u5C01\u88C5\u9274\u6743\u8DEF\u7531\u7EC4\u4EF6" aria-hidden="true">#</a> \u5C01\u88C5\u9274\u6743\u8DEF\u7531\u7EC4\u4EF6</h2><blockquote><p>\u76EE\u6807\uFF1A\u57FA\u4E8E Route \u7EC4\u4EF6\uFF0C\u5C01\u88C5\u4E00\u4E2A\u5224\u65AD\u5B58\u5728 token \u624D\u80FD\u6B63\u5E38\u6E32\u67D3\u6307\u5B9A component \u7684\u8DEF\u7531\u7EC4\u4EF6</p></blockquote><p>\u672C\u9879\u76EE\u4E2D\u6709\u4E9B\u9875\u9762\u9700\u8981\u767B\u5F55\u540E\u624D\u53EF\u8BBF\u95EE\uFF0C\u5982\uFF1A\u4E2A\u4EBA\u4E2D\u5FC3\u7684\u6240\u6709\u9875\u9762</p><p>\u56E0\u6B64\u6211\u4EEC\u9700\u8981\u4E3A Route \u7EC4\u4EF6\u6DFB\u52A0\u989D\u5916\u7684\u903B\u8F91\uFF0C\u4F7F\u5F97\u5728\u8DEF\u7531\u5339\u914D\u540E\u8FDB\u884C\u754C\u9762\u5C55\u793A\u65F6\uFF0C\u53EF\u4EE5\u6309\u6761\u4EF6\u51B3\u5B9A\u5982\u4F55\u6E32\u67D3\u3002</p><p>\u5B9E\u73B0\u601D\u8DEF\uFF1A</p><ul><li>\u4F7F\u7528 Router \u7EC4\u4EF6\u7684 <code>render-props</code> \u673A\u5236</li></ul><p><strong>\u64CD\u4F5C\u6B65\u9AA4</strong></p><ol><li>\u521B\u5EFA<code>components/AuthRoute/index.js</code>\uFF0C\u7F16\u5199\u7EC4\u4EF6\u4EE3\u7801\uFF1A</li></ol><div class="language-jsx ext-jsx line-numbers-mode"><pre class="language-jsx"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> hasToken <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;@/utils/storage&#39;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> Redirect<span class="token punctuation">,</span> Route <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;react-router-dom&#39;</span>

<span class="token comment">/**
 * \u9274\u6743\u8DEF\u7531\u7EC4\u4EF6
 * @param {*} component \u672C\u6765 Route \u7EC4\u4EF6\u4E0A\u7684 component \u5C5E\u6027
 * @param {Array} rest \u5176\u4ED6\u5C5E\u6027
 */</span>
<span class="token keyword">const</span> <span class="token function-variable function">AuthRoute</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> <span class="token literal-property property">component</span><span class="token operator">:</span> Component<span class="token punctuation">,</span> <span class="token operator">...</span>rest <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token punctuation">(</span>
    <span class="token operator">&lt;</span>Route <span class="token punctuation">{</span><span class="token operator">...</span>rest<span class="token punctuation">}</span> render<span class="token operator">=</span><span class="token punctuation">{</span><span class="token parameter">props</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      <span class="token comment">// \u5982\u679C\u6709 token\uFF0C\u5219\u5C55\u793A\u4F20\u5165\u7684\u7EC4\u4EF6</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>hasToken<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Component</span></span> <span class="token punctuation">/&gt;</span></span>
      <span class="token punctuation">}</span>

      <span class="token comment">// \u5426\u5219\u8C03\u7528 Redirect \u7EC4\u4EF6\u8DF3\u8F6C\u5230\u767B\u5F55\u9875</span>
      <span class="token keyword">return</span> <span class="token punctuation">(</span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Redirect</span></span> <span class="token attr-name">to</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token punctuation">{</span>
          <span class="token literal-property property">pathname</span><span class="token operator">:</span> <span class="token string">&#39;/login&#39;</span><span class="token punctuation">,</span>
          <span class="token literal-property property">state</span><span class="token operator">:</span> <span class="token punctuation">{</span>
            <span class="token literal-property property">from</span><span class="token operator">:</span> props<span class="token punctuation">.</span>location<span class="token punctuation">.</span>pathname
          <span class="token punctuation">}</span>
        <span class="token punctuation">}</span><span class="token punctuation">}</span></span> <span class="token punctuation">/&gt;</span></span>
      <span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">&gt;</span>
  <span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> AuthRoute
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ol start="2"><li>\u5728 <code>App.js</code> \u548C <code>layouts/TabBarLayout.js</code> \u4E2D\uFF0C\u4F7F\u7528 <code>AuthRoute</code> \u7EC4\u4EF6\u66FF\u4EE3\u67D0\u4E9B <code>Route</code>\uFF1A</li></ol><div class="language-jsx ext-jsx line-numbers-mode"><pre class="language-jsx"><code><span class="token keyword">import</span> AuthRoute <span class="token keyword">from</span> <span class="token string">&#39;@/components/AuthRoute&#39;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><div class="language-jsx ext-jsx line-numbers-mode"><pre class="language-jsx"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">AuthRoute</span></span> <span class="token attr-name">path</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>/profile/edit<span class="token punctuation">&quot;</span></span> <span class="token attr-name">component</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>ProfileEdit<span class="token punctuation">}</span></span> <span class="token punctuation">/&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">AuthRoute</span></span> <span class="token attr-name">path</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>/profile/feedback<span class="token punctuation">&quot;</span></span> <span class="token attr-name">component</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>ProfileFeedback<span class="token punctuation">}</span></span> <span class="token punctuation">/&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">AuthRoute</span></span> <span class="token attr-name">path</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>/profile/chat<span class="token punctuation">&quot;</span></span> <span class="token attr-name">component</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>Chat<span class="token punctuation">}</span></span> <span class="token punctuation">/&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-jsx ext-jsx line-numbers-mode"><pre class="language-jsx"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">AuthRoute</span></span> <span class="token attr-name">path</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>/home/profile<span class="token punctuation">&quot;</span></span> <span class="token attr-name">exact</span> <span class="token attr-name">component</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>Profile<span class="token punctuation">}</span></span> <span class="token punctuation">/&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>\u66FF\u4EE3\u540E\uFF0C\u5982\u679C\u672A\u7ECF\u767B\u5F55\u8BBF\u95EE\u4E2A\u4EBA\u4E2D\u5FC3\u7684\u9875\u9762\uFF0C\u5C31\u4F1A\u76F4\u63A5\u8DF3\u5230\u767B\u5F55\u9875\u3002</p><hr><h2 id="_404-\u9519\u8BEF\u9875\u9762" tabindex="-1"><a class="header-anchor" href="#_404-\u9519\u8BEF\u9875\u9762" aria-hidden="true">#</a> 404 \u9519\u8BEF\u9875\u9762</h2><blockquote><p>\u76EE\u6807\uFF1A\u5B9E\u73B0\u5F53\u7528\u6237\u8BBF\u95EE\u4E0D\u5B58\u5728\u7684\u9875\u9762\u8DEF\u5F84\u65F6\uFF0C\u6240\u8981\u663E\u793A\u7684\u9519\u8BEF\u63D0\u793A\u9875</p></blockquote><img src="https://wuxiaohui-1254415986.cos.ap-nanjing.myqcloud.com/2022/01/30/image20210903172102078.png" alt="image-20210903172102078" style="zoom:40%;"><p>\u5B9E\u73B0\u601D\u8DEF\uFF1A</p><ul><li>\u4F7F\u7528\u4E00\u4E2A\u6570\u5B57\u7C7B\u578B\u7684\u72B6\u6001\uFF0C\u8BB0\u5F55\u5F53\u524D\u5012\u8BA1\u65F6\u7684\u79D2\u6570</li><li>\u4F7F\u7528\u4E00\u4E2A ref \u72B6\u6001\uFF0C\u5F15\u7528\u5EF6\u65F6\u5668</li><li>\u5728\u5EF6\u65F6\u5668\u4E2D\u5224\u65AD\u662F\u5426\u5012\u8BA1\u65F6\u7ED3\u675F\uFF0C\u672A\u7ED3\u675F\u5219\u79D2\u6570\u51CF\u4E00\uFF1B\u7ED3\u675F\u5219\u6E05\u7406\u5EF6\u65F6\u5668\u5E76\u8DF3\u8F6C\u9875\u9762</li></ul><p><strong>\u64CD\u4F5C\u6B65\u9AA4</strong></p><ol><li>\u5728<code>pages/NotFound/index.js</code>\u4E2D\uFF0C\u7F16\u5199\u4EE5\u4E0B\u4EE3\u7801\uFF1A</li></ol><div class="language-jsx ext-jsx line-numbers-mode"><pre class="language-jsx"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> useEffect<span class="token punctuation">,</span> useRef<span class="token punctuation">,</span> useState <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;react&#39;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> Link<span class="token punctuation">,</span> useHistory <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;react-router-dom&#39;</span>

<span class="token keyword">const</span> <span class="token function-variable function">NotFound</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> history <span class="token operator">=</span> <span class="token function">useHistory</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  
  <span class="token comment">// \u5012\u8BA1\u65F6\u79D2\u6570</span>
  <span class="token keyword">const</span> <span class="token punctuation">[</span>second<span class="token punctuation">,</span> setSecond<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useState</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span>
  
  <span class="token comment">// \u5EF6\u65F6\u5668\u5F15\u7528</span>
  <span class="token keyword">const</span> timerRef <span class="token operator">=</span> <span class="token function">useRef</span><span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span>
  
  <span class="token comment">// \u5728\u5012\u8BA1\u65F6\u79D2\u6570\u53D8\u5316\u65F6\u6267\u884C</span>
  <span class="token function">useEffect</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token comment">// 1. \u521B\u5EFA\u5EF6\u65F6\u5668</span>
    timerRef<span class="token punctuation">.</span>current <span class="token operator">=</span> <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>second <span class="token operator">&lt;=</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// \u5012\u8BA1\u65F6\u7ED3\u675F\uFF1A\u5173\u95ED\u5B9A\u65F6\u5668\uFF0C\u5E76\u8DF3\u8F6C\u5230\u9996\u9875</span>
        <span class="token function">clearTimeout</span><span class="token punctuation">(</span>timerRef<span class="token punctuation">.</span>current<span class="token punctuation">)</span>
        history<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token string">&#39;/home/index&#39;</span><span class="token punctuation">)</span>
      <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
        <span class="token comment">// \u5230\u8BA1\u65F6\u672A\u7ED3\u675F\uFF1A\u79D2\u6570\u51CF\u4E00</span>
        <span class="token function">setSecond</span><span class="token punctuation">(</span>second <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">1000</span><span class="token punctuation">)</span>

    <span class="token comment">// 2. \u7EC4\u4EF6\u9500\u6BC1\u65F6\u8981\u6E05\u7406\u5EF6\u65F6\u5668</span>
    <span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      <span class="token function">clearTimeout</span><span class="token punctuation">(</span>timerRef<span class="token punctuation">.</span>current<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">[</span>second<span class="token punctuation">,</span> history<span class="token punctuation">]</span><span class="token punctuation">)</span>

  <span class="token keyword">return</span> <span class="token punctuation">(</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h1</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">\u5BF9\u4E0D\u8D77\uFF0C\u4F60\u8BBF\u95EE\u7684\u5185\u5BB9\u4E0D\u5B58\u5728...</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h1</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
        </span><span class="token punctuation">{</span>second<span class="token punctuation">}</span><span class="token plain-text"> \u79D2\u540E\uFF0C\u8FD4\u56DE</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Link</span></span> <span class="token attr-name">to</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>/home/index<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">\u9996\u9875</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">Link</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
  <span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> NotFound
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>`,76);function Qn(Xn,Jn){const a=o("ExternalLinkIcon");return c(),l("div",null,[u,n("p",null,[n("a",r,[k,t(a)])]),d,n("blockquote",null,[n("p",null,[n("a",v,[m,t(a)])]),g]),b,n("ul",null,[n("li",null,[x,n("a",h,[y,t(a)]),f]),q]),n("ul",null,[n("li",null,[w,n("a",j,[_,t(a)]),N])]),R,n("blockquote",null,[n("p",null,[n("a",I,[C,t(a)])])]),T,n("ul",null,[n("li",null,[n("a",L,[S,t(a)])]),n("li",null,[n("a",A,[P,t(a)])]),z]),E,n("blockquote",null,[n("p",null,[B,n("a",D,[$,t(a)]),H])]),n("p",null,[O,n("a",F,[U,t(a)]),V,n("a",M,[Y,t(a)]),K]),W,n("ul",null,[n("li",null,[Q,X,J,n("a",G,[Z,t(a)]),nn])]),sn,n("ol",null,[n("li",null,[an,n("a",tn,[pn,t(a)]),en,on])]),cn,n("ol",ln,[n("li",null,[un,n("a",rn,[kn,t(a)]),dn])]),vn,n("blockquote",null,[n("p",null,[mn,n("a",gn,[bn,t(a)]),xn])]),hn,n("ul",null,[n("li",null,[yn,n("a",fn,[qn,t(a)]),wn,jn,_n])]),Nn,n("blockquote",null,[Rn,n("ol",null,[n("li",null,[n("p",null,[In,n("a",Cn,[Tn,t(a)]),Ln])]),Sn])]),An,n("ul",null,[n("li",null,[Pn,n("a",zn,[En,t(a)]),Bn,Dn,$n]),Hn]),On,n("ol",null,[n("li",null,[Fn,n("a",Un,[Vn,t(a)]),Mn,Yn,Kn])]),Wn])}var ns=e(i,[["render",Qn],["__file","\u6781\u5BA2\u56ED\u79FB\u52A8\u7AEF1.html.vue"]]);export{ns as default};
