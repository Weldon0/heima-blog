import{_ as e}from"./plugin-vue_export-helper.21dcd24c.js";import{r as o,o as c,c as l,a as n,b as t,F as i,e as p,d as s}from"./app.2ab07d3f.js";const u={},r=p('<h1 id="\u{1F4DA}\u6781\u5BA2\u56EDm-2\u3010\u767B\u5F55\u6A21\u5757\u3011" tabindex="-1"><a class="header-anchor" href="#\u{1F4DA}\u6781\u5BA2\u56EDm-2\u3010\u767B\u5F55\u6A21\u5757\u3011" aria-hidden="true">#</a> \u{1F4DA}\u6781\u5BA2\u56EDM-2\u3010\u767B\u5F55\u6A21\u5757\u3011</h1><h2 id="_01-\u57FA\u672C\u7ED3\u6784" tabindex="-1"><a class="header-anchor" href="#_01-\u57FA\u672C\u7ED3\u6784" aria-hidden="true">#</a> 01-\u57FA\u672C\u7ED3\u6784</h2><p><strong>\u76EE\u6807</strong>\uFF1A\u80FD\u591F\u624B\u52A8\u642D\u5EFA\u767B\u5F55\u754C\u9762\u7684\u57FA\u672C\u7ED3\u6784</p><p><strong>\u5206\u6790\u8BF4\u660E</strong>\uFF1Aantd-mobile \u4E2D\u7684 Form \u7EC4\u4EF6\u7528\u6CD5\u4E0E antd \u4E00\u6837</p><p><strong>\u6B65\u9AA4</strong>\uFF1A</p>',5),k=s("\u5B8C\u6210\u5BFC\u822A\u680F\u548C\u767B\u5F55\u6807\u9898 - "),d={href:"https://mobile.ant.design/zh/components/nav-bar",target:"_blank",rel:"noopener noreferrer"},v=s("NavBar \u7EC4\u4EF6"),m=s("\u6DFB\u52A0\u767B\u5F55\u8868\u5355 - "),g={href:"https://mobile.ant.design/zh/components/form",target:"_blank",rel:"noopener noreferrer"},b=s("Form \u7EC4\u4EF6"),h=p(`<p><strong>\u6838\u5FC3\u4EE3\u7801</strong>\uFF1A</p><p>login/index.tsx \u4E2D\uFF1A</p><div class="language-tsx ext-tsx line-numbers-mode"><pre class="language-tsx"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> Button<span class="token punctuation">,</span> NavBar<span class="token punctuation">,</span> Form<span class="token punctuation">,</span> Input <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;antd-mobile&#39;</span><span class="token punctuation">;</span>


<span class="token keyword">import</span> styles <span class="token keyword">from</span> <span class="token string">&#39;./index.module.scss&#39;</span><span class="token punctuation">;</span>


<span class="token keyword">const</span> <span class="token function-variable function">Login</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token punctuation">(</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">className</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>styles<span class="token punctuation">.</span>root<span class="token punctuation">}</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">NavBar</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">NavBar</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">


      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">className</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>login-form<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
        </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h2</span> <span class="token attr-name">className</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>title<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">\u8D26\u53F7\u767B\u5F55</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h2</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">


        </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Form</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
          </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Form.Item</span></span> <span class="token attr-name">className</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>login-item<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
            </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Input</span></span> <span class="token attr-name">placeholder</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>\u8BF7\u8F93\u5165\u624B\u673A\u53F7<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span><span class="token plain-text">
          </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">Form.Item</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">


          </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Form.Item</span></span>
            <span class="token attr-name">className</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>login-item<span class="token punctuation">&quot;</span></span>
            <span class="token attr-name">extra</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span> <span class="token attr-name">className</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>code-extra<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">\u53D1\u9001\u9A8C\u8BC1\u7801</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">}</span></span>
          <span class="token punctuation">&gt;</span></span><span class="token plain-text">
            </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Input</span></span> <span class="token attr-name">placeholder</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>\u8BF7\u8F93\u5165\u9A8C\u8BC1\u7801<span class="token punctuation">&quot;</span></span> <span class="token attr-name">autoComplete</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>off<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span><span class="token plain-text">
          </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">Form.Item</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">


          </span><span class="token punctuation">{</span><span class="token comment">/* noStyle \u8868\u793A\u4E0D\u63D0\u4F9B Form.Item \u81EA\u5E26\u7684\u6837\u5F0F */</span><span class="token punctuation">}</span><span class="token plain-text">
          </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Form.Item</span></span> <span class="token attr-name">noStyle</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
            </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Button</span></span>
              <span class="token attr-name">block</span>
              <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>submit<span class="token punctuation">&quot;</span></span>
              <span class="token attr-name">color</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>primary<span class="token punctuation">&quot;</span></span>
              <span class="token attr-name">className</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>login-submit<span class="token punctuation">&quot;</span></span>
            <span class="token punctuation">&gt;</span></span><span class="token plain-text">
              \u767B \u5F55
            </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">Button</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
          </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">Form.Item</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
        </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">Form</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>


<span class="token keyword">export</span> <span class="token keyword">default</span> Login<span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>login/index.module.scss \u4E2D\uFF1A</p><div class="language-scss ext-scss line-numbers-mode"><pre class="language-scss"><code><span class="token comment">// \u5BFC\u5165 1px \u8FB9\u6846\u7684\u6837\u5F0F\u6587\u4EF6</span>
<span class="token keyword">@import</span> <span class="token string">&#39;@scss/hairline.scss&#39;</span><span class="token punctuation">;</span>


<span class="token selector">.root </span><span class="token punctuation">{</span>
  <span class="token selector">:global </span><span class="token punctuation">{</span>
    <span class="token selector">.login-form </span><span class="token punctuation">{</span>
      <span class="token property">padding</span><span class="token punctuation">:</span> 0 33px<span class="token punctuation">;</span>


      <span class="token selector">.title </span><span class="token punctuation">{</span>
        <span class="token property">margin</span><span class="token punctuation">:</span> 54px 0 13px 0<span class="token punctuation">;</span>
      <span class="token punctuation">}</span>


      <span class="token selector">.adm-list </span><span class="token punctuation">{</span>
        <span class="token property">--align-items</span><span class="token punctuation">:</span> end <span class="token important">!important</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
      <span class="token selector">.adm-list-default </span><span class="token punctuation">{</span>
        <span class="token property">border</span><span class="token punctuation">:</span> none<span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
      <span class="token selector">.adm-list-item </span><span class="token punctuation">{</span>
        <span class="token property">padding</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
      <span class="token selector">.login-item </span><span class="token punctuation">{</span>
        <span class="token comment">// \u6CE8\u610F\uFF1A\u56E0\u4E3A 1px \u8FB9\u6846\u6837\u5F0F\u4F7F\u7528\u4E86\u51B3\u5B9A\u5B9A\u4F4D\uFF0C\u6240\u4EE5\uFF0C\u6B64\u5904\u9700\u8981\u5C06\u8BBE\u7F6E\u4E3A\u76F8\u5BF9\u5B9A\u4F4D</span>
        <span class="token property">position</span><span class="token punctuation">:</span> relative<span class="token punctuation">;</span>
        <span class="token comment">// \u4E3A\u8BE5\u5143\u7D20\u8BBE\u7F6E 1px \u8FB9\u6846</span>
        <span class="token keyword">@include</span> <span class="token function">hairline</span><span class="token punctuation">(</span>bottom<span class="token punctuation">,</span> #f0f0f0<span class="token punctuation">)</span><span class="token punctuation">;</span>


        <span class="token selector">&gt; .adm-list-item-content </span><span class="token punctuation">{</span>
          <span class="token property">height</span><span class="token punctuation">:</span> 70px<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span>
      <span class="token selector">.adm-list-item-content </span><span class="token punctuation">{</span>
        <span class="token property">position</span><span class="token punctuation">:</span> relative<span class="token punctuation">;</span>
        <span class="token property">border-bottom</span><span class="token punctuation">:</span> none<span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
      <span class="token comment">// \u9A8C\u8BC1\u7801</span>
      <span class="token selector">.adm-input-wrapper </span><span class="token punctuation">{</span>
        <span class="token property">--placeholder-color</span><span class="token punctuation">:</span> #a5a6ab<span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
      <span class="token selector">.code-extra </span><span class="token punctuation">{</span>
        <span class="token property">color</span><span class="token punctuation">:</span> #595769<span class="token punctuation">;</span>
        <span class="token property">font-size</span><span class="token punctuation">:</span> 14px<span class="token punctuation">;</span>


        <span class="token selector"><span class="token parent important">&amp;</span>-disabled </span><span class="token punctuation">{</span>
          <span class="token property">color</span><span class="token punctuation">:</span> #a5a6ab<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span>
      <span class="token selector">.adm-list-item-description </span><span class="token punctuation">{</span>
        <span class="token property">position</span><span class="token punctuation">:</span> absolute<span class="token punctuation">;</span>
        <span class="token property">bottom</span><span class="token punctuation">:</span> -25px<span class="token punctuation">;</span>
      <span class="token punctuation">}</span>


      <span class="token selector">.login-submit </span><span class="token punctuation">{</span>
        <span class="token property">height</span><span class="token punctuation">:</span> 50px<span class="token punctuation">;</span>
        <span class="token property">margin-top</span><span class="token punctuation">:</span> 38px<span class="token punctuation">;</span>
        <span class="token property">border</span><span class="token punctuation">:</span> none<span class="token punctuation">;</span>
        <span class="token property">font-size</span><span class="token punctuation">:</span> 16px<span class="token punctuation">;</span>
        <span class="token property">background</span><span class="token punctuation">:</span> <span class="token function">linear-gradient</span><span class="token punctuation">(</span>315deg<span class="token punctuation">,</span> #fe4f4f<span class="token punctuation">,</span> #fc6627<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="custom-container warning"><p class="custom-container-title">\u5982\u679C\u9047\u5230scss\u62A5\u9519</p><blockquote><p>\u5F53\u524D\u76EE\u5F55\u5B9A\u4E49login.d.ts\u6DFB\u52A0scss\u58F0\u660E</p></blockquote><div class="language-typescript ext-ts line-numbers-mode"><pre class="language-typescript"><code><span class="token keyword">declare</span> <span class="token keyword">module</span> <span class="token string">&#39;*.scss&#39;</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> content<span class="token operator">:</span> <span class="token builtin">any</span><span class="token punctuation">;</span>
  <span class="token keyword">export</span> <span class="token keyword">default</span> content<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></div><h2 id="_02-\u8868\u5355\u6821\u9A8C" tabindex="-1"><a class="header-anchor" href="#_02-\u8868\u5355\u6821\u9A8C" aria-hidden="true">#</a> 02-\u8868\u5355\u6821\u9A8C</h2><p><strong>\u76EE\u6807</strong>\uFF1A\u80FD\u591F\u4E3A\u767B\u5F55\u8868\u5355\u6DFB\u52A0\u6821\u9A8C</p><p><strong>\u6838\u5FC3\u4EE3\u7801</strong>\uFF1A</p><p>login/index.tsx \u4E2D\uFF1A</p><div class="language-tsx ext-tsx line-numbers-mode"><pre class="language-tsx"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Form</span></span> <span class="token attr-name">validateTrigger</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token punctuation">[</span><span class="token string">&#39;onBlur&#39;</span><span class="token punctuation">]</span><span class="token punctuation">}</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
  </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Form.Item</span></span>
    <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>mobile<span class="token punctuation">&quot;</span></span>
    <span class="token attr-name">validateTrigger</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>onBlur<span class="token punctuation">&quot;</span></span>
    <span class="token attr-name">rules</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token punctuation">[</span>
      <span class="token punctuation">{</span> required<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> message<span class="token operator">:</span> <span class="token string">&#39;\u8BF7\u8F93\u5165\u624B\u673A\u53F7&#39;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">{</span>
        pattern<span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">^1[3-9]\\d{9}$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span>
        message<span class="token operator">:</span> <span class="token string">&#39;\u624B\u673A\u53F7\u683C\u5F0F\u9519\u8BEF&#39;</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">]</span><span class="token punctuation">}</span></span>
  <span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">Form.Item</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">


  &lt;Form.Item
    name=&quot;code&quot;
    rules=</span><span class="token punctuation">{</span><span class="token punctuation">[</span><span class="token punctuation">{</span> required<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> message<span class="token operator">:</span> <span class="token string">&#39;\u8BF7\u8F93\u5165\u9A8C\u8BC1\u7801&#39;</span> <span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">}</span><span class="token plain-text">&quot;
    validateTrigger=&quot;onBlur&quot;
  &gt;</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">Form.Item</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">Form</span></span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>\u603B\u7ED3</strong>\uFF1A</p><ul><li>\u6CE8\u610F\uFF1A\u4E0D\u8981\u5FD8\u8BB0\u7ED9\u6BCF\u4E2A\u9700\u8981\u6821\u9A8C\u7684 Form.Item \u6DFB\u52A0 name \u5C5E\u6027</li></ul><div class="custom-container warning"><p class="custom-container-title">\u8868\u5355\u6821\u9A8C\u4E0D\u751F\u6548\uFF1F</p><p>\u53BB\u6389\u6837\u5F0F\u8BD5\u8BD5\uFF1F</p><img src="https://wuxiaohui-1254415986.cos.ap-nanjing.myqcloud.com/uPic/image-20220519162150181.png" alt="image-20220519162150181" style="zoom:50%;"></div><h2 id="_03-\u83B7\u53D6\u767B\u5F55\u8868\u5355\u6570\u636E" tabindex="-1"><a class="header-anchor" href="#_03-\u83B7\u53D6\u767B\u5F55\u8868\u5355\u6570\u636E" aria-hidden="true">#</a> 03-\u83B7\u53D6\u767B\u5F55\u8868\u5355\u6570\u636E</h2><p><strong>\u76EE\u6807</strong>\uFF1A\u80FD\u591F\u62FF\u5230\u624B\u673A\u53F7\u548C\u9A8C\u8BC1\u7801\u6570\u636E</p><p><strong>\u6B65\u9AA4</strong>\uFF1A</p><ol><li>\u4E3A Form \u8868\u5355\u6DFB\u52A0 <code>onFinish</code></li><li>\u521B\u5EFA onFinish \u51FD\u6570\uFF0C\u4F5C\u4E3A Form \u5C5E\u6027 <code>onFinish</code> \u7684\u503C</li><li>\u6307\u5B9A\u51FD\u6570 onFinish \u7684\u53C2\u6570\u7C7B\u578B</li><li>\u901A\u8FC7\u53C2\u6570\u83B7\u53D6\u5230\u8868\u5355\u6570\u636E</li></ol><p><strong>\u6838\u5FC3\u4EE3\u7801</strong>\uFF1A</p><p>login/index.tsx \u4E2D\uFF1A</p><div class="language-tsx ext-tsx line-numbers-mode"><pre class="language-tsx"><code><span class="token keyword">type</span> <span class="token class-name">LoginForm</span> <span class="token operator">=</span> <span class="token punctuation">{</span>
  mobile<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>
  code<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> <span class="token function-variable function">Login</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> <span class="token function-variable function">onFinish</span> <span class="token operator">=</span> <span class="token punctuation">(</span>values<span class="token operator">:</span> LoginForm<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>values<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>


  <span class="token keyword">return</span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Form</span></span> <span class="token attr-name">onFinish</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>onFinish<span class="token punctuation">}</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">Form</span></span><span class="token punctuation">&gt;</span></span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="_04-\u9ED8\u8BA4\u767B\u5F55-\u767B\u5F55\u903B\u8F91" tabindex="-1"><a class="header-anchor" href="#_04-\u9ED8\u8BA4\u767B\u5F55-\u767B\u5F55\u903B\u8F91" aria-hidden="true">#</a> 04-\u9ED8\u8BA4\u767B\u5F55-\u767B\u5F55\u903B\u8F91</h2><p><strong>\u76EE\u6807</strong>\uFF1A\u80FD\u591F\u5728 Redux \u4E2D\u5B9E\u73B0\u767B\u5F55\u903B\u8F91</p><p><strong>\u5206\u6790\u8BF4\u660E</strong>\uFF1A</p><p>\u5B9E\u9645\u9879\u76EE\u5F00\u53D1\u4E2D\uFF0C\u901A\u5E38\u90FD\u4F1A\u4E3A\u63A5\u53E3\u6570\u636E\u521B\u5EFA\u7C7B\u578B\uFF0C\u8FD9\u6837\uFF0C\u5982\u679C\u5C06\u6765\u540E\u7AEF\u4FEE\u6539\u4E86\u63A5\u53E3\u6570\u636E\uFF0C\u524D\u7AEF\u53EA\u9700\u8981\u4FEE\u6539\u63A5\u53E3\u6570\u636E\u7684\u7C7B\u578B\uFF0C</p><p>\u7136\u540E\uFF0C\u6240\u6709\u7528\u5230\u8BE5\u6570\u636E\u7684\u5730\u65B9\u90FD\u4F1A\u6709\u660E\u786E\u7684\u9519\u8BEF\u63D0\u793A\uFF0C\u6839\u636E\u9519\u8BEF\u63D0\u793A\u6765\u8FDB\u884C\u4FEE\u6539\u5373\u53EF\u3002\u6709\u5229\u4E8E\u9879\u76EE\u529F\u80FD\u7684\u4FEE\u6539\u6216\u91CD\u6784</p><p>\u63A8\u8350\u6309\u7167\u4EE5\u4E0B\u6B65\u9AA4\uFF1A</p><ol><li>\u5148\u6309\u7167\u63A5\u53E3\u7684\u8FD4\u56DE\u6570\u636E\uFF0C\u51C6\u5907 TS \u7C7B\u578B</li><li>\u7136\u540E\uFF0C\u5728\u53D1\u9001\u8BF7\u6C42\u65F6\uFF0C\u6307\u5B9A\u8BE5\u8BF7\u6C42\u7684\u8FD4\u56DE\u503C\u7C7B\u578B</li></ol><p>\u8FD9\u6837\uFF0C\u5728\u63A5\u4E0B\u6765\u7684\u64CD\u4F5C\u4E2D\uFF0C\u5982\u679C\u9700\u8981\u7528\u5230\u63A5\u53E3\u7684\u6570\u636E\uFF0C\u90FD\u4F1A\u6709\u7C7B\u578B\u63D0\u793A\u4E86\u3002</p><p>\u7531\u4E8E\u9879\u76EE\u4E2D\u7684\u8BF7\u6C42\u662F\u901A\u8FC7 axios \u5904\u7406\u7684\uFF0C\u6240\u4EE5\uFF0C\u53EA\u9700\u8981\u4E3A axios \u7684\u8BF7\u6C42\u65B9\u6CD5\u6307\u5B9A\u7C7B\u578B\u5373\u53EF\uFF1A</p><ul><li>axios \u7684\u6240\u6709\u8BF7\u6C42\u65B9\u6CD5\uFF0C\u90FD\u662F\u6CDB\u578B\u51FD\u6570\uFF0C\u901A\u8FC7\u6CDB\u578B\u51FD\u6570\u7684\u6CDB\u578B\u53C2\u6570\uFF0C\u6765\u6307\u5B9A\u63A5\u53E3\u8FD4\u56DE\u6570\u636E\u7684\u7C7B\u578B</li><li>\u4ECE\u54EA\u83B7\u53D6 \u63A5\u53E3\u8FD4\u56DE\u6570\u636E \u7684\u7C7B\u578B\uFF1F\u6587\u6863</li></ul><div class="language-typescript ext-ts line-numbers-mode"><pre class="language-typescript"><code><span class="token comment">// \u6BD4\u5982\uFF0C\u4EE5 post \u8BF7\u6C42\u4E3A\u4F8B\uFF1A</span>
<span class="token keyword">const</span> res <span class="token operator">=</span> <span class="token keyword">await</span> axios<span class="token punctuation">.</span><span class="token generic-function"><span class="token function">post</span><span class="token generic class-name"><span class="token operator">&lt;</span>ResponseDataType<span class="token operator">&gt;</span></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>


<span class="token comment">// res.data \u7684\u7C7B\u578B\u5C31\u662F\uFF1AResponseDataType</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>\u6B65\u9AA4</strong>\uFF1A</p><ol><li>\u5728 store/actions \u4E2D\u521B\u5EFA login.ts \u6587\u4EF6</li><li>\u521B\u5EFA login \u51FD\u6570\u5E76\u5BFC\u51FA</li><li>\u5728\u51FD\u6570\u4E2D\u6839\u636E\u63A5\u53E3\u53D1\u9001\u8BF7\u6C42\u5B9E\u73B0\u767B\u5F55\u529F\u80FD</li><li>\u5728 login \u7684 reducer \u4E2D\u5904\u7406 login action</li></ol><p><strong>\u6838\u5FC3\u4EE3\u7801</strong>\uFF1A</p><p>store/actions/login.ts \u4E2D\uFF1A</p><div class="language-typescript ext-ts line-numbers-mode"><pre class="language-typescript"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> RootThunkAction <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;@/types/store&#39;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> http<span class="token punctuation">,</span> setToken <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;@/utils&#39;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token keyword">type</span> <span class="token punctuation">{</span> Token <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;@/types/data&#39;</span><span class="token punctuation">;</span>


<span class="token comment">// login \u51FD\u6570\u7684\u53C2\u6570\u7C7B\u578B</span>
<span class="token keyword">type</span> <span class="token class-name">LoginParams</span> <span class="token operator">=</span> <span class="token punctuation">{</span> mobile<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span> code<span class="token operator">:</span> <span class="token builtin">string</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token comment">// login \u63A5\u53E3\u7684\u54CD\u5E94\u7C7B\u578B</span>
<span class="token keyword">type</span> <span class="token class-name">LoginResponse</span> <span class="token operator">=</span> <span class="token punctuation">{</span>
  message<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>
  data<span class="token operator">:</span> Token<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword">export</span> <span class="token keyword">const</span> login <span class="token operator">=</span> <span class="token punctuation">(</span>values<span class="token operator">:</span> LoginParams<span class="token punctuation">)</span><span class="token operator">:</span> RootThunkAction <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token keyword">async</span> <span class="token punctuation">(</span>dispatch<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token comment">// \u53D1\u9001\u8BF7\u6C42</span>
    <span class="token keyword">const</span> res <span class="token operator">=</span> <span class="token keyword">await</span> http<span class="token punctuation">.</span><span class="token generic-function"><span class="token function">post</span><span class="token generic class-name"><span class="token operator">&lt;</span>LoginResponse<span class="token operator">&gt;</span></span></span><span class="token punctuation">(</span><span class="token string">&#39;/authorizations&#39;</span><span class="token punctuation">,</span> values<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// \u62FF\u5230\u8FD4\u56DE\u6570\u636E</span>
    <span class="token keyword">const</span> tokens <span class="token operator">=</span> res<span class="token punctuation">.</span>data<span class="token punctuation">.</span>data<span class="token punctuation">;</span>
    <span class="token comment">// \u8BBE\u7F6E\u672C\u5730token</span>
    <span class="token function">setToken</span><span class="token punctuation">(</span>tokens<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// \u5206\u53D1 action \u5C06 token \u4FDD\u5B58\u5230 redux state \u4E2D</span>
    <span class="token function">dispatch</span><span class="token punctuation">(</span><span class="token punctuation">{</span> type<span class="token operator">:</span> <span class="token string">&#39;login/token&#39;</span><span class="token punctuation">,</span> payload<span class="token operator">:</span> tokens <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>store/reducers/login.ts \u4E2D\uFF1A</p><div class="language-typescript ext-ts line-numbers-mode"><pre class="language-typescript"><code><span class="token keyword">import</span> <span class="token keyword">type</span> <span class="token punctuation">{</span> Token <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;@/types/data&#39;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token keyword">type</span> <span class="token punctuation">{</span> LoginAction <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;@/types/store&#39;</span><span class="token punctuation">;</span>


<span class="token keyword">const</span> initialState<span class="token operator">:</span> Token <span class="token operator">=</span> <span class="token punctuation">{</span>
  token<span class="token operator">:</span> <span class="token string">&#39;&#39;</span><span class="token punctuation">,</span>
  refresh_token<span class="token operator">:</span> <span class="token string">&#39;&#39;</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>


<span class="token comment">// \u6307\u5B9A\u53C2\u6570\u548C\u8FD4\u56DE\u503C\u7684\u7C7B\u578B</span>
<span class="token comment">// \u8BF4\u660E\uFF1A\u6B64\u5904\u660E\u786E\u6307\u5B9A\u8FD4\u56DE\u503C\u7C7B\u578B\uFF0C\u53EF\u4EE5\u5728\u8FD4\u56DE\u503C\u4E0E\u6307\u5B9A\u7C7B\u578B\u4E0D\u4E00\u81F4\u65F6\u7ED9\u51FA\u660E\u786E\u7684\u9519\u8BEF\u63D0\u793A</span>
<span class="token keyword">const</span> login <span class="token operator">=</span> <span class="token punctuation">(</span>state <span class="token operator">=</span> initialState<span class="token punctuation">,</span> action<span class="token operator">:</span> LoginAction<span class="token punctuation">)</span><span class="token operator">:</span> Token <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">switch</span> <span class="token punctuation">(</span>action<span class="token punctuation">.</span>type<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">case</span> <span class="token string">&#39;login/token&#39;</span><span class="token operator">:</span>
      <span class="token keyword">return</span> action<span class="token punctuation">.</span>payload<span class="token punctuation">;</span>
    <span class="token keyword">default</span><span class="token operator">:</span>
      <span class="token keyword">return</span> state<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="_05-\u9ED8\u8BA4\u767B\u5F55-\u7EC4\u4EF6\u767B\u5F55\u903B\u8F91" tabindex="-1"><a class="header-anchor" href="#_05-\u9ED8\u8BA4\u767B\u5F55-\u7EC4\u4EF6\u767B\u5F55\u903B\u8F91" aria-hidden="true">#</a> 05-\u9ED8\u8BA4\u767B\u5F55-\u7EC4\u4EF6\u767B\u5F55\u903B\u8F91</h2><p><strong>\u76EE\u6807</strong>\uFF1A\u80FD\u591F\u8C03\u7528\u767B\u5F55\u903B\u8F91\u5B9E\u73B0\u767B\u5F55\u5E76\u8DF3\u8F6C\u5230\u9996\u9875</p><p><strong>\u6B65\u9AA4</strong>\uFF1A</p><ol><li>\u5728 Login \u7EC4\u4EF6\u4E2D\u5BFC\u5165\u767B\u5F55 action</li><li>\u5728\u8868\u5355\u63D0\u4EA4\u65F6\uFF0C\u5206\u53D1\u767B\u5F55 action</li><li>\u767B\u5F55\u6210\u529F\u540E\uFF0C\u5C55\u793A\u6210\u529F\u63D0\u793A</li><li>\u8DF3\u8F6C\u5230\u9996\u9875</li></ol><p><strong>\u6838\u5FC3\u4EE3\u7801</strong>\uFF1A</p><p>pages/Login/index.tsx \u4E2D\uFF1A</p><div class="language-tsx ext-tsx line-numbers-mode"><pre class="language-tsx"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> Toast <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;antd-mobile&#39;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> useHistory <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;react-router-dom&#39;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> useDispatch <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;react-redux&#39;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> login <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;@/store/actions&#39;</span><span class="token punctuation">;</span>


<span class="token keyword">const</span> <span class="token function-variable function">Login</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> dispatch <span class="token operator">=</span> <span class="token function">useDispatch</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> history <span class="token operator">=</span> <span class="token function">useHistory</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>


  <span class="token keyword">const</span> <span class="token function-variable function">onFinish</span> <span class="token operator">=</span> <span class="token keyword">async</span> <span class="token punctuation">(</span>values<span class="token operator">:</span> LoginForm<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">await</span> <span class="token function">dispatch</span><span class="token punctuation">(</span><span class="token function">login</span><span class="token punctuation">(</span>values<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>


    <span class="token comment">// \u767B\u5F55\u6210\u529F\u63D0\u793A</span>
    Toast<span class="token punctuation">.</span><span class="token function">show</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      content<span class="token operator">:</span> <span class="token string">&#39;\u767B\u5F55\u6210\u529F&#39;</span><span class="token punctuation">,</span>
      duration<span class="token operator">:</span> <span class="token number">600</span><span class="token punctuation">,</span>
      <span class="token function-variable function">afterClose</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        <span class="token comment">// \u8FD4\u56DE\u9996\u9875</span>
        history<span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token string">&#39;/home&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="_06-\u9ED8\u8BA4\u767B\u5F55-\u5F02\u5E38\u5904\u7406" tabindex="-1"><a class="header-anchor" href="#_06-\u9ED8\u8BA4\u767B\u5F55-\u5F02\u5E38\u5904\u7406" aria-hidden="true">#</a> 06-\u9ED8\u8BA4\u767B\u5F55-\u5F02\u5E38\u5904\u7406</h2><p><strong>\u76EE\u6807</strong>\uFF1A\u80FD\u591F\u5904\u7406\u767B\u5F55\u65F6\u7684\u5F02\u5E38</p><p><strong>\u5206\u6790\u8BF4\u660E</strong>\uFF1A</p><p>\u53EF\u4EE5\u901A\u8FC7 <code>try...catch</code> \u8FDB\u884C\u5F02\u5E38\u5904\u7406\uFF0C\u5176\u4E2D catch \u7684\u9519\u8BEF\u5BF9\u8C61 <code>e</code> \u7684\u7C7B\u578B\u662F\uFF1A<code>unknown</code></p><p>\u56E0\u6B64\uFF0C\u8981\u6839\u636E\u9519\u8BEF\u5BF9\u8C61 e \u8FDB\u884C\u5F02\u5E38\u5904\u7406\uFF0C\u5C31\u9700\u8981\u5148\u660E\u786E\u6307\u5B9A\u5176\u7C7B\u578B\uFF0C\u7136\u540E\uFF0C\u624D\u80FD\u5BF9\u9519\u8BEF\u5BF9\u8C61 e \u8FDB\u884C\u64CD\u4F5C</p><div class="language-typescript ext-ts line-numbers-mode"><pre class="language-typescript"><code><span class="token keyword">try</span> <span class="token punctuation">{</span>
  <span class="token comment">// ...</span>
<span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span>e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// e =&gt; unknown</span>
  <span class="token keyword">const</span> error <span class="token operator">=</span> e <span class="token keyword">as</span> \u5177\u4F53\u7684\u9519\u8BEF\u7C7B\u578B<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>\u6838\u5FC3\u4EE3\u7801</strong>\uFF1A</p><p>pages/Login/index.tsx \u4E2D\uFF1A</p><div class="language-tsx ext-tsx line-numbers-mode"><pre class="language-tsx"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> AxiosError <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;axios&#39;</span><span class="token punctuation">;</span>


<span class="token keyword">const</span> <span class="token function-variable function">onFinsih</span> <span class="token operator">=</span> <span class="token keyword">async</span> <span class="token punctuation">(</span>values<span class="token operator">:</span> LoginForm<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">try</span> <span class="token punctuation">{</span>
    <span class="token keyword">await</span> <span class="token function">dispatch</span><span class="token punctuation">(</span><span class="token function">login</span><span class="token punctuation">(</span>values<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// \u6210\u529F</span>
    Toast<span class="token punctuation">.</span><span class="token function">show</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      content<span class="token operator">:</span> <span class="token string">&#39;\u767B\u5F55\u6210\u529F&#39;</span><span class="token punctuation">,</span>
      duration<span class="token operator">:</span> <span class="token number">600</span><span class="token punctuation">,</span>
      <span class="token function-variable function">afterClose</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        history<span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token string">&#39;/home&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span>e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// \u5F02\u5E38</span>
    <span class="token comment">// \u5982\u679C\u5F02\u6B65\u64CD\u4F5C\u5931\u8D25\u4E86\uFF0C\u4F1A\u6267\u884C\u6B64\u5904\u7684\u9519\u8BEF\u5904\u7406</span>
    <span class="token comment">// \u5BF9\u4E8E\u767B\u5F55\u529F\u80FD\u6765\u8BF4\uFF0C\u51FA\u9519\u4E86\uFF0C\u901A\u5E38\u662F\u8BF7\u6C42\u51FA\u95EE\u9898\u4E86\u3002</span>
    <span class="token comment">// \u56E0\u6B64\uFF0C\u6B64\u5904\u5C06\u9519\u8BEF\u7C7B\u578B\u8F6C\u4E3A AxiosError</span>
    <span class="token keyword">const</span> error <span class="token operator">=</span> e <span class="token keyword">as</span> AxiosError<span class="token operator">&lt;</span><span class="token punctuation">{</span> message<span class="token operator">:</span> <span class="token builtin">string</span> <span class="token punctuation">}</span><span class="token operator">&gt;</span><span class="token punctuation">;</span>
    Toast<span class="token punctuation">.</span><span class="token function">show</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      content<span class="token operator">:</span> error<span class="token punctuation">.</span>response<span class="token operator">?.</span>data<span class="token operator">?.</span>message<span class="token punctuation">,</span>
      duration<span class="token operator">:</span> <span class="token number">1000</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="_07-\u9ED8\u8BA4\u767B\u5F55-redux-\u83B7\u53D6-token" tabindex="-1"><a class="header-anchor" href="#_07-\u9ED8\u8BA4\u767B\u5F55-redux-\u83B7\u53D6-token" aria-hidden="true">#</a> 07-\u9ED8\u8BA4\u767B\u5F55-redux \u83B7\u53D6 token</h2><p><strong>\u76EE\u6807</strong>\uFF1A\u80FD\u591F\u5B9E\u73B0\u5237\u65B0\u9875\u9762\u65F6\u5728 redux \u72B6\u6001\u4E2D\u62FF\u5230 token</p><p><strong>\u5206\u6790\u8BF4\u660E</strong>\uFF1A</p><p>\u95EE\u9898\uFF1A\u767B\u5F55\u6210\u529F\u540E\uFF0Credux \u72B6\u6001\u4E2D\u6709 token \u503C\u3002\u4F46\u662F\uFF0C\u5237\u65B0\u9875\u9762\u540E\uFF0Credux \u4E2D\u7684 token \u503C\u6CA1\u6709\u4E86</p><p>\u539F\u56E0\u8BF4\u660E\uFF1A\u53EA\u5728\u767B\u5F55\u65F6\uFF0C\u5C06 token \u5B58\u50A8\u5230 redux \u72B6\u6001\u4E2D\uFF0C\u6CA1\u6709\u5904\u7406\u5237\u65B0\u7684\u60C5\u51B5</p><p>\u4E3A\u4E86\u5B9E\u73B0\u8BE5\u529F\u80FD\uFF0C\u9700\u8981\u7528\u5230 createStore \u7684\u7B2C\u4E8C\u4E2A\u53C2\u6570\uFF1A</p><div class="language-typescript ext-ts line-numbers-mode"><pre class="language-typescript"><code><span class="token comment">// \u7B2C\u4E00\u4E2A\u53C2\u6570\uFF1Areducer</span>
<span class="token comment">// \u7B2C\u4E8C\u4E2A\u53C2\u6570\uFF1A\u521D\u59CB\u72B6\u6001</span>
<span class="token comment">// \u7B2C\u4E09\u4E2A\u53C2\u6570\uFF1A\u589E\u5F3A\u5668\uFF0C\u6BD4\u5982\uFF0C\u4E2D\u95F4\u4EF6</span>
<span class="token function">createStore</span><span class="token punctuation">(</span>reducer<span class="token punctuation">,</span> <span class="token punctuation">[</span>preloadedState<span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token punctuation">[</span>enhancer<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>\u6B65\u9AA4</strong>\uFF1A</p><ol><li>\u5728 store/index.ts \u4E2D\u5BFC\u5165 getToken \u5DE5\u5177\u51FD\u6570</li><li>\u521B\u5EFA initialState \u5BF9\u8C61\uFF0C\u5C06\u672C\u5730\u5B58\u50A8\u4E2D\u4FDD\u5B58\u7684 token \u653E\u5230\u8BE5\u5BF9\u8C61\u4E2D</li><li>\u5C06 initialState \u5BF9\u8C61\u8BBE\u7F6E\u4E3A createStore \u7684\u7B2C\u4E8C\u4E2A\u53C2\u6570</li></ol><p><strong>\u6838\u5FC3\u4EE3\u7801</strong>\uFF1A</p><p>store/index.ts \u4E2D\uFF1A</p><div class="language-typescript ext-ts line-numbers-mode"><pre class="language-typescript"><code><span class="token keyword">const</span> initialState <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">// \u6CE8\u610F\uFF1A\u6B64\u5904\u7684 login \u5C5E\u6027\u662F\u6839\u636E\u5408\u5E76reducer\u65F6\uFF0Clogin \u7684\u540D\u79F0\u800C\u6765\u7684</span>
  login<span class="token operator">:</span> <span class="token function">getToken</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>


<span class="token keyword">const</span> store <span class="token operator">=</span> <span class="token function">createStore</span><span class="token punctuation">(</span>rootReducer<span class="token punctuation">,</span> initialState<span class="token punctuation">,</span> middlewares<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>utils/token.ts \u4E2D\uFF1A</p><div class="language-typescript ext-ts line-numbers-mode"><pre class="language-typescript"><code><span class="token keyword">export</span> <span class="token keyword">const</span> <span class="token function-variable function">getToken</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span>
  <span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">parse</span><span class="token punctuation">(</span>
    localStorage<span class="token punctuation">.</span><span class="token function">getItem</span><span class="token punctuation">(</span><span class="token constant">GEEK_TOKEN_KEY</span><span class="token punctuation">)</span> <span class="token operator">??</span>
      <span class="token string">&#39;{ &quot;token&quot;: &quot;&quot;, &quot;refresh_token&quot;: &quot;&quot; }&#39;</span><span class="token punctuation">,</span>
  <span class="token punctuation">)</span> <span class="token keyword">as</span> Token<span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="_08-\u767B\u5F55\u6309\u94AE\u542F\u7528\u6216\u7981\u7528" tabindex="-1"><a class="header-anchor" href="#_08-\u767B\u5F55\u6309\u94AE\u542F\u7528\u6216\u7981\u7528" aria-hidden="true">#</a> 08-\u767B\u5F55\u6309\u94AE\u542F\u7528\u6216\u7981\u7528</h2><p><strong>\u76EE\u6807</strong>\uFF1A\u80FD\u591F\u6839\u636E\u8868\u5355\u9A8C\u8BC1\u662F\u5426\u6210\u529F\u6765\u542F\u7528\u6216\u7981\u7528\u767B\u5F55\u6309\u94AE</p><p><strong>\u5206\u6790\u8BF4\u660E</strong>\uFF1A</p><p>\u8868\u5355\u6821\u9A8C\u6210\u529F\u65F6\uFF0C\u767B\u5F55\u6309\u94AE\u4E3A\u542F\u7528</p><p>\u8868\u5355\u6821\u9A8C\u5931\u8D25\u6216\u8005\u7528\u6237\u8FD8\u6CA1\u6709\u8F93\u5165\u65F6\uFF0C\u767B\u5F55\u6309\u94AE\u4E3A\u7981\u7528</p><p>\u56E0\u6B64\uFF0C\u9700\u8981\u52A8\u6001\u63A7\u5236\u767B\u5F55\u6309\u94AE\u7684\u72B6\u6001\uFF0C\u5373\uFF1A\u5728\u7528\u6237\u8F93\u5165\u7684\u65F6\u5019\u5C31\u8FDB\u884C\u6821\u9A8C</p><p>\u4E3A\u4E86\u8FBE\u5230\u8BE5\u76EE\u7684\uFF0C\u9700\u8981\u7528\u5230 <code>shouldUpdate</code> \u5C5E\u6027\uFF0C\u6765\u5728\u8868\u5355\u4EFB\u610F\u53D8\u5316\u90FD\u5BF9\u67D0\u4E00\u4E2A\u533A\u57DF\u8FDB\u884C\u6E32\u67D3\uFF0C\u8FBE\u5230\u5B9E\u65F6\u6821\u9A8C\u7684\u76EE\u7684</p>`,76),f={href:"https://ant-design.gitee.io/components/form-cn/#shouldUpdate",target:"_blank",rel:"noopener noreferrer"},y=s("\u53C2\u8003 antd \u6587\u6863\uFF1AForm shouleUpdate"),x={href:"https://ant-design.gitee.io/components/form-cn/#components-form-demo-inline-login",target:"_blank",rel:"noopener noreferrer"},w=s("\u53C2\u8003 antd \u793A\u4F8B\uFF1A\u5185\u8054\u767B\u5F55\u680F"),q=p(`<div class="language-tsx ext-tsx line-numbers-mode"><pre class="language-tsx"><code><span class="token comment">// \u53EF\u4EE5\u901A\u8FC7 \u51FD\u6570\u5F62\u5F0F\u7684children \u6765\u81EA\u5B9A\u4E49\u6E32\u67D3\u5185\u5BB9</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Form.Item</span></span> <span class="token attr-name">noStyle</span> <span class="token attr-name">shouldUpdate</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
  </span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">(</span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Button</span></span> <span class="token attr-name">block</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>submit<span class="token punctuation">&quot;</span></span> <span class="token attr-name">color</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>primary<span class="token punctuation">&quot;</span></span> <span class="token attr-name">className</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>login-submit<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
        \u63D0\u4EA4
      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">Button</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token plain-text">
</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">Form.Item</span></span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>\u6B65\u9AA4</strong>\uFF1A</p><ol><li>\u521B\u5EFA\u767B\u5F55\u8868\u5355\u7684\u5B9E\u4F8B form\uFF0C\u6765\u624B\u52A8\u83B7\u53D6 Form \u8868\u5355\u7684\u6821\u9A8C\u72B6\u6001\u7B49</li><li>\u5C06 form \u8BBE\u7F6E\u4E3A Form \u7EC4\u4EF6\u7684 form \u5C5E\u6027</li><li>\u4F7F\u7528\u4E00\u4E2A\u51FD\u6570\u7684\u5F62\u5F0F\u6765\u6E32\u67D3\u767B\u5F55\u6309\u94AE</li><li>\u5728\u8BE5\u51FD\u6570\u4E2D\u5904\u7406\u662F\u5426\u7981\u7528\u7684\u903B\u8F91</li><li>\u5C06\u662F\u5426\u7981\u7528\u7684\u503C\u8BBE\u7F6E\u4E3A Button \u6309\u94AE\u7684 disabled \u5C5E\u6027</li></ol><p><strong>\u6838\u5FC3\u4EE3\u7801</strong>\uFF1A</p><div class="language-tsx ext-tsx line-numbers-mode"><pre class="language-tsx"><code><span class="token keyword">const</span> <span class="token function-variable function">Login</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token comment">// \u521B\u5EFA form \u5B9E\u4F8B</span>
  <span class="token keyword">const</span> <span class="token punctuation">[</span>form<span class="token punctuation">]</span> <span class="token operator">=</span> Form<span class="token punctuation">.</span><span class="token function">useForm</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>


  <span class="token keyword">return</span> <span class="token punctuation">(</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Form</span></span> <span class="token attr-name">form</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>form<span class="token punctuation">}</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Form.Item</span></span> <span class="token attr-name">noStyle</span> <span class="token attr-name">shouldUpdate</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
        </span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
          <span class="token comment">// isFieldsTouched(true) \u68C0\u67E5\u662F\u5426\u6240\u6709\u5B57\u6BB5\u90FD\u88AB\u64CD\u4F5C\u8FC7</span>
          <span class="token keyword">const</span> untouched <span class="token operator">=</span> <span class="token operator">!</span>form<span class="token punctuation">.</span><span class="token function">isFieldsTouched</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
          <span class="token comment">// getFieldsError() \u83B7\u53D6\u6240\u6709\u5B57\u6BB5\u540D\u5BF9\u5E94\u7684\u9519\u8BEF\u4FE1\u606F</span>
          <span class="token keyword">const</span> hasError <span class="token operator">=</span>
            form<span class="token punctuation">.</span><span class="token function">getFieldsError</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">{</span> errors <span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> errors<span class="token punctuation">.</span>length<span class="token punctuation">)</span>
              <span class="token punctuation">.</span>length <span class="token operator">!==</span> <span class="token number">0</span><span class="token punctuation">;</span>
          
          <span class="token comment">// \u5176\u4ED6\u5199\u6CD5\uFF1A</span>
          <span class="token comment">// const hasError = form</span>
                <span class="token comment">// .getFieldsError()</span>
                <span class="token comment">// .some((item) =&gt; item.errors.length);</span>
          <span class="token keyword">const</span> disabled <span class="token operator">=</span> untouched <span class="token operator">||</span> hasError<span class="token punctuation">;</span>


          <span class="token keyword">return</span> <span class="token punctuation">(</span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Button</span></span>
              <span class="token attr-name">block</span>
              <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>submit<span class="token punctuation">&quot;</span></span>
              <span class="token attr-name">color</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>primary<span class="token punctuation">&quot;</span></span>
              <span class="token attr-name">className</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>login-submit<span class="token punctuation">&quot;</span></span>
              <span class="token attr-name">disabled</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>disabled<span class="token punctuation">}</span></span>
            <span class="token punctuation">&gt;</span></span><span class="token plain-text">
              \u63D0\u4EA4
            </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">Button</span></span><span class="token punctuation">&gt;</span></span>
          <span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token plain-text">
      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">Form.Item</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">Form</span></span><span class="token punctuation">&gt;</span></span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>


<span class="token comment">// \u4E0A\u8BFE\u5206\u6790\u7684\u4EE3\u7801\uFF1A</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Form.Item</span></span> <span class="token attr-name">noStyle</span> <span class="token attr-name">shouldUpdate</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
  </span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token comment">// isFieldsTouched(true) \u7528\u6765\u5224\u65AD\u767B\u5F55\u8868\u5355\u4E2D\u7684\u6240\u6709\u8868\u5355\u9879\u662F\u5426\u88AB\u64CD\u4F5C\u8FC7</span>
    <span class="token comment">//  \u5982\u679C\u90FD\u64CD\u4F5C\u8FC7\uFF0C\u7ED3\u679C\u4E3A\uFF1Atrue\uFF1B \u5426\u5219\uFF0C\u4E3A false</span>
    <span class="token comment">//  \u5982\u679C\u53EA\u770B\u8BE5\u5224\u65AD\u9879\uFF0C\u5982\u679C\u4E3A true \u8868\u793A\u64CD\u4F5C\u8FC7\uFF0C\u6B64\u65F6\uFF0C\u624D\u53EF\u80FD\u662F\u4E0D\u7981\u7528</span>
    <span class="token comment">//                 \u5982\u679C\u4E3A false \u8868\u793A\u6CA1\u6709\u64CD\u4F5C\u8FC7\uFF08\u6CA1\u6709\u8F93\u5165\u8FC7\u5185\u5BB9\uFF09\uFF0C\u5C31\u5E94\u8BE5\u662F\u7981\u7528</span>
    <span class="token comment">// console.log(&#39;\u767B\u5F55\u6309\u94AE\u91CD\u65B0\u6E32\u67D3\u4E86&#39;, form.isFieldsTouched(true))</span>
    <span class="token comment">// console.log(form.getFieldsError())</span>


    <span class="token comment">// \u83B7\u53D6\u6821\u9A8C\u5931\u8D25\u7684\u8868\u5355\u9879</span>
    <span class="token comment">// const errors = form.getFieldsError().filter(item =&gt; item.errors.length &gt; 0)</span>


    <span class="token comment">// \u5982\u679C\u9700\u8981\u83B7\u53D6 \u8868\u5355\u6821\u9A8C \u662F\u5426\u6210\u529F\uFF0C\u53EA\u9700\u8981\u83B7\u53D6\u4E0A\u8FF0 errors \u6570\u7EC4\u7684\u957F\u5EA6</span>
    <span class="token comment">//  \u5982\u679C\u957F\u5EA6\u5927\u4E8E 0 \u8BF4\u660E\u6709\u9519\u8BEF\uFF0C\u8868\u793A\uFF1A\u8868\u5355\u6821\u9A8C\u5931\u8D25\uFF1B\u5426\u5219\uFF0C\u8868\u5355\u6821\u9A8C\u6210\u529F</span>
    <span class="token comment">// console.log(</span>
    <span class="token comment">//   form.getFieldsError().filter(item =&gt; item.errors.length &gt; 0)</span>
    <span class="token comment">// )</span>


    <span class="token comment">// \u5F97\u5230\u7981\u7528\u72B6\u6001</span>
    <span class="token keyword">const</span> disabled <span class="token operator">=</span>
      form<span class="token punctuation">.</span><span class="token function">getFieldsError</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span><span class="token punctuation">(</span>item<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> item<span class="token punctuation">.</span>errors<span class="token punctuation">.</span>length <span class="token operator">&gt;</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">.</span>length <span class="token operator">&gt;</span>
        <span class="token number">0</span> <span class="token operator">||</span> <span class="token operator">!</span>form<span class="token punctuation">.</span><span class="token function">isFieldsTouched</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>


    <span class="token keyword">return</span> <span class="token punctuation">(</span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Button</span></span>
        <span class="token attr-name">disabled</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>disabled<span class="token punctuation">}</span></span>
        <span class="token attr-name">block</span>
        <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>submit<span class="token punctuation">&quot;</span></span>
        <span class="token attr-name">color</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>primary<span class="token punctuation">&quot;</span></span>
        <span class="token attr-name">className</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>login-submit<span class="token punctuation">&quot;</span></span>
      <span class="token punctuation">&gt;</span></span><span class="token plain-text">
        \u767B \u5F55
      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">Button</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token plain-text">
</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">Form.Item</span></span><span class="token punctuation">&gt;</span></span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="_09-\u52A8\u6001\u83B7\u53D6\u9A8C\u8BC1\u7801-\u62FF\u5230\u624B\u673A\u53F7\u7801" tabindex="-1"><a class="header-anchor" href="#_09-\u52A8\u6001\u83B7\u53D6\u9A8C\u8BC1\u7801-\u62FF\u5230\u624B\u673A\u53F7\u7801" aria-hidden="true">#</a> 09-\u52A8\u6001\u83B7\u53D6\u9A8C\u8BC1\u7801-\u62FF\u5230\u624B\u673A\u53F7\u7801</h2><p><strong>\u76EE\u6807</strong>\uFF1A\u80FD\u591F\u5B9E\u73B0\u70B9\u51FB\u53D1\u9001\u9A8C\u8BC1\u7801\u65F6\u83B7\u53D6\u5230\u624B\u673A\u53F7\u7801</p><p><strong>\u6B65\u9AA4</strong>\uFF1A</p><ol><li>\u7ED9\u53D1\u9001\u9A8C\u8BC1\u7801\u7ED1\u5B9A\u70B9\u51FB\u4E8B\u4EF6</li><li>\u5728\u70B9\u51FB\u4E8B\u4EF6\u4E2D\u83B7\u53D6\u5230\u6587\u672C\u6846\u7684\u503C</li><li>\u5224\u65AD\u6587\u672C\u6846\u7684\u503C\u662F\u5426\u4E3A\u7A7A</li><li>\u5982\u679C\u4E3A\u7A7A\u6216\u624B\u673A\u53F7\u683C\u5F0F\u9519\u8BEF\u65F6\uFF0C\u8BA9\u6587\u672C\u6846\u81EA\u52A8\u83B7\u5F97\u7126\u70B9</li></ol><p><strong>\u6838\u5FC3\u4EE3\u7801</strong>\uFF1A</p><p>pages/Login/index.tsx \u4E2D\uFF1A</p><div class="language-tsx ext-tsx line-numbers-mode"><pre class="language-tsx"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> useRef <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;react&#39;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> InputRef <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;antd-mobile/es/components/input&#39;</span>


<span class="token keyword">const</span> <span class="token function-variable function">Login</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> mobileRef <span class="token operator">=</span> <span class="token generic-function"><span class="token function">useRef</span><span class="token generic class-name"><span class="token operator">&lt;</span>InputRef<span class="token operator">&gt;</span></span></span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">)</span>


  <span class="token keyword">const</span> <span class="token function-variable function">onGetCode</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token comment">// \u62FF\u5230\u624B\u673A\u53F7</span>
    <span class="token keyword">const</span> mobile <span class="token operator">=</span> <span class="token punctuation">(</span>form<span class="token punctuation">.</span><span class="token function">getFieldValue</span><span class="token punctuation">(</span><span class="token string">&#39;mobile&#39;</span><span class="token punctuation">)</span> <span class="token operator">??</span> <span class="token string">&#39;&#39;</span><span class="token punctuation">)</span> <span class="token keyword">as</span> <span class="token builtin">string</span>
    <span class="token comment">// \u5224\u65AD\u624B\u673A\u53F7\u6821\u9A8C\u662F\u5426\u6210\u529F</span>
    <span class="token keyword">const</span> hasError <span class="token operator">=</span> form<span class="token punctuation">.</span><span class="token function">getFieldError</span><span class="token punctuation">(</span><span class="token string">&#39;mobile&#39;</span><span class="token punctuation">)</span><span class="token punctuation">.</span>length <span class="token operator">&gt;</span> <span class="token number">0</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>mobile<span class="token punctuation">.</span><span class="token function">trim</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">===</span> <span class="token string">&#39;&#39;</span> <span class="token operator">||</span> hasError<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span> mobileRef<span class="token punctuation">.</span>current<span class="token operator">?.</span><span class="token function">focus</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>


  <span class="token keyword">return</span> <span class="token punctuation">(</span>
    <span class="token comment">// ...</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Input</span></span> <span class="token attr-name">placeholder</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>\u8BF7\u8F93\u5165\u624B\u673A\u53F7<span class="token punctuation">&quot;</span></span> <span class="token attr-name">maxLength</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token number">11</span><span class="token punctuation">}</span></span> <span class="token attr-name">ref</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>mobileRef<span class="token punctuation">}</span></span> <span class="token punctuation">/&gt;</span></span>
    <span class="token comment">// ...</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Form.Item</span></span>
      <span class="token attr-name">className</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>login-item<span class="token punctuation">&quot;</span></span>
      <span class="token attr-name">extra</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span> <span class="token attr-name">className</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>code-extra<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">\u53D1\u9001\u9A8C\u8BC1\u7801</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">}</span></span>
    <span class="token punctuation">&gt;</span></span><span class="token plain-text">
      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Input</span></span> <span class="token attr-name">placeholder</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>\u8BF7\u8F93\u5165\u9A8C\u8BC1\u7801<span class="token punctuation">&quot;</span></span> <span class="token attr-name">autoComplete</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>off<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span><span class="token plain-text">
    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">Form.Item</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token comment">// ...</span>
  <span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="_10-\u52A8\u6001\u83B7\u53D6\u9A8C\u8BC1\u7801-\u53D1\u9001\u8BF7\u6C42" tabindex="-1"><a class="header-anchor" href="#_10-\u52A8\u6001\u83B7\u53D6\u9A8C\u8BC1\u7801-\u53D1\u9001\u8BF7\u6C42" aria-hidden="true">#</a> 10-\u52A8\u6001\u83B7\u53D6\u9A8C\u8BC1\u7801-\u53D1\u9001\u8BF7\u6C42</h2><p><strong>\u76EE\u6807</strong>\uFF1A\u80FD\u591F\u4F7F\u7528 redux \u53D1\u9001\u8BF7\u6C42\u83B7\u53D6\u9A8C\u8BC1\u7801</p><p><strong>\u6B65\u9AA4</strong>\uFF1A</p><ol><li>\u5728 Login \u7EC4\u4EF6\u4E2D\u5BFC\u5165\u83B7\u53D6\u9A8C\u8BC1\u7801\u7684 action</li><li>\u5728\u83B7\u53D6\u9A8C\u8BC1\u7801\u4E8B\u4EF6\u4E2D\u5206\u53D1\u83B7\u53D6\u9A8C\u8BC1\u7801\u7684 action</li><li>\u5728 login action \u4E2D\u521B\u5EFA\u83B7\u53D6\u9A8C\u8BC1\u7801\u7684 action \u5E76\u5BFC\u51FA</li><li>\u53D1\u9001\u8BF7\u6C42\u83B7\u53D6\u9A8C\u8BC1\u7801</li></ol><p><strong>\u6838\u5FC3\u4EE3\u7801</strong>\uFF1A</p><p>pages/Login/index.tsx \u4E2D\uFF1A</p><div class="language-tsx ext-tsx line-numbers-mode"><pre class="language-tsx"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> getCode<span class="token punctuation">,</span> login <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;@/store/actions&#39;</span><span class="token punctuation">;</span>


<span class="token keyword">const</span> <span class="token function-variable function">onGetCode</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token comment">// ...</span>


  <span class="token function">dispatch</span><span class="token punctuation">(</span><span class="token function">getCode</span><span class="token punctuation">(</span>mobile<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>actions/login.ts \u4E2D\uFF1A</p><div class="language-typescript ext-ts line-numbers-mode"><pre class="language-typescript"><code><span class="token comment">// \u83B7\u53D6\u9A8C\u8BC1\u7801</span>
<span class="token keyword">export</span> <span class="token keyword">const</span> <span class="token function-variable function">getCode</span> <span class="token operator">=</span> <span class="token punctuation">(</span>mobile<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">await</span> http<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">\`</span><span class="token string">/sms/codes/</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">\${</span>mobile<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">\`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>


    <span class="token comment">// \u6CE8\u610F\uFF1A\u9A8C\u8BC1\u7801\u662F\u53D1\u9001\u5230\u624B\u673A\u4E0A\u7684\uFF0C\u56E0\u6B64\uFF0C\u4E0D\u9700\u8981\u66F4\u65B0Redux\u72B6\u6001</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="\u603B\u7ED3-form-\u63D0\u4F9B\u7684\u793A\u4F8B\u65B9\u6CD5" tabindex="-1"><a class="header-anchor" href="#\u603B\u7ED3-form-\u63D0\u4F9B\u7684\u793A\u4F8B\u65B9\u6CD5" aria-hidden="true">#</a> \u603B\u7ED3-Form \u63D0\u4F9B\u7684\u793A\u4F8B\u65B9\u6CD5</h2>`,22),_=s("Form \u4E2D\u63D0\u4F9B\u7684\u5B9E\u4F8B\u65B9\u6CD5\uFF1A"),F={href:"https://ant-design.gitee.io/components/form-cn/#API",target:"_blank",rel:"noopener noreferrer"},T=s("\u53C2\u8003 antd \u7684 Form \u7EC4\u4EF6 API"),I=p(`<ol><li>\u83B7\u53D6\u8868\u5355\u4E2D\u6240\u6709\u8868\u5355\u9879\u7684\u503C\uFF1A<code>form.getFieldsValue()</code></li><li>\u83B7\u53D6\u8868\u5355\u4E2D\u67D0\u4E2A\u8868\u5355\u9879\u7684\u503C\uFF1A<code>form.getFiledValue(name)</code></li><li>\u83B7\u53D6\u8868\u5355\u4E2D\u6240\u6709\u8868\u5355\u9879\u7684\u9519\u8BEF\uFF1A<code>form.getFieldsError()</code></li><li>\u83B7\u53D6\u8868\u5355\u4E2D\u67D0\u4E2A\u8868\u5355\u9879\u7684\u9519\u8BEF\uFF1A<code>form.getFieldError(name)</code></li><li>\u624B\u52A8\u5BF9\u8868\u5355\u8FDB\u884C\u6821\u9A8C\u5E76\u5728\u6821\u9A8C\u6210\u529F\u65F6\uFF0C\u83B7\u53D6\u6240\u6709\u8868\u5355\u9879\u7684\u503C\uFF1A<code>const values = await form.validateFields()</code></li><li>\u5224\u65AD\u6240\u6709\u8868\u5355\u9879\u662F\u5426\u88AB\u64CD\u4F5C\u8FC7\uFF08\u8F93\u5165\u8FC7\u5185\u5BB9\uFF09\uFF1A<code>form.isFieldsTouched(true)</code></li></ol><div class="language-tsx ext-tsx line-numbers-mode"><pre class="language-tsx"><code><span class="token keyword">const</span> <span class="token punctuation">[</span> form <span class="token punctuation">]</span> <span class="token operator">=</span> Form<span class="token punctuation">.</span><span class="token function">useForm</span><span class="token punctuation">(</span><span class="token punctuation">)</span>


<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Form</span></span> <span class="token attr-name">form</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>form<span class="token punctuation">}</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
</span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="_11-\u9A8C\u8BC1\u7801\u5012\u8BA1\u65F6-\u5F00\u542F\u5012\u8BA1\u65F6" tabindex="-1"><a class="header-anchor" href="#_11-\u9A8C\u8BC1\u7801\u5012\u8BA1\u65F6-\u5F00\u542F\u5012\u8BA1\u65F6" aria-hidden="true">#</a> 11-\u9A8C\u8BC1\u7801\u5012\u8BA1\u65F6-\u5F00\u542F\u5012\u8BA1\u65F6</h2><p><strong>\u76EE\u6807</strong>\uFF1A\u80FD\u591F\u5728\u70B9\u51FB\u83B7\u53D6\u9A8C\u8BC1\u7801\u65F6\u663E\u793A\u5012\u8BA1\u65F6</p><p><strong>\u6B65\u9AA4</strong>\uFF1A</p><ol><li>\u521B\u5EFA\u72B6\u6001 timeLeft \u5012\u8BA1\u65F6\u6570\u636E</li><li>\u5728\u70B9\u51FB\u83B7\u53D6\u9A8C\u8BC1\u7801\u7684\u4E8B\u4EF6\u5904\u7406\u7A0B\u5E8F\u4E2D\uFF0C\u66F4\u65B0\u5012\u8BA1\u65F6\u65F6\u95F4\u5E76\u5F00\u542F\u5B9A\u65F6\u5668</li><li>\u5728\u5B9A\u65F6\u5668\u4E2D\uFF0C\u66F4\u65B0\u72B6\u6001\uFF08\u9700\u8981\u4F7F\u7528\u56DE\u8C03\u51FD\u6570\u5F62\u5F0F\u7684 setTimeLeft\uFF09</li><li>\u5728\u5F00\u542F\u5B9A\u65F6\u5668\u65F6\uFF0C\u5C55\u793A\u5012\u8BA1\u65F6\u65F6\u95F4</li></ol><p><strong>\u6838\u5FC3\u4EE3\u7801</strong>\uFF1A</p><p>pages/Login/index.tsx \u4E2D\uFF1A</p><div class="language-tsx ext-tsx line-numbers-mode"><pre class="language-tsx"><code>  <span class="token keyword">const</span> <span class="token punctuation">[</span>count<span class="token punctuation">,</span> setCount<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token generic-function"><span class="token function">useState</span><span class="token generic class-name"><span class="token operator">&lt;</span><span class="token builtin">number</span><span class="token operator">&gt;</span></span></span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> <span class="token punctuation">[</span>form<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useForm</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> dispatch <span class="token operator">=</span> <span class="token generic-function"><span class="token function">useDispatch</span><span class="token generic class-name"><span class="token operator">&lt;</span>AppDispatch<span class="token operator">&gt;</span></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> history <span class="token operator">=</span> <span class="token function">useHistory</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token comment">// ....</span>
  <span class="token function">useEffect</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> newTimer <span class="token operator">=</span> <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>count <span class="token operator">&gt;</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token function">setCount</span><span class="token punctuation">(</span><span class="token punctuation">(</span>v<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> v <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token function">clearTimeout</span><span class="token punctuation">(</span>newTimer<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">[</span>count<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token keyword">const</span> <span class="token function-variable function">sendCode</span> <span class="token operator">=</span> <span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> mobile <span class="token operator">=</span> form<span class="token punctuation">.</span><span class="token function">getFieldValue</span><span class="token punctuation">(</span><span class="token string">&quot;mobile&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">await</span> <span class="token function">dispatch</span><span class="token punctuation">(</span><span class="token function">fetchSendCode</span><span class="token punctuation">(</span>mobile<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">unwrap</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">setCount</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    Toast<span class="token punctuation">.</span><span class="token function">show</span><span class="token punctuation">(</span><span class="token string">&quot;\u53D1\u9001\u6210\u529F&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
  
  
  <span class="token comment">// button\u6309\u94AE \u66FF\u6362\u4E3Abutton\u65B9\u4FBF\u6DFB\u52A0disabled</span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Button</span></span>
    <span class="token attr-name">fill</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>outline<span class="token punctuation">&quot;</span></span>
    <span class="token attr-name">size</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>mini<span class="token punctuation">&quot;</span></span>
    <span class="token attr-name">onClick</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>sendCode<span class="token punctuation">}</span></span>
    <span class="token attr-name">className</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>code-extra<span class="token punctuation">&quot;</span></span>
    <span class="token attr-name">disabled</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>count <span class="token operator">&gt;</span> <span class="token number">0</span><span class="token punctuation">}</span></span>
  <span class="token punctuation">&gt;</span></span><span class="token plain-text">
    </span><span class="token punctuation">{</span>count <span class="token operator">&gt;</span> <span class="token number">0</span> <span class="token operator">?</span> <span class="token template-string"><span class="token template-punctuation string">\`</span><span class="token string">\u8FD8\u6709</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">\${</span>count<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">\u79D2</span><span class="token template-punctuation string">\`</span></span> <span class="token operator">:</span> <span class="token string">&quot;\u70B9\u51FB\u53D1\u9001&quot;</span><span class="token punctuation">}</span><span class="token plain-text">
  </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">Button</span></span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="highlight-lines"><div class="highlight-line">\xA0</div><br><br><br><br><div class="highlight-line">\xA0</div><div class="highlight-line">\xA0</div><div class="highlight-line">\xA0</div><div class="highlight-line">\xA0</div><div class="highlight-line">\xA0</div><div class="highlight-line">\xA0</div><div class="highlight-line">\xA0</div><div class="highlight-line">\xA0</div><div class="highlight-line">\xA0</div><br><div class="highlight-line">\xA0</div><div class="highlight-line">\xA0</div><div class="highlight-line">\xA0</div><div class="highlight-line">\xA0</div><div class="highlight-line">\xA0</div><div class="highlight-line">\xA0</div><br><br><br><br><br><br><br><br><br><br><br><br></div><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>`,9);function L(E,N){const a=o("ExternalLinkIcon");return c(),l(i,null,[r,n("ol",null,[n("li",null,[k,n("a",d,[v,t(a)])]),n("li",null,[m,n("a",g,[b,t(a)])])]),h,n("p",null,[n("a",f,[y,t(a)]),n("a",x,[w,t(a)])]),q,n("p",null,[_,n("a",F,[T,t(a)])]),I],64)}var C=e(u,[["render",L],["__file","\u{1F4DA}\u6781\u5BA2\u56EDM-2\u3010\u767B\u5F55\u6A21\u5757\u3011.html.vue"]]);export{C as default};
