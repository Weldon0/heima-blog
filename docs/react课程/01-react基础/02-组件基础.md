---
title: 02-ç»„ä»¶åŸºç¡€
---

# Reactç»„ä»¶

## ç»„ä»¶ä»‹ç»

### 1. Reactç»„ä»¶ä»‹ç»

> äº†è§£Reactç»„ä»¶ä½œç”¨ï¼Œå’Œåˆ›å»ºç»„ä»¶çš„æ–¹å¼

å®˜æ–¹è§£é‡Šï¼š

- ç»„ä»¶å…è®¸ä½ å°† UI æ‹†åˆ†ä¸ºç‹¬ç«‹å¯å¤ç”¨çš„ä»£ç ç‰‡æ®µï¼Œå¹¶å¯¹æ¯ä¸ªç‰‡æ®µè¿›è¡Œç‹¬ç«‹æ„æ€ã€‚

å‰ç«¯å¼€å‘ï¼š

- å°†é¡µé¢æŒ‰ç…§ç•Œé¢åŠŸèƒ½è¿›è¡Œæ‹†åˆ†ï¼Œæ¯ä¸€å—ç•Œé¢éƒ½æ‹¥æœ‰è‡ªå·±çš„ç‹¬ç«‹é€»è¾‘ï¼Œè¿™æ ·å¯ä»¥æé«˜é¡¹ç›®ä»£ç çš„å¯ç»´æŠ¤æ€§ã€‚

![img](https://wuxiaohui-1254415986.cos.ap-nanjing.myqcloud.com/uPic/1634544813508.f5b9c5c4.png)

Reactåˆ›å»ºç»„ä»¶ï¼š

1. ä½¿ç”¨å‡½æ•° `function`
2. ä½¿ç”¨ç±» `class`

## å‡½æ•°ç»„ä»¶

### 2. å‡½æ•°ç»„ä»¶

> ç›®æ ‡ï¼šæŒæ¡åœ¨Reactä¸­ä½¿ç”¨å‡½æ•°åˆ›å»ºç»„ä»¶ï¼Œä½¿ç”¨ç»„ä»¶ã€‚

å¤§è‡´æ­¥éª¤ï¼š

- ä»€ä¹ˆæ˜¯å‡½æ•°ç»„ä»¶
- å®šä¹‰å‡½æ•°ç»„ä»¶
- ä½¿ç”¨å‡½æ•°ç»„ä»¶

å…·ä½“å†…å®¹ï¼š

#### ä»€ä¹ˆæ˜¯å‡½æ•°ç»„ä»¶ï¼Ÿ

- ä½¿ç”¨JSå‡½æ•°ï¼ˆæ™®é€šï¼Œç®­å¤´ï¼‰åˆ›å»ºçš„ç»„ä»¶

#### å®šä¹‰å‡½æ•°ç»„ä»¶

- è¯­æ³•çº¦å®š
  - å‡½æ•°åç§°`é¦–å­—æ¯å¿…éœ€å¤§å†™`ï¼ŒReactæ®æ­¤æ¥åŒºåˆ†ç»„ä»¶å’ŒHTMLå…ƒç´ 
  - å‡½æ•°`å¿…é¡»æœ‰è¿”å›å€¼`ï¼Œè¡¨ç¤ºè¯¥ç»„ä»¶çš„UIç»“æ„ï¼Œå¦‚æœä¸æ¸²æŸ“ä»»ä½•å†…å®¹å¯è¿”å›`null`

```jsx
// æ™®é€šå‡½æ•°
function Header () {
  return <div>å¤´éƒ¨ç»„ä»¶</div>
}
// ç®­å¤´å‡½æ•°
const Footer = () => {
  return <div>åº•éƒ¨ç»„ä»¶</div>
}
// ä¸æ¸²æŸ“å†…å®¹
const Loading = () => {
  const loading = false
  return loading ? <div>æ­£åœ¨åŠ è½½...</div> : null
}
```

#### ä½¿ç”¨ç»„ä»¶

- å‡½æ•°çš„åç§°å°±æ˜¯ç»„ä»¶åç§°ï¼Œä½¿ç”¨ç»„ä»¶å°±æ˜¯æŠŠç»„ä»¶åç§°å½“æ ‡ç­¾ä½¿ç”¨å³å¯ã€‚

```jsx
import ReactDom from 'react-dom'


// æ™®é€šå‡½æ•°
function Header () {
  return <div>å¤´éƒ¨ç»„ä»¶</div>
}


// ç®­å¤´å‡½æ•°
const Footer = () => {
  return <div>åº•éƒ¨ç»„ä»¶</div>
}


// åŠ è½½ç»„ä»¶ï¼Œä¸æ¸²æŸ“å†…å®¹
const Loading = () => {
  const loading = false
  return loading ? <div>æ­£åœ¨åŠ è½½...</div> : null
}


// æ ¹ç»„ä»¶
const App = () => {
  return (
    <>
      <Header />
      <Loading />
      <Footer />
    </>
  )
}


ReactDom.render(<App />, document.getElementById('root'))
```

**æ€»ç»“ï¼š**

- åˆ›å»ºå‡½æ•°ç»„ä»¶ï¼Œé¦–å­—æ¯å¤§å†™ï¼Œéœ€è¦è¿”å›å€¼ï¼Œä¸æ¸²æŸ“å°±è¿”å›null
- ä½¿ç”¨å‡½æ•°ç»„ä»¶ï¼Œç»„ä»¶åç§°å½“ä½œæ ‡ç­¾ä½¿ç”¨å³å¯

## ç±»ç»„ä»¶

### 3. ç±»ç»„ä»¶-å¤ä¹ classè¯­æ³•

> å›é¡¾classè¯­æ³•å®šä¹‰ç±»å±æ€§å’Œå‡½æ•°ï¼Œå›é¡¾extendsè¯­æ³•ç»§æ‰¿çˆ¶ç±»ã€‚

å¤§è‡´æ­¥éª¤ï¼š

- æŒæ¡classå®šä¹‰ç±»ï¼Œå®šä¹‰å±æ€§ï¼Œå®šä¹‰å‡½æ•°ã€‚
- æŒæ¡extendsç»§æ‰¿çˆ¶ç±»ã€‚

å…·ä½“å†…å®¹ï¼š

1. æŒæ¡classå®šä¹‰ç±»ï¼Œå®šä¹‰å±æ€§ï¼Œå®šä¹‰å‡½æ•°

```js
// åŠ¨ç‰©
class Animal {
  address = 'åœ°çƒ'
  eat () {
    console.log('åƒ')
  }
}
```

1. æŒæ¡extendsç»§æ‰¿çˆ¶ç±»

```js
// çŒ«
class Cat extends Animal{
  run () {
    console.log('è·‘')
  }
}


const cat = new Cat()
cat.run() // è·‘
cat.eat() // åƒ
console.log(cat.address) // åœ°çƒ
```

**æ€»ç»“ï¼š** `class`åˆ›å»ºç±»ï¼Œ`extends`ç»§æ‰¿ç±»ï¼Œå¯ä»¥ä½¿ç”¨çˆ¶ç±»çš„å±æ€§å’Œå‡½æ•°ã€‚

### 4. ç±»ç»„ä»¶-åŸºæœ¬ä½¿ç”¨æ­¥éª¤

> æŒæ¡Reactçš„ç±»ç»„ä»¶å†™æ³•

å¤§è‡´æ­¥éª¤

- ä»€ä¹ˆæ˜¯ç±»ç»„ä»¶
- å®šä¹‰ç±»ç»„ä»¶
- ä½¿ç”¨ç±»ç»„ä»¶

å…·ä½“å†…å®¹

#### ä»€ä¹ˆæ˜¯ç±»ç»„ä»¶ï¼Ÿ

- ä½¿ç”¨`class`è¯­æ³•åˆ›å»ºçš„ç»„ä»¶å°±æ˜¯ç±»ç»„ä»¶

#### å®šä¹‰ç±»ç»„ä»¶

- çº¦å®šï¼šç±»åé¦–å­—æ¯å¿…éœ€å¤§å†™
- çº¦å®šï¼šå¿…é¡»ç»§æ‰¿`React.Component`çˆ¶ç±»
- çº¦å®šï¼šå¿…éœ€æœ‰`render`å‡½æ•°ï¼Œè¿”å›UIç»“æ„ï¼Œæ— æ¸²æŸ“å¯è¿”å›null

```jsx
import { Component } from 'react'


class Header extends Component {
  render () {
    return <div>å¤´éƒ¨ç»„ä»¶</div>
  }
}
```

#### ä½¿ç”¨ç±»ç»„ä»¶

- ç±»åç§°å°±æ˜¯ç»„ä»¶åç§°ï¼Œä½¿ç”¨ç»„ä»¶å°±æ˜¯æŠŠç»„ä»¶åç§°å½“æ ‡ç­¾ä½¿ç”¨å³å¯ã€‚

```jsx
import { Component } from 'react'
import ReactDom from 'react-dom'


// å¤´éƒ¨
class Header extends Component {
  render () {
    return <div>å¤´éƒ¨ç»„ä»¶</div>
  }
}


// æ ¹ç»„ä»¶
class App extends Component {
  render () {
    return (
      <>
        <Header />
      </>
    )
  }
}


ReactDom.render(<App />, document.getElementById('root'))
```

**æ€»ç»“ï¼š**

- ä½¿ç”¨`class`å®šä¹‰ç±»ï¼Œä½¿ç”¨`extends`ç»§æ‰¿`React.Component`å®Œæˆç±»ç»„ä»¶å®šä¹‰
- ç±»å`é¦–å­—æ¯å¤§å†™`ï¼Œå¿…é¡»æœ‰`render`å‡½æ•°è¿”å›UIç»“æ„ï¼Œæ— æ¸²æŸ“å¯è¿”å›`null`
- ä½¿ç”¨çš„æ—¶å€™æŠŠç±»åå½“ä½œ`æ ‡ç­¾`ä½¿ç”¨å³å¯

### 5. ç±»ç»„ä»¶-ç»„ä»¶æŠ½ç¦»

> ç†è§£ç»„ä»¶æŠ½ç¦»ç›®çš„ï¼ŒæŒæ¡æŠ½ç¦»ç»„ä»¶æ–¹å¼ã€‚

å¤§è‡´æ­¥éª¤ï¼š

- æ€è€ƒï¼Œå¦‚æœæ‰€æœ‰ç»„ä»¶å†™åœ¨ä¸€ä¸ªæ–‡ä»¶å¥½ç»´æŠ¤å—ï¼Ÿ
  - ä¸å¥½ç»´æŠ¤ï¼Œä»£ç å†™åœ¨ä¸€èµ·ã€‚
- æŠ½ç¦»ç»„ä»¶
  - å®šä¹‰ä¸€ä¸ª`js`æˆ–è€…`jsx`æ–‡ä»¶å®šä¹‰ç»„ä»¶é»˜è®¤å¯¼å‡º
  - ä½¿ç”¨ç»„ä»¶å¯¼å…¥å³å¯ï¼Œå½“ä½œæ ‡ç­¾ä½¿ç”¨ã€‚

å…·ä½“æ“ä½œï¼š

1. æ–°å»º `src/components/Header.jsx` ç±»ç»„ä»¶ï¼Œæ–°å»º `src/components/Footer.jsx` å‡½æ•°ç»„ä»¶

```jsx
import { Component } from 'react'
class Header extends Component {
  render () {
    return <div>å¤´éƒ¨ç»„ä»¶</div>
  }
}
export default Header
const Footer = () => {
  return <div>å¤´éƒ¨ç»„ä»¶</div>
}
export default Footer
```

1. æ–°å»º `src/App.jsx` ç»„ä»¶, å¯¼å…¥`Header` `Footer`ç»„ä»¶ä½¿ç”¨ã€‚

```jsx
import { Component } from 'react'
import Header from './components/Header.jsx'
import Footer from './components/Footer.jsx'
class App extends Component {
  render () {
    return (
      <>
        <Header />
        å†…å®¹
        <Footer />
      </>
    )
  }
}
```

1. `index.js` ä½¿ç”¨ `App` æ ¹ç»„ä»¶

```jsx
import ReactDom from 'react-dom'
import App from './App.jsx'
ReactDom.render(<App />, document.getElementById('root'))
```

**æ€»ç»“ï¼š**

- å»ºè®®å®šä¹‰ç»„ä»¶ä½¿ç”¨å•ç‹¬çš„æ–‡ä»¶
- æ€è€ƒï¼Œä½•æ—¶ä½¿ç”¨ç±»ç»„ä»¶ï¼Œä½•æ—¶ä½¿ç”¨å‡½æ•°ç»„ä»¶ï¼Ÿ

### 6. ç±»ç»„ä»¶-æ— çŠ¶æ€ç»„ä»¶å’Œæœ‰çŠ¶æ€ç»„ä»¶

> ç†è§£æ— çŠ¶æ€ç»„ä»¶å’Œæœ‰çŠ¶æ€ç»„ä»¶æ¦‚å¿µ

å¤§è‡´æ­¥éª¤ï¼š

- ç†è§£ä»€ä¹ˆæ˜¯æ— çŠ¶æ€ç»„ä»¶
- ç†è§£ä»€ä¹ˆæ˜¯æœ‰çŠ¶æ€ç»„ä»¶
- å®ƒä»¬çš„åŒºåˆ«æ˜¯ä»€ä¹ˆï¼Œå¦‚ä½•é€‰æ‹©ä½¿ç”¨

å…·ä½“å†…å®¹ï¼š

1. æ— çŠ¶æ€ç»„ä»¶
   - ç»„ä»¶æœ¬èº«ä¸å®šä¹‰çŠ¶æ€ï¼Œæ²¡æœ‰ç»„ä»¶ç”Ÿå‘½å‘¨æœŸï¼Œåªè´Ÿè´£UIæ¸²æŸ“ã€‚
   - `React16.8`ä¹‹å‰çš„å‡½æ•°ç»„ä»¶éƒ½æ˜¯æ— çŠ¶æ€ç»„ä»¶ï¼Œ`Hooks` å‡ºç°åå‡½æ•°ç»„ä»¶ä¹Ÿå¯ä»¥æœ‰çŠ¶æ€ã€‚
2. æœ‰çŠ¶æ€ç»„ä»¶
   - ç»„ä»¶æœ¬èº«æœ‰ç‹¬ç«‹æ•°æ®ï¼Œæ‹¥æœ‰ç»„ä»¶ç”Ÿå‘½å‘¨æœŸï¼Œå­˜åœ¨äº¤äº’è¡Œä¸ºã€‚
   - `class` ç»„ä»¶å¯ä»¥å®šä¹‰ç»„ä»¶è‡ªå·±çš„çŠ¶æ€ï¼Œæ‹¥æœ‰ç»„ä»¶ç”Ÿå‘½å‘¨æœŸï¼Œå®ƒæ˜¯æœ‰çŠ¶æ€ç»„ä»¶ã€‚
3. å®ƒä»¬çš„åŒºåˆ«
   - æ— çŠ¶æ€ç»„ä»¶ç”±äºæ²¡æœ‰ç»´æŠ¤çŠ¶æ€åªåšæ¸²æŸ“ï¼Œæ€§èƒ½è¾ƒå¥½ã€‚æœ‰çŠ¶æ€ç»„ä»¶æä¾›æ•°æ®å’Œç”Ÿå‘½å‘¨æœŸï¼Œèƒ½åŠ›æ›´å¼ºã€‚
4. å¦‚ä½•å»é€‰æ‹©
   - `React16.8`ä¹‹å‰ï¼Œç»„ä»¶ä¸éœ€è¦ç»´æŠ¤æ•°æ®åªæ¸²æŸ“å°±ä½¿ç”¨`å‡½æ•°ç»„ä»¶`ï¼Œæœ‰æ•°æ®å’Œäº¤äº’ä½¿ç”¨`ç±»ç»„ä»¶`ã€‚ä½ éœ€è¦å»åˆ¤æ–­ï¼Œæœ‰å¿ƒæ™ºè´Ÿæ‹…ã€‚
   - `React16.8`ä¹‹åï¼Œ`Hooks`å‡ºç°ç»™å‡½æ•°æä¾›çŠ¶æ€ï¼Œå»ºè®®ä½¿ç”¨å‡½æ•°ç»„ä»¶å³å¯ã€‚

å¤§å®¶å¯ä»¥æ€è€ƒä¸‹é¢é¡µé¢å„ä¸ªç»„ä»¶ä½¿ç”¨ä»€ä¹ˆç±»å‹ç»„ä»¶ï¼š

![img](https://wuxiaohui-1254415986.cos.ap-nanjing.myqcloud.com/uPic/1634544813509.252f2aac.png)

**æ€»ç»“ï¼š**

- ç»„ä»¶æœ¬èº«æ²¡æœ‰çŠ¶æ€å°±æ˜¯æ— çŠ¶æ€ç»„ä»¶ï¼Œç»„ä»¶æœ¬èº«æä¾›çŠ¶æ€å°±æ˜¯æœ‰çŠ¶æ€ç»„ä»¶ã€‚
- 16.8ä¹‹å‰ï¼Œæ— çŠ¶æ€ç»„ä»¶ä½¿ç”¨å‡½æ•°ç»„ä»¶ï¼Œæœ‰çŠ¶æ€ç»„ä»¶ä½¿ç”¨ç±»ç»„ä»¶ã€‚16.8ä¹‹åï¼Œç»Ÿä¸€å¯ä½¿ç”¨å‡½æ•°ç»„ä»¶ã€‚
- Reactæ²¡æœ‰è¯´å®Œå…¨å–ä»£ç±»ç»„ä»¶ï¼Œè€é¡¹ç›®ä¸­è¿˜æ˜¯ç±»ç»„ä»¶å±…å¤šï¼Œæˆ‘ä»¬æœ‰å¿…è¦å­¦ä¹ ä¸‹å®ƒçš„å…·ä½“ç”¨æ³•ã€‚

### 7. ç±»ç»„ä»¶-å®šä¹‰çŠ¶æ€

> æŒæ¡ç±»ç»„ä»¶ä¸­çŠ¶æ€çš„å®šä¹‰ä¸ä½¿ç”¨

å¤§è‡´æ­¥éª¤ï¼š

- å®šä¹‰`state`å±æ€§å®šä¹‰ç»„ä»¶çŠ¶æ€ï¼Œå±äºç»„ä»¶è‡ªå·±çš„æ•°æ®ï¼Œå®ƒçš„å€¼æ˜¯ä¸ªå¯¹è±¡ã€‚
- ä½¿ç”¨`state`çš„æ—¶å€™é€šè¿‡`this`å»è®¿é—®å³å¯ï¼Œä¾‹å¦‚ï¼š`this.state.xxx`ã€‚
- æ•°æ®å‘ç”Ÿå˜åŒ–ï¼Œé©±åŠ¨è§†å›¾æ›´æ–°ã€‚

å…·ä½“ä»£ç ï¼š

```jsx
import { Component } from "react";


class App extends Component {
  // çŠ¶æ€
  state = {
    title: "æ•°ç äº§å“",
    list: ["ç”µè„‘", "æ‰‹æœº", "ç›¸æœº"],
  };
  render() {
    return (
      <>
        <h3>{this.state.title}</h3>
        <ul>
          {this.state.list.map((item) => {
            return <li key={item}>{item}</li>;
          })}
        </ul>
      </>
    );
  }
}
export default App;
```

æ•°æ®é©±åŠ¨è§†å›¾æ¼”ç¤ºï¼š

![img](https://wuxiaohui-1254415986.cos.ap-nanjing.myqcloud.com/uPic/01.85c18e5c.gif)

**æ€»ç»“ï¼š**

- å®šä¹‰`state`å±æ€§ï¼Œå€¼æ˜¯å¯¹è±¡å­˜å‚¨æ•°æ®ï¼Œ`this.state.xxx`ä½¿ç”¨æ•°æ®ï¼Œæ•°æ®é©±åŠ¨è¯•é¢˜æ›´æ–°ã€‚

### 8. ç±»ç»„ä»¶-ç»‘å®šäº‹ä»¶

> æŒæ¡ç±»ç»„ä»¶ä¸­ç»‘å®šäº‹ä»¶çš„æ–¹å¼ï¼Œå’Œè·å–äº‹ä»¶å¯¹è±¡çš„æ–¹å¼ã€‚

å¤§è‡´æ­¥éª¤ï¼š

- åœ¨ç±»ä¸­å£°æ˜äº‹ä»¶å¤„ç†å‡½æ•°ï¼Œåœ¨æ ‡ç­¾ä¸Šä½¿ç”¨`on+äº‹ä»¶åç§°={å¤„ç†å‡½æ•°}`çš„æ–¹å¼ç»‘å®šäº‹ä»¶ï¼Œäº‹ä»¶åç§°éœ€è¦éµå¾ª`å¤§é©¼å³°`è§„åˆ™ã€‚
- å¤„ç†å‡½æ•°é»˜è®¤çš„å‚æ•°å°±æ˜¯äº‹ä»¶å¯¹è±¡ï¼Œå¯ä»¥ä½¿ç”¨äº‹ä»¶å¯¹è±¡å¤„ç†é»˜è®¤è¡Œä¸ºå’Œäº‹ä»¶å†’æ³¡ã€‚

å…·ä½“ä»£ç ï¼š

```jsx
import { Component } from "react";


class App extends Component {
  // çŠ¶æ€
  state = {
    count: 0,
  };
  // äº‹ä»¶å¤„ç†å‡½æ•°
  handleClick(e) {
    // é»˜è®¤è¡Œä¸º
    e.preventDefault()
    // äº‹ä»¶å†’æ³¡
    e.stopPropagation()
    console.log('handleClick')
  }
  handleMouseEnter() {
    console.log('handleMouseEnter')
  }
  render() {
    return (
      <>
        <div onMouseEnter={this.handleMouseEnter}>è®¡æ•°å™¨ï¼š{this.state.count}</div>
        <div>
          <a href="http://www.itcast.cn" onClick={this.handleClick}>æŒ‰é’®</a>
        </div>
      </>
    );
  }
}
export default App;
```

**æ€»ç»“ï¼š**

- ç»‘å®šäº‹ä»¶çš„æ–¹å¼å’ŒåŸç”Ÿçš„æ–¹å¼ä¸€è‡´ï¼Œä½¿ç”¨ `on+äº‹ä»¶åç§°={å¤„ç†å‡½æ•°}` æ–¹å¼ç»‘å®š
- äº‹ä»¶åç§°ä½¿ç”¨`å¤§é©¼å³°`è§„åˆ™ï¼Œä¾‹å¦‚ï¼š`onClick` `onMouseEnter` , å¤„ç†å‡½æ•°é»˜è®¤ä¼ å‚ä¸ºäº‹ä»¶å¯¹è±¡ã€‚

### 9. ç±»ç»„ä»¶-å‘ç°thisé—®é¢˜

> å‘ç°äº‹ä»¶å¤„ç†å‡½æ•°ä¸­thisè·å–ä¸åˆ°é—®é¢˜å’ŒåŸå› 

å¤§è‡´æ­¥éª¤ï¼š

- åœ¨äº‹ä»¶å¤„ç†å‡½æ•°ä¸­æ‰“å° `this.state.count` å‘ç°æŠ¥é”™ï¼Œthisæ˜¯ä¸ª`undefined`ã€‚
- æ¼”ç¤ºå‡½æ•°è°ƒç”¨å¯¹thisæŒ‡å‘çš„å½±å“ï¼Œå¾—å‡ºå‡½æ•°è°è°ƒthiså°±æ‰§è¡Œè°ã€‚
- æ‰¾å‡ºåŸå› ï¼šå¤„ç†å‡½æ•°ä¸æ˜¯é€šè¿‡ç»„ä»¶å»è°ƒç”¨çš„ï¼Œå¯¼è‡´å‡ºç°thisä¸æ˜¯ç»„ä»¶é—®é¢˜ã€‚

å…·ä½“ä»£ç ï¼š

1. å‘ç°`this`æ˜¯`undefined`

```jsx
import { Component } from "react";


class App extends Component {
  // çŠ¶æ€
  state = {
    count: 0,
  };
  // äº‹ä»¶å¤„ç†å‡½æ•°
  handleClick(e) {
    console.log(e)
    // Uncaught TypeError: Cannot read properties of undefined (reading 'state')
    console.log(this.state.count)
  }
  render() {
    return (
      <>
        <div>è®¡æ•°å™¨ï¼š{this.state.count}</div>
        <div>
          <button onClick={this.handleClick}>æŒ‰é’®</button>
        </div>
      </>
    );
  }
}
export default App;
```

1. æ¼”ç¤ºå¤„ç†å‡½æ•°è°ƒç”¨å¯¹thisçš„å½±å“

```js
const obj = {
  name: 'tom',
  say () {
    console.log(this)
  }
}
obj.say() // æ‰“å°ï¼š{name: 'tom', say: function}
const say = obj.say
say() // æ‰“å°ï¼šundefined  ä¸¥æ ¼æ¨¡å¼
```

1. é—®é¢˜åŸå› 
   - ç±»ç»„ä»¶å£°æ˜çš„å¤„ç†å‡½æ•°ï¼Œèµ‹å€¼ç»™ `on+äº‹ä»¶åç§°` å±æ€§ï¼Œè°ƒç”¨çš„æ—¶å€™ä¸æ˜¯é€šè¿‡ç»„ä»¶è°ƒç”¨çš„ã€‚

**æ€»ç»“ï¼š**

- è¿™ä¸ªthisé—®é¢˜æ˜¯JSåŸç”Ÿå°±å­˜åœ¨ï¼Œè¦è§£å†³è¿™ä¸ªé—®é¢˜éœ€è¦é€šè¿‡JSçš„æ–¹å¼ã€‚

### 10. ç±»ç»„ä»¶-å¤„ç†thisé—®é¢˜

> æŒæ¡é€šè¿‡ ç»‘å®šç®­å¤´å‡½æ•° bind å£°æ˜ç®­å¤´å‡½æ•° ä¸‰ç§æ–¹å¼è§£å†³thisé—®é¢˜

å¤§è‡´æ­¥éª¤ï¼š

- é€šè¿‡ç»‘å®šç®­å¤´å‡½æ•°è§£å†³thisé—®é¢˜
- é€šè¿‡bindè§£å†³thisé—®é¢˜
- é€šè¿‡å£°æ˜ç®­å¤´å‡½æ•°è§£å†³thisé—®é¢˜

å…·ä½“å†…å®¹ï¼š

1. é€šè¿‡ç»‘å®šç®­å¤´å‡½æ•°è§£å†³thisé—®é¢˜

```js{19}
import { Component } from "react";


class App extends Component {
  // çŠ¶æ€
  state = {
    count: 0,
  };
  // äº‹ä»¶å¤„ç†å‡½æ•°
  handleClick(e) {
    console.log(e)
    console.log(this.state.count)
  }
  render() {
    return (
      <>
        <div>è®¡æ•°å™¨ï¼š{this.state.count}</div>
        <div>
          <button onClick={(e)=>this.handleClick(e)}>æŒ‰é’®</button>
        </div>
      </>
    );
  }
}
export default App;
```

1. é€šè¿‡bindè§£å†³thisé—®é¢˜

```js{19}
import { Component } from "react";


class App extends Component {
  // çŠ¶æ€
  state = {
    count: 0,
  };
  // äº‹ä»¶å¤„ç†å‡½æ•°
  handleClick(e) {
    console.log(e)
    console.log(this.state.count)
  }
  render() {
    return (
      <>
        <div>è®¡æ•°å™¨ï¼š{this.state.count}</div>
        <div>
          <button onClick={this.handleClick.bind(this)}>æŒ‰é’®</button>
        </div>
      </>
    );
  }
}
export default App;
```

1. é€šè¿‡å£°æ˜ç®­å¤´å‡½æ•°è§£å†³thisé—®é¢˜

```js{10}
import { Component } from "react";


class App extends Component {
  // çŠ¶æ€
  state = {
    count: 0,
  };
  // äº‹ä»¶å¤„ç†å‡½æ•°
+  handleClick = (e) => {
    console.log(e)
    console.log(this.state.count)
  }
  render() {
    return (
      <>
        <div>è®¡æ•°å™¨ï¼š{this.state.count}</div>
        <div>
          <button onClick={this.handleClick}>æŒ‰é’®</button>
        </div>
      </>
    );
  }
}
export default App;
```

**æ€»ç»“ï¼š**

- ä¸‰ç§æ–¹å¼ä»»ä½•ä¸€ç§éƒ½å¯è¡Œï¼Œå»ºè®®ä½¿ç”¨ç¬¬ä¸‰ç§ï¼Œå®šä¹‰ç±»ä¸­çš„`äº‹ä»¶å¤„ç†å‡½æ•°ç»Ÿä¸€ä½¿ç”¨ç®­å¤´å‡½æ•°`ã€‚
- å½“éœ€è¦ç»™äº‹ä»¶å‡½æ•°ä¼ é€’å‚æ•°æ—¶,ä½¿ç”¨ç¬¬ä¸€ç§æ–¹å¼

### 11. ç±»ç»„ä»¶-setStateä½¿ç”¨

> æŒæ¡ä½¿ç”¨setStateå‡½æ•°ä¿®æ”¹ç»„ä»¶çŠ¶æ€

å¤§è‡´æ­¥éª¤ï¼š

- Reactç±»ç»„ä»¶æä¾›ä¸€ä¸ªå‡½æ•°`setState({éœ€ä¿®æ”¹æ•°æ®})`ï¼Œå¯ä»¥æ›´æ–°æ•°æ®å’Œè§†å›¾ã€‚
- ç›´æ¥ä¿®æ”¹stateä¸­çš„æ•°æ®æ˜¯ä¸ä¼šæ›´æ–°è§†å›¾ï¼Œæ¼”ç¤ºç®€å•æ•°æ®ï¼Œæ•°ç»„ï¼Œå¯¹è±¡çš„æ­£ç¡®ä¿®æ”¹æ–¹å¼ã€‚

å…·ä½“ä»£ç ï¼š

1. é€šè¿‡`setState`çš„æ¥ä¿®æ”¹æ•°æ®æ›´æ–°è§†å›¾

```jsx
import { Component } from "react";


class App extends Component {
  state = {
    count: 0,
  };
  handleClick = () => {
    // ä¿®æ”¹æ•°æ®
    this.setState({
      // keyæ˜¯è¦ä¿®æ”¹çš„æ•°æ®åç§°ï¼Œvalueæ˜¯å¯¹åº”çš„æ–°å€¼
      count: this.state.count + 1
    })
  }
  render() {
    return (
      <>
        <div>è®¡æ•°å™¨ï¼š{this.state.count}</div>
        <div>
          <button onClick={this.handleClick}>æŒ‰é’®</button>
        </div>
      </>
    );
  }
}
export default App;
```

1. ä¿®æ”¹æ•°ç»„å’Œä¿®æ”¹å¯¹è±¡çš„æ­£ç¡®å§¿åŠ¿

```jsx
import { Component } from "react";


class App extends Component {
  state = {
    count: 0,
    user: {
      name: "jack",
      age: 18,
    },
    list: ["ç”µè„‘", "æ‰‹æœº"],
  };
  handleClick = () => {
    // ä¿®æ”¹æ•°æ®
    this.setState({
      // keyæ˜¯è¦ä¿®æ”¹çš„æ•°æ®åç§°ï¼Œvalueæ˜¯å¯¹åº”çš„æ–°å€¼
      count: this.state.count + 1,
    });
  };
  updateList = () => {
    // ä¿®æ”¹åˆ—è¡¨
    this.setState({
      list: [...this.state.list, 'ç›¸æœº']
    })
  }
  updateUser = () => {
    // ä¿®æ”¹å¯¹è±¡
    this.setState({
      user: {
        ...this.state.user,
        name: 'tony'
      }
    })
  }
  render() {
    return (
      <>
        <div>è®¡æ•°å™¨ï¼š{this.state.count}</div>
        <div>
          <button onClick={this.handleClick}>æŒ‰é’®</button>
        </div>
        <hr />
        <div>å•†å“ï¼š{this.state.list.join(',')}</div>
        <button onClick={this.updateList}>æ”¹æ•°ç»„</button>
        <hr />
        <div>
          å§“åï¼š{this.state.user.name}ï¼Œå¹´é¾„ï¼š{this.state.user.age}
        </div>
        <button onClick={this.updateUser}>æ”¹å¯¹è±¡</button>
      </>
    );
  }
}
export default App;
```

**æ€»ç»“ï¼š**

- ä¿®æ”¹çŠ¶æ€æ•°æ®ï¼Œä½¿ç”¨`setState`ä¿®æ”¹å¯æ›´æ–°è§†å›¾ã€‚

### 12. ç±»ç»„ä»¶-å—æ§ç»„ä»¶

> ç†è§£å—æ§ç»„ä»¶æ¦‚å¿µï¼ŒæŒæ¡åŠ¨æ€ç»‘å®šè¡¨å•å…ƒç´ ã€‚

å¤§è‡´æ­¥éª¤ï¼š

- ä»€ä¹ˆæ˜¯å—æ§ç»„ä»¶ï¼Ÿ
- å¦‚ä½•ç»‘å®šè¡¨å•å…ƒç´ 

å…·ä½“å†…å®¹ï¼š

1. ä»€ä¹ˆæ˜¯å—æ§ç»„ä»¶
   - è¡¨å•å…ƒç´ çš„å€¼è¢«Reactä¸­`state`æ§åˆ¶ï¼Œè¿™ä¸ªè¡¨å•å…ƒç´ å°±æ˜¯å—æ§ç»„ä»¶ã€‚
2. å¦‚ä½•ç»‘å®šè¡¨å•å…ƒç´ ï¼Œå¦‚ï¼š`input:text` `input:checkbox`

```jsx
import { Component } from "react";


class App extends Component {
  state = {
    mobile: "13811112222",
    isAgree: true,
  };


  changeMobile = (e) => {
    this.setState({
      mobile: e.target.value,
    });
  };


  changeAgree = (e) => {
    this.setState({
      isAgree: e.target.checked,
    });
  };


  render() {
    return (
      <>
        <div>
          <input
            value={this.state.mobile}
            onChange={this.changeMobile}
            type="text"
            placeholder="è¯·è¾“å…¥æ‰‹æœºå·"
          />
        </div>
        <div>
          <input
            checked={this.state.isAgree}
            onChange={this.changeAgree}
            type="checkbox"
          />
          åŒæ„ç”¨æˆ·åè®®å’Œéšç§æ¡æ¬¾
        </div>
      </>
    );
  }
}
export default App;
```

**æ€»ç»“ï¼š**

- ä½¿ç”¨`state`çš„æ•°æ®èµ‹å€¼ç»™è¡¨å•åŸç”Ÿï¼Œé€šè¿‡`onChange`ç›‘å¬å€¼æ”¹å˜ä¿®æ”¹stateæ•°æ®ï¼Œå®Œæˆè¡¨å•å…ƒç´ çš„ç»‘å®šã€‚
- è¿™ç§è¡¨å•å…ƒç´ ç§°ä¸ºå—æ§ç»„ä»¶ã€‚

### 13. ç±»ç»„ä»¶-éå—æ§ç»„ä»¶

> ç†è§£éå—æ§ç»„ä»¶æ¦‚å¿µï¼ŒæŒæ¡é€šè¿‡refè·å–å…ƒç´ ã€‚

å¤§è‡´æ­¥éª¤ï¼š

- ä»€ä¹ˆæ˜¯éå—æ§ç»„ä»¶ï¼Ÿ
- é€šè¿‡refè·å–è¡¨å•å…ƒç´ è·å–éå—æ§ç»„ä»¶çš„å€¼

å…·ä½“å†…å®¹ï¼š

1. ä»€ä¹ˆæ˜¯éå—æ§ç»„ä»¶ï¼Ÿ
   - æ²¡æœ‰é€šè¿‡stateæ§åˆ¶çš„è¡¨å•å…ƒç´ ï¼Œå®ƒè‡ªå·±æ§åˆ¶è‡ªèº«çš„å€¼ï¼Œå°±æ˜¯éå—æ§ç»„ä»¶
2. é€šè¿‡refè·å–è¡¨å•å…ƒç´ è·å–éå—æ§ç»„ä»¶çš„å€¼

```jsx
import { Component, createRef } from "react";


class App extends Component {
  
  // è·å–éå—æ§ç»„ä»¶çš„å€¼
  // 1. é€šè¿‡createRefåˆ›å»ºä¸€ä¸ªrefå¯¹è±¡
  // 2. ç»™å…ƒç´ ç»‘å®šrefå±æ€§å€¼ä¸ºåˆ›å»ºçš„refå¯¹è±¡
  // 3. é€šè¿‡refå¯¹è±¡çš„currentè·å–å…ƒç´ ï¼Œå†è·å–å®ƒçš„å€¼
  mobileRef = createRef()


  getMobile = () => {
    console.log(this.mobileRef.current.value)
  }


  render() {
    return (
      <>
        <div>
          {/* æ²¡æœ‰è¢«stateæ§åˆ¶çš„è¡¨å•åŸç”Ÿè®¤ä¸ºæ˜¯éå—æ§ç»„ä»¶ */}
          <input ref={this.mobileRef} type="text" placeholder="è¯·è¾“å…¥æ‰‹æœºå·"/>
          <button onClick={this.getMobile}>è·å–</button>
        </div>
      </>
    );
  }
}
export default App;
```

### 14. ç±»ç»„ä»¶-ç»¼åˆæ¡ˆä¾‹-å‡†å¤‡

> èƒ½å¤ŸæŠŠæ¡ˆä¾‹é™æ€ç»„ä»¶ã€æ ·å¼æ–‡ä»¶ã€åŸºç¡€æ•°æ®å‡†å¤‡å¥½

![image-20220107114307009](https://wuxiaohui-1254415986.cos.ap-nanjing.myqcloud.com/uPic/image-20220107114307009.png)

å¤§è‡´æ­¥éª¤ï¼š

- å‡†å¤‡æ ·å¼æ–‡ä»¶
- å‡†å¤‡é™æ€ç»„ä»¶
- åœ¨Appä¸­ä½¿ç”¨

å…·ä½“ä»£ç ï¼š

`index.css` æ ·å¼

```css
body {
  margin: 0;
}
.comments {
  background-color: #121212;
  color: #eee;
  padding: 24px;
  width: 1000px;
  margin: 0 auto;
}
.comm-head {
  color: #eee;
  font-size: 24px;
  line-height: 24px;
  margin-bottom: 24px;
}
.comm-head sub {
  font-size: 14px;
  color: #666;
  margin-left: 6px;
  bottom: 0.2em;
  position: relative;
}


.comm-head span {
  display: inline-block;
  line-height: 1;
  padding: 5px 16px;
  font-size: 14px;
  font-weight: normal;
  border-radius: 12px;
  background-color: rgba(255,255,255,0.1);
  color: #999;
  cursor: pointer;
  margin-left: 30px;
}
.comm-head span:hover , .comm-head span.active{
  color: #61f6ff;
}


.comm-list {
  list-style: none;
  padding: 0;
}
.comm-item {
  display: flex;
  margin-bottom: 24px;
}
.comm-item .avatar {
  width: 48px;
  height: 48px;
  line-height: 48px;
  border-radius: 24px;
  display: inline-block;
  cursor: pointer;
  background-position: 50%;
  background-size: 100%;
  background-color: #eee;
}
.comm-item .info {
  padding-left: 16px;
}
.comm-item .info p {
  margin: 8px 0;
}
.comm-item .info p.name {
  color: #999;
}
.comm-item .info p.vip {
  color: #ebba73;
}
.comm-item .info p.vip img {
  width: 14px;
  vertical-align: baseline;
  margin-left: 5px;
}
.comm-item .info p.time {
  color: #666;
  font-size: 14px;
  display: flex;
  align-items: center;
}


.comm-item .info .iconfont {
  margin-left: 20px;
  position: relative;
  top: 1px;
  cursor: pointer;
}
.comm-item .info .iconfont.icon-collect-sel {
  color: #ff008c;
}
.comm-item .info .del {
  margin-left: 20px;
  cursor: pointer;
}
.comm-item .info .del:hover {
  color: #ccc;
}


.comm-input {
  border-radius: 6px;
  padding: 18px;
  background-color: #25252b;
}
.comm-input textarea {
  border: 0;
  outline: 0;
  resize: none;
  background: transparent;
  color: #999;
  width: 100%;
  font-family: inherit;
  height: auto;
  overflow: auto;
}
.comm-input .foot {
  display: flex;
  justify-content: flex-end;
  justify-items: center;
}
.comm-input .foot .word {
  line-height: 36px;
  margin-right: 10px;
  color: #999;
}
.comm-input .foot .btn {
  background-color: #ff008c;
  font-size: 14px;
  color: #fff;
  line-height: 36px;
  text-align: center;
  border-radius: 18px;
  padding: 0 24px;
  cursor: pointer;
  user-select: none;
}
```

`src/components/Comment.jsx` è¯„è®ºç»„ä»¶

```jsx
import React, { Component } from "react";
import './index.css'


export default class Comment extends Component {
  render() {
    return (
      <div className="comments">
        <h3 className="comm-head">è¯„è®º</h3>
        <div className="comm-input">
          <textarea placeholder="çˆ±å‘è¯„è®ºçš„äººï¼Œè¿æ°”éƒ½å¾ˆæ£’"></textarea>
          <div className="foot">
            <div className="word">0/100</div>
            <div className="btn">å‘è¡¨è¯„è®º</div>
          </div>
        </div>
        <h3 className="comm-head">
          çƒ­é—¨è¯„è®º<sub>(5)</sub>
        </h3>
        <ul className="comm-list">
          <li className="comm-item">
            <div className="avatar"></div>
            <div className="info">
              <p className="name vip">
                æ¸…é£å¾æ¥
                <img alt="" src="https://gw.alicdn.com/tfs/TB1c5JFbGSs3KVjSZPiXXcsiVXa-48-48.png" />
              </p>
              <p className="time">2012-12-12 <span className="del">åˆ é™¤</span></p>
              <p>
                è¿™é‡Œæ˜¯è¯„è®ºçš„å†…å®¹ï¼ï¼ï¼è¿™é‡Œæ˜¯è¯„è®ºçš„å†…å®¹ï¼ï¼ï¼è¿™é‡Œæ˜¯è¯„è®ºçš„å†…å®¹ï¼ï¼ï¼
              </p>
            </div>
          </li>
        </ul>
      </div>
    );
  }
}
```

`src/App.jsx` æ ¹ç»„ä»¶

```jsx
import { Component } from "react";
import Comment from "./components/Comment.jsx";
class App extends Component {
  render() {
    return (
      <>
        <Comment />
      </>
    );
  }
}
export default App;
```

**æ€»ç»“ï¼š**

- æŒ‰ç…§ç±»ç»„ä»¶çš„æ–¹å¼å‡†å¤‡å¥½åŸºç¡€ç»“æ„å’Œæ ·å¼

### 15. ç±»ç»„ä»¶-ç»¼åˆæ¡ˆä¾‹-æ¸²æŸ“

> åœ¨ç±»ç»„ä»¶Comment.jsxä¸­å®Œæˆåˆå§‹åŒ–æ¸²æŸ“

å¤§è‡´æ­¥éª¤

- å‡†å¤‡åˆå§‹åŒ–æ•°æ®ï¼šè¯„è®ºåˆ—è¡¨
- å®Œæˆç»„ä»¶æ¸²æŸ“

è½åœ°ä»£ç ï¼š

1. å®šä¹‰çŠ¶æ€å­˜å‚¨åŸºç¡€åˆ—è¡¨æ•°æ®

```jsx
state = {
    // å½“å‰ç”¨æˆ·
    user: {
      name: 'æ¸…é£å¾æ¥',
      vip: true,
      avatar: 'https://static.youku.com/lvip/img/avatar/310/6.png'
    },
    // è¯„è®ºåˆ—è¡¨
    comments: [
      { 
        id: 100, 
        name: '__RichMan', 
        avatar: 'https://r1.ykimg.com/051000005BB36AF28B6EE4050F0E3BA6',
        content: 'è¿™é˜µå®¹æˆ‘å–œæ¬¢ğŸ˜é³ä¸œ&é—«å¦®ï¼Œå°±è¿™ä¿©åå­—ï¼Œæˆ‘å°±çŸ¥é“æ˜¯è‰¯å¿ƒå‰§é›†...é”äº†ğŸ”’',
        time: '2021/10/12 10:10:23',
        vip: true,
        collect: false  
      },
      { 
        id: 101, 
        name: 'ç³–èœœç”œç­’é¢–', 
        avatar: 'https://image.9xsecndns.cn/image/uicon/712b2bbec5b58d6066aff202c9402abc3370674052733b.jpg',
        content: 'çªå›´ç¥ä»™é˜µå®¹ äººæ°‘çš„åä¹‰ç¬¬ä¸‰éƒ¨æ¥äº† é³ä¸œé™ˆæ™“é—«å¦®ç§¦å²šç­‰ä¼—å¤šä¼˜ç§€æ¼”å‘˜å®åŠ›æ´¾ å®ˆæŠ¤äººæ°‘çš„è´¢äº§ å†ç°å›½å®¶ä¼ä¸šå‘å±•å†ç¨‹',
        time: '2021/09/23 15:12:44',
        vip: false,
        collect: true
      },
        { 
        id: 102, 
        name: 'æ¸…é£å¾æ¥', 
        avatar: 'https://static.youku.com/lvip/img/avatar/310/6.png',
        content: 'ç¬¬ä¸€é›†çœ‹çš„æœ‰ç‚¹è´¹åŠ›ï¼ŒæŠ•å…¥ä¸äº†ï¼Œé—«å¦®ä¸å¤ªé€‚åˆå•Šï¼ŒèŒåœºçš„äººå“ªæœ‰é‚£ä¹ˆå¤šè¡¨æƒ…ï¼Œä¸€ç‚¹èŒåœºçš„æ„Ÿè§‰éƒ½æ²¡æœ‰',
        time: '2021/07/01 00:30:51',
        vip: true,
        collect: false
      }
    ]
  }
```

1. å®Œæˆåˆ—è¡¨æ¸²æŸ“

```jsx
render() {
    const {comments, user} = this.state
    return (
      <div className="comments">
        <h3 className="comm-head">è¯„è®º</h3>
        <div className="comm-input">
          <textarea placeholder="çˆ±å‘è¯„è®ºçš„äººï¼Œè¿æ°”éƒ½å¾ˆæ£’"></textarea>
          <div className="foot">
            <div className="word">0/100</div>
            <div className="btn">å‘è¡¨è¯„è®º</div>
          </div>
        </div>
        <h3 className="comm-head">çƒ­é—¨è¯„è®º<sub>({comments.length})</sub></h3>
        <ul className="comm-list">
          {comments.map(item=>{
            return (
              <li key={item.id} className="comm-item">
                <div className="avatar" style={{backgroundImage:`url(${item.avatar})`}}></div>
                <div className="info">
                  <p className={`name ${item.vip?'vip':''}`}>
                    {item.name}
                    {item.vip?<img src="https://gw.alicdn.com/tfs/TB1c5JFbGSs3KVjSZPiXXcsiVXa-48-48.png" />: null}
                  </p>
                  <p className="time">
                    {item.time} 
                    {item.name === user.name ? <span className="del">åˆ é™¤</span>: null}
                  </p>
                  <p>{item.content}</p>
                </div>
              </li>
            )
          })}
        </ul>
      </div>
    );
  }
```

**æ€»ç»“ï¼š**

- å…ˆåœ¨stateä¸­å‡†å¤‡å¥½åˆå§‹åŒ–æ•°æ®ï¼Œç„¶årenderä¸­ä½¿ç”¨æ•°æ®æ¸²æŸ“å³å¯ï¼Œæ³¨æ„ä¸‹åˆ é™¤æŒ‰é’®æƒé™æ§åˆ¶ã€‚

### 16. ç±»ç»„ä»¶-ç»¼åˆæ¡ˆä¾‹-è¯„è®º

> å®Œæˆå‘è¡¨è¯„è®ºåŠŸèƒ½ï¼Œè¾“å…¥å­—æ•°é™åˆ¶ã€‚

å¤§è‡´æ­¥éª¤ï¼š

- æŠŠè¾“å…¥æ¡†æ”¹æˆå—æ§ç»„ä»¶
- å±•ç¤ºè¾“å…¥å­—æ•°ï¼Œå’Œé™åˆ¶é•¿åº¦100
- ç‚¹å‡»æŒ‰é’®è¿›è¡Œå‘å¸ƒï¼Œæ¸…ç©ºå†…å®¹

è½åœ°ä»£ç ï¼š

1. æŠŠè¾“å…¥æ¡†æ”¹æˆå—æ§ç»„ä»¶

```diff
state = {
+    // è¯„è®ºå†…å®¹
+    content: '',
changeContent = e => {
    this.setState({
      content: e.target.value
    })
  }
<textarea 
    value={content} 
    onChange={this.changeContent} 
    placeholder="çˆ±å‘è¯„è®ºçš„äººï¼Œè¿æ°”éƒ½å¾ˆæ£’"
  >
  </textarea>
```

1. å±•ç¤ºå­—æ•°ï¼Œé™åˆ¶è¾“å…¥

```diff
<div className="foot">
+ <div className="word">{content.length}/100</div>
  <div className="btn">å‘è¡¨è¯„è®º</div>
</div>
changeContent = e => {
+    const value = e.target.value
+    if ( value.length <= 100 ) {
      this.setState({
        content: e.target.value.trim()
      })
+    }
  }
```

1. è¿›è¡Œå‘å¸ƒï¼Œå®Œæˆåæ¸…ç©ºè¾“å…¥

```diff
<div className="foot">
  <div className="word">{content.length}/100</div>
+  <div onClick={this.submit} className="btn">å‘è¡¨è¯„è®º</div>
</div>
submit = () => {
    if (this.state.content) {
      // å‡†å¤‡è¯„è®ºå¯¹è±¡
      const item = {
        id: Math.random(),
        ...this.state.user,
        content: this.state.content,
        time: new Date().toLocaleString(),
        collect: false  
      }
      // è¿½åŠ åˆ—è¡¨ï¼Œæ¸…ç©ºè¾“å…¥
      this.setState({
        comments: [ item, ...this.state.comments ],
        content: ''
      })
    }
  }
```

**æ€»ç»“ï¼š**

- å…ˆé€šè¿‡å—æ§ç»„ä»¶ç»‘å®šæ•°æ®
- æ˜¾ç¤ºå†…å®¹é•¿åº¦ï¼Œåœ¨ä¿®æ”¹æ•°æ®çš„æ—¶å€™é™åˆ¶é•¿åº¦
- é€šè¿‡ä¿®æ”¹`setState`è¿½åŠ è¯„è®ºï¼Œæ¸…é™¤è¾“å…¥

### 17. ç±»ç»„ä»¶-ç»¼åˆæ¡ˆä¾‹-åˆ é™¤

> å®Œæˆè¯„è®ºåˆ é™¤åŠŸèƒ½

å¤§è‡´æ­¥éª¤

- ç»‘å®šç‚¹å‡»åˆ é™¤æŒ‰é’®çš„äº‹ä»¶ï¼Œå®šä¹‰åˆ é™¤å¤„ç†å‡½æ•°ã€‚
- ä¼ å…¥IDï¼Œé€šè¿‡`setState`åˆ é™¤æ•°ç»„å…¶ä¸­ä¸€é¡¹

è½åœ°ä»£ç ï¼š

1. ç»‘å®šç‚¹å‡»åˆ é™¤æŒ‰é’®çš„äº‹ä»¶ï¼Œå®šä¹‰åˆ é™¤å¤„ç†å‡½æ•°

```diff
<p className="time">
  {item.time} 
+  {item.name === user.name ? <span onClick={this.delComment} className="del">åˆ é™¤</span>: null}
</p>
delComment = () => {
    
  }
```

1. ä¼ å…¥IDç»™å¤„ç†å‡½æ•°ï¼Œè¿›è¡Œåˆ é™¤

```diff
<p className="time">
  {item.time} 
+  {item.name === user.name ? <span onClick={()=>this.delComment(item.id)} className="del">åˆ é™¤</span>: null}
</p>
delComment = (id) => {
    this.setState({
      comments: this.state.comments.filter(item=>item.id!==id)
    })
  }
```

**æ€»ç»“ï¼š**

- ä¼ é€’é¢å¤–å‚æ•°å¯ä»¥ä½¿ç”¨ç®­å¤´å‡½æ•°
- ä¿®æ”¹å€¼ï¼Œæ˜¯åˆ é™¤ä¸€é¡¹åçš„æ–°æ•°ç»„ï¼Œä¸€å®šè¦æ˜¯æ–°çš„å€¼ã€‚

### 18. ç±»ç»„ä»¶-ç»¼åˆæ¡ˆä¾‹-æ”¶è—

> å®ç°æ”¶è—è¯„è®ºåŠŸèƒ½

å¤§è‡´æ­¥éª¤ï¼š

- å¼•å…¥å­—ä½“å›¾æ ‡
- å‡†å¤‡æ”¶è—æŒ‰é’®å’Œæ ·å¼
- ç»‘å®šç‚¹å‡»å¤„ç†å‡½æ•°ï¼Œå®Œæˆæ”¶è—é€»è¾‘

è½åœ°ä»£ç ï¼š

1. å¼•å…¥å­—ä½“å›¾æ ‡

```
public/index.html
<link href="https://at.alicdn.com/t/font_2998849_vtlo0vj7ryi.css" rel="stylesheet">
```

1. å‡†å¤‡æ”¶è—æŒ‰é’®å’Œæ ·å¼

```diff
<p className="time">
  {item.time} 
+  <span className={`iconfont icon-collect${item.collect ? '-sel' : ''}`}></span>
```

1. ç»‘å®šç‚¹å‡»å¤„ç†å‡½æ•°ï¼Œå®Œæˆæ”¶è—é€»è¾‘

```jsx
<span onClick={()=>this.collectComment(item.id)} className={`iconfont icon-collect${item.collect ? '-sel' : ''}`}></span>
// æ”¶è—è¯„è®º&å–æ¶ˆæ”¶è—
  collectComment = id => {
    this.setState({
      comments: this.state.comments.map(item=>{
        if ( item.id === id ) {
          return {...item, collect: !item.collect}
        } else {
          return item
        }
      })
    })
  }
```

**æ€»ç»“ï¼š**

- é€šè¿‡idä¿®æ”¹å¯¹åº”è¯„ä»·çš„æ”¶è—çŠ¶æ€

### 19. ä»Šæ—¥æ€»ç»“

> å›é¡¾å½“å¤©çŸ¥è¯†

1. ä»€ä¹ˆå‡½æ•°å¼ç»„ä»¶ï¼Ÿ
   - é€šè¿‡`å‡½æ•°åˆ›å»º`çš„ç»„ä»¶ï¼Œåœ¨16.8ä¹‹å‰æ²¡æœ‰çŠ¶æ€
2. ä»€ä¹ˆæ˜¯ç±»ç»„ä»¶ï¼Ÿ
   - é€šè¿‡`classåˆ›å»º`çš„ç»„ä»¶ï¼Œå¯ä»¥å®šä¹‰çŠ¶æ€ï¼Œæ‹¥æœ‰å£°æ˜å‘¨æœŸã€‚
3. ä»€ä¹ˆæ˜¯æ— çŠ¶æ€ç»„ä»¶å’Œæœ‰çŠ¶æ€ç»„ä»¶ï¼Ÿ
   - 16.8ä¹‹å‰çš„å‡½æ•°ç»„ä»¶éƒ½æ˜¯æ— çŠ¶æ€ç»„ä»¶é€‚åˆåšå•çº¯æ¸²æŸ“ï¼Œæœ‰çŠ¶æ€ç»„ä»¶é€‚åˆåšäº¤äº’ã€‚
4. å¦‚ä½•åœ¨ç±»ç»„ä»¶ä¸­å®šä¹‰çŠ¶æ€ï¼Ÿ
   - é€šè¿‡ `state` å±æ€§è¿›è¡Œå®šä¹‰ï¼Œå®ƒæ˜¯ä¸€ä¸ªå¯¹è±¡å¯ä»¥å®šä¹‰å¤šä¸ªçŠ¶æ€ã€‚
5. å¦‚ä½•ç»‘å®šäº‹ä»¶ï¼Ÿ
   - é€šè¿‡ `on+äº‹ä»¶åç§°={å¤„ç†å‡½æ•°}` æ¥ç»‘å®šï¼Œäº‹ä»¶åç§°éµå¾ª`å¤§é©¼å³°`
6. å¦‚æœè§£å†³å¤„ç†å‡½æ•°ä¸­çš„thisé—®é¢˜ï¼Ÿ
   - ä¸‰ç§æ–¹å¼ï¼šç»‘å®šä½ç½®ä½¿ç”¨ç®­å¤´å‡½æ•°åŒ…è£¹å¤„ç†å‡½æ•°ï¼Œç»‘å®šä½ç½®ä½¿ç”¨bindç»‘å®šthisï¼Œå®šä¹‰ä½ç½®ä½¿ç”¨ç®­å¤´å‡½æ•°ã€‚
7. å¦‚æœä¿®æ”¹stateçŠ¶æ€æ•°æ®ï¼Ÿ
   - ä½¿ç”¨ `setState` å‡½æ•°è¿›è¡Œä¿®æ”¹ï¼Œéµå¾ªç”¨æ–°çš„å€¼å»è¦†ç›–åŸæœ‰çš„å€¼ã€‚
8. ä»€ä¹ˆæ˜¯å—æ§ç»„ä»¶ï¼Ÿ
   - è¡¨å•å…ƒç´ çš„å€¼è¢«`state`æ•°æ®æ§åˆ¶ï¼Œå€¼æ”¹å˜éœ€è¦é€šè¿‡`onChange`å»ç›‘å¬ï¼Œç„¶åä¿®æ”¹stateçš„å€¼
9. ä»€ä¹ˆæ˜¯éå—æ§ç»„ä»¶ï¼Ÿ
   - è¡¨å•å…ƒç´ çš„å€¼å®ƒè‡ªå·±æ§åˆ¶ï¼Œå€¼éœ€è¦é€šè¿‡ `ref` è¿›è¡Œè·å–å…ƒç´ åè·å–
10. å®‰è£…reactå¼€å‘æ’ä»¶
    - fmkadmapgofadopljbjfkapdkoienihi_4.20.1_chrome.zzzmh.cn.crx