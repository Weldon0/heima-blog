---
title: 03-ç»„ä»¶é€šè®¯
---

## ç»„ä»¶é€šä¿¡

### 1. ç»„ä»¶é€šè®¯-æ¦‚å¿µ

> äº†è§£ç»„ä»¶é€šè®¯çš„æ„ä¹‰

å¤§è‡´æ­¥éª¤ï¼š

- çŸ¥é“ç»„ä»¶çš„ç‰¹ç‚¹
- çŸ¥é“ç»„ä»¶é€šè®¯æ„ä¹‰

å…·ä½“å†…å®¹ï¼š

1. ç»„ä»¶çš„ç‰¹ç‚¹
   - ç»„ä»¶æ˜¯`ç‹¬ç«‹ä¸”å°é—­`çš„å•å…ƒï¼Œé»˜è®¤æƒ…å†µä¸‹ï¼Œåªèƒ½ä½¿ç”¨ç»„ä»¶è‡ªå·±çš„æ•°æ®
   - åœ¨ç»„ä»¶åŒ–è¿‡ç¨‹ä¸­ï¼Œé€šå¸¸ä¼šå°†ä¸€ä¸ªå®Œæ•´çš„åŠŸèƒ½æ‹†åˆ†æˆå¤šä¸ªç»„ä»¶ï¼Œä»¥æ›´å¥½çš„å®Œæˆæ•´ä¸ªåº”ç”¨çš„åŠŸèƒ½
2. çŸ¥é“ç»„ä»¶é€šè®¯æ„ä¹‰
   - è€Œåœ¨è¿™ä¸ªè¿‡ç¨‹ä¸­ï¼Œå¤šä¸ªç»„ä»¶ä¹‹é—´ä¸å¯é¿å…çš„è¦`å…±äº«`æŸäº›æ•°æ®
   - ä¸ºäº†å®ç°è¿™äº›åŠŸèƒ½ï¼Œå°±éœ€è¦æ‰“ç ´ç»„ä»¶çš„ç‹¬ç«‹å°é—­æ€§ï¼Œè®©å…¶ä¸å¤–ç•Œæ²Ÿé€š
   - è¿™ä¸ªè¿‡ç¨‹å°±æ˜¯**ç»„ä»¶é€šè®¯**

**æ€»ç»“ï¼š**

- ç»„ä»¶çŠ¶æ€æ˜¯ç‹¬ç«‹çš„ï¼Œç»„ä»¶åŒ–ä¹‹åæ¶‰åŠçŠ¶æ€åŒæ­¥ï¼Œéœ€è¦è¿›è¡Œç»„ä»¶é€šè®¯

### 2. ç»„ä»¶é€šè®¯-porpsåŸºæœ¬ä½¿ç”¨

> èƒ½å¤Ÿé€šè¿‡propsä¼ é€’æ•°æ®å’Œæ¥æ”¶æ•°æ®

å¤§è‡´æ­¥éª¤ï¼š

- ä¼ é€’æ•°æ®å’Œæ¥æ”¶æ•°æ®çš„è¿‡ç¨‹
- å‡½æ•°ç»„ä»¶ä½¿ç”¨props
- ç±»ç»„ä»¶ä½¿ç”¨props

å…·ä½“å†…å®¹ï¼š

1. ä¼ é€’æ•°æ®å’Œæ¥æ”¶æ•°æ®çš„è¿‡ç¨‹
   - ä½¿ç”¨ç»„ä»¶çš„æ—¶å€™é€šè¿‡å±æ€§ç»‘å®šæ•°æ®ï¼Œåœ¨ç»„ä»¶å†…éƒ¨é€šè¿‡propsè·å–å³å¯ã€‚
2. å‡½æ•°ç»„ä»¶ä½¿ç”¨props

```jsx
// ä½¿ç”¨ç»„ä»¶
<Hello name="jack" age="20" />
// å®šä¹‰ç»„ä»¶ propsåŒ…å«{name:'jack',age:'20'}
function Hello(props) {
  return (
    <div>æ¥æ”¶åˆ°æ•°æ®:{props.name}</div>
  )
}
```

1. ç±»ç»„ä»¶ä½¿ç”¨props

```jsx
// ä½¿ç”¨ç»„ä»¶
<Hello name="jack" age="20" />
// å®šä¹‰ç»„ä»¶ propsåŒ…å«{name:'jack',age:'20'}
class Hello extends Component {
  render() {
    return (
      <div>æ¥æ”¶åˆ°çš„æ•°æ®:{this.props.age}</div>
    ) 
  }
}
```

**æ€»ç»“ï¼š**

- propsæ˜¯å®ç°ç»„ä»¶é€šè®¯çš„å…³é”®ï¼Œå®ƒé€šè¿‡ä½¿ç”¨ç»„ä»¶ç»‘å®šå±æ€§ï¼Œç»„ä»¶å†…éƒ¨ä½¿ç”¨propsæ¥ä¼ å€¼ã€‚

### 3. ç»„ä»¶é€šè®¯-porpsæ³¨æ„äº‹é¡¹

> çŸ¥é“propsæ˜¯å•é¡¹æ•°æ®æµåªè¯»ï¼Œä½†æ˜¯å¯ä»¥ä¼ é€’ä»»æ„æ•°æ®ã€‚

å¤§è‡´æ­¥éª¤ï¼š

- çŸ¥é“ä»€ä¹ˆæ˜¯å•å‘æ•°æ®æµ
- çŸ¥é“propså¯ä»¥ä¼ é€’ä»€ä¹ˆæ•°æ®

å…·ä½“å†…å®¹ï¼š

1. çŸ¥é“ä»€ä¹ˆæ˜¯å•å‘æ•°æ®æµï¼Ÿ

   - å•å‘æ•°æ®æµï¼Œæ˜¯ä»ä¸Šåˆ°ä¸‹çš„ï¼Œ`è‡ªé¡¶è€Œä¸‹`çš„ï¼Œæ•°æ®æµã€‚
   - å¥½æ¯”ï¼šæ²³æµï¼Œç€‘å¸ƒï¼Œåªèƒ½ä»ä¸Šå¾€ä¸‹æµåŠ¨ï¼Œä¸Šæ¸¸æ±¡æŸ“ä¸‹æ¸¸å—å½±å“ï¼Œä½†æ˜¯ä¸‹æ¸¸ä¸èƒ½å½±å“ä¸Šæ¸¸ã€‚
   - çˆ¶ç»„ä»¶ä¼ é€’æ•°æ®ç»™å­ç»„ä»¶ï¼Œçˆ¶ç»„ä»¶æ›´æ–°æ•°æ®å­ç»„ä»¶è‡ªåŠ¨æ¥æ”¶æ›´æ–°åæ•°æ®ï¼Œå½“æ˜¯å­ç»„ä»¶æ˜¯ä¸èƒ½ä¿®æ”¹æ•°æ®çš„ã€‚

2. propså¯ä»¥ä¼ é€’ä»€ä¹ˆæ•°æ®ï¼Ÿ

   ```
   ä»»æ„
   ```

   - å­—ç¬¦ä¸²
   - æ•°å­—
   - å¸ƒå°”
   - æ•°ç»„
   - å¯¹è±¡
   - å‡½æ•°
   - JSX ï¼ˆæ’æ§½ï¼‰

**æ€»ç»“ï¼š**

- propsä¼ é€’æ•°æ®æ˜¯å•å‘çš„ï¼Œå¯ä»¥ä¼ é€’ä»»æ„æ ¼å¼çš„æ•°æ®ã€‚

### 4. ç»„ä»¶é€šè®¯-çˆ¶ä¼ å­æ–¹å¼

> é€šè¿‡propså°†çˆ¶ç»„ä»¶çš„æ•°æ®ä¼ é€’ç»™å­ç»„ä»¶

å¤§è‡´æ­¥éª¤ï¼š

- çˆ¶ç»„ä»¶æä¾›è¦ä¼ é€’çš„stateæ•°æ®
- ç»™å­ç»„ä»¶æ ‡ç­¾æ·»åŠ å±æ€§ï¼Œå€¼ä¸º state ä¸­çš„æ•°æ®
- å­ç»„ä»¶ä¸­é€šè¿‡ props æ¥æ”¶çˆ¶ç»„ä»¶ä¸­ä¼ é€’çš„æ•°æ®

å…·ä½“ä»£ç ï¼š

1. çˆ¶ç»„ä»¶æä¾›è¦ä¼ é€’çš„stateæ•°æ®

```jsx
class Parent extends React.Component {
  state = {
    money: 10000
  }
  render() {
    return (
      <div>
        <h1>çˆ¶ç»„ä»¶ï¼š{this.state.money}</h1>
      </div>
    )
  }
}
```

1. ç»™å­ç»„ä»¶æ ‡ç­¾æ·»åŠ å±æ€§ï¼Œå€¼ä¸º state ä¸­çš„æ•°æ®

```diff
class Parent extends React.Component {
  state = {
    money: 10000
  }
  render() {
    return (
      <div>
        <h1>çˆ¶ç»„ä»¶ï¼š{this.state.money}</h1>
+        <Child money={this.state.money} />
      </div>
    )
  }
}
```

1. å­ç»„ä»¶ä¸­é€šè¿‡ props æ¥æ”¶çˆ¶ç»„ä»¶ä¸­ä¼ é€’çš„æ•°æ®

```jsx
function Child(props) {
	return (
  	<div>
    	<h3>å­ç»„ä»¶ï¼š{props.money}</h3>
    </div>
  )
}
```

**æ€»ç»“ï¼š**

- çˆ¶ç»„ä»¶å£°æ˜`state`,åœ¨å­ç»„ä»¶æ ‡ç­¾é€šè¿‡`å±æ€§ç»‘å®š`ï¼Œåœ¨å­ç»„ä»¶ä¸­é€šè¿‡`props`ä½¿ç”¨ã€‚

### 5. ç»„ä»¶é€šè®¯-çˆ¶ä¼ å­ç»ƒä¹ 

> é€šè¿‡æä¾›çš„ç´ æï¼Œåˆ©ç”¨çˆ¶ä¼ å­çŸ¥è¯†ï¼Œå®Œæˆä»¥ä¸‹ç»ƒä¹ 

ç•Œé¢å‚è€ƒï¼š

![img](https://wuxiaohui-1254415986.cos.ap-nanjing.myqcloud.com/uPic/1638932553590.fd985af3.png)

é…å¥—ç´ æï¼š

jsxç»“æ„

```jsx
<div className="parent">
        <h1>ä»Šæ—¥è¦é—»</h1>
        <div className="child">
          <h3>åšå®šä¸ç§»èµ°ä¸­å›½ç‰¹è‰²ç¤¾ä¼šä¸»ä¹‰æ³•æ²»é“è·¯</h3>
          <div className="detail">
            <span>æ–°åç¤¾</span>
            <span>774ç‚¹èµ</span>
          </div>
        </div>
        <div className="child">
          <h3>2021å¹´åº¦æ³•æ²»äººç‰©â€”â€”å€ªä¼¯è‹ </h3>
          <div className="detail">
            <span>å¤®è§†ç½‘</span>
            <span>774ç‚¹èµ</span>
          </div>
        </div>
        <div className="child">
          <h3>å²æœ«å¹´ç»ˆ æ„¿è¿™ä»½â€œæ¸©è‰¯â€ä¼´ä½ ä¹˜é£ç ´æµª </h3>
          <div className="detail">
            <span>å¤®è§†æ–°é—»å®¢æˆ·ç«¯</span>
            <span>248ç‚¹èµ</span>
          </div>
        </div>
      </div>
```

ç»„ä»¶æ ·å¼

```css
.parent {
  width: 500px;
  margin: 0 auto;
}
.parent  h1 {
  font-weight: normal;
  margin: 0;
  padding: 20px 0;
}
.child {
  width: 100%;
  box-sizing: border-box;
  margin-bottom: 10px;
}


.child  h3 {
  font-weight: normal;
  color: #333;
  margin: 0;
  padding: 10px 0;
}
.child .detail {
  font-size: 14px;
  color: #999;
}
.child .detail span {
  margin-right: 10px;
}
```

ç»„ä»¶æ•°æ®

```js
state = {
    list: [
      {
        id: 99,
        title: 'åšå®šä¸ç§»èµ°ä¸­å›½ç‰¹è‰²ç¤¾ä¼šä¸»ä¹‰æ³•æ²»é“è·¯',
        publisher: 'æ–°åç¤¾',
        like_count: 774
      },
      {
        id: 100,
        title: '2021å¹´åº¦æ³•æ²»äººç‰©â€”â€”å€ªä¼¯è‹',
        publisher: 'å¤®è§†ç½‘',
        like_count: 108669
      },
      {
        id: 101,
        title: 'å²æœ«å¹´ç»ˆ æ„¿è¿™ä»½â€œæ¸©è‰¯â€ä¼´ä½ ä¹˜é£ç ´æµª',
        publisher: 'å¤®è§†æ–°é—»å®¢æˆ·ç«¯',
        like_count: 1869934
      }
    ]
  }
```



1. å®ç°æ€è·¯
   1. æ–°å»ºæ ·å¼ `src/index.css` å‡†å¤‡æ ·å¼ï¼Œå¯¼å…¥åˆ°å…¥å£æ–‡ä»¶
   2. æ–°å»ºParentç»„ä»¶ï¼Œæ¸²æŸ“å‡†å¤‡çš„parentçš„ç»“æ„ï¼Œå¯¼å…¥åˆ°å…¥å£æ–‡ä»¶æ¸²æŸ“è¯¥ç»„ä»¶
   3. æ–°å»ºChildç»„ä»¶ï¼Œæ¸²æŸ“å‡†å¤‡çš„æ¸²æŸ“childçš„ç»“æ„ï¼Œå¯¼å…¥åˆ°Parentç»„ä»¶ä½¿ç”¨
   4. Parentç»„ä»¶ï¼Œå‚è€ƒç•Œé¢å®šä¹‰çŠ¶æ€ï¼Œé€šè¿‡çŠ¶æ€éå†Childç»„ä»¶ä¼ å€¼ï¼ŒChildç»„ä»¶æ ¹æ®propsæ¸²æŸ“ã€‚

### 6. ç»„ä»¶é€šè®¯-å­ä¼ çˆ¶æ–¹å¼

> é€šè¿‡propså°†å­ç»„ä»¶çš„æ•°æ®ä¼ é€’ç»™çˆ¶ç»„ä»¶

å¤§è‡´æ­¥éª¤ï¼š

- çˆ¶ç»„ä»¶æä¾›å›è°ƒå‡½æ•°ï¼Œé€šè¿‡propsä¼ é€’ç»™å­ç»„ä»¶
- å­ç»„ä»¶è°ƒç”¨propsä¸­çš„å›è°ƒå‡½æ•°ï¼Œå‡½æ•°å¯ä¼ å‚
- çˆ¶ç»„ä»¶å‡½æ•°çš„å‚æ•°å°±æ˜¯å­ç»„ä»¶ä¼ é€’çš„æ•°æ®

å…·ä½“ä»£ç ï¼š

1. çˆ¶ç»„ä»¶

```jsx
class Parent extends React.Component {
  state = {
    money: 10000
  }
	// å›è°ƒå‡½æ•°
	buyPhone = price => {
    this.setState({
      money: this.state.money - price
    })
  }
  render() {
    return (
      <div>
        <h1>çˆ¶ç»„ä»¶ï¼š{money}</h1>
        <Child money={this.state.money} buyPhone={this.buyPhone} />
      </div>
    )
  }
}
```

1. å­ç»„ä»¶

```jsx
const Child = (props) => {
  const handleClick = () => {
    // å­ç»„ä»¶è°ƒç”¨çˆ¶ç»„ä»¶ä¼ é€’è¿‡æ¥çš„å›è°ƒå‡½æ•°
		props.buyPhone(5000)
  }
  return (
    <div>
      <h3>å­ç»„ä»¶ï¼š{props.money}</h3>
      <button onClick={handleClick}>ä¹°æ‰‹æœº</button>
    </div>
  )
}
```

**æ€»ç»“ï¼š**

- å­ç»„ä»¶å¦‚ä½•ä¼ é€’æ•°æ®ç»™çˆ¶ç»„ä»¶ï¼Ÿè§¦å‘çˆ¶ç»„ä»¶ä¼ é€’çš„å›è°ƒå‡½æ•°ä¼ å…¥æ•°æ®
- çˆ¶ç»„ä»¶å¦‚ä½•æ¥æ”¶å­ç»„ä»¶çš„æ•°æ®ï¼Ÿå›è°ƒå‡½æ•°çš„å‚æ•°æ˜¯å­ç»„ä»¶ä¼ é€’çš„æ•°æ®
- çˆ¶ç»„ä»¶æ•°æ®æ›´æ–°åï¼Œä¼ é€’ç»™å­ç»„ä»¶çš„æ•°æ®æ˜¯å¦æ›´æ–°ï¼Ÿè‡ªåŠ¨æ›´æ–°

### 7. ç»„ä»¶é€šè®¯-å­ä¼ çˆ¶ç»ƒä¹ 

> é€šè¿‡æä¾›çš„ç´ æï¼Œåˆ©ç”¨å­ä¼ çˆ¶çŸ¥è¯†ï¼Œå®Œæˆç‚¹èµåŠŸèƒ½

ç•Œé¢å‚è€ƒï¼š

![img](https://wuxiaohui-1254415986.cos.ap-nanjing.myqcloud.com/uPic/1638932620944.52ef1c89.png)

é…å¥—ç´ æï¼š

1. jsxç»“æ„

```diff
<div className="child">
  <h3>åšå®šä¸ç§»èµ°ä¸­å›½ç‰¹è‰²ç¤¾ä¼šä¸»ä¹‰æ³•æ²»é“è·¯</h3>
  <div className="detail">
    <span>æ–°åç¤¾</span>
    <span>774ç‚¹èµ</span>
+    <span>ç‚¹èµ+1</span>
  </div>
</div>
```

1. æ–°å¢æ ·å¼

```css
.child .detail span:last-child {
  cursor: pointer;
  color: burlywood;
  user-select: none;
}
```

1. å®ç°æ€è·¯

   1. å­ç»„ä»¶ç»‘å®šç‚¹å‡»äº‹ä»¶æŒ‡å®šå¤„ç†å‡½æ•°
   2. åœ¨å¤„ç†å‡½æ•°ä¸­è°ƒç”¨çˆ¶ç»„ä»¶ä¼ é€’çš„å›è°ƒå‡½æ•°
   3. ç»™å›è°ƒå‡½æ•°ä¼ å…¥è¯„è®ºIDå’Œç‚¹èµåçš„æ•°é‡
   4. çˆ¶ç»„ä»¶åœ¨å›è°ƒå‡½æ•°ä¸­æ›´æ–°æ•°æ®

   ```js
   clickLike = id => {
     const newArr = this.state.list.map(item => {
       if (id === item.id) return { ...item, like_count: item.like_count + 1 }
       return item
     })
     this.setState({
       list: newArr
     })
   }
   ```

   

### 8. ç»„ä»¶é€šè®¯-å…„å¼Ÿç»„ä»¶é€šè®¯

> é€šè¿‡çŠ¶æ€æå‡æ€æƒ³å®Œæˆå…„å¼Ÿç»„ä»¶æ•°æ®é€šè®¯

å¤§è‡´æ­¥éª¤ï¼š

- çŠ¶æ€æå‡æ€æƒ³æ˜¯ä»€ä¹ˆï¼Ÿ
- æ¼”ç¤ºé€šè¿‡çŠ¶æ€æå‡å®Œæˆå…„å¼Ÿç»„ä»¶é€šè®¯ã€‚

å…·ä½“å†…å®¹ï¼š

1. çŠ¶æ€æå‡æ€æƒ³æ˜¯ä»€ä¹ˆï¼Ÿ
   - å°†å…±äº«çŠ¶æ€æå‡åˆ°æœ€è¿‘çš„å…¬å…±çˆ¶ç»„ä»¶ä¸­ï¼Œç”±å…¬å…±çˆ¶ç»„ä»¶ç®¡ç†è¿™ä¸ªçŠ¶æ€å’Œä¿®æ”¹çŠ¶æ€çš„æ–¹æ³•
   - éœ€è¦é€šè®¯çš„ç»„ä»¶é€šè¿‡propsæ¥æ”¶çŠ¶æ€å’Œå‡½æ•°å³å¯

![img](https://wuxiaohui-1254415986.cos.ap-nanjing.myqcloud.com/uPic/1638944148017.c33b506e.png)

1. å‚è€ƒä»£ç 

:::: code-group

::: code-group-item index.js:active

```js

import React, { Component } from 'react'
import ReactDOM from 'react-dom'


// å¯¼å…¥ä¸¤ä¸ªå­ç»„ä»¶
import Jack from './Jack'
import Rose from './Rose'


// App æ˜¯çˆ¶ç»„ä»¶
class App extends Component {
  // 1. çŠ¶æ€æå‡åˆ°çˆ¶ç»„ä»¶
  state = {
    msg: '',
  }


  changeMsg = msg => {
    this.setState({ msg })
  }
  
  render() {
    return (
      <div>
        <h1>æˆ‘æ˜¯Appç»„ä»¶</h1>
        {/* å…„å¼Ÿç»„ä»¶ 1 */}
        <Jack changeMsg={this.changeMsg}></Jack>
				{/* å…„å¼Ÿç»„ä»¶ 2 */}
        <Rose msg={this.state.msg}></Rose>
      </div>
    )
  }
}


// æ¸²æŸ“ç»„ä»¶
ReactDOM.render(<App />, document.getElementById('root'))
```

:::

::: code-group-item Rose.js:active

```js
import React, { Component } from 'react'


export default class Rose extends Component {
  render() {
    return (
      <div>
        <h3>æˆ‘æ˜¯Roseç»„ä»¶-{this.props.msg}</h3>
      </div>
    )
  }
}
```

:::

::: code-group-item Jack.js

```js
import React, { Component } from 'react'


export default class Jack extends Component {
  say = () => {
    // ä¿®æ”¹æ•°æ®
    this.props.changeMsg('you jump i look')
  }
  render() {
    return (
      <div>
        <h3>æˆ‘æ˜¯Jackç»„ä»¶</h3>
        <button onClick={this.say}>è¯´</button>
      </div>
    )
  }
}
```

:::

::::
-----

### 9. ç»„ä»¶é€šè®¯-contextè·¨çº§ç»„ä»¶é€šè®¯

> æŒæ¡ä½¿ç”¨contextå®ç°è·¨çº§ç»„ä»¶é€šè®¯

å¤§è‡´æ­¥éª¤ï¼š

- ä»€ä¹ˆæ˜¯è·¨çº§ç»„ä»¶é€šè®¯ï¼Ÿ
- contextæ€ä¹ˆå»ç†è§£ï¼Ÿ
- æ¼”ç¤ºä½¿ç”¨contextå®Œæˆè·¨çº§ç»„ä»¶é€šè®¯ã€‚

å…·ä½“å†…å®¹ï¼š

1. ä»€ä¹ˆæ˜¯è·¨çº§ç»„ä»¶é€šè®¯ï¼Ÿ
   - ç»„ä»¶é—´ç›¸éš”å¤šå±‚ï¼Œç†è§£æˆå”ä¾„ï¼Œç”šè‡³æ›´è¿œçš„äº²æˆšã€‚
2. contextæ€ä¹ˆå»ç†è§£
   - æœ¯è¯­ï¼šä¸Šä¸‹æ–‡
   - ç†è§£ï¼šä¸€ä¸ªèŒƒå›´ï¼Œåªè¦åœ¨è¿™ä¸ªèŒƒå›´å†…ï¼Œå°±å¯ä»¥è·¨çº§ç»„ä»¶é€šè®¯ã€‚ï¼ˆä¸éœ€è¦propså±‚å±‚ä¼ é€’ï¼‰

![img](https://wuxiaohui-1254415986.cos.ap-nanjing.myqcloud.com/uPic/1638932620946.11b91fb0.png)



### 10. Contextå®ç°æ€è·¯

+ è°ƒç”¨ React. createContext() åˆ›å»º Providerï¼ˆæä¾›æ•°æ®ï¼‰ å’Œ Consumerï¼ˆæ¶ˆè´¹æ•°æ®ï¼‰ ä¸¤ä¸ªç»„ä»¶ã€‚

```js
const { Provider, Consumer } = React.createContext()
```

+ ä½¿ç”¨ Provider ç»„ä»¶ä½œä¸ºçˆ¶èŠ‚ç‚¹ã€‚

```js
<Provider>
    <div className="App">
    	<Child1 />
    </div>
</Provider>
```

+ è®¾ç½® value å±æ€§ï¼Œè¡¨ç¤ºè¦ä¼ é€’çš„æ•°æ®ã€‚

```js
<Provider value={æ•°æ®}>
```

+ è°ƒç”¨ Consumer ç»„ä»¶æ¥æ”¶æ•°æ®ã€‚

```js
<Consumer>
	{data => <span>dataå‚æ•°è¡¨ç¤ºæ¥æ”¶åˆ°çš„æ•°æ® -- {data}</span>}
</Consumer>
```

**æ€»ç»“ï¼š**

- ä½¿ç”¨`creatContext()`åˆ›å»ºä¸€ä¸ªä¸Šä¸‹æ–‡å¯¹è±¡ï¼ŒåŒ…å«ï¼š`Provider` `Consumer` ç»„ä»¶ã€‚
- ä½¿ç”¨ `Provider` åŒ…è£¹ç»„ä»¶ï¼Œ`value` å±æ€§æ³¨å…¥`çŠ¶æ€ï¼Œå‡½æ•°`ï¼Œè¢«åŒ…è£¹ç»„ä»¶ä¸‹çš„ä»»ä½•ç»„ä»¶å¯ä»¥ä½¿ç”¨ã€‚
- ä½¿ç”¨ `Consumer` æ¶ˆè´¹ `Provider` æä¾›çš„æ•°æ®å’Œå‡½æ•°ï¼Œè¯­æ³•`{value=>ä½¿ç”¨æ•°æ®å’Œå‡½æ•°}`

## è¯„è®ºæ¡ˆä¾‹



:::tip

æ”¹é€ ä¹‹å‰çš„è¯„è®ºæ¡ˆä¾‹

:::



æ¡ˆä¾‹æ•ˆæœï¼šhttp://42.192.129.12/comment/

### 10. è¯„è®ºæ¡ˆä¾‹-ç»„ä»¶æ‹†åˆ†

> èƒ½å¤ŸæŒ‰ç…§åŠŸèƒ½ç»“æ„æ‹†åˆ†ç»„ä»¶ç»„ä»¶

å¤§è‡´æ­¥éª¤ï¼š

- åœ¨ `components` ä¸‹åˆ†åˆ«åˆ›å»º `CommentInput` `CommentHead` `CommentList` ä¸‰ä¸ªç»„ä»¶
- åœ¨ `index.js` åˆ›å»º `App` ç»„ä»¶ï¼Œç»„ç»‡ä¸Šé¢ä¸‰ä¸ªç»„ä»¶
- å‡†å¤‡ `index.css` æ”¯æŒæ ·å¼ï¼Œå¯¼å…¥åˆ° `index.js` å³å¯

```js
import React, { Component } from 'react'
import CommentInput from '../CommentInput'
import CommentHeader from '../CommentHeader'
import CommentList from '../CommentList'
import './index.css'

export default class Comment extends Component {
  render() {
    return (
      <div className="comments">
        <h3 className="comm-head">è¯„è®º</h3>
        <CommentInput />
        <CommentHeader />
        <CommentList />
      </div>
    )
  }
}
```

å­—ä½“å›¾æ ‡ï¼šåœ¨index.htmlå¤´éƒ¨å¼•å…¥ https://at.alicdn.com/t/font_2998849_vtlo0vj7ryi.css

**æ€»ç»“ï¼š**

- æŒ‰ç…§UIç»“æ„è¿›è¡Œç»„ä»¶æ‹†åˆ†

### 11. è¯„è®ºæ¡ˆä¾‹-åŸºç¡€æ¸²æŸ“

> æ ¹æ®é»˜è®¤çŠ¶æ€æ•°æ®æ¸²æŸ“åˆ—è¡¨

å¤§è‡´æ­¥éª¤ï¼š

- åœ¨ `App` ç»„ä»¶å‡†å¤‡çŠ¶æ€æ•°æ®ï¼Œä¼ é€’ç»™ `CommentList` ç»„ä»¶
- è¿›è¡Œæ¸²æŸ“ï¼Œéœ€è¦åŒºåˆ†ä¼šå‘˜ï¼Œæ§åˆ¶åˆ é™¤æŒ‰é’®ï¼Œå±•ç¤ºæ”¶è—çŠ¶æ€ï¼Œæ ¼å¼åŒ–æ—¶é—´

å…·ä½“ä»£ç ï¼š

1. åœ¨ `App` ç»„ä»¶å‡†å¤‡çŠ¶æ€æ•°æ®ï¼Œä¼ é€’ç»™ `CommentList` ç»„ä»¶

```js
state = {
    // ç”¨æˆ·ä¿¡æ¯
    user: {
      name: 'æ¸…é£å¾æ¥',
      avatar: 'https://static.youku.com/lvip/img/avatar/310/6.png',
      vip: true
    },
    // è¯„è®ºåˆ—è¡¨
    comments: [
      { 
        id: 100, 
        name: '__RichMan', 
        avatar: 'https://r1.ykimg.com/051000005BB36AF28B6EE4050F0E3BA6',
        content: 'è¿™é˜µå®¹æˆ‘å–œæ¬¢ğŸ˜é³ä¸œ&é—«å¦®ï¼Œå°±è¿™ä¿©åå­—ï¼Œæˆ‘å°±çŸ¥é“æ˜¯è‰¯å¿ƒå‰§é›†...é”äº†ğŸ”’',
        time: new Date('2021/10/12 10:10:23'),
        vip: true,
        collect: false
      },
      { 
        id: 101, 
        name: 'ç³–èœœç”œç­’é¢–', 
        avatar: 'https://image.9xsecndns.cn/image/uicon/712b2bbec5b58d6066aff202c9402abc3370674052733b.jpg',
        content: 'çªå›´ç¥ä»™é˜µå®¹ äººæ°‘çš„åä¹‰ç¬¬ä¸‰éƒ¨æ¥äº† é³ä¸œé™ˆæ™“é—«å¦®ç§¦å²šç­‰ä¼—å¤šä¼˜ç§€æ¼”å‘˜å®åŠ›æ´¾ å®ˆæŠ¤äººæ°‘çš„è´¢äº§ å†ç°å›½å®¶ä¼ä¸šå‘å±•å†ç¨‹',
        time: new Date('2021/09/23 15:12:44'),
        vip: false,
        collect: true
      },
        { 
        id: 102, 
        name: 'æ¸…é£å¾æ¥', 
        avatar: 'https://static.youku.com/lvip/img/avatar/310/6.png',
        content: 'ç¬¬ä¸€é›†çœ‹çš„æœ‰ç‚¹è´¹åŠ›ï¼ŒæŠ•å…¥ä¸äº†ï¼Œé—«å¦®ä¸å¤ªé€‚åˆå•Šï¼ŒèŒåœºçš„äººå“ªæœ‰é‚£ä¹ˆå¤šè¡¨æƒ…ï¼Œä¸€ç‚¹èŒåœºçš„æ„Ÿè§‰éƒ½æ²¡æœ‰',
        time: new Date('2021/07/01 00:30:51'),
        vip: true,
        collect: false
      }
    ]
  }
render() {
+    const {user, comments} = this.state
    return (
      <div className="comments">
        {/* è¾“å…¥æ¡†ç»„ä»¶ */}
        <CommentInput />
        {/* æ ‡é¢˜æ’åºç»„ä»¶ */}
        <CommentHead />
        {/* åˆ—è¡¨ç»„ä»¶ */}
+        <CommentList user={user} comments={comments} />
      </div>
    )
  }
```

1. è¿›è¡Œæ¸²æŸ“ï¼Œéœ€è¦åŒºåˆ†ä¼šå‘˜ï¼Œæ§åˆ¶åˆ é™¤æŒ‰é’®ï¼Œå±•ç¤ºæ”¶è—çŠ¶æ€ï¼Œæ ¼å¼åŒ–æ—¶é—´
   - æ ¼å¼åŒ–æ—¶é—´éœ€è¦å®‰è£… `dayjs`

```jsx
import dayjs from 'dayjs'
const CommentList = (props) => {
  // æ ¼å¼æ—¶é—´
  const formatTime = time => dayjs(time).format('YYYY/MM/DD HH:mm:ss')
  return (
    <ul className="comm-list">
      {props.comments.map((item) => (
        <li className="comm-item" key={item.id}>
          <div className="avatar" style={{backgroundImage:`url(${item.avatar})`}}></div>
          <div className="info">
            <p className={`name ${item.vip?'vip':''}`}>
              {item.name}
              {item.vip && <img alt="" src={"https://gw.alicdn.com/tfs/TB1c5JFbGSs3KVjSZPiXXcsiVXa-48-48.png"}/>}
            </p>
            <p className="time">
              <span>{formatTime(item.time)}</span>
              <span className={`iconfont icon-collect${item.collect?'-sel':''}`}></span>
              {item.name===props.user.name && <span className="del">åˆ é™¤</span>}
            </p>
            <p>{item.content}</p>
          </div>
        </li>
      ))}
    </ul>
  );
};


export default CommentList;
```

**æ€»ç»“ï¼š**

- çŠ¶æ€æ•°æ®éƒ½åœ¨ `App` ç»„ä»¶ï¼Œå…¶ä»–ç»„ä»¶éƒ½æœ‰å…±äº«çš„
- æ ¼å¼åŒ–æ—¶é—´ä½¿ç”¨ `dayjs` å®šä¹‰ä¸€ä¸ªå‡½æ•°è½¬æ¢ï¼Œå¤æ‚ç±»åçš„æ§åˆ¶å¤§å®¶å¯ä»¥å°è¯• `classnames`ã€‚

### 12. è¯„è®ºæ¡ˆä¾‹-æ’åºåŠŸèƒ½

> æ ¹æ®é€‰æ‹©çš„æ’åºæ–¹å¼æ›´æ–°åˆ—è¡¨

å¤§è‡´æ­¥éª¤ï¼š

- åœ¨`App`ç»„ä»¶å®šä¹‰å½“å‰æ’åºæ–¹å¼æ•°æ®ï¼Œå’Œä¿®æ”¹æ•°æ®çš„å‡½æ•°
- ä¼ å…¥ `CommentHead` ç»„ä»¶ï¼Œç‚¹å‡»æ’åºçš„æ—¶å€™ä¿®æ”¹æ’åºæ–¹å¼æ•°æ®
- åœ¨ `CommentList` ç»„ä»¶ï¼Œæ ¹æ®åˆ—è¡¨æ•°æ®å’Œæ’åºæ–¹å¼å¾—åˆ°æ–°çš„åˆ—è¡¨æ•°æ®ï¼Œæ¸²æŸ“å³å¯

å…·ä½“ä»£ç ï¼š

1. åœ¨`App`ç»„ä»¶å®šä¹‰å½“å‰æ’åºæ–¹å¼æ•°æ®ï¼Œå’Œä¿®æ”¹æ•°æ®çš„å‡½æ•°

```diff
state = {
    // ...çœç•¥
    active: 'default'
  }
setActive = value => {
    if (value !== this.state.active) {
      this.setState({ active: value })
    }
  }
```

1. ä¼ å…¥ `CommentHead` ç»„ä»¶ï¼Œç‚¹å‡»æ’åºçš„æ—¶å€™ä¿®æ”¹æ’åºæ–¹å¼æ•°æ®

```js
Appç»„ä»¶
render() {
+    const {user, comments, active} = this.state
    return (
      <div className="comments">
        {/* è¾“å…¥æ¡†ç»„ä»¶ */}
        <CommentInput />
        {/* æ ‡é¢˜æ’åºç»„ä»¶ */}
+        <CommentHead active={active} setActive={this.setActive} comments={comments} />
CommentHeadç»„ä»¶
const CommentHead = (props) => {
  return (
    <h3 className="comm-head">
      çƒ­é—¨è¯„è®º<sub>({props.comments.length})</sub>
      <span
        onClick={() => props.setActive('default')}
        className={props.active === 'default' ? 'active' : ''}
      >
        é»˜è®¤
      </span>
      <span
        onClick={() => props.setActive('time')}
        className={props.active === 'time' ? 'active' : ''}
      >
        æ—¶é—´
      </span>
    </h3>
  );
};


export default CommentHead;
```

1. åœ¨ `CommentList` ç»„ä»¶ï¼Œæ ¹æ®åˆ—è¡¨æ•°æ®å’Œæ’åºæ–¹å¼å¾—åˆ°æ–°çš„åˆ—è¡¨æ•°æ®ï¼Œæ¸²æŸ“å³å¯

```
Appç»„ä»¶
{/* åˆ—è¡¨ç»„ä»¶ */}
+        <CommentList user={user} comments={comments} active={active}/>
CommentListç»„ä»¶
import dayjs from 'dayjs';
const CommentList = (props) => {
  // æ ¼å¼æ—¶é—´
  const formatTime = (time) => dayjs(time).format('YYYY/MM/DD HH:mm:ss');
+  // å¾—åˆ°æ’åºåçš„æ•°ç»„
+  const newList = [...props.comments];
+  if (props.active === 'default') {
+    newList.sort((p, c) => c.id - p.id);
+  }
+  if (props.active === 'time') {
+    newList.sort((p, c) => c.time - p.time);
+  }
  return (
    <ul className="comm-list">
+      {newList.map((item) => (
        <li className="comm-item" key={item.id}>
```

**æ€»ç»“ï¼š**

- å…ˆå®šä¹‰ active æ•°æ® setActive å‡½æ•°
- ç‚¹å‡»æ’åºä¿®æ”¹ active
- æ ¹æ® active å’Œ åˆ—è¡¨æ•°æ® è¿›è¡Œæ’åº

### 13. è¯„è®ºæ¡ˆä¾‹-å‘è¡¨è¯„è®º

> é€šè¿‡å­ä¼ çˆ¶å®Œæˆå‘è¡¨è¯„è®ºåŠŸèƒ½

å¤§è‡´æ­¥éª¤ï¼š

- è¾“å…¥æ¡†å˜ä¸ºå—æ§ç»„ä»¶ï¼Œç°åœ¨è¾“å…¥å­—æ•°100
- ç‚¹å‡»å‘è¡¨è¯„è®ºï¼Œå°†å†…å®¹ä¼ é€’ç»™Appç»„ä»¶ï¼Œåœ¨Appè‡ªå·±å®Œæˆè¿½åŠ è¯„è®º

å…·ä½“ä»£ç ï¼š

1. è¾“å…¥æ¡†å˜ä¸ºå—æ§ç»„ä»¶ï¼Œç°åœ¨è¾“å…¥å­—æ•°100

```js
CommentInputç»„ä»¶
import React, { Component } from 'react';


export default class CommentInput extends Component {
  state = {
    content: '',
  };
  setContent = (e) => {
    const value = e.target.value.trim();
    if ( value.length <= 100) {
      this.setState({ content: value })
    }
  };
  render() {
    return (
      <>
        <h3 className="comm-head">è¯„è®º</h3>
        <div className="comm-input">
          <textarea
            value={this.state.content}
            onChange={this.setContent}
            placeholder="çˆ±å‘è¯„è®ºçš„äººï¼Œè¿æ°”éƒ½å¾ˆæ£’"
          ></textarea>
          <div className="foot">
            <div className="word">{this.state.content.length}/100</div>
            <div className="btn">å‘è¡¨è¯„è®º</div>
          </div>
        </div>
      </>
    );
  }
}
```

1. ç‚¹å‡»å‘è¡¨è¯„è®ºï¼Œå°†å†…å®¹ä¼ é€’ç»™Appç»„ä»¶ï¼Œåœ¨Appè‡ªå·±å®Œæˆè¿½åŠ è¯„è®º

```js
CommentInputç»„ä»¶
  handleClick = () => {
    this.props.addComment(this.state.content)
    this.setState({content: ''})
  }
  render() {
    return (
      <>
        <h3 className="comm-head">è¯„è®º</h3>
        <div className="comm-input">
          <textarea
            value={this.state.content}
            onChange={this.setContent}
            placeholder="çˆ±å‘è¯„è®ºçš„äººï¼Œè¿æ°”éƒ½å¾ˆæ£’"
          ></textarea>
          <div className="foot">
            <div className="word">{this.state.content.length}/100</div>
+            <div className="btn" onClick={this.handleClick}>å‘è¡¨è¯„è®º</div>
          </div>
        </div>
      </>
    );
  }
APPç»„ä»¶
// å‘è¡¨è¯„è®º
  addComment = content  => {
    // é€’å¢ID
    const id = Math.max(...this.state.comments.map(item=>item.id)) + 1
    const newComment = {
      ...this.state.user,
      id,
      content,
      time: new Date(),
      collect: false
    }
    this.setState({
      comments: [...this.state.comments,newComment, ]
    })
  }
{/* è¾“å…¥æ¡†ç»„ä»¶ */}
+        <CommentInput addComment={this.addComment}/>
```

**æ€»ç»“ï¼š**

- CommentInputç»„ä»¶æŠŠè¯„è®ºå†…å®¹ä¼ é€’ç»™Appç»„ä»¶ï¼Œç„¶åç»„ç»‡å®Œæ•´çš„è¯„è®ºå¯¹è±¡æ·»åŠ åˆ°æ•°ç»„

### 14. è¯„è®ºæ¡ˆä¾‹-åˆ é™¤è¯„è®º

> é€šè¿‡å­ä¼ çˆ¶å®Œæˆåˆ é™¤è¯„è®ºåŠŸèƒ½

å¤§è‡´æ­¥éª¤ï¼š

- `App` ç»„ä»¶æä¾›åˆ é™¤çš„å‡½æ•°ï¼Œæ ¹æ®IDåˆ é™¤æ•°æ®ï¼Œå¹¶ä¸”ä¼ é€’ç»™ `CommentList` ç»„ä»¶
- `CommentList` ç»„ä»¶ç»‘å®šåˆ é™¤æŒ‰é’®ç‚¹å‡»äº‹ä»¶ï¼Œè°ƒç”¨`props`ä¸­çš„åˆ é™¤å‡½æ•°ä¼ å…¥ID

å…·ä½“ä»£ç ï¼š

1. `App` ç»„ä»¶æä¾›åˆ é™¤çš„å‡½æ•°ï¼Œæ ¹æ®IDåˆ é™¤æ•°æ®ï¼Œå¹¶ä¸”ä¼ é€’ç»™ `CommentList` ç»„ä»¶

```jsx
// åˆ é™¤è¯„è®º
  delComment = id => {
    this.setState({
      comments: this.state.comments.filter(item=>item.id!==id)
    })
  }
{/* åˆ—è¡¨ç»„ä»¶ */}
        <CommentList 
          user={user} 
          comments={comments} 
          active={active} 
+          delComment={this.delComment}
        />
```

1. `CommentList` ç»„ä»¶ç»‘å®šåˆ é™¤æŒ‰é’®ç‚¹å‡»äº‹ä»¶ï¼Œè°ƒç”¨`props`ä¸­çš„åˆ é™¤å‡½æ•°ä¼ å…¥ID

```jsx
<span onClick={()=>props.delComment(item.id)} className="del">åˆ é™¤</span>
```

**æ€»ç»“ï¼š**

- é€šè¿‡å­ä¼ çˆ¶æŠŠidç»™çˆ¶ç»„ä»¶å»åˆ é™¤æ•°æ®

### 15. è¯„è®ºæ¡ˆä¾‹-æ”¶è—è¯„è®º

> é€šè¿‡å­ä¼ çˆ¶å®Œæˆæ”¶è—è¯„è®ºåŠŸèƒ½

å¤§è‡´æ­¥éª¤ï¼š

- `App` ç»„ä»¶æä¾›æ”¶è—å‡½æ•°ï¼Œæ ¹æ®IDè¿›è¡Œæ”¶è—&å–æ¶ˆæ”¶è—ï¼Œå¹¶ä¸”ä¼ é€’ç»™ `CommentList` ç»„ä»¶
- `CommentList` ç»„ä»¶ç»‘å®šæ”¶è—æŒ‰é’®ç‚¹å‡»äº‹ä»¶ï¼Œè°ƒç”¨`props`ä¸­çš„æ”¶è—å‡½æ•°ä¼ å…¥ID

å…·ä½“ä»£ç ï¼š

1. `App` ç»„ä»¶æä¾›æ”¶è—å‡½æ•°ï¼Œæ ¹æ®IDè¿›è¡Œæ”¶è—&å–æ¶ˆæ”¶è—ï¼Œå¹¶ä¸”ä¼ é€’ç»™ `CommentList` ç»„ä»¶

```jsx
// æ”¶è—è¯„è®º&å–æ¶ˆæ”¶è—
  collectComment = id => {
    this.setState({
      comments: this.state.comments.map(item=>{
        if ( item.id === id ) {
          return {...item, collect: !item.collect}
        } else {
          return item
        }
      })
    })
  }
{/* åˆ—è¡¨ç»„ä»¶ */}
        <CommentList 
          user={user} 
          comments={comments} 
          active={active} 
          delComment={this.delComment}
+          collectComment={this.collectComment}
        />
```

1. `CommentList` ç»„ä»¶ç»‘å®šæ”¶è—æŒ‰é’®ç‚¹å‡»äº‹ä»¶ï¼Œè°ƒç”¨`props`ä¸­çš„æ”¶è—å‡½æ•°ä¼ å…¥ID

```jsx
<span
                onClick={()=>props.collectComment(item.id)}
                className={`iconfont icon-collect${item.collect ? '-sel' : ''}`}
              ></span>
```

**æ€»ç»“ï¼š**

- é€šè¿‡å­ä¼ çˆ¶æŠŠidç»™çˆ¶ç»„ä»¶å»ä¿®æ”¹æ•°æ®

## props æ·±å…¥

### 16. props-childrenå±æ€§

> æŒæ¡propsä¸­childrenå±æ€§çš„ç”¨æ³•

å¤§è‡´æ­¥éª¤ï¼š

- propsä¸­childrenå±æ€§ä»£è¡¨ä»€ä¹ˆ?
- propsä¸­childrenå±æ€§çš„ä½¿ç”¨
- ä½¿ç”¨ propsä¸­childrenå±æ€§ å°è£… `NavBar` ç»„ä»¶

å…·ä½“å†…å®¹ï¼š

1. propsä¸­childrenå±æ€§ä»£è¡¨ä»€ä¹ˆ?
   - ç»„ä»¶æ ‡ç­¾çš„å­èŠ‚ç‚¹ï¼ˆæ ‡ç­¾ä¹‹é—´çš„å†…å®¹ï¼‰ï¼Œå¯ä»¥æ˜¯ä»»æ„å€¼ï¼ˆæ–‡æœ¬ï¼ŒReactå…ƒç´ ï¼Œç»„ä»¶ï¼Œå‡½æ•°ï¼‰
2. propsä¸­childrenå±æ€§çš„ä½¿ç”¨

```jsx
// å®šä¹‰ç»„ä»¶
const Hello = props => {
  return (
    <div>
      è¯¥ç»„ä»¶çš„å­èŠ‚ç‚¹ï¼š{props.children}
    </div>
  )
}
// ä½¿ç”¨ç»„ä»¶
<Hello>æˆ‘æ˜¯å­èŠ‚ç‚¹</Hello>
```

3. ä½¿ç”¨ propsä¸­childrenå±æ€§ å°è£… `NavBar` ç»„ä»¶

![image-20220110132455806](https://wuxiaohui-1254415986.cos.ap-nanjing.myqcloud.com/uPic/image-20220110132455806.png)

```js
import React, { Component } from 'react'

const NavBar = props => {
  return (
    <h3>&lt;&nbsp;{props.children}</h3>
  )
}

export default class App extends Component {
  render() {
    return (
      <>
        <NavBar>æ–‡ç« è¯¦æƒ…</NavBar>
        <NavBar>æ–‡ç« åˆ—è¡¨</NavBar>
        <NavBar>æˆ‘çš„<span style={{color:'red'}}>ç‚¹èµ</span></NavBar>
      </>
    )
  } 
}
```

### 17. propsæ ¡éªŒ

ç›®çš„ï¼šæ ¡éªŒæ¥æ”¶çš„propsçš„æ•°æ®ç±»å‹ï¼Œå¢åŠ ç»„ä»¶çš„å¥å£®æ€§

å¯¹äºç»„ä»¶æ¥è¯´ï¼Œpropsæ˜¯å¤–æ¥çš„ï¼Œæ— æ³•ä¿è¯ç»„ä»¶ä½¿ç”¨è€…ä¼ å…¥ä»€ä¹ˆæ ¼å¼çš„æ•°æ®

å¦‚æœä¼ å…¥çš„æ•°æ®æ ¼å¼ä¸å¯¹ï¼Œå¯èƒ½ä¼šå¯¼è‡´ç»„ä»¶å†…éƒ¨æŠ¥é”™ã€‚**ç»„ä»¶çš„ä½¿ç”¨è€…ä¸èƒ½å¾ˆæ˜ç¡®çš„çŸ¥é“é”™è¯¯çš„åŸå› ã€‚**

![](https://wuxiaohui-1254415986.cos.ap-nanjing.myqcloud.com/uPic/props%E6%A0%A1%E9%AA%8C-1792696.png)

propsæ ¡éªŒå…è®¸åœ¨åˆ›å»ºç»„ä»¶çš„æ—¶å€™ï¼Œå°±çº¦å®špropsçš„æ ¼å¼ã€ç±»å‹ç­‰

![](https://wuxiaohui-1254415986.cos.ap-nanjing.myqcloud.com/uPic/props%E6%A0%A1%E9%AA%8C02-1792696.png)

ä½œç”¨ï¼šè§„å®šæ¥æ”¶çš„propsçš„ç±»å‹å¿…é¡»ä¸ºæ•°ç»„ï¼Œå¦‚æœä¸æ˜¯æ•°ç»„å°±ä¼šæŠ¥é”™ï¼Œå¢åŠ ç»„ä»¶çš„å¥å£®æ€§ã€‚

![](https://wuxiaohui-1254415986.cos.ap-nanjing.myqcloud.com/uPic/props%E6%A0%A1%E9%AA%8C03-1792696.png)

#### ä½¿ç”¨æ­¥éª¤

2. å¯¼å…¥ prop-types åŒ…
3. ä½¿ç”¨ç»„ä»¶å.propTypes = {} æ¥ç»™ç»„ä»¶çš„propsæ·»åŠ æ ¡éªŒè§„åˆ™
4. æ ¡éªŒè§„åˆ™é€šè¿‡ PropTypes å¯¹è±¡æ¥æŒ‡å®š

```js
import PropTypes from 'prop-types'
function App(props) {
    return (
    	<h1>Hi, {props.colors}</h1>
    )
}
App.propTypes = {
    // çº¦å®šcolorså±æ€§ä¸ºarrayç±»å‹
    // å¦‚æœç±»å‹ä¸å¯¹ï¼Œåˆ™æŠ¥å‡ºæ˜ç¡®é”™è¯¯ï¼Œä¾¿äºåˆ†æé”™è¯¯åŸå› 
    colors: PropTypes.array
}
```

#### çº¦æŸè§„åˆ™

1. å¸¸è§ç±»å‹ï¼šarrayã€boolã€funcã€numberã€objectã€string
2. Reactå…ƒç´ ç±»å‹ï¼šelement
3. å¿…å¡«é¡¹ï¼šisRequired
4. ç‰¹å®šç»“æ„çš„å¯¹è±¡ï¼šshape({})

```js
// å¸¸è§ç±»å‹
optionalFunc: PropTypes.func,
// å¿…é€‰
requiredFunc: PropTypes.func.isRequired,
// ç‰¹å®šç»“æ„çš„å¯¹è±¡
optionalObjectWithShape: PropTypes.shape({
	color: PropTypes.string,
	fontSize: PropTypes.number
})
```

#### propsé»˜è®¤å€¼

åœºæ™¯ï¼šåˆ†é¡µç»„ä»¶  æ¯é¡µæ˜¾ç¤ºæ¡æ•°
ä½œç”¨ï¼šç»™ props è®¾ç½®é»˜è®¤å€¼ï¼Œåœ¨æœªä¼ å…¥ props æ—¶ç”Ÿæ•ˆ

```js
function App(props) {
    return (
        <div>
            æ­¤å¤„å±•ç¤ºpropsçš„é»˜è®¤å€¼ï¼š{props.pageSize}
        </div>
    )
}
// è®¾ç½®é»˜è®¤å€¼
App.defaultProps = {
	pageSize: 10
}
// ä¸ä¼ å…¥pageSizeå±æ€§
<App />
```

## ä»Šæ—¥æ€»ç»“

1. ç»„ä»¶çŠ¶æ€ç‰¹ç‚¹ï¼Ÿ
   - ç›¸äº’ç‹¬ç«‹çš„ï¼Œäº’ä¸å½±å“ã€‚
2. propså¦‚ä½•ä½¿ç”¨ï¼Ÿ
   - ç»™ç»„ä»¶æ ‡ç­¾ä¸Šç»‘å®šå±æ€§ï¼Œç»„ä»¶ä¸­propså»ä½¿ç”¨ã€‚
3. propsæ³¨æ„äº›ä»€ä¹ˆï¼Ÿ
   - ä¼ é€’çš„æ•°æ®æ˜¯å•å‘çš„ä¸èƒ½æ”¹ï¼Œå¯ä»¥ä¼ é€’ä»»æ„æ•°æ®ã€‚
4. çˆ¶ä¼ å­å¦‚ä½•å®ç°ï¼Ÿ
   - çˆ¶ç»„ä»¶å®šä¹‰æ•°æ®ï¼Œç»™å­ç»„ä»¶æ ‡ç­¾ç»‘å®šï¼Œå­ç»„ä»¶é€šè¿‡propsè·å–
5. å­ä¼ çˆ¶å¦‚ä½•å®ç°?
   - çˆ¶ç»„ä»¶æä¾›å‡½æ•°ï¼Œç»™å­ç»„ä»¶æ ‡ç­¾ç»‘å®šï¼Œå­ç»„ä»¶é€šè¿‡propsè°ƒç”¨ä¸”ä¼ å‚
6. å…„å¼Ÿç»„ä»¶é€šè®¯å¦‚ä½•å®ç°ï¼Ÿ
   - é€šè¿‡çŠ¶æ€æå‡æ€æƒ³ï¼Œæ•°æ®å’Œä¿®æ”¹æ•°æ®æ”¾åœ¨æœ€è¿‘çš„çˆ¶ç»„ä»¶ï¼Œä¼ ç»™å…„å¼Ÿç»„ä»¶ä½¿ç”¨å’Œä¿®æ”¹æ•°æ®
7. è·¨çº§ç»„ä»¶é€šè®¯å¦‚ä½•å®ç°ï¼Ÿ
   - é€šè¿‡`createContext`å¯¹è±¡ï¼Œæä¾›æ³¨å…¥æ•°æ®çš„ç»„ä»¶`Provider`ï¼Œå’Œæ¶ˆè´¹æ•°æ®çš„ç»„ä»¶`Consumer`
8. porpsçš„childrenä½œç”¨ï¼Ÿ
   - è·å–ç»„ä»¶æ ‡ç­¾ä¹‹å‰çš„èŠ‚ç‚¹å†…å®¹ï¼Œä»»ä½•ç±»å‹ã€‚                                                                                                                                                                                   

## ä»Šæ—¥ä½œä¸š

todomvc æ¡ˆä¾‹

### 1. åŸºæœ¬ç»“æ„æ­å»º

todoæ¡ˆä¾‹åŸºç¡€æ¨¡ç‰ˆåœ°å€ï¼š [todo-app-template](https://gitee.com/destiny001/todo-app-template)

å°†åŸºç¡€æ¨¡ç‰ˆåŠ å…¥åˆ°reactè„šæ‰‹æ¶ä¸­

App ç»„ä»¶

```jsx
import React,{ Component } from 'react'

class App extends Component {
  render () {
    return (
      <section className="todoapp">
        <header className="header">
          <h1>todos</h1>
          <input className="new-todo" placeholder="What needs to be done?" autoFocus />
        </header>
        <section className="main">
          <input id="toggle-all" className="toggle-all" type="checkbox" />
          <label htmlFor="toggle-all">Mark all as complete</label>
          <ul className="todo-list">
            <li className="completed">
              <div className="view">
                <input className="toggle" type="checkbox" checked />
                <label>Taste JavaScript</label>
                <button className="destroy"></button>
              </div>
              <input className="edit" value="Create a TodoMVC template" />
            </li>
            <li>
              <div className="view">
                <input className="toggle" type="checkbox" />
                <label>Buy a unicorn</label>
                <button className="destroy"></button>
              </div>
              <input className="edit" value="Rule the web" />
            </li>
          </ul>
        </section>
        <footer className="footer">
          <span className="todo-count"><strong>0</strong> item left</span>
          <ul className="filters">
            <li>
              <a className="selected" href="#/">All</a>
            </li>
            <li>
              <a href="#/active">Active</a>
            </li>
            <li>
              <a href="#/completed">Completed</a>
            </li>
          </ul>
          <button className="clear-completed">Clear completed</button>
        </footer>
      </section>
    )
  }
}


export default App
```

å¤åˆ¶æ ·å¼æ–‡ä»¶å¹¶å¼•å…¥

```jsx
//App.js
import './css/index.css'
```

### 2. éœ€æ±‚

+ æŠ½ç¦»ç»„ä»¶

  + Header

  + Main
  + Footer

+ æ¸²æŸ“æ•°æ®

+ æ·»åŠ ä»»åŠ¡

+ åˆ é™¤ä»»åŠ¡

+ æ›´æ–°å®ŒæˆçŠ¶æ€âœ…

+ åº•éƒ¨åˆ‡æ¢

  + æ ·å¼åˆ‡æ¢
  + æ•°æ®åˆ‡æ¢

+ å…¨é€‰åŠŸèƒ½