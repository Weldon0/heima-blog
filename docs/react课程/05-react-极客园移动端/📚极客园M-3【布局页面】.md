# ğŸ“šæå®¢å›­M-3ã€å¸ƒå±€é¡µé¢ã€‘

## 01-å¸ƒå±€é¡µé¢ç»“æ„

**ç›®æ ‡**ï¼šèƒ½å¤Ÿä½¿ç”¨å‡†å¤‡å¥½çš„æ¨¡æ¿æ­å»ºå¸ƒå±€é¡µé¢ç»“æ„

**åˆ†æè¯´æ˜**ï¼š

TabBar ç»„ä»¶ï¼š

```tsx
const tabs = [
  {
    key: 'home',
    title: 'é¦–é¡µ',
    icon: <AppOutline />,
    badge: Badge.dot
  },
  {
    key: 'todo',
    title: 'æˆ‘çš„å¾…åŠ',
    icon: <UnorderedListOutline />,
    badge: '5'
  },
  {
    key: 'message',
    title: 'æˆ‘çš„æ¶ˆæ¯',
    icon: (active: boolean) => (active ? <MessageFill /> : <MessageOutline />),
    badge: '99+'
  },
  {
    key: 'personalCenter',
    title: 'ä¸ªäººä¸­å¿ƒ',
    icon: <UserOutline />
  }
]




<TabBar className="tab-bar">
  {tabs.map(item => (
    <TabBar.Item
      key={item.key}
      // æ³¨æ„ï¼šè¯¥å½¢å¼åªèƒ½ä½¿ç”¨ä¸€ä¸ªå›¾æ ‡ï¼Œåœ¨æ˜¯å¦é«˜äº®æ—¶ï¼Œå…·æœ‰ä¸åŒçš„é¢œè‰²
      // icon={<UserOutline />}


      // icon çš„å€¼å¯ä»¥æ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œé€šè¿‡è¿™ç§æ–¹å¼ï¼Œå°±å¯ä»¥è§‰å¾—æ¸²æŸ“ä¸åŒçš„å›¾æ ‡
      icon={(active: boolean) => {
        // æ­¤å¤„çš„å‚æ•° active è¡¨ç¤ºï¼šå½“å‰é¡¹æ˜¯å¦é«˜äº®
        console.log(active, item.title)
        return active ? <MessageFill /> : <UserOutline />
      }}
      title={item.title}
      />
  ))}
</TabBar>
```

**æ­¥éª¤**ï¼š

1. å°†æ¨¡æ¿æ‹·è´åˆ°é¡¹ç›®ä¸­
2. åœ¨ Layout ç»„ä»¶ä¸­é…ç½®åº•éƒ¨ TabBar å¯¹åº”çš„è·¯ç”±
3. ä½¿ç”¨ antd-mobile çš„ TabBar ç»„ä»¶åˆ›å»ºåº•éƒ¨æ ‡ç­¾æ 

**æ ¸å¿ƒä»£ç **ï¼š

Layout/index.tsx ä¸­ï¼š

```tsx
import { Route } from 'react-router-dom';
import { TabBar } from 'antd-mobile';
import styles from './index.module.scss';


import Icon from '@/components/Icon';


// å¯¼å…¥é¡µé¢ç»„ä»¶ï¼Œé…ç½®è·¯ç”±
import Home from '../Home';
import Question from '../Question';
import Video from '../Video';
import Profile from '../Profile';


const tabs = [
  { path: '/home/index', icon: 'iconbtn_home', text: 'é¦–é¡µ' },
  { path: '/home/question', icon: 'iconbtn_qa', text: 'é—®ç­”' },
  { path: '/home/video', icon: 'iconbtn_video', text: 'è§†é¢‘' },
  { path: '/home/profile', icon: 'iconbtn_mine', text: 'æˆ‘çš„' },
];


const Layout = () => {
  return (
    <div className={styles.root}>
      <Route exact path="/home/index">
        <Home></Home>
      </Route>
      <Route path="/home/question">
        <Question></Question>
      </Route>
      <Route path="/home/video">
        <Video></Video>
      </Route>
      <Route path="/home/profile">
        <Profile></Profile>
      </Route>


      <TabBar className="tab-bar">
        {tabs.map((item) => (
          <TabBar.Item
            key={item.path}
            icon={(active) => (
              <Icon
                type={active ? `${item.icon}_sel` : item.icon}
                className="tab-bar-item-icon"
              />
            )}
            title={item.text}
          />
        ))}
      </TabBar>
    </div>
  );
};


export default Layout;
```

## 02-TabBar é…åˆè·¯ç”±ä½¿ç”¨

**ç›®æ ‡**ï¼šèƒ½å¤Ÿå®ç° tab åˆ‡æ¢è·¯ç”±å’Œé«˜äº®

**åˆ†æè¯´æ˜**ï¼š

TabBar é«˜äº®çš„ä¸¤ç§æƒ…å†µï¼š

1. ç‚¹å‡»å“ªä¸ª tabï¼Œå“ªä¸ª tab é«˜äº®
2. åˆ·æ–°é¡µé¢æ—¶ï¼Œæ ¹æ®å½“å‰è·¯ç”±è®©å¯¹åº” tab é«˜äº®

å› ä¸º tab é«˜äº®ä¸è·¯ç”±ç›¸å…³ï¼Œå› æ­¤ï¼Œå¯ä»¥ç›´æ¥ä½¿ç”¨è·¯ç”±åœ°å€ï¼ˆlocation.pathï¼‰ä½œä¸ºé«˜äº® key å€¼å³å¯

**æ­¥éª¤**ï¼š

1. å¯¼å…¥è·¯ç”±çš„ history å’Œ location å¯¹åº”çš„ hook
2. å°†å½“å‰è·¯ç”±åœ°å€ä½œä¸º TabBar çš„é«˜äº® key å€¼
3. åœ¨ TabBar çš„ change äº‹ä»¶ä¸­ï¼Œæ ¹æ®å½“å‰ key åˆ‡æ¢è·¯ç”±

**æ ¸å¿ƒä»£ç **ï¼š

```tsx
import { useHistory, useLocation } from 'react-router-dom';


const Layout = () => {
  const history = useHistory();
  const location = useLocation();


  const changeRoute = (path: string) => {
    history.push(path);
  };


  return (
    // ...


    <TabBar
      className="tab-bar"
      activeKey={location.pathname}
      onChange={(key) => changeRoute(key)}
    ></TabBar>
  );
};


export default Layout;
```