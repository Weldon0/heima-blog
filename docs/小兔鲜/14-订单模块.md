# ğŸ“š 14. ä¸ªäººä¸­å¿ƒ/è®¢å•æ¨¡å—

##  ä¸ªäººä¸­å¿ƒ-è·¯ç”±é…ç½® 

> æœ¬èŠ‚ç›®æ ‡ï¼šä¸ªäººä¸­å¿ƒäºŒçº§è·¯ç”±é…ç½®ã€‚

![image-20220303185407955](https://wuxiaohui-1254415986.cos.ap-nanjing.myqcloud.com/2022/05/31/image20220303185407955.png)

ï¼ˆ1ï¼‰åˆ›å»ºç»„ä»¶ `src/views/member/layout/index.vue`

```vue
<script setup lang="ts">
//
</script>

<template>
  <div>ä¸ªäººä¸­å¿ƒå¸ƒå±€</div>
</template>
```

ï¼ˆ2ï¼‰é…ç½®è·¯ç”±

```ts
{
    path: "/",
    component: Layout,
    children: [
      ...
      {
          path: '/member',
          component: () => import('@/views/member/layout/index.vue')
        }
    ],
  },
```

ï¼ˆ3ï¼‰ä¿®æ”¹é¦–é¡µå¤´éƒ¨å¯¼èˆªçš„é“¾æ¥

```vue
<li>
  <RouterLink to="/member" ><i class="iconfont icon-user"></i>
  	{{ profile.nickname || profile.account }}
  </RouterLink>
</li>

<li><RouterLink to="/member">ä¼šå‘˜ä¸­å¿ƒ</RouterLink></li>
```

##  ä¸ªäººä¸­å¿ƒ-ä¸‰çº§è·¯ç”±é…ç½®

> æœ¬èŠ‚ç›®çš„ï¼šå®Œæˆä¸ªäººä¸­å¿ƒé¡µé¢åŸºç¡€æ¶å­ï¼Œé…ç½®è·¯ç”±ã€‚

![image-20220303190112337](https://wuxiaohui-1254415986.cos.ap-nanjing.myqcloud.com/2022/05/31/image20220303190112337.png)

è½åœ°ä»£ç ï¼š

ï¼ˆ1ï¼‰å‡†å¤‡ä¸ªäººä¸­å¿ƒå·¦èœå•ç»„ä»¶ `src/views/member/layout/components/member-aside.vue`

```vue
    <script setup lang="ts">
    //
    </script>

    <template>
      <div class="xtx-member-aside">
        <div class="user-manage">
          <h4>æˆ‘çš„è´¦æˆ·</h4>
          <div class="links">
            <a href="javascript:;">ä¸ªäººä¸­å¿ƒ</a>
            <a href="javascript:;">æ¶ˆæ¯é€šçŸ¥</a>
            <a href="javascript:;">ä¸ªäººä¿¡æ¯</a>
            <a href="javascript:;">å®‰å…¨è®¾ç½®</a>
            <a href="javascript:;">åœ°å€ç®¡ç†</a>
            <a href="javascript:;">æˆ‘çš„ç§¯åˆ†</a>
            <a href="javascript:;">æˆ‘çš„è¶³è¿¹</a>
            <a href="javascript:;">é‚€è¯·æœ‰ç¤¼</a>
            <a href="javascript:;">å¹¸è¿æŠ½å¥–</a>
          </div>
          <h4>äº¤æ˜“ç®¡ç†</h4>
          <div class="links">
            <a href="javascript:;">æˆ‘çš„è®¢å•</a>
            <a href="javascript:;">ä¼˜æƒ åˆ¸</a>
            <a href="javascript:;">ç¤¼å“å¡</a>
            <a href="javascript:;">è¯„ä»·æ™’å•</a>
            <a href="javascript:;">å”®åæœåŠ¡</a>
          </div>
          <h4>æˆ‘çš„æ”¶è—</h4>
          <div class="links">
            <a href="javascript:;">æ”¶è—çš„å•†å“</a>
            <a href="javascript:;">æ”¶è—çš„ä¸“é¢˜</a>
            <a href="javascript:;">å…³æ³¨çš„å“ç‰Œ</a>
          </div>
          <h4>å¸®åŠ©ä¸­å¿ƒ</h4>
          <div class="links">
            <a href="javascript:;">å¸®åŠ©ä¸­å¿ƒ</a>
            <a href="javascript:;">åœ¨çº¿å®¢æœ</a>
          </div>
        </div>
      </div>
    </template>

    <style scoped lang="less">
    .xtx-member-aside {
      width: 220px;
      margin-right: 20px;
      border-radius: 2px;
      .user-manage {
        background-color: #fff;
        h4 {
          font-size: 18px;
          font-weight: 400;
          padding: 20px 52px 5px;
          border-top: 1px solid #f6f6f6;
        }

        .links {
          padding: 0 52px 10px;
        }

        a {
          display: block;
          line-height: 1;
          padding: 15px 0;
          font-size: 14px;
          color: #666;
          position: relative;

          &:hover {
            color: @xtxColor;
          }
          &.active {
            color: @xtxColor;

            &:before {
              display: block;
            }
          }

          &:before {
            content: "";
            display: none;
            width: 6px;
            height: 6px;
            border-radius: 50%;
            position: absolute;
            top: 19px;
            left: -16px;
            background-color: @xtxColor;
          }
        }
      }
    }
    </style>
```

ï¼ˆ2ï¼‰å‡†å¤‡ä¸ªäººä¸­å¿ƒå¸ƒå±€å®¹å™¨ç»„ä»¶ `src/views/member/layout/index.vue`

```vue

<script setup lang="ts">
import MemberAside from './components/member-aside.vue'
</script>

<template>
  <div class="container">
    <MemberAside />
    <div class="article">
      <!-- ä¸‰çº§è·¯ç”±çš„å‡ºå£ -->
      <RouterView />
    </div>
  </div>
</template>

<style scoped lang="less">
.container {
  display: flex;
  padding-top: 20px;
  .article {
    width: 1000px;
  }
}
</style>
```

ï¼ˆ3ï¼‰å‡†å¤‡ä¸­å¿ƒé¦–é¡µç»„ä»¶ï¼š`src/views/member/home/index.vue`

```vue
<script setup lang="ts">
//
</script>

<template>
  <div class="member-home">
    <h2>ä¸ªäººä¸­å¿ƒ</h2>
  </div>
</template>
```

ï¼ˆ4ï¼‰å‡†å¤‡è®¢å•ç»„ä»¶ï¼š`src/views/member/order/index.vue`

```vue
<script setup lang="ts">
//
</script>

<template>
  <div class="member-order">
    <h3>è®¢å•åˆ—è¡¨</h3>
  </div>
</template>
```

ï¼ˆ5ï¼‰é…ç½®è·¯ç”±è§„åˆ™

```ts
{
  path: '/member',
  component: () => import('@/views/member/layout/index.vue'),
  children: [
    {
      path: '',
      component: () => import('@/views/member/home/index.vue')
    },
    {
      path: 'order',
      component: () => import('@/views/member/order/index.vue')
    }
  ]
}
```

## ä¸ªäººä¸­å¿ƒ-èœå•æ¿€æ´»

> ç›®æ ‡ï¼šåŠ¨æ€æ¿€æ´»å·¦ä¾§èœå•

å¤§è‡´æ­¥éª¤ï¼š

- æ·»åŠ ä¸ªäººä¸­å¿ƒè·¯ç”±åœ°å€ï¼Œè®¾ç½®ç²¾å‡†åŒ¹é…ç±»å
- æ·»åŠ æˆ‘çš„è®¢å•è·¯ç”±ä¸ç»„ä»¶

```ts
router-link-active         åŒ…å«åŒ¹é…
router-link-exact-active   ç²¾ç¡®åŒ¹é…
```

ï¼ˆ1ï¼‰æä¾›æ ·å¼ï¼š`src/components/app-member-aside.vue`

```diff
<template>
  <div class="xtx-member-aside">
    <div class="user-manage">
      <h4>æˆ‘çš„è´¦æˆ·</h4>
      <div class="links">
+        <RouterLink to="/member">ä¸ªäººä¸­å¿ƒ</RouterLink>
         ...
      </div>
      <h4>äº¤æ˜“ç®¡ç†</h4>
      <div class="links">
+        <RouterLink to="/member/order">æˆ‘çš„è®¢å•</RouterLink>
         ...
      </div>
      ...
    </div>
  </div>
</template>

<style scoped lang="less">
.xtx-member-aside {
   ...
  .user-manage {
    ...
    a {
      ...
      
+      // ä¸ªäººä¸­å¿ƒ-å·¦ä¾§èœå•é«˜äº®ç±»å
+      &.router-link-exact-active {
+        color: @xtxColor;
+        &:before {
+          display: block;
+        }
+      }

      ...
    }
  }
}
</style>
```

ï¼ˆ2ï¼‰é¦–é¡µè·³è½¬

```vue
<li><RouterLink to="/member/order">æˆ‘çš„è®¢å•</RouterLink></li>
```

## ä¸ªäººä¸­å¿ƒ-é¦–é¡µå¸ƒå±€

> æœ¬èŠ‚ç›®æ ‡ï¼šå®Œæˆä¸ªäººä¸­å¿ƒ-é¦–é¡µåŸºç¡€å¸ƒå±€

å¤§è‡´æ­¥éª¤ï¼š

- å‡†å¤‡æ¦‚è§ˆç»„ä»¶
- ç»„ä»¶é¢æ¿ç»„ä»¶

è½åœ°ä»£ç ï¼š

ï¼ˆ1ï¼‰å‡†å¤‡æ¦‚è§ˆç»„ä»¶`src/views/member/home/components/home-overview.vue`

```vue
<script setup lang="ts">
//
</script>

<template>
  <!-- æ¦‚è§ˆ -->
  <div class="home-overview">
    <!-- ç”¨æˆ·ä¿¡æ¯ -->
    <div class="user-meta">
      <div class="avatar">
        <img
          src="http://zhoushugang.gitee.io/erabbit-client-pc-static/uploads/avatar_1.png"
        />
      </div>
      <h4>å¾è²è²</h4>
    </div>
    <div class="item">
      <a href="javascript:;">
        <span class="iconfont icon-hy"></span>
        <p>ä¼šå‘˜ä¸­å¿ƒ</p>
      </a>
      <a href="javascript:;">
        <span class="iconfont icon-aq"></span>
        <p>å®‰å…¨è®¾ç½®</p>
      </a>
      <a href="javascript:;">
        <span class="iconfont icon-dw"></span>
        <p>åœ°å€ç®¡ç†</p>
      </a>
    </div>
  </div>
</template>

<style scoped lang="less">
.home-overview {
  height: 132px;
  background: url(@/assets/images/center-bg.png) no-repeat center / cover;
  display: flex;
  .user-meta {
    flex: 1;
    display: flex;
    align-items: center;
    .avatar {
      width: 85px;
      height: 85px;
      border-radius: 50%;
      overflow: hidden;
      margin-left: 60px;
      img {
        width: 100%;
        height: 100%;
      }
    }
    h4 {
      padding-left: 26px;
      font-size: 18px;
      font-weight: normal;
      color: white;
    }
  }
  .item {
    flex: 1;
    display: flex;
    align-items: center;
    justify-content: space-around;
    &:first-child {
      border-right: 1px solid #f4f4f4;
    }
    a {
      color: white;
      font-size: 16px;
      text-align: center;
      .iconfont {
        font-size: 32px;
      }
      p {
        line-height: 32px;
      }
    }
  }
}
</style>
```

ï¼ˆ2ï¼‰ç»„ä»¶é¢æ¿ç»„ä»¶ `src/views/member/home/components/home-panel.vue`

```vue

<script setup lang="ts">
interface Props {
  title: string;
}
defineProps<Props>();
</script>

<template>
  <div class="home-panel">
    <div class="header">
      <h4>{{ title }}</h4>
      <XtxMore to="/" />
    </div>
    <!-- å•†å“åˆ—è¡¨ -->
    <div class="goods-list"></div>
  </div>
</template>

<style scoped lang="less">
.home-panel {
  background-color: #fff;
  padding: 0 20px;
  margin-top: 20px;
  height: 400px;
  .header {
    height: 66px;
    border-bottom: 1px solid #f5f5f5;
    padding: 18px 0;
    display: flex;
    justify-content: space-between;
    align-items: baseline;
    h4 {
      font-size: 22px;
      font-weight: normal;
    }
  }
}
</style>
```

ï¼ˆ3ï¼‰ä½¿ç”¨é¢æ¿ç»„ä»¶ï¼ŒçŒœä½ å–œæ¬¢ç»„ä»¶ `src/views/member/home/index.vue`

```vue

<script setup lang="ts">
import HomeOverview from "./components/home-overview.vue";
import HomePanel from "./components/home-panel.vue";
</script>

<template>
  <div class="member-home">
    <HomeOverview />
    <HomePanel title="æ”¶è—çš„å•†å“" />
    <HomePanel title="æˆ‘çš„è¶³è¿¹" />
  </div>
</template>
```

## ä¸ªäººä¸­å¿ƒ-æ¸²æŸ“é¡µé¢

> ç›®çš„ï¼šç”¨æˆ·ä¿¡æ¯å±•ç¤ºï¼Œé¢æ¿å†…å•†å“å±•ç¤ºã€‚

```typescript
<script setup lang="ts">
import useStore from '@/store'
import { storeToRefs } from 'pinia'
import defaultImg from '@/assets/images/200.png'

const { user } = useStore()
// è§£æ„ profile å¹¶ä¿æŒå“åº”å¼
const { profile } = storeToRefs(user)
// å›¾ç‰‡åŠ è½½å¤±è´¥ä¼šè§¦å‘ error äº‹ä»¶ï¼ŒåŠ è½½å¤±è´¥ä½¿ç”¨é»˜è®¤å ä½å›¾
const imgError = () => {
  profile.value.avatar = defaultImg
}
</script>

<template>
  <!-- æ¦‚è§ˆ -->
  <div class="home-overview">
    <!-- ç”¨æˆ·ä¿¡æ¯ -->
    <!-- ç”¨æˆ·ä¿¡æ¯ -->
    <div class="user-meta">
      <div class="avatar">
        <img :src="profile.avatar" @error="imgError" />
      </div>
      <h4>
        {{ profile.nickname || profile.account || profile.mobile }}
      </h4>
    </div>
    <div class="item">
      <a href="javascript:;">
        <span class="iconfont icon-hy"></span>
        <p>ä¼šå‘˜ä¸­å¿ƒ</p>
      </a>
      <a href="javascript:;">
        <span class="iconfont icon-aq"></span>
        <p>å®‰å…¨è®¾ç½®</p>
      </a>
      <a href="javascript:;">
        <span class="iconfont icon-dw"></span>
        <p>åœ°å€ç®¡ç†</p>
      </a>
    </div>
  </div>
</template>
```

# tabsç»„ä»¶å°è£…

## TSX/JSX åŸºç¡€

###  æ¦‚è¿°

`TSX/JSX` è¯­æ³•ç³–ï¼ˆ`React` å›¢é˜Ÿè®¾è®¡å‘æ˜çš„ï¼Œ`Vue` ä¹Ÿè¿›è¡Œäº†æ”¯æŒï¼‰

1. åœ¨ `Vue3` ä¸­å…¶å®å°±æ˜¯`createVNode` çš„è¯­æ³•ç³–ï¼Œè´Ÿè´£åˆ›å»º **è™šæ‹ŸDOM** ç”¨çš„ã€‚åº•å±‚ä¾èµ– `babel` æ’ä»¶æ”¯æŒã€‚
2. æˆ‘ä»¬åœ¨ playgroundç»„ä»¶ä¸­ï¼Œæ¼”ç¤º `jsx/tsx` è¯­æ³•ã€‚

### hå‡½æ•°ä¸renderå‡½æ•°

ä»£ç æ¼”ç¤º1ï¼š

```vue
<script lang="ts">
import { h } from 'vue'
export default {
  render() {
    // return createVNode(æ ‡ç­¾å, { å±æ€§å: å±æ€§å€¼ }, å­èŠ‚ç‚¹)
    return h('div', { id: 'box' }, 'hello')
  }
}
</script>
```

ä»£ç æ¼”ç¤º2ï¼š

```vue
<script lang="ts">
import { h } from 'vue'
export default {
  render() {
    // return h(å…ƒç´ åç§°, { å±æ€§å: å±æ€§å€¼ }, å­èŠ‚ç‚¹)
    return h('div', { id: 'box' }, [
      h('p', {}, 'æˆ‘æ˜¯ä¸€ä¸ªæ®µè½1'),
      h('p', {}, 'æˆ‘æ˜¯ä¸€ä¸ªæ®µè½2')
    ])
  }
}
</script>

```

æ€è€ƒï¼šæ¸²æŸ“ä»¥ä¸‹ç»“æ„ï¼Ÿ

```vue
<ul>
  <li>111</li>
  <li>222</li>
  <li>333</li>
  <li>444</li>
</ul>
```

å†™èµ·æ¥å¾ˆéº»çƒ¦ï¼Œæœ‰æ²¡æœ‰æ›´ç®€å•çš„å†™æ³•å‘¢ï¼Ÿ

### jsxä¸render å‡½æ•°

> æœ¬èŠ‚ç›®æ ‡ï¼šå­¦ä¹  `jsx/tsx` çš„åŸºç¡€è¯­æ³•ã€‚

- `jsx/tsx` å…¶å®æ˜¯ `createVNode` å‡½æ•°çš„è¯­æ³•ç³–ã€‚
- è¦å¼€å¯ `jsx` éœ€è¦å®‰è£… `@vitejs/plugin-vue-jsx` æ’ä»¶ï¼ŒåŒæ—¶åœ¨ Vite ä¸­é…ç½®å¼€å¯æ’ä»¶ã€‚
- `vue` ç»„ä»¶ä¸­æŒ‡å®š `<script lang="tsx">` æˆ– `<script lang="jsx">` å³å¯ä¹¦å†™ `tsx/jsx`ã€‚
- `jsx/tsx` è¯­æ³•ï¼Œéœ€è¦ç®€å•äº†è§£å…¶åŸºæœ¬ä½¿ç”¨https://v3.cn.vuejs.org/guide/render-function.html#jsx

é…ç½®

`yarn add @vitejs/plugin-vue-jsx`

```diff
import { defineConfig } from 'vite'
import vue from '@vitejs/plugin-vue'
import vueSetupExtend from 'vite-plugin-vue-setup-extend'
+import vueJsx from '@vitejs/plugin-vue-jsx'
const path = require('path')
// https://vitejs.dev/config/
export default defineConfig({
  // æ”¯æŒsetupçš„nameå±æ€§
+  plugins: [vue(), vueSetupExtend(), vueJsx()],
  resolve: {
    alias: {
      '@': path.resolve(__dirname, './src')
    }
  },
  css: {
    preprocessorOptions: {
      less: {
        additionalData: `
          @import '@/assets/styles/variables.less';
          @import '@/assets/styles/mixins.less';
        `
      }
    }
  },
  server: {
    port: 8080,
    host: 'www.corho.com',
    open: true,
    cors: true
  }
})
```

ä½¿ç”¨

```vue
<script lang="tsx">
export default {
  render() {
    return (
      <div>
        <p>æˆ‘æ˜¯ä¸€ä¸ªæ®µè½1</p>
        <p>æˆ‘æ˜¯ä¸€ä¸ªæ®µè½2</p>
      </div>
    );
  },
};
</script>
```

æ¸©é¦¨æç¤ºï¼šrender å¯é…åˆä¼ ç»Ÿé€‰é¡¹å¼ data ç»‘å®šå“åº”å¼æ•°æ®ï¼Œé€šè¿‡ this è·å–ç»„ä»¶æ•°æ®ã€‚

### script setupä¸jsx 

> æœ¬èŠ‚ç›®æ ‡ï¼šsetup ä¸­å¯ä»¥ä¹¦å†™å“åº”å¼æ•°æ®ï¼Œç”¨äºç»‘å®šåˆ° `tsx/jsx` ç»“æ„ä¸­ã€‚

åŸºç¡€ç”¨æ³•

```vue
<script lang="tsx" setup>
const VDOM = () => <h1>Hello TSX in Setup</h1>
</script>

<template>
  <VDOM />
</template>
```

> æœ¬èŠ‚ç›®æ ‡ï¼šå†…å®¹ç»‘å®šï¼Œå±æ€§ç»‘å®šï¼Œäº‹ä»¶ç»‘å®šï¼Œæ¡ä»¶æ¸²æŸ“ï¼Œåˆ—è¡¨æ¸²æŸ“ã€‚

```vue
<script setup lang="tsx">
import { ref } from "vue";

const count = ref(0);
const isHide = ref(true);
const add = () => {
  count.value += 1;
};
const list = ref([
  { id: 1, content: "åƒé¥­", done: true },
  { id: 2, content: "ç¡è§‰", done: false },
  { id: 3, content: "æ‰“ä»£ç ", done: true },
]);
// script - æ•°æ®ç»‘å®šåœ¨ JSX ç”¨ä¸€å¯¹èŠ±æ‹¬å·
const VDOM = () => {
  return (
    <div>
      <h1>Hello TSX in Setup</h1>
      <p>{count.value}</p>
      <button onClick={add}>ç‚¹å‡»+1</button>
      <button
        onClick={() => {
          isHide.value = !isHide.value;
        }}
      >
        åˆ‡æ¢æ˜¾ç¤ºéšè—
      </button>
      <h2>æ¡ä»¶æ¸²æŸ“</h2>
      {isHide.value ? <div>loading</div> : <div>ç»“æ„2</div>}
      <h2>åˆ—è¡¨æ¸²æŸ“</h2>
      <ul>
        {list.value.map((item) => (
          <li key={item.id}>{item.content}</li>
        ))}
      </ul>
    </div>
  );
};
</script>

<template>
  <!-- template ä¸­æ•°æ®ç»‘å®šç”¨ ä¸¤å¯¹èŠ±æ‹¬å· -->
  <VDOM />
</template>
```

##  tabs ç»„ä»¶å°è£…

> ç›®çš„ï¼šå°è£…ä¸€ä¸ªé«˜å¯ç”¨ tabs ç»„ä»¶ã€‚ç±»ä¼¼äºï¼šhttps://element-plus.gitee.io/zh-CN/component/tabs.html

å¤§è‡´æ­¥éª¤ï¼š

- `xtx-tabs` ç»„ä»¶å®¹å™¨ å¯ä»¥æœ‰å¤šä¸ª `xtx-tab-pane` ç»„ä»¶é¢æ¿ï¼Œ`script` å†…å®¹ `<slot />`
- `xtx-tab-pane` æ”¯æŒï¼š æ ‡é¢˜ `label`ï¼Œåç§° `name`ï¼Œ`template` å†…å®¹ `<slot />`
- `xtx-tabs` ç»„ä»¶ç»„ç»‡ç»“æ„ï¼Œæ§åˆ¶ç‚¹å‡»äº‹ä»¶ï¼Œæ ‡ç­¾é¡µæ¿€æ´»ã€‚

### åŸºæœ¬ç»“æ„

ï¼ˆ1ï¼‰`src/components/tabs/index.vue`

```vue
<script setup lang="tsx" name="XtxTabs"></script>

<template>
  <div class="xtx-tabs">tabs</div>
</template>

<style lang="less">
.xtx-tabs {
  background: #fff;
  > nav {
    height: 60px;
    line-height: 60px;
    display: flex;
    border-bottom: 1px solid #f5f5f5;
    > a {
      width: 110px;
      border-right: 1px solid #f5f5f5;
      text-align: center;
      font-size: 16px;
      &.active {
        border-top: 2px solid @xtxColor;
        height: 60px;
        background: #fff;
        line-height: 56px;
      }
    }
  }
}
</style>
```

ï¼ˆ2ï¼‰`src/components/tabs/pane.vue`

```vue
<script setup lang="ts" name="XtxTabsPane">
defineProps<{
  label?: string
  name?: string
}>()
</script>

<template>
  <div class="xtx-tabs-panel">
    <slot></slot>
  </div>
</template>
```

ï¼ˆ3ï¼‰å…¨å±€æ³¨å†Œ

```jsx
import XtxTabs from '@/components/tabs/index.vue'
import XtxTabsPane from '@/components/tabs/pane.vue'


app.component('XtxTabs', XtxTabs)
app.component('XtxTabsPane', XtxTabsPane)

XtxTabs: typeof XtxTabs
XtxTabsPane: typeof XtxTabsPane
```

ï¼ˆ4ï¼‰playgroundä¸­æµ‹è¯•

```jsx
<script lang="ts" setup></script>

<template>
  <xtx-tabs>
    <XtxTabsPane name="all" label="å…¨éƒ¨">
      <h1>å…¨éƒ¨çš„å†…å®¹</h1>
    </XtxTabsPane>
    <XtxTabsPane name="unpay" label="å¾…ä»˜æ¬¾">
      <h1>å¾…ä»˜æ¬¾å†…å®¹</h1>
    </XtxTabsPane>
  </xtx-tabs>
</template>
```

### XtxTabså¤„ç†æ’æ§½

ï¼ˆ1ï¼‰Tabsç»„ä»¶ä¸­ä¸èƒ½å¤ŸæŠŠå†…å®¹å†™æ­»ï¼Œ é€šè¿‡ `useSlots()` è·å–æ’æ§½ï¼Œ æ¸²æŸ“å†…å®¹

```jsx
<script setup lang="tsx">
import { Slots, useSlots } from 'vue'

const slots = useSlots()
console.log(slots)
const Tabs = () => {
  const panes = slots.default?.()
  return <div class="xtx-tabs">{panes}</div>
}
</script>

<template>
  <Tabs></Tabs>
</template>
```

ï¼ˆ2ï¼‰å¢åŠ å¯¼èˆª

```typescript
<script setup lang="tsx">
import { Slots, useSlots } from 'vue'

const slots = useSlots()

const Tabs = () => {
  const panes = slots.default?.()
    const navs = (
      <nav>
        <a href="javascript:;">æ ‡é¢˜1</a>
        <a href="javascript:;">æ ‡é¢˜2</a>
        <a href="javascript:;">æ ‡é¢˜3</a>
        <a href="javascript:;">æ ‡é¢˜4</a>
        <a href="javascript:;">æ ‡é¢˜5</a>
      </nav>
    )
  return <div class="xtx-tabs">{[navs, panes]}</div>
}
</script>
```

ï¼ˆ3ï¼‰æ ¹æ®panesåŠ¨æ€æ¸²æŸ“navs

```ts
const navs = (
  <nav>
    {panes?.map((item) => {
      return <a href="javascript:;">{item.props?.label}</a>
    })}
  </nav>
)
const Tabs = () => {
  return <div class="xtx-tabs">{[navs, panes]}</div>
}
```

### æ”¯æŒv-model

ï¼ˆ1ï¼‰playgroundä¸­ä½¿ç”¨

```vue
<script lang="ts" setup>
import { ref } from 'vue'

const activeName = ref('test1')
</script>

<template>
  <xtx-tabs v-model="activeName">
    <XtxTabsPane name="all" label="å…¨éƒ¨">
      <h1>å…¨éƒ¨çš„å†…å®¹</h1>
    </XtxTabsPane>
    <XtxTabsPane name="unpay" label="å¾…ä»˜æ¬¾">
      <h1>å¾…ä»˜æ¬¾å†…å®¹</h1>
    </XtxTabsPane>
    <XtxTabsPane name="test1" label="æµ‹è¯•1">
      <h1>æµ‹è¯•1å†…å®¹</h1>
    </XtxTabsPane>
    <XtxTabsPane name="test2" label="æµ‹è¯•2">
      <h1>æµ‹è¯•2å†…å®¹</h1>
    </XtxTabsPane>
  </xtx-tabs>
</template>
```

ï¼ˆ2ï¼‰ä¿®æ”¹tabsç»„ä»¶

```vue
<script setup lang="tsx">
import { useSlots, VNode } from 'vue'
const props = defineProps({
  modelValue: {
    type: String,
    default: ''
  }
})
const emit = defineEmits(['update:modelValue'])

const clickFn = (item: VNode) => {
  console.log(item.props?.name)
  emit('update:modelValue', item.props?.name)
}
const slots = useSlots()
const Tabs = () => {
  const panes = slots.default?.()
  const navs = (
    <nav>
      {panes?.map((item) => {
        return (
          <a
            href="javascript:;"
            class={{ active: props.modelValue === item.props?.name }}
            onClick={() => clickFn(item)}
          >
            {item.props?.label}
          </a>
        )
      })}
    </nav>
  )
  return <div class="xtx-tabs">{[navs, panes]}</div>
}
</script>

<template>
  <Tabs></Tabs>
</template>

<style lang="less">
.xtx-tabs {
  background: #fff;
  > nav {
    height: 60px;
    line-height: 60px;
    display: flex;
    border-bottom: 1px solid #f5f5f5;
    > a {
      width: 110px;
      border-right: 1px solid #f5f5f5;
      text-align: center;
      font-size: 16px;
      &.active {
        border-top: 2px solid @xtxColor;
        height: 60px;
        background: #fff;
        line-height: 56px;
      }
    }
  }
}
</style>
```

### é¢æ¿åˆ‡æ¢ - ä¾èµ–æ³¨å…¥

ï¼ˆ1ï¼‰tabsç»„ä»¶ä¸­æä¾›æ•°æ®

```diff
<script setup lang="tsx">
+import { provide } from "vue";
...
+const { modelValue } = toRefs(props);
+provide("activeNameValue", modelValue);
</script>
```

(2)tabs-paneä¸­æ¥æ”¶æ•°æ®

```diff
<script setup lang="ts" name="pane">
import { inject } from "vue";

interface Props {
  label?: string;
  name?: string;
}
defineProps<Props>()
+const activeNameValue = inject("activeNameValue");
</script>

<template>
+  <div class="xtx-tabs-panel" v-show="activeNameValue === name">
    <slot></slot>
  </div>
</template>
```

###  å°è£… tabs ç»„ä»¶ - v-for æ¸²æŸ“

ï¼ˆ1ï¼‰playgroundä¸­æµ‹è¯•

```jsx
<script lang="ts" setup>
import { ref } from 'vue'

// è®¢å•çŠ¶æ€
const orderStatus = [
  { name: 'all', label: 'å…¨éƒ¨è®¢å•' },
  { name: 'unpay', label: 'å¾…ä»˜æ¬¾' },
  { name: 'deliver', label: 'å¾…å‘è´§' },
  { name: 'receive', label: 'å¾…æ”¶è´§' },
  { name: 'comment', label: 'å¾…è¯„ä»·' },
  { name: 'complete', label: 'å·²å®Œæˆ' },
  { name: 'cancel', label: 'å·²å–æ¶ˆ' }
]
const activeName = ref('test1')
</script>

<template>
  <xtx-tabs v-model="activeName">
    <XtxTabsPane name="all" label="å…¨éƒ¨">
      <h1>å…¨éƒ¨çš„å†…å®¹</h1>
    </XtxTabsPane>
    <XtxTabsPane
      v-for="item in orderStatus"
      :key="item.label"
      :name="item.name"
      :label="item.label"
    >
      <h1>{{ item.name }}çš„å†…å®¹</h1>
    </XtxTabsPane>
  </xtx-tabs>
</template>
```

ç»„ä»¶å‡çº§ï¼š

- åŠ¨æ€åˆ¤æ–­èŠ‚ç‚¹ç±»å‹ï¼Œç»„ç»‡tabsåˆ—è¡¨

```jsx
const Tabs = () => {
  const arr = (slots as any).default()
  const panes: any[] = []

  arr.forEach((item: any) => {
    // å¤„ç†åŸºæœ¬çš„å†™æ³•ï¼Œç›´æ¥å†…éƒ¨å†™ XtxTabsPanel
    if (item.type.name === 'XtxTabsPane') {
      panes.push(item)
    } else {
      // å¤„ç†v-forçš„æƒ…å†µ
      if (item.children) {
        // ä¸€ä¸ªèŠ‚ç‚¹ => 7ä¸ªpanel
        item.children.forEach((panel: any) => {
          panes.push(panel)
        })
      }
    }
  })
  const navs = (
    <nav>
      {panes?.map((item) => {
        return (
          <a
            href="javascript:;"
            class={{ active: props.modelValue === item.props?.name }}
            onClick={() => clickFn(item)}
          >
            {item.props?.label}
          </a>
        )
      })}
    </nav>
  )
  return <div class="xtx-tabs">{[navs, panes]}</div>
}
```

### tab-clickäº‹ä»¶æ”¯æŒ

```jsx
const clickFn = (item: VNode, index: number) => {
  console.log(item.props?.name)
  emit('update:modelValue', item.props?.name)
  emit('tab-click', {
    tab: item,
    index: index
  })
}
```

# è®¢å•ç®¡ç†

![image-20220303204158382](https://wuxiaohui-1254415986.cos.ap-nanjing.myqcloud.com/2022/05/31/image20220303204158382.png)



## ä½¿ç”¨Tabsç»„ä»¶

```jsx
<script setup lang="ts">
import { ref } from 'vue'

// è®¢å•çŠ¶æ€
const orderStatus = [
  { name: 'all', label: 'å…¨éƒ¨è®¢å•' },
  { name: 'unpay', label: 'å¾…ä»˜æ¬¾' },
  { name: 'deliver', label: 'å¾…å‘è´§' },
  { name: 'receive', label: 'å¾…æ”¶è´§' },
  { name: 'comment', label: 'å¾…è¯„ä»·' },
  { name: 'complete', label: 'å·²å®Œæˆ' },
  { name: 'cancel', label: 'å·²å–æ¶ˆ' }
]
// ç”¨äºåŒå‘ç»‘å®šé«˜äº®çš„åç§°
const activeName = ref(orderStatus[0].name)
</script>

<template>
  <div class="member-order">
    <XtxTabs v-model="activeName">
      <XtxTabsPane
        v-for="item in orderStatus"
        :key="item.name"
        :name="item.name"
        :label="item.label"
      />
    </XtxTabs>
  </div>
</template>
```

##  è®¢å•ç®¡ç† - é™æ€å¸ƒå±€ - CV

> ç›®æ ‡ï¼šå®Œæˆè®¢å•é™æ€å¸ƒå±€ã€‚

![image-20220303230241418](https://wuxiaohui-1254415986.cos.ap-nanjing.myqcloud.com/2022/05/31/image20220303230241418.png)

ï¼ˆ1ï¼‰æ–°å»º è®¢å•é¡¹ `order-item` ç»„ä»¶ï¼š `src/views/member/order/components/order-item.vue`

```vue
<script setup lang="ts">
//
</script>

<template>
  <div class="order-item">
    <div class="head">
      <span>ä¸‹å•æ—¶é—´ï¼š2022-02-07 00:05:20</span>
      <span>è®¢å•ç¼–å·ï¼š62205697599</span>
      <span class="down-time">
        <i class="iconfont icon-down-time"></i>
        <b>ä»˜æ¬¾æˆªæ­¢ï¼š28åˆ†20ç§’</b>
      </span>
    </div>
    <div class="body">
      <div class="column goods">
        <ul>
          <li v-for="item in 2" :key="item">
            <a class="image" href="javascript:;">
              <img
                src="https://yanxuan-item.nosdn.127.net/f7a4f643e245d03771d6f12c94e71214.png"
                alt=""
              />
            </a>
            <div class="info">
              <p class="name ellipsis-2">
                åŸåˆ›è®¾è®¡ä¸€ä½“åŒ–æœºèº«,ç²¾è‡´è¿·ä½ ç ´å£æœº350mL
              </p>
              <p class="attr ellipsis">
                <span>é¢œè‰²ï¼šç»¿è‰²</span>
                <span>å°ºå¯¸ï¼š10å¯¸</span>
              </p>
            </div>
            <div class="price">Â¥9.50</div>
            <div class="count">x1</div>
          </li>
        </ul>
      </div>
      <div class="column state">
        <p>å¾…ä»˜æ¬¾</p>
      </div>
      <div class="column amount">
        <p class="red">Â¥19.00</p>
        <p>ï¼ˆå«è¿è´¹ï¼šÂ¥10.00ï¼‰</p>
        <p>åœ¨çº¿æ”¯ä»˜</p>
      </div>
      <div class="column action">
        <XtxButton type="primary" size="small">ç«‹å³ä»˜æ¬¾</XtxButton>
        <p><a href="javascript:;">æŸ¥çœ‹è¯¦æƒ…</a></p>
        <p><a href="javascript:;">å–æ¶ˆè®¢å•</a></p>
      </div>
    </div>
  </div>
</template>

<style lang="less" scoped>
.order-item {
  margin-bottom: 20px;
  border: 1px solid #f5f5f5;
  .head {
    height: 50px;
    line-height: 50px;
    background: #f5f5f5;
    padding: 0 20px;
    overflow: hidden;
    span {
      margin-right: 20px;
      &.down-time {
        margin-right: 0;
        float: right;
        i {
          vertical-align: middle;
          margin-right: 3px;
        }
        b {
          vertical-align: middle;
          font-weight: normal;
        }
      }
    }
    .del {
      margin-right: 0;
      float: right;
      color: #999;
    }
  }
  .body {
    display: flex;
    align-items: stretch;
    .column {
      border-left: 1px solid #f5f5f5;
      text-align: center;
      padding: 20px;
      > p {
        padding-top: 10px;
      }
      &:first-child {
        border-left: none;
      }
      &.goods {
        flex: 1;
        padding: 0;
        align-self: center;
        ul {
          li {
            border-bottom: 1px solid #f5f5f5;
            padding: 10px;
            display: flex;
            &:last-child {
              border-bottom: none;
            }
            .image {
              width: 70px;
              height: 70px;
              border: 1px solid #f5f5f5;
            }
            .info {
              width: 220px;
              text-align: left;
              padding: 0 10px;
              p {
                margin-bottom: 5px;
                &.name {
                  height: 38px;
                }
                &.attr {
                  color: #999;
                  font-size: 12px;
                  span {
                    margin-right: 5px;
                  }
                }
              }
            }
            .price {
              width: 100px;
            }
            .count {
              width: 80px;
            }
          }
        }
      }
      &.state {
        width: 120px;
        .green {
          color: @xtxColor;
        }
      }
      &.amount {
        width: 200px;
        .red {
          color: @priceColor;
        }
      }
      &.action {
        width: 140px;
        a {
          display: block;
          &:hover {
            color: @xtxColor;
          }
        }
      }
    }
  }
}
</style>
```

ï¼ˆ2ï¼‰åœ¨åˆ—è¡¨é¡µä¸­ä½¿ç”¨ï¼š`src\views\member\order\index.vue`

```vue
<script setup lang="ts">
import { ref } from 'vue'
import OrderItem from './components/order-item.vue'

// è®¢å•çŠ¶æ€
const orderStatus = [
  { name: 'all', label: 'å…¨éƒ¨è®¢å•' },
  { name: 'unpay', label: 'å¾…ä»˜æ¬¾' },
  { name: 'deliver', label: 'å¾…å‘è´§' },
  { name: 'receive', label: 'å¾…æ”¶è´§' },
  { name: 'comment', label: 'å¾…è¯„ä»·' },
  { name: 'complete', label: 'å·²å®Œæˆ' },
  { name: 'cancel', label: 'å·²å–æ¶ˆ' }
]

// ç”¨äºåŒå‘ç»‘å®šé«˜äº®çš„åç§°
const activeName = ref(orderStatus[0].name)
</script>

<template>
  <div class="member-order">
    <XtxTabs v-model="activeName">
      <XtxTabsPane
        v-for="item in orderStatus"
        :key="item.name"
        :name="item.name"
        :label="item.label"
      />
      <div class="order-list">
        <OrderItem />
        <OrderItem />
        <OrderItem />
      </div>
    </XtxTabs>
  </div>
</template>

<style scoped lang="less">
.order-list {
  background-color: #fff;
  padding: 20px;
}
</style>
```

## è®¢å•ç®¡ç† - è®¢å•åˆ—è¡¨æ•°æ®è·å–

ï¼ˆ1ï¼‰å‘é€è¯·æ±‚è·å–è®¢å•åˆ—è¡¨ `src\views\member\order\index.vue`

```vue
<script setup lang="ts">
import { onMounted, ref } from 'vue'
import OrderItem from './components/order-item.vue'
import request from '@/utils/request'
import { ApiRes } from '@/types/data'
import { OrderListInfo } from '@/types/order'
// è®¢å•çŠ¶æ€
const orderStatus = [
  { name: 'all', label: 'å…¨éƒ¨è®¢å•' },
  { name: 'unpay', label: 'å¾…ä»˜æ¬¾' },
  { name: 'deliver', label: 'å¾…å‘è´§' },
  { name: 'receive', label: 'å¾…æ”¶è´§' },
  { name: 'comment', label: 'å¾…è¯„ä»·' },
  { name: 'complete', label: 'å·²å®Œæˆ' },
  { name: 'cancel', label: 'å·²å–æ¶ˆ' }
]
// ç”¨äºåŒå‘ç»‘å®šé«˜äº®çš„åç§°
const activeName = ref(orderStatus[0].name)

// è®¢å•åˆ—è¡¨æ€»ä¿¡æ¯
const loadData = async () => {
  // æ ¹æ®å‚æ•°è·å–è®¢å•åˆ—è¡¨ä¿¡æ¯
  const res = await request.get<ApiRes<OrderListInfo>>('/member/order', {
    params: {
      orderState: 0
    }
  })
  console.log(res)
}
loadData()
</script>
```

ï¼ˆ2ï¼‰æ·»åŠ ç±»å‹å£°æ˜ï¼š`src/types/order.d.ts`

```ts
// è®¢å•åˆ—è¡¨æ€»ä¿¡æ¯
export interface OrderListInfo {
  counts: number;
  pageSize: number;
  pages: number;
  page: number;
  // åº”ç”¨è®¢å•åˆ—è¡¨åˆ«å
  items: OrderPayInfo[];
}
```

##  è®¢å•ç®¡ç† - åˆ—è¡¨æ¸²æŸ“

```jsx
<script setup lang="ts">
import { ApiRes } from '@/types/data'
import request from '@/utils/request'
import { ref, watch } from 'vue'
import OrderItem from './components/order-item.vue'
import { OrderListInfo } from '@/types/order'
// è®¢å•çŠ¶æ€
const orderStatus = [
  { name: 'all', label: 'å…¨éƒ¨è®¢å•' },
  { name: 'unpay', label: 'å¾…ä»˜æ¬¾' },
  { name: 'deliver', label: 'å¾…å‘è´§' },
  { name: 'receive', label: 'å¾…æ”¶è´§' },
  { name: 'comment', label: 'å¾…è¯„ä»·' },
  { name: 'complete', label: 'å·²å®Œæˆ' },
  { name: 'cancel', label: 'å·²å–æ¶ˆ' },
]

const activeName = ref('all')

const orderState = ref(0)

const change = (obj: { tab: VNode; index: number }) => {
  orderState.value = obj.index
}

const orderList = ref<OrderListInfo>({} as OrderListInfo)
watch(
  orderState,
  async (value) => {
    const res = await request.get<ApiRes<OrderListInfo>>('/member/order', {
      params: {
        orderState: value,
      },
    })
    orderList.value = res.data.result
    console.log(res)
  },
  {
    immediate: true,
  }
)
</script>

<template>
  <div class="member-order">
    <XtxTabs v-model="activeName" @tab-click="change">
      <XtxTabsPane
        v-for="item in orderStatus"
        :key="item.name"
        :name="item.name"
        :label="item.label"
      >
        <div class="order-list">
          <OrderItem
            v-for="item in orderList.items"
            :key="item.id"
            :order="item"
          />
        </div>
      </XtxTabsPane>
    </XtxTabs>
  </div>
</template>

<style scoped lang="less">
.order-list {
  background-color: #fff;
  padding: 20px;
}
</style>
```

(2)å­ç»„ä»¶æ¸²æŸ“

```jsx
<script setup lang="ts">
import { OrderPayInfo } from '@/types/order'
import { useCountDown } from '@/utils/hooks'
import dayjs from 'dayjs'
// è®¢å•çŠ¶æ€
const orderStatus = [
  { name: 'all', label: 'å…¨éƒ¨è®¢å•' },
  { name: 'unpay', label: 'å¾…ä»˜æ¬¾' },
  { name: 'deliver', label: 'å¾…å‘è´§' },
  { name: 'receive', label: 'å¾…æ”¶è´§' },
  { name: 'comment', label: 'å¾…è¯„ä»·' },
  { name: 'complete', label: 'å·²å®Œæˆ' },
  { name: 'cancel', label: 'å·²å–æ¶ˆ' },
]
const props = defineProps<{
  order: OrderPayInfo
}>()

const { time, start } = useCountDown(props.order.countdown)
start()

const formatTime = (time: number) => {
  if (time < 0) {
    return 'å·²è¶…æ—¶'
  }
  return dayjs.unix(time).format('mmåˆ†ssç§’')
}
</script>

<template>
  <div class="order-item" v-if="order.id">
    <div class="head">
      <span>ä¸‹å•æ—¶é—´ï¼š{{ order.createTime }}</span>
      <span>è®¢å•ç¼–å·ï¼š{{ order.id }}</span>
      <span class="down-time">
        <i class="iconfont icon-down-time"></i>
        <b>ä»˜æ¬¾æˆªæ­¢ï¼š{{ formatTime(time) }}</b>
      </span>
    </div>
    <div class="body">
      <div class="column goods">
        <ul>
          <li v-for="item in order.skus" :key="item.id">
            <a class="image" href="javascript:;">
              <img :src="item.image" alt="" />
            </a>
            <div class="info">
              <p class="name ellipsis-2">
                {{ item.name }}
              </p>
              <p class="attr ellipsis">
                <span>{{ item.attrsText }}</span>
              </p>
            </div>
            <div class="price">Â¥{{ item.realPay }}</div>
            <div class="count">x{{ item.quantity }}</div>
          </li>
        </ul>
      </div>
      <div class="column state">
        <p>{{ orderStatus[order.orderState].label }}</p>
        <p v-if="order.orderState === 3">
          <a href="javascript:;" class="green">æŸ¥çœ‹ç‰©æµ</a>
        </p>
        <p v-if="order.orderState === 4">
          <a href="javascript:;" class="green">è¯„ä»·å•†å“</a>
        </p>
        <p v-if="order.orderState === 5">
          <a href="javascript:;" class="green">æŸ¥çœ‹è¯„ä»·</a>
        </p>
      </div>
      <div class="column amount">
        <p class="red">Â¥{{ order.payMoney }}</p>
        <p>ï¼ˆå«è¿è´¹ï¼šÂ¥{{ order.postFee }}ï¼‰</p>
        <p>åœ¨çº¿æ”¯ä»˜</p>
      </div>
      <div class="column action">
        <XtxButton v-if="order.orderState === 1" type="primary" size="small"
          >ç«‹å³ä»˜æ¬¾</XtxButton
        >
        <XtxButton v-if="order.orderState === 3" type="primary" size="small"
          >ç¡®è®¤æ”¶è´§</XtxButton
        >
        <p><a href="javascript:;">æŸ¥çœ‹è¯¦æƒ…</a></p>
        <p v-if="[2, 3, 4, 5].includes(order.orderState)">
          <a href="javascript:;">å†æ¬¡è´­ä¹°</a>
        </p>
        <p v-if="[4, 5].includes(order.orderState)">
          <a href="javascript:;">ç”³è¯·å”®å</a>
        </p>
        <p v-if="order.orderState === 1"><a href="javascript:;">å–æ¶ˆè®¢å•</a></p>
      </div>
    </div>
  </div>
</template>

<style lang="less" scoped>
.order-item {
  margin-bottom: 20px;
  border: 1px solid #f5f5f5;
  .head {
    height: 50px;
    line-height: 50px;
    background: #f5f5f5;
    padding: 0 20px;
    overflow: hidden;
    span {
      margin-right: 20px;
      &.down-time {
        margin-right: 0;
        float: right;
        i {
          vertical-align: middle;
          margin-right: 3px;
        }
        b {
          vertical-align: middle;
          font-weight: normal;
        }
      }
    }
    .del {
      margin-right: 0;
      float: right;
      color: #999;
    }
  }
  .body {
    display: flex;
    align-items: stretch;
    .column {
      border-left: 1px solid #f5f5f5;
      text-align: center;
      padding: 20px;
      > p {
        padding-top: 10px;
      }
      &:first-child {
        border-left: none;
      }
      &.goods {
        flex: 1;
        padding: 0;
        align-self: center;
        ul {
          li {
            border-bottom: 1px solid #f5f5f5;
            padding: 10px;
            display: flex;
            &:last-child {
              border-bottom: none;
            }
            .image {
              width: 70px;
              height: 70px;
              border: 1px solid #f5f5f5;
            }
            .info {
              width: 220px;
              text-align: left;
              padding: 0 10px;
              p {
                margin-bottom: 5px;
                &.name {
                  height: 38px;
                }
                &.attr {
                  color: #999;
                  font-size: 12px;
                  span {
                    margin-right: 5px;
                  }
                }
              }
            }
            .price {
              width: 100px;
            }
            .count {
              width: 80px;
            }
          }
        }
      }
      &.state {
        width: 120px;
        .green {
          color: @xtxColor;
        }
      }
      &.amount {
        width: 200px;
        .red {
          color: @priceColor;
        }
      }
      &.action {
        width: 140px;
        a {
          display: block;
          &:hover {
            color: @xtxColor;
          }
        }
      }
    }
  }
}
</style>
```



## è®¢å•ç®¡ç†-åˆ‡æ¢åŠŸèƒ½

æ¨¡æ‹Ÿå‘è´§

https://apipc-xiaotuxian-front.itheima.net/member/order/consignment/:id





