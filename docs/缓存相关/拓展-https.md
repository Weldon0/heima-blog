---
title: http和https
---





## 1. 为什么需要HTTPS？



HTTPS 是安全版的 HTTP。



HTTP 协议在传输数据时采用的是明⽂方式传递，因此，⼀些敏感信息的传输就变得很不安全。



而 HTTPS 就是为了解决 HTTP 的不安全⽽产⽣的。



## 2. HTTPS是如何保证安全的？



HTTPS 在传输数据的过程中会对数据进行加密处理，保证安全性。



那HTTPS采用的什么样的加密方式呢？我们来了解下一些加密的基本概念。



目前常见的加密算法可以分成三类，对称加密算法，非对称加密算法和Hash算法。



### 2.1 **什么是对称加密？**



对称加密的特点是文件加密和解密使用相同的密钥，即加密密钥也可以用作解密密钥，



这种方法在密码学中叫做对称加密算法，对称加密算法使用起来简单快捷，密钥较短，且破译困难



通信的双⽅都使⽤同⼀个秘钥进⾏加解密。⽐如，两个人事先约定的暗号，就属于对称加密。



![img](https://wuxiaohui-1254415986.cos.ap-nanjing.myqcloud.com/uPic/20210527233628.png)



对称加密的特点是：



-  优点:
  计算量小、加密速度快、加密效率高。 

-  缺点:
  在数据传送前，发送方和接收方必须商定好秘钥，然后双方保存好秘钥。
  如果一方的秘钥被泄露，那么加密信息也就不安全了 



使用场景：本地数据加密、https通信、网络传输等



常见算法：AES、DES、3DES、DESX、Blowfish、IDEA、RC4、RC5、RC6



### 2.2 **什么是⾮对称加密？**



而加密和解密其实可以使用不同的规则，只要这两种规则之间存在某种对应关系即可，



这样就避免了直接传递密钥。这种新的加密模式被称为"非对称加密算法"。



通信的双方使用不同的秘钥进行加密解密，即秘钥对（私钥 + 公钥）。



特征: 私钥可以解密公钥加密的内容,  公钥可以解密私钥加密的内容



![img](https://wuxiaohui-1254415986.cos.ap-nanjing.myqcloud.com/uPic/20210527234705.png)



非对称加密的特点是：



-  优点：非对称加密与对称加密相比其安全性更好 

-  缺点：加密和解密花费时间长、速度慢，只适合对少量数据进行加密。 



使用场景：https会话前期、CA数字证书、信息加密、登录认证等



常见算法：RSA、ECC（移动设备用）、Diffie-Hellman、El Gamal、DSA（数字签名用）



> https加密过程中，秘钥和私钥的传递

<img src="https://wuxiaohui-1254415986.cos.ap-nanjing.myqcloud.com/uPic/image-20220220093912230.png" alt="image-20220220093912230" style="zoom:50%;" />



### 2.3 **HTTPS 加密解决⽅案**



结合了两种加密⽅式：



-  将 `对称加密的密钥` ⽤非对称加密的公钥, 进⾏加密并发送出去，接收⽅使⽤私钥解密得到 `对称加密密钥` 

-  双⽅沟通时使⽤ `对称加密密钥` 进⾏ 



**可以看到，只有在发送秘钥阶段才使用非对称加密，而后续的通信都使用对称加密，这样解决了性能问题。**



HTTPS 目前所使用的 TLS或SSL协议,  就是目前采用的加密通道的规范协议



它利用对称加密、(公私钥)非对称加密, 以及其密钥交换算法，可完成可信任的信息传输



### 2.4 数字证书



为了安全性, 一般还需要签发数字证书!



客户端 和 服务器端要初步互通消息时,  客户端发送请求可以拿到公开的公钥信息



进而进行非对称加密, 使用公钥, 加密`对称加密密钥`, 传递给服务器, 后续通信都使用对称加密!



![img](https://wuxiaohui-1254415986.cos.ap-nanjing.myqcloud.com/uPic/20210527235153.png)



**问题是: 初步互通消息时, 如果请求拿到的公钥信息, 就是假的, 或者不安全的! 那么后续的所有操作, 都将是不安全的!**



所以, 就需要有数字证书(CA证书),  一般是CA机构颁发的, 证明这个公钥是安全可靠的!



**CA证书中心会对你网站的公钥, 网站的域名地址,  证书到期时间, 等一些相关信息一起加密签发数字证书, 保证你网站的安全性**



![img](https://wuxiaohui-1254415986.cos.ap-nanjing.myqcloud.com/uPic/20210527233637.png)



当公司申请了 CA 证书后, 就应该在响应时, 将数字证书一起发送给客户端



![img](https://wuxiaohui-1254415986.cos.ap-nanjing.myqcloud.com/uPic/20210527233641.png)



而客户端, 接收到消息后, 就可以查看证书



1.  如果正在访问的网站 和 证书记载的网址 不一致, 说明不安全,  可能被冒用, 浏览器就会发出警告!!! 

1.  如果签发证书的机构, 不权威, 发出警告
   ![img](https://wuxiaohui-1254415986.cos.ap-nanjing.myqcloud.com/uPic/20210527233644.png) 

1.  如果证书过期了, 浏览器也会发出警告 



> https为什么进行证书校验

<img src="https://wuxiaohui-1254415986.cos.ap-nanjing.myqcloud.com/uPic/image-20220220093946466.png" alt="image-20220220093946466" style="zoom:50%;" />



### 2.5 数字签名



但这还是有问题：如果证书被篡改了怎么办?



这时就需要用⼀个技术：**数字签名**。 (根据证书内容, 生成的一个唯一标识)



数字签名就是先⽤ **CA ⾃带的 Hash 算法来计算出证书内容的⼀个摘要**，然后使⽤ CA 私钥进行加密，组成数字签名。



当别⼈把他的证书发过来时，**接收方⽤同样的算法再次⽣成摘要**，⽤ CA 公钥解密后得到CA生成的摘要，两者进行对⽐后,



就能确定中间是否被⼈篡改。这样就能最⼤程度的保证通信的安全了。



> 数字签名的作用

![image-20220220094005031](https://wuxiaohui-1254415986.cos.ap-nanjing.myqcloud.com/uPic/image-20220220094005031.png)