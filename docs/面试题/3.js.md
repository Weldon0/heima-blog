---
title: ğŸŒ¹ 3.jsé¢è¯•é¢˜
---





## 1. è§£é‡Šä¸‹ä»€ä¹ˆæ˜¯å˜é‡å£°æ˜æå‡ï¼Ÿ

å˜é‡æå‡ï¼ˆhoistingï¼‰ï¼Œæ˜¯è´Ÿè´£è§£ææ‰§è¡Œä»£ç çš„ JavaScript å¼•æ“çš„å·¥ä½œæ–¹å¼äº§ç”Ÿçš„ä¸€ä¸ªç‰¹æ€§ã€‚

JSå¼•æ“åœ¨è¿è¡Œä¸€ä»½ä»£ç çš„æ—¶å€™ï¼Œä¼šæŒ‰ç…§ä¸‹é¢çš„æ­¥éª¤è¿›è¡Œå·¥ä½œï¼š

1. é¦–å…ˆï¼Œå¯¹ä»£ç è¿›è¡Œé¢„è§£æï¼Œå¹¶è·å–å£°æ˜çš„æ‰€æœ‰å˜é‡
2. ç„¶åï¼Œå°†è¿™äº›å˜é‡çš„å£°æ˜è¯­å¥ç»Ÿä¸€æ”¾åˆ°ä»£ç çš„æœ€å‰é¢
3. æœ€åï¼Œå¼€å§‹ä¸€è¡Œä¸€è¡Œè¿è¡Œä»£ç 

æˆ‘ä»¬é€šè¿‡ä¸€æ®µä»£ç æ¥è§£é‡Šè¿™ä¸ªè¿è¡Œè¿‡ç¨‹ï¼š

```js
console.log(a) 

var a = 1 

function b() { 
  console.log(a) 
}

b() // 1
```

ä¸Šâ¾¯è¿™æ®µä»£ç çš„å®é™…æ‰§â¾é¡ºåºä¸º:

1. JSå¼•æ“å°† `var a = 1` åˆ†è§£ä¸ºä¸¤ä¸ªéƒ¨åˆ†ï¼šå˜é‡å£°æ˜è¯­å¥ `var a = undefined` å’Œå˜é‡èµ‹å€¼è¯­å¥ `a = 1`
2. JSå¼•æ“å°† `var a = undefined` æ”¾åˆ°ä»£ç çš„æœ€å‰é¢ï¼Œè€Œ `a = 1` ä¿ç•™åœ¨åŸåœ°

ä¹Ÿå°±æ˜¯è¯´ç»è¿‡äº†è½¬æ¢ï¼Œä»£ç å°±å˜æˆäº†:

```js
var a = undefined

console.log(a) // undefined 

a = 1

function b() { 
  console.log(a) 
}

b() // 1
```

å˜é‡çš„è¿™ä¸€è½¬æ¢è¿‡ç¨‹ï¼Œå°±è¢«ç§°ä¸ºå˜é‡çš„å£°æ˜æå‡ã€‚

è€Œè¿™æ˜¯ä¸è§„èŒƒ, ä¸åˆç†çš„, æˆ‘ä»¬ç”¨çš„  let å°±æ²¡æœ‰è¿™ä¸ªå˜é‡æå‡çš„é—®é¢˜

## 2. JS çš„å‚æ•°æ˜¯ä»¥ä»€ä¹ˆæ–¹å¼è¿›è¡Œä¼ é€’çš„ï¼Ÿ

åŸºæœ¬æ•°æ®ç±»å‹å’Œå¤æ‚æ•°æ®ç±»å‹çš„æ•°æ®åœ¨ä¼ é€’æ—¶ï¼Œä¼šæœ‰ä¸åŒçš„è¡¨ç°ã€‚

**åŸºæœ¬ç±»å‹ï¼šæ˜¯å€¼ä¼ é€’**ï¼

åŸºæœ¬ç±»å‹çš„ä¼ é€’æ–¹å¼æ¯”è¾ƒç®€å•ï¼Œæ˜¯æŒ‰ç…§ `å€¼ä¼ é€’` è¿›è¡Œçš„ã€‚

```js
let a = 1

function test(x) { 
  x = 10  // å¹¶ä¸ä¼šæ”¹å˜å®å‚çš„å€¼
  console.log(x)
}

test(a) // 10 
console.log(a) // 1
```

**å¤æ‚ç±»å‹: ä¼ é€’çš„æ˜¯åœ°å€! (å˜é‡ä¸­å­˜çš„å°±æ˜¯åœ°å€)**

![img](https://wuxiaohui-1254415986.cos.ap-nanjing.myqcloud.com/uPic/20210527234540.png)

æ¥çœ‹ä¸‹é¢çš„ä»£ç ï¼š

```js
let a = {
  count: 1 
}

function test(x) { 
  x.count = 10
  console.log(x)
}

test(a) // { count: 10 }
console.log(a) // { count: 10 }
```

ä»è¿è¡Œç»“æœæ¥çœ‹ï¼Œå‡½æ•°å†…æ”¹å˜äº†å‚æ•°å¯¹è±¡å†…çš„ `count` åï¼Œå¤–éƒ¨çš„å®å‚å¯¹è±¡ `a` çš„å†…å®¹ä¹Ÿè·Ÿç€æ”¹å˜äº†ï¼Œæ‰€ä»¥ä¼ é€’çš„æ˜¯åœ°å€ã€‚

æ€è€ƒé¢˜:

```js
let a = {
  count: 1 
}; 

function test(x) { 
  x = { count: 20 };
  console.log(x); 
}

test(a); // { count: 20 }
console.log(a); // { count: 1 }
```

![img](https://wuxiaohui-1254415986.cos.ap-nanjing.myqcloud.com/uPic/20210527234545.png)

æˆ‘ä»¬ä¼šå‘ç°å¤–éƒ¨çš„å®å‚å¯¹è±¡ `a` å¹¶æ²¡æœ‰å› ä¸ºåœ¨å‡½æ•°å†…å¯¹å½¢å‚çš„é‡æ–°èµ‹å€¼è€Œè¢«æ”¹å˜ï¼

å› ä¸ºå½“æˆ‘ä»¬ç›´æ¥ä¸ºè¿™ä¸ªå½¢å‚å˜é‡é‡æ–°èµ‹å€¼æ—¶ï¼Œå…¶å®åªæ˜¯è®©å½¢å‚å˜é‡æŒ‡å‘äº†åˆ«çš„å †å†…å­˜åœ°å€ï¼Œè€Œå¤–éƒ¨å®å‚å˜é‡çš„æŒ‡å‘è¿˜æ˜¯ä¸å˜çš„ã€‚

ä¸‹å›¾å±•ç¤ºçš„æ˜¯å¤æ‚ç±»å‹å‚æ•°ä¼ é€’åçš„çŠ¶æ€ï¼š

![img](https://wuxiaohui-1254415986.cos.ap-nanjing.myqcloud.com/uPic/20210527233441.png)

ä¸‹å›¾å±•ç¤ºçš„æ˜¯é‡æ–°ä¸ºå½¢å‚èµ‹å€¼åçš„çŠ¶æ€ï¼š

![img](https://wuxiaohui-1254415986.cos.ap-nanjing.myqcloud.com/uPic/20210527233445.png)

## 3. JavaScriptåƒåœ¾å›æ”¶æ˜¯æ€ä¹ˆåšçš„ï¼Ÿ

JSä¸­å†…å­˜çš„åˆ†é…å’Œå›æ”¶éƒ½æ˜¯è‡ªåŠ¨å®Œæˆçš„ï¼Œå†…å­˜åœ¨ä¸ä½¿ç”¨çš„æ—¶å€™ä¼šè¢«åƒåœ¾å›æ”¶å™¨è‡ªåŠ¨å›æ”¶ã€‚

æ­£å› ä¸ºåƒåœ¾å›æ”¶å™¨çš„å­˜åœ¨ï¼Œè®¸å¤šäººè®¤ä¸ºJSä¸ç”¨å¤ªå…³å¿ƒå†…å­˜ç®¡ç†çš„é—®é¢˜ï¼Œ

ä½†å¦‚æœä¸äº†è§£JSçš„å†…å­˜ç®¡ç†æœºåˆ¶ï¼Œæˆ‘ä»¬åŒæ ·éå¸¸å®¹æ˜“æˆå†…å­˜æ³„æ¼ï¼ˆå†…å­˜æ— æ³•è¢«å›æ”¶ï¼‰çš„æƒ…å†µã€‚

### 3.1 å†…å­˜çš„ç”Ÿå‘½å‘¨æœŸ

JSç¯å¢ƒä¸­åˆ†é…çš„å†…å­˜, ä¸€èˆ¬æœ‰å¦‚ä¸‹ç”Ÿå‘½å‘¨æœŸï¼š

1. å†…å­˜åˆ†é…ï¼šå½“æˆ‘ä»¬å£°æ˜å˜é‡ã€å‡½æ•°ã€å¯¹è±¡çš„æ—¶å€™ï¼Œç³»ç»Ÿä¼šè‡ªåŠ¨ä¸ºä»–ä»¬åˆ†é…å†…å­˜
2. å†…å­˜ä½¿ç”¨ï¼šå³è¯»å†™å†…å­˜ï¼Œä¹Ÿå°±æ˜¯ä½¿ç”¨å˜é‡ã€å‡½æ•°ç­‰
3. å†…å­˜å›æ”¶ï¼šä½¿ç”¨å®Œæ¯•ï¼Œç”±åƒåœ¾å›æ”¶è‡ªåŠ¨å›æ”¶ä¸å†ä½¿ç”¨çš„å†…å­˜

å…¨å±€å˜é‡ä¸€èˆ¬ä¸ä¼šå›æ”¶, ä¸€èˆ¬å±€éƒ¨å˜é‡çš„çš„å€¼, ä¸ç”¨äº†, ä¼šè¢«è‡ªåŠ¨å›æ”¶æ‰

å†…å­˜åˆ†é…:

```js
// ä¸ºå˜é‡åˆ†é…å†…å­˜
let i = 11
let s = "ifcode"

// ä¸ºå¯¹è±¡åˆ†é…å†…å­˜
let person = {
    age: 22,
    name: 'ifcode'
}

// ä¸ºå‡½æ•°åˆ†é…å†…å­˜
function sum(a, b) {
    return a + b;
}
```

### 3.2 åƒåœ¾å›æ”¶ç®—æ³•è¯´æ˜

æ‰€è°“åƒåœ¾å›æ”¶, æ ¸å¿ƒæ€æƒ³å°±æ˜¯å¦‚ä½•åˆ¤æ–­å†…å­˜æ˜¯å¦å·²ç»ä¸å†ä¼šè¢«ä½¿ç”¨äº†, å¦‚æœæ˜¯, å°±è§†ä¸ºåƒåœ¾, é‡Šæ”¾æ‰

ä¸‹é¢ä»‹ç»ä¸¤ç§å¸¸è§çš„æµè§ˆå™¨åƒåœ¾å›æ”¶ç®—æ³•: å¼•ç”¨è®¡æ•° å’Œ æ ‡è®°æ¸…é™¤æ³•

### 3.3 å¼•ç”¨è®¡æ•°

IEé‡‡ç”¨çš„å¼•ç”¨è®¡æ•°ç®—æ³•, å®šä¹‰â€œå†…å­˜ä¸å†ä½¿ç”¨â€çš„æ ‡å‡†å¾ˆç®€å•ï¼Œå°±æ˜¯çœ‹ä¸€ä¸ªå¯¹è±¡æ˜¯å¦æœ‰æŒ‡å‘å®ƒçš„å¼•ç”¨ã€‚

å¦‚æœæ²¡æœ‰ä»»ä½•å˜é‡æŒ‡å‘å®ƒäº†ï¼Œè¯´æ˜è¯¥å¯¹è±¡å·²ç»ä¸å†éœ€è¦äº†ã€‚

```js
// åˆ›å»ºä¸€ä¸ªå¯¹è±¡person, personæŒ‡å‘ä¸€å—å†…å­˜ç©ºé—´, è¯¥å†…å­˜ç©ºé—´çš„å¼•ç”¨æ•° +1
let person = {
    age: 22,
    name: 'ifcode'
}

let p = person   // ä¸¤ä¸ªå˜é‡æŒ‡å‘ä¸€å—å†…å­˜ç©ºé—´, è¯¥å†…å­˜ç©ºé—´çš„å¼•ç”¨æ•°ä¸º 2
person = 1       // åŸæ¥çš„personå¯¹è±¡è¢«èµ‹å€¼ä¸º1ï¼Œå¯¹è±¡å†…å­˜ç©ºé—´çš„å¼•ç”¨æ•°-1,
                 // ä½†å› ä¸ºpæŒ‡å‘åŸpersonå¯¹è±¡ï¼Œè¿˜å‰©ä¸€ä¸ªå¯¹äºå¯¹è±¡ç©ºé—´çš„å¼•ç”¨, æ‰€ä»¥å¯¹è±¡å®ƒä¸ä¼šè¢«å›æ”¶

p = null         // åŸpersonå¯¹è±¡å·²ç»æ²¡æœ‰å¼•ç”¨ï¼Œä¼šè¢«å›æ”¶
```

ç”±ä¸Šé¢å¯ä»¥çœ‹å‡ºï¼Œå¼•ç”¨è®¡æ•°ç®—æ³•æ˜¯ä¸ªç®€å•æœ‰æ•ˆçš„ç®—æ³•ã€‚

**ä½†å®ƒå´å­˜åœ¨ä¸€ä¸ªè‡´å‘½çš„é—®é¢˜ï¼šå¾ªç¯å¼•ç”¨ã€‚**

å¦‚æœä¸¤ä¸ªå¯¹è±¡ç›¸äº’å¼•ç”¨ï¼Œå°½ç®¡ä»–ä»¬å·²ä¸å†ä½¿ç”¨ï¼Œåƒåœ¾å›æ”¶å™¨ä¸ä¼šè¿›è¡Œå›æ”¶ï¼Œå¯¼è‡´å†…å­˜æ³„éœ²ã€‚

```js
function cycle() {
    let o1 = {}
    let o2 = {}
    o1.a = o2
    o2.a = o1 
    return "Cycle reference!"
}

cycle()
```

![img](https://wuxiaohui-1254415986.cos.ap-nanjing.myqcloud.com/uPic/20210527234616.png)

### 3.4 æ ‡è®°æ¸…é™¤ç®—æ³•

ç°ä»£çš„æµè§ˆå™¨å·²ç»ä¸å†ä½¿ç”¨å¼•ç”¨è®¡æ•°ç®—æ³•äº†ã€‚

ç°ä»£æµè§ˆå™¨é€šç”¨çš„å¤§å¤šæ˜¯åŸºäºæ ‡è®°æ¸…é™¤ç®—æ³•çš„æŸäº›æ”¹è¿›ç®—æ³•ï¼Œæ€»ä½“æ€æƒ³éƒ½æ˜¯ä¸€è‡´çš„ã€‚

æ ‡è®°æ¸…é™¤æ³•:

- æ ‡è®°æ¸…é™¤ç®—æ³•å°†â€œä¸å†ä½¿ç”¨çš„å¯¹è±¡â€å®šä¹‰ä¸ºâ€œæ— æ³•è¾¾åˆ°çš„å¯¹è±¡â€ã€‚
- ç®€å•æ¥è¯´ï¼Œå°±æ˜¯ä»æ ¹éƒ¨ï¼ˆåœ¨JSä¸­å°±æ˜¯å…¨å±€å¯¹è±¡ï¼‰å‡ºå‘å®šæ—¶æ‰«æå†…å­˜ä¸­çš„å¯¹è±¡ã€‚
- å‡¡æ˜¯èƒ½ä»æ ¹éƒ¨åˆ°è¾¾çš„å¯¹è±¡ï¼Œéƒ½æ˜¯è¿˜éœ€è¦ä½¿ç”¨çš„ã€‚é‚£äº›æ— æ³•ç”±æ ¹éƒ¨å‡ºå‘è§¦åŠåˆ°çš„å¯¹è±¡è¢«æ ‡è®°ä¸ºä¸å†ä½¿ç”¨ï¼Œç¨åè¿›è¡Œå›æ”¶ã€‚

ä»è¿™ä¸ªæ¦‚å¿µå¯ä»¥çœ‹å‡ºï¼Œæ— æ³•è§¦åŠçš„å¯¹è±¡åŒ…å«äº†æ²¡æœ‰å¼•ç”¨çš„å¯¹è±¡è¿™ä¸ªæ¦‚å¿µï¼ˆæ²¡æœ‰ä»»ä½•å¼•ç”¨çš„å¯¹è±¡ä¹Ÿæ˜¯æ— æ³•è§¦åŠçš„å¯¹è±¡ï¼‰ã€‚

æ ¹æ®è¿™ä¸ªæ¦‚å¿µï¼Œä¸Šé¢çš„ä¾‹å­å¯ä»¥æ­£ç¡®è¢«åƒåœ¾å›æ”¶å¤„ç†äº†ã€‚

å‚è€ƒæ–‡ç« ï¼š[JavaScriptå†…å­˜ç®¡ç†](https://www.jianshu.com/p/84a8fd5fa0ee)

## 4. è°ˆè°ˆä½ å¯¹ JavaScript ä½œç”¨åŸŸé“¾çš„ç†è§£ï¼Ÿ

JavaScript åœ¨æ‰§â¾è¿‡ç¨‹ä¸­ä¼šåˆ›å»ºä¸€ä¸ªä¸ªçš„**å¯æ‰§â¾ä¸Šä¸‹â½‚**ã€‚ (æ¯ä¸ªå‡½æ•°æ‰§è¡Œéƒ½ä¼šåˆ›å»ºè¿™ä¹ˆä¸€ä¸ªå¯æ‰§è¡Œä¸Šä¸‹æ–‡)

æ¯ä¸ªå¯æ‰§â¾ä¸Šä¸‹â½‚çš„è¯æ³•ç¯å¢ƒä¸­åŒ…å«äº†å¯¹å¤–éƒ¨è¯æ³•ç¯å¢ƒçš„å¼•â½¤ï¼Œå¯é€šè¿‡è¯¥å¼•â½¤æ¥è·å–å¤–éƒ¨è¯æ³•ç¯å¢ƒä¸­çš„å˜é‡å’Œå£°æ˜ç­‰ã€‚

è¿™äº›å¼•â½¤ä¸²è”èµ·æ¥ï¼Œâ¼€ç›´æŒ‡å‘å…¨å±€çš„è¯æ³•ç¯å¢ƒï¼Œå½¢æˆä¸€ä¸ªé“¾å¼ç»“æ„ï¼Œè¢«ç§°ä¸ºä½œâ½¤åŸŸé“¾ã€‚

ç®€è€Œè¨€ä¹‹: å‡½æ•°å†…éƒ¨ å¯ä»¥è®¿é—®åˆ° å‡½æ•°å¤–éƒ¨ä½œç”¨åŸŸçš„å˜é‡,  è€Œå¤–éƒ¨å‡½æ•°è¿˜å¯ä»¥è®¿é—®åˆ°å…¨å±€ä½œç”¨åŸŸçš„å˜é‡,

è¿™æ ·çš„å˜é‡ä½œç”¨åŸŸè®¿é—®çš„é“¾å¼ç»“æ„, è¢«ç§°ä¹‹ä¸ºä½œç”¨åŸŸé“¾

```js
let num = 1

function fn () {
  let a = 100
  function inner () {
    console.log(a)
    console.log(num)
  }
  inner()
}
fn()
```

ä¸‹å›¾ä¸ºç”±å¤šä¸ªå¯æ‰§è¡Œä¸Šä¸‹æ–‡ç»„æˆçš„è°ƒç”¨æ ˆï¼š

- æ ˆæœ€åº•éƒ¨ä¸º`å…¨å±€å¯æ‰§è¡Œä¸Šä¸‹æ–‡`
- `å…¨å±€å¯æ‰§è¡Œä¸Šä¸‹æ–‡` ä¹‹ä¸Šæœ‰å¤šä¸ª `å‡½æ•°å¯æ‰§è¡Œä¸Šä¸‹æ–‡`
- æ¯ä¸ªå¯æ‰§è¡Œä¸Šä¸‹æ–‡ä¸­åŒ…å«äº†æŒ‡å‘å¤–éƒ¨å…¶ä»–å¯æ‰§è¡Œä¸Šä¸‹æ–‡çš„å¼•ç”¨ï¼Œç›´åˆ° `å…¨å±€å¯æ‰§è¡Œä¸Šä¸‹æ–‡` æ—¶å®ƒæŒ‡å‘ `null`

![img](https://wuxiaohui-1254415986.cos.ap-nanjing.myqcloud.com/uPic/20210527233455.png)

![img](https://wuxiaohui-1254415986.cos.ap-nanjing.myqcloud.com/uPic/20210527233503.png)

jså…¨å±€æœ‰å…¨å±€å¯æ‰§è¡Œä¸Šä¸‹æ–‡, æ¯ä¸ªå‡½æ•°è°ƒç”¨æ—¶, æœ‰ç€å‡½æ•°çš„å¯æ‰§è¡Œä¸Šä¸‹æ–‡, ä¼šå…¥jsè°ƒç”¨æ ˆ

æ¯ä¸ªå¯æ‰§è¡Œä¸Šä¸‹æ–‡, éƒ½æœ‰è€…å¯¹äºå¤–éƒ¨ä¸Šä¸‹æ–‡è¯æ³•ä½œç”¨åŸŸçš„å¼•ç”¨, å¤–éƒ¨ä¸Šä¸‹æ–‡ä¹Ÿæœ‰ç€å¯¹äºå†å¤–éƒ¨çš„ä¸Šä¸‹æ–‡è¯æ³•ä½œç”¨åŸŸçš„å¼•ç”¨

**=> å°±å½¢æˆäº†ä½œç”¨åŸŸé“¾**

## 5. è°ˆè°ˆä½ å¯¹é—­åŒ…çš„ç†è§£ï¼Ÿ

è¿™ä¸ªé—®é¢˜æƒ³è€ƒå¯Ÿçš„ä¸»è¦æœ‰ä¸¤ä¸ªæ–¹é¢ï¼š

- å¯¹é—­åŒ…çš„åŸºæœ¬æ¦‚å¿µçš„ç†è§£
- å¯¹é—­åŒ…çš„ä½œç”¨çš„äº†è§£

**ä»€ä¹ˆæ˜¯é—­åŒ…ï¼Ÿ**

MDNçš„å®˜æ–¹è§£é‡Šï¼š

> é—­åŒ…æ˜¯å‡½æ•°å’Œå£°æ˜è¯¥å‡½æ•°çš„è¯æ³•ç¯å¢ƒçš„ç»„åˆ

æ›´é€šä¿—ä¸€ç‚¹çš„è§£é‡Šæ˜¯ï¼š

> å†…å±‚å‡½æ•°, å¼•ç”¨å¤–å±‚å‡½æ•°ä¸Šçš„å˜é‡, å°±å¯ä»¥å½¢æˆé—­åŒ…

éœ€æ±‚: å®šä¹‰ä¸€ä¸ªè®¡æ•°å™¨æ–¹æ³•, æ¯æ¬¡æ‰§è¡Œä¸€æ¬¡å‡½æ•°, å°±è°ƒç”¨ä¸€æ¬¡è¿›è¡Œè®¡æ•°

```js
let count = 0
function fn () {
  count++
  console.log('fnå‡½æ•°è¢«è°ƒç”¨äº†' + count + 'æ¬¡')
}
fn()
```

è¿™æ ·ä¸å¥½! count å®šä¹‰æˆäº†å…¨å±€å˜é‡, å¤ªå®¹æ˜“è¢«åˆ«äººä¿®æ”¹äº†,  æˆ‘ä»¬å¯ä»¥åˆ©ç”¨é—­åŒ…è§£å†³

é—­åŒ…å®ä¾‹:

```js
function fn () {
  let count = 0

  function add () {
    count++
    console.log('fnå‡½æ•°è¢«è°ƒç”¨äº†' + count + 'æ¬¡')
  }

  return add
}
const addFn = fn()
addFn()
addFn()
addFn()
```

**é—­åŒ…çš„ä¸»è¦ä½œç”¨æ˜¯ä»€ä¹ˆï¼Ÿ**

åœ¨å®é™…å¼€å‘ä¸­ï¼Œé—­åŒ…æœ€å¤§çš„ä½œç”¨å°±æ˜¯ç”¨æ¥ **å˜é‡ç§æœ‰**ã€‚

ä¸‹é¢å†æ¥çœ‹ä¸€ä¸ªç®€å•ç¤ºä¾‹ï¼š

```js
function Person() {
  // ä»¥ let å£°æ˜ä¸€ä¸ªå±€éƒ¨å˜é‡ï¼Œè€Œä¸æ˜¯ this.name
  // this.name = 'zs'     =>  p.name
  let name = 'hm_programmer' // æ•°æ®ç§æœ‰
  
  this.getName = function(){ 
    return name
  }
  
  this.setName = function(value){ 
    name = value
  }
}

// new:
// 1. åˆ›å»ºä¸€ä¸ªæ–°çš„å¯¹è±¡
// 2. è®©æ„é€ å‡½æ•°çš„thisæŒ‡å‘è¿™ä¸ªæ–°å¯¹è±¡
// 3. æ‰§è¡Œæ„é€ å‡½æ•°
// 4. è¿”å›å®ä¾‹
const p = new Person()
console.log(p.getName()) // hm_programmer

p.setName('Tom')
console.log(p.getName()) // Tom

p.name // è®¿é—®ä¸åˆ° name å˜é‡ï¼šundefined
```

åœ¨æ­¤ç¤ºä¾‹ä¸­ï¼Œå˜é‡ `name` åªèƒ½é€šè¿‡ Person çš„å®ä¾‹æ–¹æ³•è¿›è¡Œè®¿é—®ï¼Œå¤–éƒ¨ä¸èƒ½ç›´æ¥é€šè¿‡å®ä¾‹è¿›è¡Œè®¿é—®ï¼Œå½¢æˆäº†ä¸€ä¸ªç§æœ‰å˜é‡ã€‚

## 6. JavaScriptä¸­æ•°æ®ç±»å‹çš„éšå¼è½¬æ¢è§„åˆ™(äº†è§£)

åœ¨ifè¯­å¥ã€é€»è¾‘è¯­å¥ã€æ•°å­¦è¿ç®—é€»è¾‘ã€== ç­‰æƒ…å†µä¸‹éƒ½å¯èƒ½å‡ºç°éšå¼ç±»å‹è½¬æ¢ã€‚

ä¸‹è¡¨å±•ç¤ºäº†ä¸€ç³»åˆ—åŸå§‹å€¼ï¼Œé€šè¿‡éšå¼è½¬æ¢æˆæ•°å­—ã€å­—ç¬¦ä¸²ã€å¸ƒå°”ç±»å‹åæ‰€å¾—åˆ°çš„å€¼ï¼š

![img](https://wuxiaohui-1254415986.cos.ap-nanjing.myqcloud.com/uPic/20210527233512.png)

å‘: åˆ¤æ–­æ—¶,  å°½é‡ä¸è¦ç”¨ `= =` , è¦ç”¨ `= = =` ( ä¸¤ä¸ªç­‰å·åˆ¤æ–­,  å¦‚æœç±»å‹ä¸åŒ,  é»˜è®¤ä¼šè¿›è¡Œéšå¼ç±»å‹è½¬æ¢å†æ¯”è¾ƒ)

## 7. è°ˆè°ˆä½ å¯¹åŸå‹é“¾çš„ç†è§£ï¼Ÿ

è¦è®²æ¸…æ¥šè¿™ä¸ªé—®é¢˜ï¼Œä¸»è¦ç€é‡è¿™å‡ ä¸ªæ–¹é¢ï¼š

- ä»€ä¹ˆæ˜¯åŸå‹å¯¹è±¡
- æ„é€ å‡½æ•°, åŸå‹å¯¹è±¡, å®ä¾‹çš„ä¸‰è§’å…³ç³»å›¾
- åŸå‹é“¾å¦‚ä½•å½¢æˆ

![img](https://wuxiaohui-1254415986.cos.ap-nanjing.myqcloud.com/uPic/20210527233517.png)

**åŸå‹å¯¹è±¡**

åœ¨ JavaScript ä¸­ï¼Œé™¤å»ä¸€éƒ¨åˆ†å†…å»ºå‡½æ•°ï¼Œç»å¤§å¤šæ•°çš„å‡½æ•°éƒ½ä¼šåŒ…å«æœ‰ä¸€ä¸ªå«åš `prototype` çš„å±æ€§ï¼ŒæŒ‡å‘åŸå‹å¯¹è±¡ï¼Œ

åŸºäºæ„é€ å‡½æ•°åˆ›å»ºå‡ºæ¥çš„å®ä¾‹, éƒ½å¯ä»¥å…±äº«è®¿é—®åŸå‹å¯¹è±¡çš„å±æ€§ã€‚

ä¾‹å¦‚æˆ‘ä»¬çš„ `hasOwnProperty`, `toString` â½…æ³•ç­‰å…¶å®æ˜¯ Obejct åŸå‹å¯¹è±¡çš„æ–¹æ³•ï¼Œå®ƒå¯ä»¥è¢«ä»»ä½•å¯¹è±¡å½“åšâ¾ƒâ¼°çš„â½…æ³•æ¥ä½¿â½¤ã€‚

`hasOwnProperty` ç”¨äºåˆ¤æ–­, æŸä¸ªå±æ€§, æ˜¯ä¸æ˜¯è‡ªå·±çš„  (è¿˜æ˜¯åŸå‹é“¾ä¸Šçš„)

æ¥çœ‹ä¸€æ®µä»£ç ï¼š

```js
let person = { 
  name: "Tom", 
  age: 18, 
  job: "student"
}

console.log(person.hasOwnProperty("name")) // true 
console.log(person.hasOwnProperty("hasOwnProperty")) // false 
console.log(Object.prototype.hasOwnProperty("hasOwnProperty")) // true
```

å¯ä»¥çœ‹åˆ°ï¼Œ`hasOwnProperty` å¹¶ä¸æ˜¯ `person` å¯¹è±¡çš„å±æ€§ï¼Œä½†æ˜¯ `person` å´èƒ½è°ƒç”¨å®ƒã€‚

é‚£ä¹ˆ `person` å¯¹è±¡æ˜¯å¦‚ä½•æ‰¾åˆ° Object åŸå‹ä¸­çš„ `hasOwnProperty` çš„å‘¢ï¼Ÿè¿™å°±è¦é åŸå‹é“¾çš„èƒ½åŠ›äº†ã€‚

éœ€æ±‚: ç®€å•ç»˜åˆ¶åŸå‹ä¸‰è§’å…³ç³»å›¾!

**åŸå‹é“¾**

åœ¨ JavaScript ä¸­ï¼Œæ¯ä¸ªå¯¹è±¡ä¸­éƒ½æœ‰ä¸€ä¸ª `__proto__` å±æ€§ï¼Œè¿™ä¸ªå±æ€§æŒ‡å‘äº†å½“å‰å¯¹è±¡çš„æ„é€ å‡½æ•°çš„åŸå‹ã€‚

å¯¹è±¡å¯ä»¥é€šè¿‡è‡ªèº«çš„ `__proto__`å±æ€§ä¸å®ƒçš„æ„é€ å‡½æ•°çš„åŸå‹å¯¹è±¡è¿æ¥èµ·æ¥ï¼Œ

è€Œå› ä¸ºå®ƒçš„åŸå‹å¯¹è±¡ä¹Ÿæœ‰ `__proto__`ï¼Œå› æ­¤è¿™æ ·å°±ä¸²è”å½¢æˆä¸€ä¸ªé“¾å¼ç»“æ„ï¼Œä¹Ÿå°±æ˜¯æˆ‘ä»¬ç§°ä¸ºçš„åŸå‹é“¾ã€‚

![img](https://wuxiaohui-1254415986.cos.ap-nanjing.myqcloud.com/uPic/20210527233521.png)

## 6. è°ˆè°ˆå¯¹äºç»§æ‰¿çš„ç†è§£

**ä¸ºä»€ä¹ˆè¦å­¦ä¹ ç»§æ‰¿ ?**

å†™çš„æ„é€ å‡½æ•°, å®šä¹‰äº†ä¸€ä¸ªç±»å‹ (äººç±»), ä¸‡ä¸€é¡¹ç›®éå¸¸å¤§, åˆæœ‰äº†ç»†åŒ–çš„å¤šä¸ªç±»å‹ (è€å¸ˆ, å·¥äºº, å­¦ç”Ÿ)

å­¦ä¹ ç»§æ‰¿, å¯ä»¥è®©å¤šä¸ªæ„é€ å‡½æ•°ä¹‹é—´å»ºç«‹å…³è”, ä¾¿äºç®¡ç†å’Œå¤ç”¨

**ä»€ä¹ˆæ˜¯ç»§æ‰¿ ?**

ç»§æ‰¿: ä»åˆ«äººé‚£é‡Œ, ç»§æ‰¿ä¸œè¥¿è¿‡æ¥ (è´¢äº§, æˆ¿äº§)

ä»£ç å±‚é¢çš„ç»§æ‰¿: ç»§æ‰¿ä¸€äº›å±æ€§å’Œæ–¹æ³•

### 6.1 ç»§æ‰¿ - åŸå‹ç»§æ‰¿

åŸå‹ç»§æ‰¿: é€šè¿‡æ”¹é€ åŸå‹é“¾, åˆ©ç”¨åŸå‹é“¾çš„è¯­æ³•, å®ç°ç»§æ‰¿æ–¹æ³•!

åˆ†æéœ€æ±‚:

```js
äººç±», å±æ€§: name, age

å­¦ç”Ÿ, å±æ€§: name, age, className

å·¥äºº, å±æ€§: name, age, companyName
```

æ— è®ºå­¦ç”Ÿ, è¿˜æ˜¯å·¥äºº, => éƒ½æ˜¯äººç±», æ‰€ä»¥äººç±»åŸå‹ä¸Šæœ‰çš„æ–¹æ³•, ä»–ä»¬éƒ½åº”è¯¥è¦æœ‰

```js
// 1. å®šä¹‰Personæ„é€ å‡½æ•°
function Person (name, age) {
  this.name = name
  this.age = age
}
Person.prototype.say = function () {
  console.log('äººç±»ä¼šè¯´è¯')
}

// 2. å®šä¹‰Studentæ„é€ å‡½æ•°
function Student (name, age, className) {
  this.name = name
  this.age = age
  this.className = className
}
// 3. åŸå‹ç»§æ‰¿: åˆ©ç”¨åŸå‹é“¾, ç»§æ‰¿äºçˆ¶çº§æ„é€ å‡½æ•°, ç»§æ‰¿åŸå‹ä¸Šçš„æ–¹æ³•
// è¯­æ³•: å­æ„é€ å‡½æ•°.prototype = new çˆ¶æ„é€ å‡½æ•°()
Student.prototype = new Person()
Student.prototype.study = function() {
  console.log('å­¦ç”Ÿåœ¨å­¦ä¹ ')
}

let stu = new Student('å¼ ä¸‰', 18, '80æœŸ')
stu.say()
console.log(stu)
```

![img](https://wuxiaohui-1254415986.cos.ap-nanjing.myqcloud.com/uPic/20210527233527.png)

### 6.2 ç»§æ‰¿ - ç»„åˆç»§æ‰¿

ç»„åˆç»§æ‰¿æœ‰æ—¶å€™ä¹Ÿå«ä¼ªç»å…¸ç»§æ‰¿ï¼ŒæŒ‡çš„æ˜¯å°†åŸå‹é“¾ å’Œ å€Ÿç”¨æ„é€ å‡½æ•° call æŠ€æœ¯ç»„åˆåˆ°ä¸€å—ï¼Œ

ä»è€Œå‘æŒ¥äºŒè€…ä¹‹é•¿çš„ä¸€ç§ç»§æ‰¿æ¨¡å¼ï¼Œå…¶èƒŒåçš„æ€è·¯: **æ˜¯ä½¿ç”¨åŸå‹é“¾å®ç°å¯¹åŸå‹å±æ€§å’Œæ–¹æ³•çš„ç»§æ‰¿ (ä¸»è¦æ˜¯æ–¹æ³•)ï¼Œ**

**è€Œé€šè¿‡å€Ÿç”¨æ„é€ å‡½æ•°æ¥å®ç°å¯¹å®ä¾‹å±æ€§æ„é€ çš„ç»§æ‰¿**ã€‚è¿™æ ·æ—¢é€šè¿‡åœ¨åŸå‹ä¸Šå®šä¹‰æ–¹æ³•å®ç°äº†å‡½æ•°å¤ç”¨ï¼Œåˆèƒ½ä¿è¯æ¯ä¸ªå®ä¾‹éƒ½æœ‰å®ƒçš„è‡ªå·±çš„å±æ€§ã€‚

```js
// 1. å®šä¹‰Personæ„é€ å‡½æ•°
function Person (name, age) {
  this.name = name
  this.age = age
}
Person.prototype.say = function () {
  console.log('äººç±»ä¼šè¯´è¯')
}

// 2. å®šä¹‰Studentæ„é€ å‡½æ•°
function Student (name, age, className) {
  Person.call(this, name, age) // å®ç°æ„é€ å±æ€§çš„ç»§æ‰¿
  this.className = className
}

// 3. åŸå‹ç»§æ‰¿: åˆ©ç”¨åŸå‹é“¾, ç»§æ‰¿äºçˆ¶çº§æ„é€ å‡½æ•°, ç»§æ‰¿åŸå‹ä¸Šçš„æ–¹æ³•
// è¯­æ³•: å­æ„é€ å‡½æ•°.prototype = new çˆ¶æ„é€ å‡½æ•°()
Student.prototype = new Person()
Student.prototype.study = function() {
  console.log('å­¦ç”Ÿåœ¨å­¦ä¹ ')
}

let stu = new Student('å¼ ä¸‰', 18, '80æœŸ')
stu.say()
console.log(stu)

// æ–¹æ³•é€šè¿‡ åŸå‹ç»§æ‰¿
// å±æ€§é€šè¿‡ çˆ¶æ„é€ å‡½æ•°çš„.call(this, name, age)
```

### 6.3 ç»§æ‰¿ - å¯„ç”Ÿç»„åˆç»§æ‰¿

studentå®ä¾‹ä¸Šæœ‰ name age,  è€ŒåŸå‹ `__proto__`ä¸Šä¸éœ€è¦å†æœ‰è¿™äº›å±æ€§, æ‰€ä»¥åˆ©ç”¨ Object.create æ”¹è£…ä¸‹

Object.create(å‚æ•°å¯¹è±¡),

1. Object.create ä¼šåˆ›å»ºä¸€ä¸ªæ–°å¯¹è±¡,
2. å¹¶ä¸”è¿™ä¸ªæ–°å¯¹è±¡çš„`__proto__` ä¼šæŒ‡å‘ä¼ å…¥çš„å‚æ•°å¯¹è±¡

```js
// 1. å®šä¹‰Personæ„é€ å‡½æ•°
function Person (name, age) {
  this.name = name
  this.age = age
}
Person.prototype.say = function () {
  console.log('äººç±»ä¼šè¯´è¯')
}

// 2. å®šä¹‰Studentæ„é€ å‡½æ•°
function Student (name, age, className) {
  Person.call(this, name, age)
  this.className = className
}

// 3. åŸå‹ç»§æ‰¿: åˆ©ç”¨åŸå‹é“¾, ç»§æ‰¿äºçˆ¶çº§æ„é€ å‡½æ•°, ç»§æ‰¿åŸå‹ä¸Šçš„æ–¹æ³•
// è¯­æ³•: å­æ„é€ å‡½æ•°.prototype = new çˆ¶æ„é€ å‡½æ•°()
Student.prototype = Object.create(Person.prototype)
Student.prototype.study = function() {
  console.log('å­¦ç”Ÿåœ¨å­¦ä¹ ')
}

let stu = new Student('å¼ ä¸‰', 18, '80æœŸ')
stu.say()
console.log(stu)


// æ€»ç»“:
// Object.create() ä»¥å‚æ•°çš„å¯¹è±¡, ä½œä¸ºæ–°å»ºå¯¹è±¡çš„__proto__å±æ€§çš„å€¼, è¿”å›æ–°å»ºçš„å¯¹è±¡
```

![img](https://wuxiaohui-1254415986.cos.ap-nanjing.myqcloud.com/uPic/20210527234643.png)

### 6.4 es6 - class å®ç°ç»§æ‰¿ extends

```js
// ç»§æ‰¿å…³é”®å­— => extends
class Person {
  constructor (name, age) {
    this.name = name
    this.age = age
  }
  jump () {
    console.log('ä¼šè·³')
  }
}

class Teacher extends Person {
  constructor (name, age, lesson) {
    super(name, age) // extends ä¸­, å¿…é¡»è°ƒç”¨ super(), ä¼šè§¦å‘æ‰§è¡Œçˆ¶ç±»çš„æ„é€ å‡½æ•°
    this.lesson = lesson
    console.log('æ„é€ å‡½æ•°æ‰§è¡Œäº†')
  }
  sayHello () {
    console.log('ä¼šæ‰“æ‹›å‘¼')
  }
}

let teacher1 = new Teacher('zs', 18, 'ä½“è‚²')
console.log(teacher1)
```

## 8. å¦‚ä½•åˆ¤æ–­æ˜¯å¦æ˜¯æ•°ç»„ï¼Ÿ

æ–¹æ³•ä¸€ï¼šä½¿ç”¨ `toString` æ–¹æ³•

```js
function isArray(arg) {
  return Object.prototype.toString.call(arg) === '[object Array]'
}

let arr = [1,2,3]
isArray(arr)  // true
```

æ–¹æ³•äºŒï¼šä½¿ç”¨ ES6 æ–°å¢çš„ `Array.isArray` æ–¹æ³•

```js
let arr = [1,2,3]
Array.isArray(arr) // true
```

## 9. è°ˆè°ˆä½ å¯¹thisçš„ç†è§£ï¼Ÿ

`this` æ˜¯ä¸€ä¸ªåœ¨è¿è¡Œæ—¶æ‰è¿›è¡Œç»‘å®šçš„å¼•ç”¨ï¼Œåœ¨ä¸åŒçš„æƒ…å†µä¸‹å®ƒå¯èƒ½ä¼šè¢«ç»‘å®šä¸åŒçš„å¯¹è±¡ã€‚

**é»˜è®¤ç»‘å®š** (æŒ‡å‘windowçš„æƒ…å†µ)  (å‡½æ•°è°ƒç”¨æ¨¡å¼ fn() )

é»˜è®¤æƒ…å†µä¸‹ï¼Œ`this` ä¼šè¢«ç»‘å®šåˆ°å…¨å±€å¯¹è±¡ä¸Šï¼Œæ¯”å¦‚åœ¨æµè§ˆå™¨ç¯å¢ƒä¸­å°±ä¸º`window`å¯¹è±¡ï¼Œåœ¨node.jsç¯å¢ƒä¸‹ä¸º`global`å¯¹è±¡ã€‚

å¦‚ä¸‹ä»£ç å±•ç¤ºäº†è¿™ç§ç»‘å®šå…³ç³»ï¼š

```js
message = "Hello"; 

function test () { 
  console.log(this.message); 
}

test() // "Hello"
```

**éšå¼ç»‘å®š** (è°è°ƒç”¨, thisæŒ‡å‘è°) (æ–¹æ³•è°ƒç”¨æ¨¡å¼ obj.fn() )

å¦‚æœå‡½æ•°çš„è°ƒç”¨æ˜¯ä»å¯¹è±¡ä¸Šå‘èµ·æ—¶ï¼Œåˆ™è¯¥å‡½æ•°ä¸­çš„ `this` ä¼šè¢«è‡ªåŠ¨éšå¼ç»‘å®šä¸ºå¯¹è±¡ï¼š

```js
function test() {
  console.log(this.message); 
}

let obj = {
  message: "hello,world",
  test: test
}

obj.test() // "hello,world"
```

**æ˜¾å¼ç»‘å®š** (åˆå«åšç¡¬ç»‘å®š)  (ä¸Šä¸‹æ–‡è°ƒç”¨æ¨¡å¼, æƒ³è®©thisæŒ‡å‘è°, thiså°±æŒ‡å‘è°)

ç¡¬ç»‘å®š => call  apply  bind

å¯ä»¥æ˜¾å¼çš„è¿›è¡Œç»‘å®šï¼š

```js
function test() {
  console.log(this.message); 
}

let obj1 = {
  message: "ä½ å¥½ä¸–ç•Œ123"
}

let obj2 = {
  message: "ä½ å¥½ä¸–ç•Œ456"
}

test.bind(obj1)() // "ä½ å¥½ä¸–ç•Œ123"
test.bind(obj2)() // "ä½ å¥½ä¸–ç•Œ456"
```

**new ç»‘å®š** (æ„é€ å‡½æ•°æ¨¡å¼)

å¦å¤–ï¼Œåœ¨ä½¿ç”¨ `new` åˆ›å»ºå¯¹è±¡æ—¶ä¹Ÿä¼šè¿›è¡Œ `this` ç»‘å®š

å½“ä½¿ç”¨ `new` è°ƒç”¨æ„é€ å‡½æ•°æ—¶ï¼Œä¼šåˆ›å»ºä¸€ä¸ªæ–°çš„å¯¹è±¡å¹¶å°†è¯¥å¯¹è±¡ç»‘å®šåˆ°æ„é€ å‡½æ•°çš„ `this` ä¸Šï¼š

```
function Greeting(message) {
  this.message = message;
}

var obj = new Greeting("hello,world")
obj.message // "hello,world"
```

å°æµ‹è¯•:

```js
let obj = {
    a: {
        fn: function () {
            console.log(this)
        },
        b: 10
    }
}
obj.a.fn()
let temp = obj.a.fn;
temp()

// -------------------------------------------------------------

function Person(theName, theAge){
    this.name = theName
    this.age = theAge
}
Person.prototype.sayHello = function(){ // å®šä¹‰å‡½æ•°
    console.log(this)
}

let per = new Person("å°é»‘", 18)
per.sayHello()
```

## 10. ç®­å¤´å‡½æ•°ä¸­çš„thisæŒ‡å‘ä»€ä¹ˆï¼Ÿ

ç®­å¤´å‡½æ•°ä¸åŒäºä¼ ç»Ÿå‡½æ•°ï¼Œå®ƒå…¶å®æ²¡æœ‰å±äºâ¾ƒâ¼°çš„ `this`ï¼Œ

å®ƒæ‰€è°“çš„ `this` æ˜¯, æ•è·å…¶å¤–å±‚  ä¸Šä¸‹â½‚çš„ `this` å€¼ä½œä¸ºâ¾ƒâ¼°çš„ `this` å€¼ã€‚

å¹¶ä¸”ç”±äºç®­å¤´å‡½æ•°æ²¡æœ‰å±äºâ¾ƒâ¼°çš„ `this` ï¼Œå®ƒæ˜¯ä¸èƒ½è¢« `new` è°ƒâ½¤çš„ã€‚

æˆ‘ä»¬å¯ä»¥é€šè¿‡ Babel è½¬æ¢å‰åçš„ä»£ç æ¥æ›´æ¸…æ™°çš„ç†è§£ç®­å¤´å‡½æ•°:

```js
// è½¬æ¢å‰çš„ ES6 ä»£ç 
const obj = { 
  test() { 
    return () => { 
      console.log(this === obj)
    }
  } 
}
// è½¬æ¢åçš„ ES5 ä»£ç 
var obj = { 
  test: function getArrow() { 
    var that = this
    return function () { 
      console.log(that === obj)
    }
  } 
}
```

è¿™é‡Œæˆ‘ä»¬çœ‹åˆ°ï¼Œç®­å¤´å‡½æ•°ä¸­çš„ `this` å°±æ˜¯å®ƒä¸Šå±‚ä¸Šä¸‹æ–‡å‡½æ•°ä¸­çš„ `this`ã€‚

## 11. Promise çš„é™æ€æ–¹æ³•

promiseçš„ä¸‰ä¸ªçŠ¶æ€: pending(é»˜è®¤)  fulfilled(æˆåŠŸ)  rejected(å¤±è´¥)

1. resolveå‡½æ•°è¢«æ‰§è¡Œæ—¶, ä¼šå°†promiseçš„çŠ¶æ€ä» pending æ”¹æˆ fulfilled æˆåŠŸ
2. rejectå‡½æ•°è¢«æ‰§è¡Œæ—¶, ä¼šå°†promiseçš„çŠ¶æ€ä»pending æ”¹æˆ rejected å¤±è´¥

Promise.reject()

```js
new Promise((resolve, reject) => {
  reject()
})
```

Promise.resolve()

```js
new Promise((resolve, reject) => {
  resolve()
})
```

**Promise.all([promise1, promise2, promise3])**  ç­‰å¾…åŸåˆ™, æ˜¯åœ¨æ‰€æœ‰promiseéƒ½å®Œæˆåæ‰§è¡Œ, å¯ä»¥ç”¨äºå¤„ç†ä¸€äº›`å¹¶å‘çš„ä»»åŠ¡`

```js
// åé¢çš„.thenä¸­é…ç½®çš„å‡½æ•°, æ˜¯åœ¨å‰é¢çš„æ‰€æœ‰promiseéƒ½å®Œæˆåæ‰§è¡Œ, å¯ä»¥ç”¨äºå¤„ç†ä¸€äº›å¹¶å‘çš„ä»»åŠ¡
Promise.all([promise1, promise2, promise3]).then((values) => {
  // values æ˜¯ä¸€ä¸ªæ•°ç»„, ä¼šæ”¶é›†å‰é¢promiseçš„ç»“æœ values[0] => promise1çš„æˆåŠŸçš„ç»“æœ
})
```

Promise.race([promise1, promise2, promise3]) èµ›è·‘, ç«é€ŸåŸåˆ™, åªè¦ä¸‰ä¸ªpromiseä¸­æœ‰ä¸€ä¸ªæ»¡è¶³æ¡ä»¶, å°±ä¼šæ‰§è¡Œ.then(ç”¨çš„è¾ƒå°‘)

![img](https://wuxiaohui-1254415986.cos.ap-nanjing.myqcloud.com/uPic/20210527233542.png)

## 12. å®ä»»åŠ¡ å¾®ä»»åŠ¡ æ˜¯ä»€ä¹ˆ

å°ä¾‹é¢˜:

```js
console.log(1)

setTimeout(function() {
  console.log(2)
}, 0)

console.log(3)
```

å®ä»»åŠ¡: ä¸»çº¿ç¨‹ä»£ç , setTimeout ç­‰å±äºå®ä»»åŠ¡,  ä¸Šä¸€ä¸ªå®ä»»åŠ¡æ‰§è¡Œå®Œ, æ‰ä¼šè€ƒè™‘æ‰§è¡Œä¸‹ä¸€ä¸ªå®ä»»åŠ¡

å¾®ä»»åŠ¡: promise .then .catchçš„éœ€è¦æ‰§è¡Œçš„å†…å®¹, å±äºå¾®ä»»åŠ¡, æ»¡è¶³æ¡ä»¶çš„å¾®ä»»åŠ¡, ä¼šè¢«æ·»åŠ åˆ°å½“å‰å®ä»»åŠ¡çš„æœ€åå»æ‰§è¡Œ

![img](https://wuxiaohui-1254415986.cos.ap-nanjing.myqcloud.com/uPic/20210527233548.png)

**äº‹ä»¶å¾ªç¯é˜Ÿåˆ— eventLoop**

![img](https://wuxiaohui-1254415986.cos.ap-nanjing.myqcloud.com/uPic/20210527233553.png)

ä¾‹é¢˜1:

```js
  console.log(1)

  setTimeout(function() {
    console.log(2) // å®ä»»åŠ¡
  }, 0)

  const p = new Promise((resolve, reject) => {
    resolve(1000)
  })
  p.then(data => {
    console.log(data)  // å¾®ä»»åŠ¡
  })

  console.log(3)
```

![img](https://wuxiaohui-1254415986.cos.ap-nanjing.myqcloud.com/uPic/20210527233557.png)

ä¾‹é¢˜2:

```js
async function fn () {
  console.log(111)
}
fn()
console.log(222)
```

ä¾‹é¢˜3:

```js
async function fn () {
  const res = await 2
  console.log(res)
}
fn()
console.log(222)
```

ä¾‹é¢˜4:

```js
async function fn () {
  console.log('å˜¿å˜¿')
  const res = await fn2()
  console.log(res)  // å¾®ä»»åŠ¡
}
async function fn2 () {
  console.log('gaga')
}
fn()
console.log(222)
```

![img](https://wuxiaohui-1254415986.cos.ap-nanjing.myqcloud.com/uPic/20210527233602.png)

è€ƒå¯Ÿç‚¹: async å‡½æ•°åªæœ‰ä» await å¾€ä¸‹æ‰æ˜¯å¼‚æ­¥çš„å¼€å§‹

## 13. async/awaitæ˜¯ä»€ä¹ˆï¼Ÿ

ES7 æ ‡å‡†ä¸­æ–°å¢çš„ `async` å‡½æ•°ï¼Œä»ç›®å‰çš„å†…éƒ¨å®ç°æ¥è¯´å…¶å®å°±æ˜¯ `Generator` å‡½æ•°çš„è¯­æ³•ç³–ã€‚

å®ƒåŸºäº Promiseï¼Œå¹¶ä¸æ‰€æœ‰ç°å­˜çš„åŸºäºPromise çš„ API å…¼å®¹ã€‚

**async å…³é”®å­—**

1. `async` å…³é”®å­—ç”¨äºå£°æ˜â¼€ä¸ªå¼‚æ­¥å‡½æ•°ï¼ˆå¦‚ `async function asyncTask1() {...}`ï¼‰
2. `async` ä¼šâ¾ƒåŠ¨å°†å¸¸è§„å‡½æ•°è½¬æ¢æˆ Promiseï¼Œè¿”å›å€¼ä¹Ÿæ˜¯â¼€ä¸ª Promise å¯¹è±¡
3. `async` å‡½æ•°å†…éƒ¨å¯ä»¥ä½¿â½¤ `await`

**await å…³é”®å­—**

1. `await` ç”¨äºç­‰å¾…å¼‚æ­¥çš„åŠŸèƒ½æ‰§â¾å®Œæ¯• `var result = await someAsyncCall()`
2. `await` æ”¾ç½®åœ¨ Promise è°ƒâ½¤ä¹‹å‰ï¼Œä¼šå¼ºåˆ¶asyncå‡½æ•°ä¸­å…¶ä»–ä»£ç ç­‰å¾…ï¼Œç›´åˆ° Promise å®Œæˆå¹¶è¿”å›ç»“æœ
3. `await` åªèƒ½ä¸ Promise â¼€èµ·ä½¿â½¤
4. `await` åªèƒ½åœ¨ `async` å‡½æ•°å†…éƒ¨ä½¿â½¤

## 14. ç›¸è¾ƒäº Promiseï¼Œasync/awaitæœ‰ä½•ä¼˜åŠ¿ï¼Ÿ

1. åŒæ­¥åŒ–ä»£ç çš„é˜…è¯»ä½“éªŒï¼ˆPromise è™½ç„¶æ‘†è„±äº†å›è°ƒåœ°ç‹±ï¼Œä½† then é“¾å¼è°ƒâ½¤çš„é˜…è¯»è´Ÿæ‹…è¿˜æ˜¯å­˜åœ¨çš„ï¼‰
2. å’ŒåŒæ­¥ä»£ç æ›´ä¸€è‡´çš„é”™è¯¯å¤„ç†æ–¹å¼ï¼ˆ async/await å¯ä»¥â½¤æˆç†Ÿçš„ try/catch åšå¤„ç†ï¼Œæ¯” Promise çš„é”™è¯¯æ•è·æ›´ç®€æ´ç›´è§‚ï¼‰
3. è°ƒè¯•æ—¶çš„é˜…è¯»æ€§, ä¹Ÿç›¸å¯¹æ›´å‹å¥½

## 15. æ·±æ‹·è´ æµ…æ‹·è´

å¼•ç”¨ç±»å‹, è¿›è¡Œèµ‹å€¼æ—¶, èµ‹å€¼çš„æ˜¯åœ°å€

1. æµ…æ‹·è´

```js
let obj = {
  name: 'zs',
  age: 18
}
let obj2 = {
    ...obj
}
```

1. æ·±æ‹·è´

```js
let obj = {
  name: 'zs',
  age: 18,
    car: {
        brand: 'å®é©¬',
        price: 100
    }
}

let obj2 = JSON.parse(JSON.stringify(obj))
console.log(obj2)
```

å½“ç„¶é€’å½’ä¹Ÿèƒ½è§£å†³, åªæ˜¯æ¯”è¾ƒéº»çƒ¦~

...

å…¶ä»–æ–¹æ¡ˆ, å¯ä»¥å‚è€ƒä¸€äº›åšå®¢